"use strict";
//INICIO PON YOUTUBE
var mirocheckprofitimeou;

function esMovil() {
    return /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent) || window.innerWidth <= 400;
}

var elementExists = function (element) {
    if (typeof (element) != 'undefined' && element != null) {
        return true;
    } else {
        return false;
    }
},
    cargandooo = function (texxxx) {
        var divamira = document.getElementById("cargandokc");
        if (elementExists(divamira)) {
            if (texxxx == 'ok') {

                if (!divamira.getAttribute('data-adbl')) {
                    divamira.parentNode.removeChild(divamira);
                }
            } else
                divamira.querySelector('span').innerHTML = texxxx;
        } else if (texxxx != 'ok') {
            var creo = document.createElement('div');
            creo.id = 'cargandokc';
            creo.innerHTML = '<img src="' + dominiobase + 'imagesnew/home/logoarribawow.png"/><br /><span>' + texxxx + '</span>';
            document.body.appendChild(creo);
        }
    }, alerta = function (mensaje) {//OJOAKI revisar todo lo que use alerta
        masfuncs('winsor', 'myAle', mensaje, '', '', '', '');
        //alert('alerta'+mensaje);
    }, kajax = function (a) {

        if (a.url.substring(0, 2) != '//' && a.url.substring(0, 4) != 'http') {
            a.url = dominiobase + a.url;
        }
        if (!a.type || a.type == 'get' || a.type == 'GET') {
            if (a.type == 'get' && a.data) {
                a.url += '?' + a.data;
            }
            fetch(a.url)
                .then(response => response.text())
                .then(textString => a.success(textString));

        } else {

            //consolelog('KAJAX POST',a);
            fetch(a.url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: a.data
            })
                .then(response => response.text())
                .then(textString => a.success(textString));
        }
    }, kajaxANTIGUO = function (a) {
        var xmlhttp;

        if (a.url.substring(0, 2) != '//' && a.url.substring(0, 4) != 'http') {
            a.url = dominiobase + a.url;
        }

        if (a.type == 'get' && a.data) {
            a.url += '?' + a.data;
        }
        //if (window.XMLHttpRequest) {
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
        //} else {
        // code for IE6, IE5
        //xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        //}

        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4) {
                if (xmlhttp.status == 200) {
                    a.success(xmlhttp.responseText);
                }
                else if (xmlhttp.status == 400) {
                    //console.log('error1');
                    alerta(iw[121]);
                }
                else {
                    //if(a.url !== a.url.replace('advert')){
                    //cargandooo('Por favor desactiva el bloqueador de anuncios<br>Adblock detectado en tu navegador para<br>poder acceder a Kekocity de forma correcta.<br>Recuerda que Kekocity se financia a trav√©s de los<br>clics que hagas en nuestra publicidad.');
                    //document.getElementById('cargandokc').setAttribute('data-adbl','s');
                    //}
                    alerta(iw[122]);//nolang
                }
            }
        }

        if (a.type == 'get' || a.type == 'GET') {
            xmlhttp.open("GET", a.url, true);
            xmlhttp.send();
        } else {
            xmlhttp.open("POST", a.url, true);
            xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            xmlhttp.send(a.data);
        }
    };
var uspaprofcomurl = [];
function kekoprofilecheck() {

    if (mirocheckprofitimeou != null) {
        clearTimeout(mirocheckprofitimeou);
    }
    mirocheckprofitimeou = setTimeout("miroyapprofnw()", 1000);
}
function enviyawowperf() {
    return '';
}
function enviyawowperfBIEN() {
    var annahtm = document.getElementById('compartirya').value;
    var annahtmmsh = '';

    if (annahtm != '') {

        for (var i in uspaprofcomurl) {
            if (uspaprofcomurl[i] != null) {
                if (uspaprofcomurl[i] == 'tt') {
                    //if($('#'+i+'aa').length==1){
                    var masm = document.getElementById(i + 'aa').innerHTML;
                    var miroimagenurl = '';
                    var miroimagen = document.getElementById(i + 'mm' + masm);
                    if (miroimagen.querySelector('img'))
                        miroimagenurl = miroimagen.querySelector('img').src;
                    var versionyoutubevid = i.split('v=');

                    if (versionyoutubevid[1]) {
                        versionyoutubevid = versionyoutubevid[1];

                        document.getElementById(i + 'ttttt').innerHTML = replaceAlltodo(document.getElementById(i + 'ttttt').innerHTML, ',', '');
                        document.getElementById(i + 'ttttt').innerHTML = replaceAlltodo(document.getElementById(i + 'ttttt').innerHTML, ';', '');
                        document.getElementById(i + 'ddddd').innerHTML = replaceAlltodo(document.getElementById(i + 'ddddd').innerHTML, ',', '');
                        document.getElementById(i + 'ddddd').innerHTML = replaceAlltodo(document.getElementById(i + 'ddddd').innerHTML, ';', '');
                        uspaprofcomurl[i] = uspaprofcomurl[i] + ',' + miroimagenurl + ',' + versionyoutubevid + ',' + document.getElementById(i + 'ttttt').innerHTML + ',' + document.getElementById(i + 'ddddd').innerHTML + ';';

                        annahtmmsh += '' + uspaprofcomurl[i];
                    }
                    //}
                }

                uspaprofcomurl[i] = undefined;
                //if($('#dur'+i).length==1){
                var node = document.getElementById('dur' + i);
                if (node && node.parentNode) {
                    node.parentNode.removeChild(node);
                }
                //}
            }
        }

    }
    uspaprofcomurl = [];
    return annahtmmsh;
}

function veddvv(aauu, aaaawt) {
    if (document.getElementById('dpl' + aaaawt) && document.getElementById('dpl' + aaaawt).querySelector('img')) {
        var altovii = document.getElementById('dpl' + aaaawt).querySelector('img').clientHeight;
        var anchovii = document.getElementById('dpl' + aaaawt).querySelector('img').clientWidth;
        document.getElementById('dpl' + aaaawt).innerHTML = '<iframe width="' + anchovii + 'px" height="' + altovii + 'px" src="https://www.youtube-nocookie.com/embed/' + aauu + '?autoplay=1" frameborder="0"  allow="autoplay; encrypted-media" allowfullscreen></iframe>';
    }
}
function replaceAlltodo(text, busca, reemplaza) {

    while (text.toString().indexOf(busca) != -1)

        text = text.toString().replace(busca, reemplaza);

    return text;

}
function miroyapprofnw() {
    var elkrtra = document.getElementById('compartirya').value;
    elkrtra = replaceAlltodo(elkrtra, 'https://', 'http://');
    elkrtra = replaceAlltodo(elkrtra, 'www.', 'http://');
    elkrtra = replaceAlltodo(elkrtra, 'http://http://', 'http://');
    elkrtra = replaceAlltodo(elkrtra, '\n', ' ');

    var elkrtss = elkrtra.split('http://');
    var stoahjgja = '';
    var stoahseaa = '';
    var stdddda = '';
    var uspaprofcomurlahor = new Array();
    if (elkrtss[1] != undefined) {
        for (var i in elkrtss) {
            if (i > 0) {
                stoahjgja = elkrtss[i];
                stoahseaa = stoahjgja.split(' ');
                stdddda = stoahseaa[0];
                if (stdddda != '') {
                    uspaprofcomurlahor[stdddda] = 'si';
                    if (uspaprofcomurl[stdddda] == undefined) {
                        uspaprofcomurl[stdddda] = 'si';
                        proccurccporfile(stdddda);
                    }
                }
            }
        }
    }


    for (var i in uspaprofcomurl) {
        if (uspaprofcomurlahor[i] == undefined && uspaprofcomurl[i] != undefined) {
            uspaprofcomurl[i] = undefined;

            var node = document.getElementById('dur' + i);
            if (node && node.parentNode) {
                node.parentNode.removeChild(node);
            }

        }
    }
}
function miniimag(idiipro, accneim) {

    var ahm = parseFloat(document.getElementById(idiipro + 'aa').innerHTML);
    var atm = parseFloat(document.getElementById(idiipro + 'tt').innerHTML);


    if (accneim == 'a' && ahm > 1) {

        document.getElementById(idiipro + 'mm' + ahm).style.display = 'none';
        ahm--;
        document.getElementById(idiipro + 'mm' + ahm).style.display = '';
        document.getElementById(idiipro + 'aa').innerHTML = ahm;
    } else if (accneim == 'd' && atm > ahm) {
        document.getElementById(idiipro + 'mm' + ahm).style.display = 'none';
        ahm++;
        document.getElementById(idiipro + 'mm' + ahm).style.display = '';
        document.getElementById(idiipro + 'aa').innerHTML = ahm;
    }
}
function proccurccporfile(staopsqqwuadasd) {

    if (staopsqqwuadasd.toString().indexOf('youtu') == 0) {
        var capa = document.getElementById('masconapub');
        var divencima = document.createElement("div");
        divencima.id = 'dur' + staopsqqwuadasd;
        var staovvv = staopsqqwuadasd.split("v=");
        var staovvva = staovvv[1];
        if (staovvva == null) staovvva = 'no';
        var staaf = staovvva.split("&");
        var staffi = staaf[0];
        uspaprofcomurl[staopsqqwuadasd] = 'tt';
        ////console.log('youtube'+"queryType=addtocom&videoId="+staffi+"&staopsqqwuadasd="+staopsqqwuadasd);
        var resultadresg = http_reqstodo('/fly/tvweb/index.php', "queryType=addtocom&videoId=" + staffi + "&staopsqqwuadasd=" + staopsqqwuadasd + '&idila=' + idila);

        //else{

        //uspaprofcomurl[staopsqqwuadasd] = 'll';
        //var resultadresg = http_reqstodo('/fly/print/index.php', "d="+staopsqqwuadasd+'&pr=1');

        //}
        if (divencima) {
            divencima.innerHTML = resultadresg;
            capa.appendChild(divencima);
        }

    }
}
function http_reqstodo(url, post_data) {
    if (window.XMLHttpRequest) {
        var ajaxResponse = new XMLHttpRequest();
    } else
        if (window.ActiveXObject) { // IE
            try {
                var ajaxResponse = new ActiveXObject("Msxml2.XMLHTTP");
            } catch (e) {
                try {
                    var ajaxResponse = new ActiveXObject("Microsoft.XMLHTTP");
                } catch (e) {
                    return false;
                }
            };
        };
    if (!ajaxResponse) {
        return false;
    };
    if (post_data) {
        ajaxResponse.open('POST', url, false);
        ajaxResponse.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        ajaxResponse.send(post_data);
    } else {
        ajaxResponse.open('GET', url, false);
        ajaxResponse.send(null);
    }
    if (ajaxResponse.status == 200) {
        return ajaxResponse.responseText;
    } else {
        return false;
    };
}

//FIN PON YOUTUBE
(function () {
    function stripHtml(html) {
        let tmp = document.createElement("DIV");
        tmp.innerHTML = html;
        return tmp.textContent || tmp.innerText || "";
    }
    function mirotimeo(esok) {
        if (esok != 'si') {
            var __nativeST__ = window.setTimeout;
            window.setTimeout = function (vCallback, nDelay) {
                var aArgs = Array.prototype.slice.call(arguments, 2);
                return __nativeST__(vCallback instanceof Function ? function () {
                    vCallback.apply(null, aArgs);
                } : vCallback, nDelay);
            };
            window.setTimeout.isPolyfill = true;
            var __nativeSI__ = window.setInterval;
            window.setInterval = function (vCallback, nDelay) {
                var aArgs = Array.prototype.slice.call(arguments, 2);
                return __nativeSI__(vCallback instanceof Function ? function () {
                    vCallback.apply(null, aArgs);
                } : vCallback, nDelay);
            };
            window.setInterval.isPolyfill = true;
        }
    }
    var yasokek = '',
        miaspecto = '',
        tradeando = 'n',
        vextr = {},
        modocity = 'no',
        plugins = {},
        loadImages = function (sources, callback) {
            var images = {};
            var loadedImages = 0;
            var numImages = sources.length;
            // get num of sources
            for (var src = 0; src < numImages; src++) {
                images[src] = new Image();
                images[src].onload = function () {
                    if (++loadedImages >= numImages) {
                        callback(images);
                    }
                };
                images[src].src = sources[src];
            }
        },
        minikanvas = function (ponloene, mropab, tamano) {
            var canvas = document.createElement('canvas');
            if (canvas) {
                var mropabe = mropab.split('L');

                //////consola.log('canvas'+canvas.id);
                var context = canvas.getContext('2d');
                if (tamano == 'peque') {
                    canvas.width = 30;
                    canvas.height = 40;
                } else if (tamano == 'cabeza') {
                    canvas.width = 50;
                    canvas.height = 50;
                } else {
                    canvas.width = 90;
                    canvas.height = 120;

                }
                var sources = [];
                var topcabeza = [];
                var soynadar = 0;
                var leftcabeza = 0;

                //fotocabeza
                var carafok4 = 'stand4';
                var carafot = 'stand4';

                if (mropabe[18] == 4) mropabe[18] = 3;//temporal cabezas v14 no tiene click

                var urlcabe = 'cabezasv1' + mropabe[18];
                var urlcara = 'carasv1' + mropabe[18];

                mropabe[4] = 'stand4';
                //////////////consola.log('mropabe',mropabe);
                if (mropabe[8]) {
                    sources.push(dominiobase + "kekbasetodov7click/" + urlcabe + "/" + mropabe[8] + ".png");
                    topcabeza.push(0);
                    if (carafot)//cara
                    {
                        sources.push(dominiobase + "kekbasetodov7click/" + urlcara + "/" + mropabe[8] + ".png");
                        topcabeza.push(0);
                    }
                }

                //////////consola.log(('cara'+mropabe[4]);

                //var aspes='standL4LLLL' + camisac+'L'+pantalonc+'L'+peloc+'L'+pielc+'L'+narizc+'L'+bocac+'L'+
                //ojosc+'L'+zapatosc+'L'+sombreroc+'L'+helic+'L'+ojosc+'L'+collarc+'L'+cinturonc+'L1';


                if (mropabe[7]) {
                    if (mropabe[13]) {
                        sources.push(dominiobase + "kekbasetodov7click/pelocor/" + mropabe[7] + ".png");
                        topcabeza.push(0);
                    } else {
                        sources.push(dominiobase + "kekbasetodov7click/pelo/" + mropabe[7] + ".png");
                        topcabeza.push(0);
                    }
                }
                if (mropabe[11])//ojos - gafas
                {
                    sources.push(dominiobase + "kekbasetodov7click/sombrero/" + mropabe[11] + ".png");
                    topcabeza.push(0);
                }
                //boca (barbas)// && carafot4antesdebailar != 'stand1' && carafot4antesdebailar != 'stand2' && carafot4 != 'stand7')
                if (mropabe[10] && mropabe[4] != 'stand7') {
                    sources.push(dominiobase + "kekbasetodov7click/sombrero/" + mropabe[10] + ".png");
                    topcabeza.push(0);
                }

                //OJOAKI
                if (mropabe[13])//sombrero
                {
                    sources.push(dominiobase + "kekbasetodov7click/sombrero/" + mropabe[13] + ".png");
                    topcabeza.push(0);
                }
                if (mropabe[9])//nariz (mascaras)
                {
                    sources.push(dominiobase + "kekbasetodov7click/sombrero/" + mropabe[9] + ".png");
                    topcabeza.push(0);
                }

                ////////consola.log(('sources',sources);
                //context.clearRect(0, 0, 90, 120);
                if (tamano == 'peque') {
                    loadImages(sources, function (images) {
                        for (var prop = 0; prop < sources.length; prop++) {
                            context.drawImage(images[prop], -18, -3, 60, 80);
                        }
                        ponloene.src = canvas.toDataURL();
                    });
                } else if (tamano == 'cabeza') {
                    loadImages(sources, function (images) {
                        for (var prop = 0; prop < sources.length; prop++) {
                            context.drawImage(images[prop], -20, 0);
                        }
                        ponloene.src = canvas.toDataURL();
                    });
                } else {
                    loadImages(sources, function (images) {
                        for (var prop = 0; prop < sources.length; prop++) {
                            context.drawImage(images[prop], 0, 0);
                        }
                        ponloene.src = canvas.toDataURL();
                    });
                }
            }
        },
        borrar = function (idanimde) {
            var divamirayy = document.getElementById(idanimde);
            if (elementExists(divamirayy)) {
                divamirayy.parentNode.removeChild(divamirayy);
                if (idanimde == 'mycerberus')
                    detectandocasilla = 'no';
            }
        },
        miraloc = {

            setLoc: function (loc) {
            }
        };


    function open_connection() {
        open_connectionya();

    }
    function open_connectionya() {
        //if (document.getElementById("ads").innerHTML !== 'ok')
        //{
        //cargandooo('Por favor desactiva el bloqueador de anuncios<br>Adblock detectado en tu navegador para<br>poder acceder a Kekocity de forma correcta.<br>Recuerda que Kekocity se financia a trav√©s de los<br>clics que hagas en nuestra publicidad.');
        //return;
        //}
        var estado = '0',
            // Abrir conexion WS
            ws_node,
            katman = function () { },
            TENGOCLICADO = null,
            TENGOCLICADOtipo = null,
            TENGOCLICADODATA = {},
            cargaplugin = {},
            connection_retry_timer,
            connected = false,
            sisigotimeout,
            movigoyainter,
            cambiastado = function () {
                //ojoaki a medias onlineara

                var miestadoaraii = '<img src="/images/onlines.png"/><span style="color:#339966;">Conectado</span>';

                if (document.getElementById('onlineara').value == '1')
                    miestadoaraii = '<img src="/images/offline.png"/><span style="color:#7F1111;">Invisible</span>';

                document.getElementById("bolitonlin").innerHTML = miestadoaraii;
                document.getElementById('cambiarstad').style.display = 'inline';
                document.getElementById('cambiarstadya').style.display = 'none';
                estado = document.getElementById('onlineara').value;
                katman('cambiastado', document.getElementById('onlineara').value);
            },
            getCookie = function (cname) {
                var name = cname + "=";
                var ca = document.cookie.split(';');
                var devuelves = '';
                if (ca.length > 0) {
                    for (var i = 0; i < ca.length; i++) {
                        var c = ca[i];//.trim();


                        if (c) {
                            c = String(c).replace(/ /g, '');
                            if (c.indexOf(name) == 0) devuelves = c.substring(name.length, c.length);
                        }
                    }
                }
                return devuelves;
            },
            addClass = function (d, queclase) {
                d.classList.add(queclase);
            },
            removeClass = function (d, queclase) {
                d.classList.remove(queclase);
            },
            volum = 'si',
            posici = 'no',
            modonolag = 'n',
            videum = 'si',
            mesaespecial = '',
            mesaespecialhice = '',
            cuadroysimultim = 0,
            cuadroxsimultim = 0,
            enboxyinicial = 0,
            enboxxinicial = 2,
            fokinicial = 'standL4LLL',
            objextra = {},
            vars = [],
            mitipocuenta = 0,
            micoli = 1;

        micoli = getCookie('colori');

        micoli = parseInt(micoli);
        if (micoli < 1) micoli = 1;

        var canales = [],
            yosoplac = '',
            yvip = 0,
            ultimmasc = '',
            cuantoskekosaki = 0,
            timeocam,
            nombcas = {},
            ultimeenbox = '',
            mitam = 0,
            englobinter,
            yomini = 'default.png',
            mresulta = [],
            ultigircab = 0,
            ultimaclaseaccion = '',
            teleidp = 0,
            graphvacio,
            kversion = '410',
            timeouclic,
            kkallaki = document.getElementById('kekoallaki'),
            kkallakik = document.getElementById('kekoallakik'),
            enxasoo = document.getElementById('enxaso'),
            akiburbujastdd = document.getElementById('akiburbujas'),
            akiblanhbb = document.getElementById('blanhbb'),
            quitoglobinter,
            bebetimeout,
            estadohelper = 'conectado';
        if (getCookie('volum') == 'no')
            volum = 'no';
        if (getCookie('posici') == 'no')
            posici = 'no';
        else if (getCookie('posici') == 'si')
            posici = 'si';
        if (getCookie('videum') == 'no')
            videum = 'no';
        if (getCookie('modonolag') == 's')
            modonolag = 's';


        if (getCookie('pasotour') >= 1) {
            estoyenpasotour = getCookie('pasotour');
            if (estoyenpasotour) {
                estoyenpasotour = parseInt(estoyenpasotour);
            }
        }
        var mascos = {},
            minimizado = 'n',
            altopanburbs = 100,
            altopan = 200,
            anchopan = 1000,
            tengoidpelota = 0,
            tengoidpelotaara = 0,
            moviendokekoall = 'no',
            leftahor = 0,
            altoahor = 0,
            ultmabdanum = 1,
            notraspasar = 0,
            mzoom,
            idpmuevo = 0,
            harecontrolmia = 'no',
            pmoc = 'no',
            yoteniadcab = '',
            ultimoidpmuevocontrolmia = 0,
            condiags = true,
            ultihablo,
            ultimoidpclickado = 0,
            kekosigno = [],
            kekosusu = 0,
            contiburbb = 0,
            ffurs = {},
            ffursencmaltur = {},
            ffurscass = {},
            ffursidp = {},
            ffursidpc = {},
            ffursidpt = [],
            ffurscerv = {},
            bowb = 'no',
            block = [],
            fok = '',
            miart = '',
            ky = 0,
            kx = 2,
            movigoeve,
            sectores = {},
            sectoresidcasa = {},
            sectoresfurnisid = {},
            sy = 0,
            sx = 0,
            maccion = '',
            mbailo = '',
            numt = 0,
            ultnumt = 0,
            ployy = 0,
            ploxx = 0,
            mirployy = 0,
            mirploxx = 0,
            milog = '',
            onsocks = {},
            quitoblock = function (cual) {
                if (block[cual]) delete block[cual];
            },
            kanvasclick = function (canvas, mropab) {
                if (canvas) {
                    //consola.log('kanvasclickOJOAKI');
                    var mropabe = mropab.split('L');
                    var context = canvas.getContext('2d');
                    var sources = [];
                    var soynadar = 0;
                    var leftcabeza = 0;
                    var topcabeza = [];
                    //fotocabeza
                    var mirosieskeka = mropabe[5].replace('/', '.');
                    var sexx = 'keka';
                    if (mirosieskeka < 50 || mirosieskeka >= 500)
                        sexx = 'keko';
                    var carafok4 = 'stand4';
                    var carafot = 'stand4';

                    if (mropabe[18] == 4) mropabe[18] = 3;//temporal cabezas v14 no tiene click

                    var urlcabe = dominiobase + 'kekbasetodov7click/cabezasv1' + mropabe[18] + '/' + mropabe[8] + '.png';
                    var urlcara = dominiobase + 'kekbasetodov7click/carasv1' + mropabe[18] + '/' + mropabe[8] + '.png';
                    var urlcuerpo = dominiobase + 'kekbasetodov7click/' + sexx + 'scuerpov11/' + mropabe[8] + '.png';

                    mropabe[4] = 'stand4';
                    //////////////consola.log('mropabe',mropabe);
                    if (mropabe[8]) {
                        sources.push(urlcuerpo);
                        topcabeza.push(0);
                    }
                    if (mropabe[12]) {
                        sources.push(dominiobase + "kekbasetodov7click/bamb/" + mropabe[12] + ".png");
                        topcabeza.push(0);
                    }
                    if (mropabe[6]) {
                        sources.push(dominiobase + "kekbasetodov7click/panta/" + mropabe[6] + ".png");
                        topcabeza.push(0);
                    }
                    if (mropabe[5] && mropabe[5] != 50) {
                        sources.push(dominiobase + "kekbasetodov7click/camisa/" + mropabe[5] + ".png");
                        topcabeza.push(0);
                    }
                    if (mropabe[8]) {
                        sources.push(urlcabe);
                        topcabeza.push(0);
                        if (carafot)//cara
                        {
                            sources.push(urlcara);
                            topcabeza.push(0);
                        }
                    }
                    if (mropabe[16]) {//collar
                        sources.push(dominiobase + "kekbasetodov7click/collar/" + mropabe[16] + ".png");
                        topcabeza.push(0);
                    }
                    //if(mropabe[17]){
                    //sources.push(dominiobase+"kekbasetodov7click/cinturon/"+mropabe[17]+".png");
                    //topcabeza.push(0);
                    //}

                    if (mropabe[12]) {
                        sources.push(dominiobase + "kekbasetodov7click/bamb/" + mropabe[12] + ".png");
                        topcabeza.push(0);
                    }


                    //////////consola.log(('cara'+mropabe[4]);

                    //var aspes='standL4LLLL' + camisac+'L'+pantalonc+'L'+peloc+'L'+pielc+'L'+narizc+'L'+bocac+'L'+
                    //ojosc+'L'+zapatosc+'L'+sombreroc+'L'+helic+'L'+ojosc+'L'+collarc+'L'+cinturonc+'L1';


                    if (mropabe[7]) {
                        if (mropabe[13]) {
                            sources.push(dominiobase + "kekbasetodov7click/pelocor/" + mropabe[7] + ".png");
                        } else {
                            sources.push(dominiobase + "kekbasetodov7click/pelo/" + mropabe[7] + ".png");
                        }
                        topcabeza.push(0);
                    }
                    if (mropabe[11])//ojos - gafas
                    {
                        sources.push(dominiobase + "kekbasetodov7click/sombrero/" + mropabe[11] + ".png");
                        topcabeza.push(0);
                    }
                    //boca (barbas)// && carafot4antesdebailar != 'stand1' && carafot4antesdebailar != 'stand2' && carafot4 != 'stand7')
                    if (mropabe[10] && mropabe[4] != 'stand7') {
                        sources.push(dominiobase + "kekbasetodov7click/sombrero/" + mropabe[10] + ".png");
                        topcabeza.push(0);
                    }

                    if (mropabe[13])//sombrero
                    {
                        sources.push(dominiobase + "kekbasetodov7click/sombrero/" + mropabe[13] + ".png");
                        topcabeza.push(0);
                    } if (mropabe[9])//nariz (mascaras)
                    {
                        sources.push(dominiobase + "kekbasetodov7click/sombrero/" + mropabe[9] + ".png");
                        topcabeza.push(0);
                    }
                    //
                    //if(mropabe[11])//ojos
                    //{
                    //sources.push(dominiobase+"kekbasetodov4/sombrero/"+mropabe[11]+"/"+mropabe[4]+".gif");
                    //}

                    ////////consola.log(('sources',sources);
                    //context.clearRect(0, 0, 90, 120);


                    loadImages(sources, function (images) {
                        canvas.width = canvas.width;
                        for (var prop = 0; prop < sources.length; prop++) {
                            if (topcabeza[prop] != '30') {//no es pelo recortado
                                //context.drawImage(images[prop], 0, 0);

                                context.drawImage(
                                    images[prop],
                                    0,
                                    0);
                            } else {
                                context.drawImage(images[prop], 0, topcabeza[prop], canvas.width, canvas.height, 0, topcabeza[prop], canvas.width, canvas.height);
                            }

                        }
                    });

                }
            },
            cambiavisi = function () {
                if (document.hidden == true) {
                    minimizado = 's';
                    if (mresulta.length > 1 && bowb == 'no') {
                        ////consola.log('CONTROLMIAAA HIDDEN--> a '+ky+'c'+kx);
                        mresulta = [];
                        if (sisigotimeout) {
                            window.clearTimeout(sisigotimeout);//sisigotimeout='';
                        }
                        if (movigoyainter) {
                            window.clearInterval(movigoyainter);
                        }
                        mresulta.push({ 'ponfurka': '', 'cmia': 'cmia', 'y': kx, 'x': ky });
                        movigoyas();
                        movigoyainter = window.setInterval(movigoyas, 360);
                    }
                } else {
                    minimizado = 'n';
                }
                ////consola.log('minimizado',minimizado);
                //consola.log('cambiavisi',minimizado);
            },
            winsor = function (tipo, titulo, datos, mas, masd, mast) {

                var idparaeste = tipo;
                var leftw = '20px';
                var topw = '50px';
                var widthw = '';//'440px';
                var heightw = '';//'100px';
                var winsormasclase = '',
                    contenidomasclas = '',
                    contenidomasestilo = '',
                    winshtm = '';
                switch (tipo) {
                    case 'confircompr':
                        widthw = '400px';
                        //heightw='150px';//'100px';
                        winshtm = '<span class="titulow" id="titulo' + idparaeste + '">' + titulo + '<i class="icon-off" id="tancar' + idparaeste + '" style="margin-top:2px;"></i></span><div class="contenido' + contenidomasclas + '" id="conte' + tipo + '">' + datos + '</div>';

                        break;
                    case 'mycerberus':
                    case 'mycronometro':
                        widthw = '';
                        heightw = '';
                        winsormasclase = ' cerraalentr';
                        titulo = 'Configuraci√≥n de objetos';
                        winshtm = '<span class="titulow" id="titulo' + idparaeste + '">' + titulo + '<i class="icon-off" id="tancar' + idparaeste + '" style="margin-top:2px;"></i></span><div class="contenido' + contenidomasclas + '" id="conte' + tipo + '">' + datos + '</div>';


                        break;

                    case 'myCoins':
                        heightw = '600px';
                        widthw = '780px';
                        titulo = iw[333];
                        winshtm = '<span class="titulow">' + titulo + '<i class="icon-off" style="margin-top:2px;" id="tancar' + idparaeste + '"></i></span>' +
                            '<div class="contenido"><iframe id="frammyCoins" name="frammyCoins" scrolling="no" src="' + dominiobase + 'todoincs/coins.php?idi=' + idila + '" style="margin: 0; padding: 0; border: none; overflow:hidden; width:100%; margin:none; height:560px;"></iframe></div>';

                        break;
                    case 'verb':
                        heightw = '665px';
                        widthw = '780px';
                        titulo = 'Empresa';
                        winshtm = '<span class="titulow">' + titulo + '<i class="icon-off" style="margin-top:2px;" id="tancar' + idparaeste + '"></i></span>' +
                            '<div class="contenido"><iframe id="frammyb" name="frammyb" scrolling="auto" src="' + dominiobase + 'todoincs/verb.php?idi=' + idila + '&idk=' + yasoid + '&c2=' + mast + '" style="margin: 0; padding: 0; border: none; overflow:hidden; width:100%; margin:none; height:635px;"></iframe></div>';

                        break;
                    case 'myfoto':
                        titulo = iw[1];
                        heightw = '240px';
                        widthw = '260px';
                        winshtm = '<span class="titulow">' + titulo + '<i class="icon-off" style="margin-top:2px;" id="tancar' + idparaeste + '"></i></span>' +
                            '<div></div><div style="margin-top:230px;height:60px;color:#fff;text-align:center;width:100%;"> <button class="btnwo" id="btnfotya">' + iw[2] + '</button></div>';

                        break;
                    case 'myBot':
                        titulo = iw[3];
                        heightw = '260px';
                        widthw = '480px';
                        winsormasclase = ' cerraalentr';
                        winshtm = '<span class="titulow">' + titulo + '<i class="icon-off" style="margin-top:2px;" id="tancar' + idparaeste + '"></i></span>' +
                            '<div class="contenido"><iframe id="frammyBot" name="frammyBot" scrolling="no" src="' + dominiobase + 'todoincs/mybot.php?mikeka=' + yasoid + '&idi=' + idila + '&idp=' + encodeURI(datos) + '&insad=' + encodeURI(yosocas) + '" style="margin: 0; padding: 0; border: none; overflow:hidden; width:100%; margin:none; height:210px;"></iframe></div>';
                        break;
                    case 'mypass':
                        widthw = '300px';
                        heightw = '130px';
                        var datatonum = titulo;
                        titulo = iw[4];
                        cargandooo('ok');
                        var datato = '';
                        var esincore = '';
                        winsormasclase = ' cerraalentr';
                        if (document.getElementById('conte' + idparaeste) && document.getElementById('conte' + idparaeste).getAttribute('data-datnum') == datatonum)
                            esincore = '<span style="color:#800000;font-size:11px;" id="lapasesinco">' + iw[5] + '</span>';
                        //nolang

                        datato += iw[6] + '<br>' +
                            esincore + '<br><form method="post" onsubmit="return false"><input type="password" id="pascas" class="texpix"><br><br>' +
                            '<button type="submit" onclick="masfuncs(\'donvepass\',' + datatonum + ',\'\',\'\',\'\');" id="entrapascas" class="btnwo ok">' + iw[7] + '</button></form>';
                        winshtm = '<span class="titulow">' + titulo + '<i class="icon-off" id="tancar' + idparaeste + '" style="margin-top:2px;"></i></span>' +
                            '<div id="conte' + idparaeste + '" data-datnum="' + datatonum + '" class="contenido texpix" style="text-align:center;">' + datato + '</div>';
                        break;
                    case 'mytim':
                        if (pmoc == 'no') {
                            return;
                        }
                        widthw = '300px';
                        heightw = '130px';
                        idparaeste = 'mytim' + datos;
                        var datatonum = datos;
                        var datatokeko = titulo;
                        winsormasclase = ' cerraalentr';
                        titulo = titulo + ' ' + iw[8];

                        var datato = '';
                        var esincore = '';

                        datato += iw[9] + ' ' + datatokeko + iw[10] + '<br>' +
                            '<br><br><br>' +
                            '<button onclick="masfuncs(\'venya\',' + datatonum + ',\'\',\'\',\'\');adeu(\'' + idparaeste + '\');" id="abrira' + datatonum + '" class="btnwo ok">' + iw[11] + '</button>' +
                            '<button onclick="adeu(\'' + idparaeste + '\');" class="btnwo">' + iw[12] + '</button>';
                        winshtm = '<span class="titulow">' + titulo + '<i class="icon-off" id="tancar' + idparaeste + '" style="margin-top:2px;"></i></span>' +
                            '<div id="conte' + idparaeste + '" data-datnum="' + datatonum + '" class="contenido texpix" style="text-align:center;">' + datato + '</div>';
                        break;
                    case 'mytimbre':

                        widthw = '240px';
                        heightw = '80px';
                        var datatonum = titulo;
                        cargandooo('ok');
                        winsormasclase = ' cerraalentr';
                        titulo = iw[13];

                        var datato = '<br/>' + iw[14] + '<br/>&nbsp;';
                        winshtm = '<span class="titulow">' + titulo + '<i class="icon-off" id="tancar' + idparaeste + '" style="margin-top:2px;"></i></span>' +
                            '<div id="conte' + idparaeste + '" data-datnum="' + datatonum + '" class="contenido texpix" style="text-align:center;">' + datato + '</div>';
                        break;
                    case 'mytv':
                        widthw = '600px';
                        heightw = '300px';
                        leftw = '20px';
                        topw = '50px'; winsormasclase = ' resiz cerraalentr';
                        contenidomasclas = ' scroll';
                        datos = '<form id="queverform"><input type="text" class="texttv" autocomplete="off" id="queverhoy" placeholder="' + iw[15] + '"/><button class="btngiga" type="submit">' + iw[16] + '</button></form><div id="akicontstv" data-idtele="' + mas + '" style="height:100%;"></div><br/>';//nolang

                        winshtm = '<span class="titulow" id="titulo' + idparaeste + '">' + titulo + '<i class="icon-off" id="tancar' + idparaeste + '" style="margin-top:2px;"></i></span><div class="contenido' + contenidomasclas + '" id="conte' + tipo + '">' + datos + '</div>';
                        break;
                    case 'myAjustes':
                        widthw = '850px';
                        heightw = '555px';
                        winshtm = '<span class="titulow">' + titulo + '<i class="icon-off" style="margin-top:2px;" id="tancar' + idparaeste + '"></i></span>' +
                            '<div class="contenido transpa" id="conte' + idparaeste + '"><iframe id="frammyAjustes" name="frammyAjustes" src="' + dominiobase + 'todoincs/myAjustes.php?mikeka=' + yasoid + '&idi=' + idila + '&edit=' + datos + '" style="margin: 0; padding: 0; border: none; overflow:hidden; width:100%; margin:none; height:510px;"></iframe></div><img style="position: absolute; margin-top:-260px; margin-left:50%;" src="' + dominiobase + 'imagesnew/appico3/cargatrans.gif" id="cargamyAjustes"/>';

                        break;
                    case 'myApps':
                        widthw = '700px';
                        heightw = '530px';
                        titulo = iw[17];//nolang
                        winsormasclase = ' cerraalentr';

                        if (datos.substring(0, 2) != '//' && datos.substring(0, 4) != 'http') {
                            datos = dominiobase + datos;
                        }
                        if (esMovil()) {
                            winshtm = '<span class="titulow">' + titulo + '<i class="icon-off" style="margin-top:2px;" id="tancar' + idparaeste + '"></i></span>' +
                            '<div><iframe id="frammyApps" name="frammyApps" src="' + datos + '" style="margin: 0; padding: 0; border: none; width:100%; height:505px;"></iframe></div>';
                        } else {
                            winshtm = '<span class="titulow">' + titulo + '<i class="icon-off" style="margin-top:2px;" id="tancar' + idparaeste + '"></i></span>' +
                            '<div><iframe id="frammyApps" name="frammyApps" scrolling="no" src="' + datos + '" style="margin: 0; padding: 0; border: none; width:100%; height:505px;"></iframe></div>';
                        }
                        

                        break;
                    case 'myroom':
                        widthw = 'auto';
                        heightw = '535px'; winsormasclase = ' cerraalentr';
                        winshtm = '<span class="titulow">' + titulo + '<i class="icon-off" style="margin-top:2px;" id="tancar' + idparaeste + '"></i></span>' +
                            '<div class="contenido" style="padding:0;"><iframe id="frammymyroom" name="frammymyroom" src="' + dominiobase + 'todoincs/myroom.php?mikeka=' + yasoid + '&idi=' + idila + '&edit=' + datos + '" style="padding: 0;border: none;overflow:hidden;width: 32rem;height:509px;"></iframe></div>';

                        break;
                    case 'mysector':
                        widthw = 'auto';
                        heightw = '535px'; winsormasclase = ' cerraalentr';
                        winshtm = '<span class="titulow">' + titulo + '<i class="icon-off" style="margin-top:2px;" id="tancar' + idparaeste + '"></i></span>' +
                            '<div class="contenido" style="padding:0;"><iframe id="frammymyroom" name="frammymyroom" scrolling="no" src="' + dominiobase + 'todoincs/myroom.php?mikeka=' + yasoid + '&idi=' + idila + '&edit=' + datos + '&yososector=' + nombcas.sector + '" style="padding: 0;border: none;overflow:hidden;width: 32rem;height:509px;"></iframe></div>';

                        break;
                    case 'myban':
                        widthw = '280px';
                        heightw = '244px'; winsormasclase = ' cerraalentr';
                        winshtm = '<span class="titulow">' + titulo + '<i class="icon-off" style="margin-top:2px;" id="tancar' + idparaeste + '"></i></span>' +
                            '<div class="contenido" style="padding:0;"><iframe id="frammymyban" name="frammymyban" scrolling="no" src="' + dominiobase + 'todoincs/myban.php?mikeka=' + yasoid + '&idi=' + idila + '&insad=' + yosocas + '&idk=' + datos + '" style="margin: 0; padding: 0; border: none; overflow:hidden; width:100%; margin:none; height:219px;"></iframe></div>';

                        break;
                    case 'myempresa':
                    case 'crearempresa':
                    case 'myemsolis':
                    case 'myprestamos':
                    case 'myloteria':
                    case 'gestionloteria':
                    case 'gestionprestamos':
                    case 'herramientas':
                    case 'myHelp':

                        if (tipo == 'myHelp') {
                            titulo = iw[18];
                            heightw = '405px';
                            widthw = '300px';
                        }
                        else if (tipo == 'herramientas') {
                            titulo = iw[19]; //ojoaki nolang
                            heightw = '225px';
                            widthw = '300px';
                        } else if (tipo == 'myprestamos' || tipo == 'gestionprestamos') {
                            titulo = iw[20]; //ojoaki nolang
                            heightw = '285px';
                            widthw = '390px';
                        } else if (tipo == 'myloteria' || tipo == 'gestionloteria') {
                            titulo = iw[21]; //ojoaki nolang
                            heightw = '225px';
                            widthw = '300px';
                        } else if (tipo == 'crearempresa') {
                            titulo = iw[22];
                            heightw = '365px';
                            widthw = '720px';
                            //winsormasclase=' resiz';
                            contenidomasestilo = 'style="height:520px;"';
                        } else {
                            titulo = iw[23];
                            heightw = '535px';
                            widthw = '530px';
                            //winsormasclase=' resiz';
                            contenidomasestilo = 'style="height:500px;"';
                        }
                        winshtm = '<span class="titulow">' + titulo + '<i class="icon-off" id="tancar' + idparaeste + '"></i></span>' +
                            '<div class="contenido"' + contenidomasestilo + ' id="conte' + idparaeste + '"></div>';
                        break;
                    case 'myAppsm':
                        widthw = '480px';
                        heightw = '444px';
                        winsormasclase = ' resiz';
                        contenidomasclas = ' scroll';

                        if (datos.substring(0, 2) != '//' && datos.substring(0, 4) != 'http') {
                            datos = dominiobase + datos;
                        }
                        winshtm = '<span class="titulow">' + titulo + '<i class="icon-off" style="margin-top:2px;" id="tancar' + idparaeste + '"></i></span>' +
                            '<div class="contenido resiz scroll" id="conte' + idparaeste + '"><iframe id="frammymyAppsm" name="frammymyAppsm" src="' + datos + '" style="margin: 0; padding: 0; border: none; overflow:hidden; width:100%; margin:none; height:100%;"></iframe></div>';

                        break;
                    case 'myAppsf':
                        widthw = '480px';
                        heightw = '444px';
                        winsormasclase = ' resiz';
                        contenidomasclas = ' scroll';

                        if (datos.substring(0, 2) != '//' && datos.substring(0, 4) != 'http') {
                            datos = dominiobase + datos;
                        }
                        winshtm = '<span class="titulow">' + titulo + '<i class="icon-off" style="margin-top:2px;" id="tancar' + idparaeste + '"></i></span>' +
                            '<div class="contenido resiz scroll" id="conte' + idparaeste + '"><iframe id="frammymyAppsf" name="frammymyAppsf" src="' + datos + '" style="margin: 0; padding: 0; border: none; overflow:hidden; width:100%; margin:none; height:100%;"></iframe></div>';

                        break;
                    case 'myAjax':
                        idparaeste = titulo;
                        titulo = datos;
                        widthw = mas;
                        heightw = masd;
                        if (mast)
                            contenidomasclas = ' ' + mast;

                        winshtm = '<span class="titulow">' + titulo + '<i class="icon-off" style="margin-top:2px;" id="tancar' + idparaeste + '"></i></span>' +
                            '<div class="contenido' + contenidomasclas + '" id="conte' + idparaeste + '"></div>';

                        break;
                    case 'myCam':

                        //titulo = 'Intercambiar objetos con '+titulo;
                        //if(yahablef == ''){
                        //nwinsor.style.left = '200px';
                        //nwinsor.style.top = '80px';
                        //}
                        widthw = 'auto';
                        heightw = 'auto';
                        //nwinsor.style.zIndex = '3';
                        winsormasclase = ' cerraalentr';
                        var masconn = '<div style="width:280px; float: right; margin-right:10px;">' + iw[24] + '<br/>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury1"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury2"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury3"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury4"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury5"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury6"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury7"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury8"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury9"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury10"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury11"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury12"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury13"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury14"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury15"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury16"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury17"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury18"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury19"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury20"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury21"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury22"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury23"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury24"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury25"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury26"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury27"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" style="cursor:default;" data-pos="el" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfury28"><span style="display:none"></span></div>' +
                            '<br/><button id="aceptelcam" disabled="disabled" class="btnwo on" style="cursor:default;"><i class="icon-unlock"></i> ' + iw[25] + '</button></div>' +
                            '<img src="' + dominiobase + 'imagesnew/appico3/trade.png"  style="padding: 5px;position: relative;left: 118px;width: 35px;"/><div style="width: 280px; margin-right:20px; float: left;">' + iw[26] + '<br/>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur1"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur2"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur3"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur4"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur5"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur6"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur7"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur8"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur9"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur10"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur11"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur12"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur13"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur14"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur15"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur16"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur17"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur18"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur19"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur20"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur21"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur22"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur23"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur24"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur25"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur26"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur27"><span style="display:none"></span></div>' +
                            '<div class="cajafurnis_trade" data-pos="yo" data-mifram=""  data-nomgro="" data-cuanta="0" id="boxfur28"><span style="display:none"></span></div>' +
                            '<br/><button id="aceptyocam" class="btnwo" style="cursor:pointer;">' + iw[27] + '</button></div>' +
                            '<div id="acepyastatu"></div>';
                        winshtm = '<span class="titulow">' + iw[28] + ' ' + titulo + '<i class="icon-off" id="tancar' + idparaeste + '" style="margin-top:2px;"></i></span>' +
                            '<div class="contenido" style="display: flex;text-align:center;margin:0;height: 477px;flex-direction: column;">' + masconn + '</div>';
                        //style="margin-top:2px;" onclick="adeu(\'#'+didat+'\');cancmbi();"
                        break;

                    case 'myLook':
                        var winshtm = '<span class="titulow" id="titulo' + idparaeste + '">' + titulo + '<i class="icon-off" id="tancar' + idparaeste + '" style="margin-top:2px;"></i></span><br/><img style="position: absolute; margin-top:200px; margin-left:50%;" src="' + dominiobase + 'imagesnew/appico3/cargatrans.gif" id="cargamyLook"/><div class="contenido' + contenidomasclas + '" id="conte' + tipo + '">' + datos + '</div>';
                        break;
                    case 'crearsos':
                        widthw = '384px';
                        //heightw='380px';
                        titulo = iw[29];
                        // style="height:343px;"
                        winshtm = '<span class="titulow" id="titulo' + idparaeste + '">' + titulo + '<i class="icon-off" id="tancar' + idparaeste + '" style="margin-top:2px;"></i></span><div class="contenido' + contenidomasclas + '" id="conte' + tipo + '"></div>';
                        break;
                    case 'myKekos':

                        winshtm = '<span class="titulow" id="titulo' + idparaeste + '">' + titulo + '<i class="icon-off" id="tancar' + idparaeste + '" style="margin-top:2px;"></i></span><div class="contenido' + contenidomasclas + '" id="conte' + tipo + '" style="height:400px;width:250px;">' + datos + '</div>';
                        break;
                    case 'myRegalo':
                        winsormasclase = '';
                        winshtm = '<span class="titulow" id="titulo' + idparaeste + '">' + titulo + '<i class="icon-off" id="tancar' + idparaeste + '" style="margin-top:4px;margin-right:-5px;"></i></span><div id="conte' + tipo + '" style="padding-left:55px;padding-top:2px;line-height:12px;font-size:11px;" class="texpix">' + datos + '</div>';
                        break;
                    case 'myAle':
                        winsormasclase = '';

                        if (titulo == 'myAle') titulo = 'Alerta';//ojoakinolang

                        idparaeste += addvaaa(1, 100);
                        var calcule = addvaaa(3, 20);
                        var calculetop = calcule * 3;
                        calcule = calcule * 3;
                        //calcule+=250;
                        calculetop += 60;
                        leftw = calcule + 'px';
                        topw = calculetop + 'px';
                        winsormasclase = ' cerraalentr';
                        winshtm = '<span class="titulow" id="titulo' + idparaeste + '">' + titulo + '<i class="icon-off" id="tancar' + idparaeste + '" style="margin-top:4px;margin-right:-5px;"></i></span><div id="conte' + idparaeste + '" class="contenido texpix center">' + datos + '</div>';
                        break;
                    default:
                        winshtm = '<span class="titulow" id="titulo' + idparaeste + '">' + titulo + '<i class="icon-off" id="tancar' + idparaeste + '" style="margin-top:2px;"></i></span><div class="contenido' + contenidomasclas + '" id="conte' + tipo + '">' + datos + '</div>';

                }
                if (!document.getElementById(idparaeste)) {
                    var nwinsor = document.createElement('div');
                    nwinsor.className = 'vwinsor' + winsormasclase;
                    //nwinsor.position = 'absolute';
                    nwinsor.style.left = leftw;
                    nwinsor.style.top = topw;

                    if (widthw != '')
                        nwinsor.style.width = widthw;
                    if (heightw != '')
                        nwinsor.style.height = heightw;

                    if (tipo == 'myAle')
                        nwinsor.style.maxWidth = '400px';

                    nwinsor.id = idparaeste;
                    document.body.appendChild(nwinsor);
                } else {
                    var nwinsor = document.getElementById(idparaeste);
                }
                nwinsor.innerHTML = winshtm;

                switch (tipo) {

                    case 'myfoto':

                        nwinsor.style.background = 'none';
                        nwinsor.style.zIndex = '3';
                        document.getElementById('tancarmyfoto').onclick = function () { vuifot(); borrar('myfoto'); };
                        document.getElementById('btnfotya').onclick = function () { vuifotfestival(); };
                        break;
                    case 'mycerberus':
                        detectandocasilla = 'no';
                        document.getElementById('conte' + tipo).innerHTML = '<iframe scrolling="no" style="overflow:hidden;border:none;width:300px;height:200px;" src="' + dominiobase + 'todoincs/mycerverusv3.php?mikeka=' + yasoid + '&idi=' + idila + '&idp=' + encodeURI(datos) + '&insad=' + encodeURI(yosocas) + '" id="fram' + tipo + '"></iframe>';
                        break;
                    case 'crearempresa':
                    case 'myempresa':
                    case 'myemsolis':
                    case 'myprestamos':
                    case 'myloteria':
                    case 'gestionloteria':
                    case 'gestionprestamos':
                    case 'herramientas':
                        kajax({
                            data: 'soyid=' + yasoid + '&idi=' + idila + '&didat=' + tipo + '&datato=' + datos,
                            url: 'todoincs/empresasv2.php',
                            type: 'get',
                            success: function (response) {
                                var posal = document.getElementById('conte' + idparaeste);
                                if (elementExists(posal)) {
                                    posal.innerHTML = response;

                                    if (idparaeste == 'herramientas') {
                                        var clickearma = function () {

                                            if (nombcas.armas == 1 || this.id == 'soymotosierra' || this.id == 'soynada') {
                                                var estaarma = this.id;
                                                estaarma = estaarma.replace('soy', '');
                                                if (estaarma == 'nada' || estaarma == miart) {
                                                    miart = '';
                                                    maccion = '';
                                                } else {
                                                    miart = estaarma;
                                                    maccion = 'bebe';
                                                }
                                                controlmia();
                                            } else {
                                                alerta(iw[30]);
                                            }
                                            //alert(this.id);
                                        };
                                        if (elementExists(posal.querySelector('#soynada'))) {
                                            posal.querySelector('#soynada').onclick = clickearma;
                                        }

                                        if (elementExists(posal.querySelector('#soymotosierra'))) {
                                            posal.querySelector('#soymotosierra').onclick = clickearma;
                                        }
                                        if (elementExists(posal.querySelector('#soypistola'))) {
                                            posal.querySelector('#soypistola').onclick = clickearma;
                                        }
                                        if (elementExists(posal.querySelector('#soypistolaazul'))) {
                                            posal.querySelector('#soypistolaazul').onclick = clickearma;
                                        }
                                        if (elementExists(posal.querySelector('#soythompson'))) {
                                            posal.querySelector('#soythompson').onclick = clickearma
                                        }
                                    } else {
                                        var cboxesffcatscripts = posal.querySelectorAll('script'),
                                            iffccatscris = cboxesffcatscripts.length;
                                        if (iffccatscris > 0) {
                                            while (iffccatscris--) {
                                                if (cboxesffcatscripts[iffccatscris]) {
                                                    var script = document.createElement('script');
                                                    script.innerHTML = cboxesffcatscripts[iffccatscris].innerHTML;
                                                    posal.appendChild(script);
                                                }
                                            }
                                        }
                                    }

                                }
                            }
                        });

                        //$('#'+didat).draggable({scroll: false});
                        break;
                    case 'myKekos':
                        detectandocasilla = 'no';
                        var ulkekosden = '';
                        var keks = kkallakik.querySelectorAll('[data-kek]');
                        if (keks.length > 0) {
                            for (var i = 0; i < keks.length; i++) {
                                ulkekosden += '<li data-idk="' + keks[i].getAttribute('data-idkek') + '">' + keks[i].getAttribute('data-kek') + '</li>';
                            }
                        }
                        document.getElementById('conte' + tipo).className = "contenido scroll";
                        //document.getElementById('conte'+tipo).style.width="120px";
                        //document.getElementById('conte'+tipo).style.maxWidth="200px";
                        //document.getElementById('conte'+tipo).style.height="120px";
                        //document.getElementById('conte'+tipo).style.maxHeight="700px";

                        document.getElementById('conte' + tipo).innerHTML = '<ul id="myKekosu" class="ulcla" style="width:100%;height:100%;">' + ulkekosden + '</ul>';
                        document.getElementById('myKekosu').onclick = function (evt) {
                            clickeko('', '', evt.target.getAttribute('data-idk'));
                        };
                        break;
                    case 'myRegalo':
                        document.getElementById(idparaeste).style.background = 'url(' + dominiobase + 'imagesnew/game/regalofondo.png)';
                        document.getElementById(idparaeste).style.height = '131px';
                        document.getElementById(idparaeste).style.width = '284px';
                        document.getElementById(idparaeste).style.padding = '0px';
                        document.getElementById(idparaeste).style.border = '0px';
                        hacecuanto('reg', 'reg', mas);
                        break;
                    case 'mycronometro':
                        document.getElementById('conte' + tipo).innerHTML = '<iframe scrolling="no" style="overflow:hidden;border:none;width:300px;height:250px;" src="' + dominiobase + 'todoincs/mycronometro.php?mikeka=' + yasoid + '&idi=' + idila + '&idp=' + encodeURI(datos) + '&insad=' + encodeURI(yosocas) + '" id="fram' + tipo + '"></iframe>';
                        break;
                    case 'crearsos':
                        kajax({
                            data: 'mikeka=' + yasoid + '&idi=' + idila,
                            url: 'todoincs/crearsosv5.php',
                            type: 'get',
                            success: function (response) {
                                if (document.getElementById('conte' + tipo)) {
                                    document.getElementById('conte' + tipo).innerHTML = response;
                                    if (tipo == 'crearsos') {


                                        document.getElementById('btnhelpdetour').onclick = function () {
                                            estoyenpasotour = 1;
                                            if (yosocas == 0) {
                                                katman('kickeame');
                                            }
                                            borrar('crearsos');
                                            cargascript('todoincs/tour.php', 'tour', function () { empiezatour() });

                                        };
                                        document.getElementById('formsos').onsubmit = function () {
                                            if (document.getElementById('crearsos')) {
                                                var akiea = document.getElementById('kinnomsos').value;
                                                var kproba = document.getElementById('kinnomprob').value;
                                                var ktipa = document.getElementById('kmodelsos').value;
                                                borrar('crearsos');
                                                kajax({
                                                    data: 'op=mandisos&sala=' + yosocas + '&akien=' + encodeURI(akiea) + '&prueba=' + encodeURI(kproba) + '&tipo=' + encodeURI(ktipa) + '&mikeka=' + yasoid,
                                                    url: 'todoincs/funcop.php',
                                                    type: 'get',
                                                    success: function (response) {//nolang
                                                        switch (response) {
                                                            case 'ok':
                                                                alerta(iw[31]);
                                                                katman('mandesos');
                                                                break;
                                                            case 'offline':
                                                                alerta(iw[32]);
                                                                break;
                                                            case 'akien':
                                                                alerta(iw[33]);
                                                                break;
                                                            case 'noexiste':
                                                                alerta(iw[34]);
                                                                break;
                                                        }
                                                    }
                                                });

                                            }
                                            return false;
                                        };
                                        var doyclickabtnsoshelpe = function () {

                                            document.getElementById('sosakiant').style.display = 'none';
                                            document.getElementById('helpaki').style.display = 'block';
                                            document.getElementById('formahelp').querySelector('input').setAttribute('disabled', 'disabled');
                                            document.getElementById('formahelp').querySelector('button').setAttribute('disabled', 'disabled');
                                            vextr['estoyhelper'] = 1;
                                            katman('creohelper');
                                        }
                                        document.getElementById('botonsoshe').onclick = function () {
                                            doyclickabtnsoshelpe();
                                        };
                                        if (vextr['quierohelperdirecto'] == 1) {
                                            vextr['quierohelperdirecto'] = 0;
                                            doyclickabtnsoshelpe();
                                        }
                                        document.getElementById('tancarcrearsos').onclick = function () {
                                            if (vextr['estoyhelper'] == 1) {
                                                katman('msghelppa', 'ante', document.getElementById('akichathelp').getAttribute('data-idkek'), 'closechat');
                                                if (document.getElementById('akichathelp') && document.getElementById('akichathelp').getAttribute('data-idkek') != null)
                                                    //nolang
                                                    winsor('myEncuestahelper', iw[35], document.getElementById('akichathelp').getAttribute('data-idkek'), '', '', '');
                                            }
                                            //consola.log('tancarcrearsos');
                                            borrar('crearsos');
                                        };



                                        document.getElementById('formahelp').onsubmit = function () {
                                            var mirovacio = document.getElementById('yodighelp').value;
                                            mirovacio = mirovacio.replace(" ", "");
                                            //vextr['sal'] = 1;
                                            if (mirovacio != '') {
                                                katman('msghelppa', 'antesropa', document.getElementById('akichathelp').getAttribute('data-idkek'), document.getElementById('yodighelp').value);
                                                document.getElementById('yodighelp').value = '';
                                                document.getElementById('yodighelp').focus();
                                            }
                                            return false;
                                        };
                                    }
                                }
                            }
                        });
                        //conte'+tipo+'
                        break;

                    //
                    //        var parametros = {
                    //        "soyid" : kf.mikekjsid,
                    //        "op" : "myEncuestahelper",
                    //        "datato" : datato
                    //        };
                    //        $.ajax({
                    //        data:  parametros,
                    //        url:   '../todoincs/funcop.php',
                    //        type:  'post',
                    //        success:  function (response) {
                    //
                    //    $('#'+didat+' > div:first').html(response);
                    //        }});
                    case 'myEncuestahelper':
                    case 'myHelp':

                        kajax({
                            data: 'mikeka=' + yasoid + '&datos=' + encodeURI(datos) + '&estadohelper=' + encodeURI(estadohelper) + '&idi=' + idila,
                            url: 'todoincs/' + idparaeste + '.php',
                            type: 'get',
                            success: function (response) {
                                if (document.getElementById('conte' + idparaeste)) {
                                    document.getElementById('conte' + idparaeste).innerHTML = response;
                                    if (idparaeste == 'myHelp') {
                                        if (!document.getElementById('akihelperslista').querySelector('li')) katman('sinhelps');
                                        document.getElementById('akihelperslista').onclick = function (e) {
                                            var elem, evt = e ? e : event;
                                            if (evt.srcElement) elem = evt.srcElement;
                                            else if (evt.target) elem = evt.target;
                                            if (elem.getAttribute('data-idhel')) {
                                                atenderhel(elem.getAttribute('data-idhel'));
                                                document.getElementById('akihelperslista').removeChild(elem.parentNode);
                                                if (!document.getElementById('akihelperslista').querySelector('li'))
                                                    katman('sinhelps');
                                            }
                                        };
                                        document.getElementById('desconecthel').onclick = function () {
                                            katman('desconecthelper');
                                            estadohelper = 'desconectado';
                                            document.cookie = "estadohelper=desconectado; expires=Thu, 18 Dec 2063 12:00:00 GMT; path=/";

                                            document.getElementById('desconecthel').style.display = 'none';
                                            document.getElementById('conecthel').style.display = 'inline';
                                            document.getElementById('btnhelper').innerHTML = '<img src="' + dominiobase + 'fly/placas/helpersilen.png"/>';

                                        };

                                        document.getElementById('conecthel').onclick = function () {

                                            estadohelper = 'conectado';
                                            document.cookie = "estadohelper=conectado; expires=Thu, 18 Dec 2063 12:00:00 GMT; path=/";

                                            katman('conecthelper');
                                            document.getElementById('desconecthel').style.display = 'inline';
                                            document.getElementById('conecthel').style.display = 'none';
                                            document.getElementById('btnhelper').innerHTML = '<img src="' + dominiobase + 'fly/placas/helper.png"/>';
                                        };

                                        if (estadohelper == 'conectado') {
                                            document.getElementById('desconecthel').style.display = 'inline';
                                            document.getElementById('conecthel').style.display = 'none';
                                        }
                                        else if (estadohelper == 'desconectado') {
                                            document.getElementById('desconecthel').style.display = 'none';
                                            document.getElementById('conecthel').style.display = 'inline';
                                        }
                                    }
                                }
                            }
                        });
                        break;
                    case 'myAjax':
                        var datsmas = '';
                        if (idparaeste == 'myparcelav2') {
                            datsmas = '&yosocas=' + yosocas + '&sectory=' + nombcas.sectory + '&sectorx=' + nombcas.sectorx;
                        }
                        if (idparaeste == 'referidos') {
                            datsmas = '&idempresareferi=' + mast;
                        }
                        if (idparaeste == 'verb') {
                            datsmas = '&c2=' + mast;
                        }
                        kajax({
                            data: 'mikeka=' + yasoid + '&yosoface=' + yosoface + '&idi=' + idila + datsmas,
                            url: 'todoincs/' + idparaeste + '.php',
                            type: 'get',
                            success: function (response) {
                                var posal = document.getElementById('conte' + idparaeste);
                                if (elementExists(posal)) {
                                    posal.innerHTML = response;

                                    var cboxesffcatscripts = posal.querySelectorAll('script'),
                                        iffccatscristot = cboxesffcatscripts.length;
                                    if (iffccatscristot > 0) {
                                        for (var iffccatscris = 0; iffccatscris < iffccatscristot; iffccatscris++) {
                                            if (cboxesffcatscripts[iffccatscris]) {
                                                var cargastescri = 's';
                                                if (cboxesffcatscripts[iffccatscris].id && elementExists(document.getElementById(cboxesffcatscripts[iffccatscris].id + 'cargado'))) {
                                                    cargastescri = 'n';
                                                }

                                                if (cargastescri == 's') {
                                                    var script = document.createElement('script');
                                                    if (!cboxesffcatscripts[iffccatscris].src) {
                                                        script.innerHTML = cboxesffcatscripts[iffccatscris].innerHTML;
                                                    } else {
                                                        script.src = cboxesffcatscripts[iffccatscris].src;
                                                    }
                                                    if (cboxesffcatscripts[iffccatscris].id) {
                                                        script.id = cboxesffcatscripts[iffccatscris].id + 'cargado';
                                                    }
                                                    if (cboxesffcatscripts[iffccatscris].onload)
                                                        script.onload = cboxesffcatscripts[iffccatscris].onload;

                                                    document.head.appendChild(script);
                                                } else {
                                                    //ya habia cargado este script
                                                    if (cboxesffcatscripts[iffccatscris].onload) {
                                                        cboxesffcatscripts[iffccatscris].onload();
                                                    }
                                                }
                                            }
                                        }
                                    }

                                }
                            }
                        });
                        //conte'+tipo+'
                        break;
                    case 'myLook':
                        document.getElementById('contemyLook').className = 'transpa';

                        document.getElementById('contemyLook').innerHTML = '<canvas style="position: absolute; margin-top:40px;right: 120px;" width="90" height="120" id="kekyosem"></canvas><iframe style="overflow:hidden;border:none;width:780px;height:450px;" src="' + dominiobase + 'todoincs/verlookv2.php?mikeka=' + yasoid + '&idi=' + idila + '" id="lookfram"></iframe>';
                        var datsro = 'standL4LLLL' + miaspecto;


                        var kekasclas = '';
                        //////consola.log('test.tam'+test.tam);
                        if (mitam > 0) {
                            document.getElementById('kekyosem').className = 'tam' + mitam;
                        }
                        kanvasclick(document.getElementById('kekyosem'), datsro);


                        //kajax({
                        //data:  'mikeka='+yasoid+'&idi='+idila,
                        //url:   'todoincs/verlook.php',
                        //type:  'get',
                        //success:  function (response) {
                        //if(document.getElementById('contemyLook')){
                        //document.getElementById('contemyLook').innerHTML=response;
                        //
                        //var cboxesffcats = document.getElementById('contemyLook').getElementsByTagName('script'),
                        //iffccats = cboxesffcats.length;
                        //if(iffccats>0){
                        //while(iffccats--) {
                        //if(cboxesffcats[iffccats]){
                        //var script = document.createElement('script');
                        //script.innerHTML = cboxesffcats[iffccats].innerHTML;
                        //document.getElementById('contemyLook').appendChild(script);
                        //}
                        //}
                        //}
                        //}
                        //}});
                        break;
                    case 'mytv':

                        document.getElementById('queverform').onsubmit = function () {
                            busctv(document.getElementById('queverhoy').value, '', 'akicontstv');
                            return false;
                        };

                        //busctv('','','akicontstv');//cargo videos x defecto
                        break;
                    case 'myCam':
                        document.getElementById('aceptyocam').onclick = function () { aceptocam('1'); };
                        if (document.getElementById('myCam')) {
                            var vancas = document.getElementById('myCam').querySelectorAll('[data-pos="yo"]');
                            for (var i = 0; i < vancas.length; i++) {
                                if (vancas[i]) {
                                    vancas[i].onclick = function () {
                                        if (this.getAttribute('data-mifram') != '') {
                                            //////consola.log('quitabdya',this.getAttribute('data-mifram'));//quito furni
                                            katman('quitabdya', this.getAttribute('data-mifram'));
                                        }
                                    };
                                }
                            }

                        }

                        break;
                }

                if (tipo != 'myfoto') {
                    if (tipo != 'myCam') {
                        document.getElementById('tancar' + idparaeste).onclick = function () {
                            borrar(idparaeste)
                        };
                    } else {
                        tradeando = 's';
                        if (timeocam)
                            window.clearTimeout(timeocam);
                        document.getElementById('tancar' + idparaeste).onclick = function () {
                            borrar('myCam'); katman('cancmbi', { na: 'na' }); tradeando = 'n';
                            if (timeocam)
                                window.clearTimeout(timeocam);
                        };
                    }
                }

                nwinsor.setAttribute('draggable', true);
                nwinsor.ondragstart = function (evt) {
                    startMoving(this, evt);
                };

                //nwinsor.setAttribute('draggable',true);
                //nwinsor.ondragstart=function(evt){
                //startMoving(this,evt);};

            },
            aceptocam = function (op) {
                if (document.getElementById('aceptyocam')) {
                    var estebut = document.getElementById('aceptyocam');
                    if (op == '1') {
                        //OJOAKIMAL
                        if (estebut.innerHTML == iw[36]) {//nolang ojoaki si cambia cambiar en el okamcam
                            estebut.innerHTML = iw[37];
                            //////consola.log('mando icamsyo si');
                            katman('icamsyo', 'si');
                        } else {
                            estebut.innerHTML = iw[38];
                            //////consola.log('mando icamsyo no');
                            katman('icamsyo', 'no');
                        }
                    } else {
                        //////consola.log('mando icamsyo ya');
                        katman('icamsyo', 'ya');
                    }
                }
            },
            atenderhel = function (idhel) {

                var parametros = "idhel=" + idhel + "&idi=" + idila + "&op=atender";

                kajax({
                    data: parametros,
                    url: 'todoincs/myHelp.php',
                    type: 'get',
                    success: function (response) {
                        if (response.substr(0, 2) == 'OK') {
                            response = response.replace('OK', '');
                            //nolang
                            var cargg = 'aspectoante';
                            katman('msghelppa', cargg, response, iw[39]);

                            var idagre = 'helchat' + response;//nolang
                            var agregac = '' +
                                '<button class="btnwo salidhe" type="button" style="z-index:1000;position:absolute;">' + iw[40] + '</button>' +
                                '<div id="helpaki' + response + '" style="position: absolute;width:340px;height:260px;">' +
                                '<div class="texwo radius" style="position: absolute;width:340px;height:180px;">' +
                                '<ul id="akichathelp' + response + '" class="ulcla nohover scroll" style="cursor:default; overflow-x:hidden;">' +
                                '<li style="width:100%;text-align:center;" class="cargandoil">' + iw[41] + '<br /><img src="' + dominiobase + 'images/cargando.gif"/></li>' +
                                '</ul>' +
                                '</div>' +
                                '<div style="position: absolute; width:340px;bottom: 30px;">' +
                                '<form id="formahelp' + response + '" action="javascript:void(0);">' +
                                '<input type="text" id="yodighelp' + response + '" maxlength="100" placeholder="' + iw[42] + '" class="texpix"' +
                                ' style="width:200px;float: left;"/>' +
                                '<button class="btnwo" type="submit" style="float: left;">' + iw[43] + '</button>' +
                                '<button class="btnwo visitara" type="button" style="float: left;">' + iw[44] + '</button>' +
                                '</form>' +
                                '</div>' +
                                '</div>';
                            borrar('helchat' + response);
                            var creo = document.createElement('div');
                            creo.id = 'helchat' + response;
                            creo.className = 'vwinsor';
                            creo.innerHTML = agregac;
                            creo.style.width = '345px';
                            creo.style.height = '250px';

                            creo.setAttribute('draggable', true);
                            creo.ondragstart = function (evt) {
                                startMoving(this, evt);
                            };
                            creo.querySelector('.visitara').onclick = function () {

                                katman('seguir', response);
                            };
                            creo.querySelector('.salidhe').onclick = function () {
                                if (!document.getElementById('yodighelp' + response).getAttribute('disabled') != 'disabled') {
                                    katman('msghelppa', cargg, response, 'closechat');
                                }
                                adeu(idagre);
                            };
                            document.body.appendChild(creo);
                            //<div id="helchat'+response+'" class="mwinsor" style="width:345px;height:200px;">
                            //$(agregac).appendTo('body');
                            //$(idagre).draggable({scroll: false});
                            //$("#akichathelp"+response).slimScroll({ alwaysVisible: true, height: 180});

                            document.getElementById('formahelp' + response).onsubmit = function () {
                                var mirovacio = document.getElementById('yodighelp' + response).value;
                                mirovacio = mirovacio.replace(" ", "");
                                if (mirovacio != '') {
                                    katman('msghelppa', cargg, response, document.getElementById("yodighelp" + response).value);
                                    document.getElementById('yodighelp' + response).value = '';
                                    document.getElementById('yodighelp' + response).focus();
                                    //$("#yodighelp"+response).val('').focus();
                                }
                            };

                        } else {
                            alerta(response);
                        }
                    }
                });
            },
            clickcatfurn = function (este) {

                var cboxesffcats = document.getElementById('ccatfursaki').querySelectorAll('img'),
                    iffccats = cboxesffcats.length;

                while (iffccats--) {
                    if (cboxesffcats[iffccats])
                        cboxesffcats[iffccats].className = 'rca';
                }
                este.className = 'rca activa';

                var eseif = este.getAttribute('data-idf');
                var esefor = este.getAttribute('data-forma');

                var eseforencima = esefor;
                if (este.getAttribute('data-ifur') == 2) {
                    esefor = 'png';
                }
                if (este.getAttribute('data-ienc') == 2) {
                    eseforencima = 'png';
                }


                var esele = este.getAttribute('data-pxleft');
                var eseto = este.getAttribute('data-pxtop');
                var eseac = este.getAttribute('data-a');
                var eseidpcua = este.getAttribute('data-idpc');
                var estoyencat = este.getAttribute('data-cat');
                var ddesplus = este.getAttribute('data-desplus');
                var nomid = este.getAttribute('data-nomid');
                var idfurni = este.getAttribute('data-idf');

                eseto = parseInt(eseto);
                esele = parseInt(esele);
                eseto += 160;
                esele += 330;
                if (eseac == 'poster2') {
                    //eseto+=20;
                    esele += 220;
                }

                var pondrehh = '';
                if (document.getElementById('akiselefca')) {
                    if (este.getAttribute('data-ifur') == 2 || este.getAttribute('data-ifur') == 1)
                        pondrehh = '<img src="' + dominiobase + 'fly/i/fursv5/' + nomid + '/' + eseif + '.' + esefor + '" style="position:absolute;margin-top:' + eseto + 'px;margin-left:' + esele + 'px;"/>';

                    if (este.getAttribute('data-ienc') == 2 || este.getAttribute('data-ienc') == 1)
                        pondrehh += '<img style="position:absolute;margin-top:' + eseto + 'px;margin-left:' + esele + 'px;" src="' + dominiobase + 'fly/i/fursv5/' + nomid + '/' + eseif + 'encima.' + eseforencima + '"/>';

                    document.getElementById('akiselefca').innerHTML = pondrehh;
                }
                if (eseac == 'poster2') {
                    esele = -340;
                    eseto = 10;
                } else {
                    esele = -190;
                    eseto = -20;
                    if (eseidpcua == '2.0') {
                        eseto += 18;
                        esele += 36;
                    }
                    else if (eseidpcua == '0.2') {
                        esele += 18;
                    }
                    else if (eseidpcua == '2.2') {
                        eseto -= 18;
                    }
                    else if (eseidpcua == '3.3') {
                        eseto -= 36;
                    }
                    else if (eseidpcua == '5.5') {
                        eseto -= 72;
                    }
                    else if (eseidpcua == '') {
                        eseto += 18;
                    }
                }
                if (document.getElementById('akiselefca').style.position != 'absolute') {
                    document.getElementById('akiselefca').style.left = '0px';
                    document.getElementById('akiselefca').style.top = '0px';
                }
                document.getElementById('akiselefca').style.position = 'absolute';
                muevekatrix(document.getElementById('akiselefca'), 1, esele, eseto, 1);
                //$("#akiselefca").animate({left:esele,top:eseto},'slow');
                var monedacompra = 'coins <img src="' + dominiobase + 'maskeko/images/creditos.png">';

                //es pintura
                if (estoyencat == '46' || estoyencat == '22' || estoyencat == '44' || estoyencat == '19' || eseif == '4015392' || eseif == '4015423' || eseif == '4013054' || eseif == '4013605' || eseif == '4013603' || eseif == '4013604')
                    monedacompra = 'clouds <img src="' + dominiobase + 'images/cloud.png" style="width:13px;height:13px;">'

                var alquilerconbit = '<button class="btnwo" data-alq="compra">' + iw[45] + ' ' + este.getAttribute('data-coins') + ' ' + monedacompra + '</button>';

                if (este.getAttribute('data-alqui') == 'si')
                    alquilerconbit += '<button class="btnwo" data-alq="alquila">' + iw[45] + ' ' + parseInt(este.getAttribute('data-coins')) * 10 + ' ' + iw[46] + ' <img src="' + dominiobase + 'maskeko/images/fichas.png"></button>';
                //nolang

                var pongoeshtmc = '';
                if (este.getAttribute('data-nomid') > 0)
                    pongoeshtmc += damelang(este.getAttribute('data-nomid')) + '<br><i>';

                if (este.getAttribute('data-des') > 0)
                    pongoeshtmc += damelang(este.getAttribute('data-des'));

                pongoeshtmc += ddesplus;

                

                pongoeshtmc += '</i><br/>' + alquilerconbit;

                pongoeshtmc += '<span class="idf-devs"> ID: <input value="' + idfurni + '" id="idf-devs" disabled></input></span>';

                document.getElementById("akibtncompra").innerHTML = pongoeshtmc;//este.getAttribute('data-nom')+'<br><i>'+este.getAttribute('data-des')+'</i><br/>'+alquilerconbit;

                var cboxesffcats = document.getElementById('akibtncompra').querySelectorAll('button'),
                    iffccats = cboxesffcats.length;

                while (iffccats--) {
                    if (cboxesffcats[iffccats])
                        cboxesffcats[iffccats].onclick = function () {
                            govbbco(document.getElementById('ccatfursaki').querySelector('.activa'), this.getAttribute('data-alq'), 1);
                        };

                }
                //$("#akibtncompra > button").click(function() { govbbco($("#ccatfursaki > img.activa"),this.getAttribute('data-alq'),1); });

            },
            govbbco = function (este, compraoalquila, cantidad) {
                if (cantidad <= 0) {
                    cantidad = 100;
                }
                if (cantidad > 100) {
                    cantidad = 1;
                }
                var eseif = este.getAttribute('data-idf');
                //console.lag('compraoalquila'+compraoalquila+' idf'+eseif);
                //Nolang OJOAKI amedias
                var precio = parseInt(este.getAttribute('data-coins'));
                precio = (precio * cantidad);

                vextr['coinstotalcompro'] = precio;
                var monedacompra = iw[47] + ' <img src="' + dominiobase + 'maskeko/images/creditos.png">';

                var eseif = este.getAttribute('data-idf');
                //es pintura
                if (este.getAttribute('data-cat') == '22' || este.getAttribute('data-cat') == '46' || este.getAttribute('data-cat') == '19' || este.getAttribute('data-cat') == '9' || eseif == '4015392' || eseif == '4015423' || eseif == '4013054' || eseif == '4013605' || eseif == '4013603' || eseif == '4013604')
                    monedacompra = iw[46] + ' <img src="' + dominiobase + 'images/cloud.png">'

                var texaquipon = iw[48] + ' ' + cantidad + ' ' + damelang(este.getAttribute('data-nomid')) + ' por ' + precio + '' + monedacompra;

                var pongoaviso = '<span class="texpix" id="texaqui">' + texaquipon;

                if (compraoalquila == 'alquila') {
                    texaquipon = iw[48] + ' ' + cantidad + ' ' + damelang(este.getAttribute('data-nomid')) + ' ' + iw[49] + ' ' + (precio * 10) + '<img src="' + dominiobase + 'maskeko/images/fichas.png"/> ' + iw[50];
                    pongoaviso = '<span class="texpix" id="texaqui">' + texaquipon;
                }

                pongoaviso += '</span><br/><button id="confircomprmen" class="btnwo" style="min-width:15px;"';

                //cantidad <= 1 ||
                if (eseif == '155') // nose o es exclusivo
                    pongoaviso += ' disabled="disabled"';

                pongoaviso += '>-</button><button class="btnwo" disabled="disabled" style="cursor: default;';

                if (eseif == '155') // nose o es exclusivo
                    pongoaviso += 'display:none;';

                pongoaviso += '">' + iw[51] + '</button><button id="confircomprmas" class="btnwo" style="min-width:15px;"';

                if (eseif == '155') // nose o es exclusivo
                    pongoaviso += ' disabled="disabled"';

                pongoaviso += '>+</button>';

                //pongoaviso+='<br/><br/>//OJOAKI'+eseif;



                if (eseif == '681') {
                    //pintura pared

                    pongoaviso += '<p style="padding-top: 12px;"><button onclick="selectopcata(\'pare\',\'mode\',\'men\');" class="btnwo" style="text-decoration: none;width:15px;min-width:15px;">-</button><button class="btnwo" onclick="void(0);" style="text-decoration: none; cursor:default;" disabled="disabled">' + iw[52] + '</button><button onclick="selectopcata(\'pare\',\'mode\',\'mas\');" class="btnwo" style="text-decoration: none;width:15px;min-width:15px;">+</button></p><br /><a class="btnwo" onclick="selectopcata(\'parec\',\'0\',\'mas\');" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-image: url(' + dominiobase + 'fly/i/suelosv5/pared-10.png); background-position: center;" id="parebc"></a><a class="btnwo" onclick="selectopcata(\'parec\',\'1\',\'mas\');" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-image: url(' + dominiobase + 'fly/i/suelosv5/pared-11.png); background-position: center;" id="pareb1"></a><a class="btnwo" onclick="selectopcata(\'parec\',\'2\',\'mas\');" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-image: url(' + dominiobase + 'fly/i/suelosv5/pared-12.png); background-position: center;" id="pareb2"></a><a class="btnwo" onclick="selectopcata(\'parec\',\'3\',\'mas\');" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-image: url(' + dominiobase + 'fly/i/suelosv5/pared-13.png); background-position: center;" id="pareb3"></a><a class="btnwo" onclick="selectopcata(\'parec\',\'4\',\'mas\');" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-image: url(' + dominiobase + 'fly/i/suelosv5/pared-14.png); background-position: center;" id="pareb4"></a><div style="padding-top: 12px;"><a class="btnwo" onclick="selectopcata(\'parec\',\'5\',\'mas\');" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-image: url(' + dominiobase + 'fly/i/suelosv5/pared-15.png); background-position: center;" id="pareb5"></a><a class="btnwo" onclick="selectopcata(\'parec\',\'6\',\'mas\');" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-image: url(' + dominiobase + 'fly/i/suelosv5/pared-16.png) background-position: center;" id="pareb6"></a><a class="btnwo" onclick="selectopcata(\'parec\',\'7\',\'mas\');" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-image: url(' + dominiobase + 'fly/i/suelosv5/pared-17.png\'); background-position: center;" id="pareb7"></a><a class="btnwo" onclick="selectopcata(\'parec\',\'8\',\'mas\');" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-image: url(' + dominiobase + 'fly/i/suelosv5/pared-18.png); background-position: center;" id="pareb8"></a><a class="btnwo" onclick="selectopcata(\'parec\',\'9\',\'mas\');" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-image: url(' + dominiobase + 'fly/i/suelosv5/pared-19.png); background-position: center;" id="pareb9"></a></div><span id="paredacat" style="margin-top:-120px;margin-left:150px;position:absolute;"><img src="' + dominiobase + 'fly/i/suelosv5/pared-10.png"></span><input type="hidden" id="stpare" name="stpare" value="1"><input type="hidden" id="stparec" name="stparec" value="0"><input type="hidden" id="stparet" name="stparet" value="139">';

                } else if (eseif == '679') {
                    //pintura suelo
                    pongoaviso += '<p style="padding-top: 12px;"><button onclick="selectopcata(\'suel\',\'mode\',\'men\');" class="btnwo" style="text-decoration: none;width:15px;min-width:15px;">-</button><button class="btnwo" onclick="void(0);" style="text-decoration: none; cursor:default;" disabled="disabled">' + iw[52] + '</button><button onclick="selectopcata(\'suel\',\'mode\',\'mas\');" class="btnwo" style="text-decoration: none;width:15px;min-width:15px;">+</button></p><br /><a class="btnwo" onclick="selectopcata(\'suelc\',\'0\',\'mas\');" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-image: url(' + dominiobase + 'fly/i/suelosv5/suelo10.png); background-position: center;" id="suelbc"></a><a class="btnwo" onclick="selectopcata(\'suelc\',\'1\',\'mas\');" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-image: url(' + dominiobase + 'fly/i/suelosv5/suelo11.png); background-position: center;" id="suelb1"></a><a class="btnwo" onclick="selectopcata(\'suelc\',\'2\',\'mas\');" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-image: url(' + dominiobase + 'fly/i/suelosv5/suelo12.png); background-position: center;" id="suelb2"></a><a class="btnwo" onclick="selectopcata(\'suelc\',\'3\',\'mas\');" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-image: url(' + dominiobase + 'fly/i/suelosv5/suelo13.png); background-position: center;" id="suelb3"></a><a class="btnwo" onclick="selectopcata(\'suelc\',\'4\',\'mas\');" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-image: url(' + dominiobase + 'fly/i/suelosv5/suelo14.png); background-position: center;" id="suelb4"></a><div style="padding-top: 12px;"><a class="btnwo" onclick="selectopcata(\'suelc\',\'5\',\'mas\');" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-image: url(' + dominiobase + 'fly/i/suelosv5/suelo15.png); background-position: center;" id="suelb5"></a><a class="btnwo" onclick="selectopcata(\'suelc\',\'6\',\'mas\');" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-image: url(' + dominiobase + 'fly/i/suelosv5/suelo16.png); background-position: center;" id="suelb6"></a><a class="btnwo" onclick="selectopcata(\'suelc\',\'7\',\'mas\');" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-image: url(' + dominiobase + 'fly/i/suelosv5/suelo17.png\'); background-position: center;" id="suelb7"></a><a class="btnwo" onclick="selectopcata(\'suelc\',\'8\',\'mas\');" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-image: url(' + dominiobase + 'fly/i/suelosv5/suelo18.png); background-position: center;" id="suelb8"></a><a class="btnwo" onclick="selectopcata(\'suelc\',\'9\',\'mas\');" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-image: url(' + dominiobase + 'fly/i/suelosv5/suelo19.png); background-position: center;" id="suelb9"></a></div><span id="suelcat" style="margin-top:-70px;margin-left:140px;position:absolute;"><img src="' + dominiobase + 'fly/i/suelosv5/suelo10.png"></span><input type="hidden" id="stsuel" name="stsuel" value="1"><input type="hidden" id="stsuelc" name="stsuelc" value="0"><input type="hidden" id="stsuelt" name="stsuelt" value="180">';
                }

                else if (eseif == '300000' || eseif == '300001') { //nolang //bot perro tortuga
                    pongoaviso += '<br/><br/><img src="' + dominiobase + 'imagesnew/perrosv3/' + eseif + '/1/stand9.gif" id="fotomascota"><br/><input type="text" style="font-size: 10px; width: 300px;" id="nombremasco" name="nombremasco" maxlength="20" placeholder="' + iw[53] + '"><br>' +
                        '<br/><button onclick="mascolor(\'' + eseif + '\',\'mas\');" class="btnwo" style="min-width:15px;text-decoration: none;">-</button><button class="btnwo" style="cursor:default;" disabled="disabled">' + iw[54] + '</button><button onclick="mascolor(\'' + eseif + '\',\'men\');" class="btnwo" style="text-decoration: none;min-width:15px;">+</button>' +
                        '<input type="hidden" id="colormasco" value="1">';
                } else if (eseif == '300001') {//bot tortuga //nolang
                    pongoaviso += '<br/><br/><input type="text" style="font-size: 11px; width: 300px;" id="nombremasco" name="nombremasco" maxlength="20" placeholder="' + iw[55] + '"><br><input type="hidden" id="colormasco" value="1">';
                } else if (eseif == '20001' || eseif == '20002') {//bot mayordomo o especial
                    pongoaviso += '<br/><br/><input type="text" style="font-size: 11px; width: 300px;" id="nombremasco" name="nombremasco" maxlength="20" placeholder="' + iw[56] + '"><br><input type="hidden" id="colormasco" value="1">';
                }
                //nolang
                var blockreg = '';

                if (eseif == '155')
                    blockreg = 'disabled="disabled"';

                if (este.getAttribute('data-cat') == '46')//loteria
                    blockreg = 'disabled="disabled"';

                if (este.getAttribute('data-cat') == '43') {//nolang
                    pongoaviso += '<br/><br/><span class="texpix">' + iw[57] + '</span><br/>' +
                        '<textarea placeholder="' + iw[58] + '" class="texpix radius" style="border-radius:4px;background:#F0F0F0;padding:3px;-webkit-border-radius:4px;border:1px solid #3E3D3D;width:230px;max-width:230px;font-size:11px;height:50px;max-height:50px;" id="msgtrofeo"></textarea>';
                }
                if (compraoalquila == 'compra') {


                    var adoopprrhhht = '<input type="text" id="argk" class="texwo" maxlength="30" style="font-size: 11px; width: 300px;" placeholder="' + iw[59] + '">';
                    //YAAKI
                    adoopprrhhht += '<br/><label class="texpix"><input type="checkbox" id="argdk" value="1" checked="checked"> ' + iw[60] + '</label>';
                    adoopprrhhht += '<br/><br/><input type="text" class="texwo" id="argkn" maxlength="100" style="font-size: 11px; width: 300px;" placeholder="' + iw[58] + '"><div style="position:absolute;margin-left:260px;margin-top:80px;">';
                    adoopprrhhht += '<img src="' + dominiobase + 'maskeko/newfurnis/ass/fon1-1.png" id="rrafoncasim" style="position:absolute;">';
                    adoopprrhhht += '<img src="' + dominiobase + 'maskeko/newfurnis/ass/laz1-1.png" id="rralazcasim" style="position:absolute;">';
                    adoopprrhhht += '<img src="' + dominiobase + 'maskeko/newfurnis/ass/arri1-1.png" id="rraarricasim" style="position:absolute;"></div>';

                    adoopprrhhht += '<div style="float:left;" class="texpix">';

                    adoopprrhhht += '<br>' + iw[61] + '<br><br>';
                    adoopprrhhht += '<a class="btnwo" onclick="rrrcappkkllc(1,1)" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-color:#B50F0F;"></a>';
                    adoopprrhhht += '<a class="btnwo" onclick="rrrcappkkllc(1,2)" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-color:#DD4209;"></a>';
                    adoopprrhhht += '<a class="btnwo" onclick="rrrcappkkllc(1,3)" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-color:#E1AD13;"></a>';
                    adoopprrhhht += '<a class="btnwo" onclick="rrrcappkkllc(1,4)" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-color:#96E231;"></a>';
                    adoopprrhhht += '<a class="btnwo" onclick="rrrcappkkllc(1,5)" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-color:#4AD73D;"></a>';
                    adoopprrhhht += '<a class="btnwo" onclick="rrrcappkkllc(1,6)" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-color:#2AB3BA;"></a>';
                    adoopprrhhht += '<a class="btnwo" onclick="rrrcappkkllc(1,7)" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-color:#0A44A2;"></a>';
                    adoopprrhhht += '<a class="btnwo" onclick="rrrcappkkllc(1,8)" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-color:#621E98;"></a>';
                    adoopprrhhht += '<a class="btnwo" onclick="rrrcappkkllc(1,9)" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-color:#D015D6;"></a>';
                    adoopprrhhht += '<a class="btnwo" onclick="rrrcappkkllc(1,10)" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-color:#757575;"></a>';
                    adoopprrhhht += '<a class="btnwo" onclick="rrrcappkkllc(1,11)" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-color:#333333;"></a>';

                    adoopprrhhht += '<br><br>' + iw[62] + '<br><br>';//nolang

                    adoopprrhhht += '<a class="btnwo" style="" onclick="rrrcappkkllc(2,1)">' + iw[63] + '</a>';
                    adoopprrhhht += '<a class="btnwo" style="" onclick="rrrcappkkllc(2,2)">' + iw[64] + '</a>';
                    adoopprrhhht += '<a class="btnwo" style="" onclick="rrrcappkkllc(2,3)">' + iw[65] + '</a></div>';

                    adoopprrhhht += '<div style="float:left;margin-left:10px;width:100%;" class="texpix"><br>' + iw[66] + '<br><br>';
                    adoopprrhhht += '<a class="btnwo" onclick="rrrcappkkllc(3,1)" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-color:#F4F0F0;"></a>';
                    adoopprrhhht += '<a class="btnwo" onclick="rrrcappkkllc(3,2)" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-color:#C7A3A3;"></a>';
                    adoopprrhhht += '<a class="btnwo" onclick="rrrcappkkllc(3,3)" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-color:#CFE2CF;"></a>';
                    adoopprrhhht += '<a class="btnwo" onclick="rrrcappkkllc(3,4)" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-color:#A3C0C7;"></a>';
                    adoopprrhhht += '<a class="btnwo" onclick="rrrcappkkllc(3,5)" style="margin: 1px; margin-top: 15px; border:1px solid #000; background-color:#4C4C4C;"></a>';

                    adoopprrhhht += '<br><br>' + iw[67] + '<br><br>';
                    adoopprrhhht += '<a class="btnwo" style="" onclick="rrrcappkkllc(4,1)">' + iw[68] + '</a>';
                    adoopprrhhht += '<a class="btnwo" style="" onclick="rrrcappkkllc(4,2)">' + iw[69] + '</a>';
                    adoopprrhhht += '<a class="btnwo" style="" onclick="rrrcappkkllc(4,3)">' + iw[70] + '</a>';
                    adoopprrhhht += '<a class="btnwo" style="" onclick="rrrcappkkllc(4,4)">' + iw[71] + '</a><br/><br/></div>';

                    //adoopprrhhht+= '</div>';
                    var novisiblereg = '';
                    if (blockreg != '' || eseif == '681' || eseif == '679' || eseif == '133') {
                        novisiblereg = ' style="display:none;"';
                    }
                    pongoaviso += '<br/><br/><label class="texpix"' + novisiblereg + '><input type="checkbox" id="envvaacat" ' + blockreg + '/> ' + iw[72] + '</label><div id="esregalodi" class="novisible" style="height:180px;">' + adoopprrhhht + '</div>';

                }
                //botton comprar ya
                if (blockreg == '')
                    pongoaviso += '<br/><br/>';


                pongoaviso += '<button id="procescompascart" class="btnwo">' + iw[73] + '</button> <button id="cancelcompascart" class="btnwo">' + iw[74] + '</button>';

                //pongoaviso+='<br/><br/>';
                //pongoaviso+='<br/><br/>';
                var mirosies = document.getElementById('confircompr');
                // || elementExists(mirosies) && mirosies.getAttribute('data-idf') != eseif
                if (!elementExists(mirosies)) {
                    winsor('confircompr', iw[75], pongoaviso, '', '', '');
                } else {
                    document.getElementById('texaqui').innerHTML = texaquipon;
                }

                //mirosies=document.getElementById('confircompr');
                //if(elementExists(mirosies))
                //document.getElementById('confircompr').setAttribute('data-idf',eseif);
                //
                //kf.winsor('confircompr',pongoaviso);

                //pintura pared o pintura suelo o perro

                //if(cantidad==1){
                //if(eseif == '681' || eseif == '679' || eseif == '300000')
                //document.getElementById("confircompr").style.height=(parseInt(document.getElementById("confircompr").style.height.replace('px',''))+140)+'px';
                //bot o tortuga
                //if(eseif == '20001' || eseif == '300001')
                //document.getElementById("confircompr").style.height=(parseInt(document.getElementById("confircompr").style.height.replace('px',''))+70)+'px';

                //if(este.getAttribute('data-cat') == '43')
                //document.getElementById("confircompr").style.height=(parseInt(document.getElementById("confircompr").style.height.replace('px',''))+80)+'px';

                //if(blockreg != '')
                //document.getElementById("confircompr").style.height=(parseInt(document.getElementById("confircompr").style.height.replace('px',''))-40)+'px';
                //}
                if (document.getElementById("envvaacat")) {
                    document.getElementById("envvaacat").onclick = function () {

                        if (document.getElementById("envvaacat").checked) {
                            document.getElementById("esregalodi").removeAttribute('class');
                            //document.getElementById("confircompr").style.height=(parseInt(document.getElementById("confircompr").style.height.replace('px',''))+290)+'px';
                        } else {
                            document.getElementById("esregalodi").className = 'novisible';
                            //document.getElementById("confircompr").style.height=(parseInt(document.getElementById("confircompr").style.height.replace('px',''))-290)+'px';
                        }
                    }
                }


                document.getElementById("procescompascart").onclick = function () {
                    ////////consola.log(('cantidad'+cantidad);
                    compfu(este, compraoalquila, cantidad)
                };
                document.getElementById("cancelcompascart").onclick = function () { borrar('confircompr') };
                if (document.getElementById('confircomprmen'))
                    document.getElementById('confircomprmen').onclick = function () { govbbco(este, compraoalquila, (cantidad - 1)) };
                if (document.getElementById('confircomprmas'))
                    document.getElementById('confircomprmas').onclick = function () { govbbco(este, compraoalquila, (cantidad + 1)) };
                if (compraoalquila == 'alquila' && document.getElementById('confirmacom')) {//nolang
                    document.getElementById('confirmacom').innerHTML = iw[76];
                }
            },
            genesys = function (cual) {

                let newss = document.createElement('script');
                newss.src = '/todoincs/genesys.php?a=' + cual + '&v=30';
                document.body.appendChild(newss);
            },
            paracoiupya = function (yotendreara, cuasum, ope) {
                //paracoiupya(datoEBEBEBfnexx[0],'bolicoins','tengo');
                if (document.getElementById(cuasum)) {
                    var yotengoyafi = document.getElementById(cuasum).innerHTML;
                    yotengoyafi = parseInt(yotengoyafi);
                    //if(cuasum=='micoiya'){
                    //}
                    if (ope == 'sumar') {
                        yotendreara = parseInt(yotendreara);
                        yotendreara += yotengoyafi;
                    } else if (ope == 'restar') {
                        yotendreara = yotengoyafi - parseInt(yotendreara);
                    }

                    if (yotengoyafi != yotendreara) {
                        if (yotendreara < yotengoyafi)
                            soni('maskeko/images/compra.mp3');
                        else
                            soni('imagesnew/soni/bits.mp3');


                        addClass(document.getElementById(cuasum), 'wow');

                        window.setTimeout(removeClass, 2000, document.getElementById(cuasum), 'wow');
                        if (!yotendreara) yotendreara = '0';
                        document.getElementById(cuasum).innerHTML = parseInt(yotendreara);
                        document.getElementById(cuasum).setAttribute('title', parseInt(yotendreara));
                    }
                }
            },
            compfu = function (este, comprandooalquilando, cantidad) {
                //OJOAKI FALTA comprar furni bazar
                var theFrame = este.getAttribute('data-idf');

                var pakie = '';
                var asca = '0';

                if (document.getElementById('argk'))
                    pakie = document.getElementById('argk').value;

                var thfrean = 'thoso=' + cantidad + "&idi=" + idila + "&comprandooalquilando=" + comprandooalquilando + "&id=" + theFrame + '&soyid=' + yasoid;

                if (document.getElementById('nombremasco'))
                    thfrean += '&nombremasco=' + encodeURI(document.getElementById('nombremasco').value);

                if (document.getElementById('colormasco'))
                    thfrean += '&colormasco=' + encodeURI(document.getElementById('colormasco').value);

                if (vextr['coinstotalcompro'])
                    thfrean += '&coinstotalcompro=' + encodeURI(vextr['coinstotalcompro']);

                if (document.getElementById('msgtrofeo'))
                    thfrean += '&msgtrofeo=' + encodeURI(document.getElementById('msgtrofeo').value);
                if (theFrame == '679') {
                    thfrean += '&tosmaui=' + document.getElementById('stsuel').value + '' + document.getElementById('stsuelc').value;
                } else if (theFrame == '681') {
                    thfrean += '&tosmaui=' + document.getElementById('stpare').value + '' + document.getElementById('stparec').value;
                }
                if (document.getElementById('envvaacat') && document.getElementById('envvaacat').checked) {
                    asca = '1';
                    thfrean += '&asca=1&argk=' + encodeURI(pakie);
                    if (document.getElementById('argdk') && document.getElementById('argdk').checked)
                        thfrean += '&argdk=1';

                    thfrean += '&argkn=' + encodeURI(document.getElementById('argkn').value);
                    thfrean += '&rralazcasim=' + document.getElementById('rralazcasim').getAttribute('data-reg');
                    thfrean += '&rrafoncasim=' + document.getElementById('rrafoncasim').getAttribute('data-reg');
                    thfrean += '&rraarricasim=' + document.getElementById('rraarricasim').getAttribute('data-reg');
                }

                thfrean += '&idem=' + este.getAttribute('data-idem');
                borrar('confircompr');

                ////////
                ////consola.log('thfrean'+thfrean);
                kajax({
                    type: "get",
                    url: "todoincs/comprar.php",
                    data: thfrean,
                    success: function (datoEBEBEBfne) {
                        ////////consola.log(('datoEBEBEBfne'+datoEBEBEBfne);
                        var idprivadanewfurc = datoEBEBEBfne;
                        var asdasdca = idprivadanewfurc;
                        asdasdca = asdasdca.substring(0, 2);

                        if (idprivadanewfurc != 'FAILDIFERENTPRICE' && idprivadanewfurc != 'FAILNOALQUILABLE' && idprivadanewfurc != 'FAILBITS' && idprivadanewfurc != 'FAILCOINS' && idprivadanewfurc != 'FALMAXALQUILER' && idprivadanewfurc != 'FAILEMPRESA' && idprivadanewfurc != 'FAILALERYVIP' && idprivadanewfurc != 'CATEGORIA_BLOQUEADA' && idprivadanewfurc != 'REGALOS_BLOQUEADOS' && idprivadanewfurc != 'AGOTADO' && idprivadanewfurc != 'FAILOTERIA' && idprivadanewfurc != 'FALALQUILER' && idprivadanewfurc != 'FAILPRESTAMO' && idprivadanewfurc != 'FAIL' && idprivadanewfurc != 'FAILR' && asdasdca != 'KA' && idprivadanewfurc != 'FAILVISIT' && idprivadanewfurc != 'FAILNOVEN') {


                            var datoEBEBEBfnexx = datoEBEBEBfne.split('::');

                            paracoiupya(datoEBEBEBfnexx[0], 'bolicoins', 'tengo');
                            paracoiupya(datoEBEBEBfnexx[1], 'bolibits', 'tengo');

                            if (este.getAttribute('data-idf') == '155') {//esvip
                                var yvipara = parseInt(datoEBEBEBfnexx[3]);
                                if (yvip != yvipara) {
                                    yvip = yvipara;
                                    //consola.log('dimemydatavip');
                                    katman('dimemydata', 'vip');
                                }
                            }
                            if (pakie == '' || !pakie || datoEBEBEBfnexx[2] == '1') {//actualizo moc
                                if (este.getAttribute('data-a') == 'teleportse' || este.getAttribute('data-idf') == '4010081') cantidad = cantidad * 2;
                                //678
                                if (asca == '1' || datoEBEBEBfnexx[2] == '1') {
                                    //es regalo
                                    este.setAttribute('data-idf', 678);
                                    este.setAttribute('data-a', 'stop');
                                    este.setAttribute('data-nom', 488);
                                    este.setAttribute('data-nomid', 488);
                                    este.setAttribute('data-f', 'png');
                                    este.setAttribute('data-idpt', 'mesa25');
                                    este.setAttribute('data-idpc', '');
                                }
                                if (este.getAttribute('data-idf') != '155' && este.getAttribute('data-idf') != '133')//no es vip ni camara de fotos
                                    var anadopamocc = anadeamoc(este, cantidad, 'agrego');
                            }


                        } else if (idprivadanewfurc == 'FAILNOALQUILABLE') {//nolang
                            winsor('myAle', 'Alerta', iw[77], '', '', '');
                        } else if (idprivadanewfurc == 'FAILDIFERENTPRICE') {//nolang
                            winsor('myAle', 'Alerta', 'El precio de este art√≠culo a cambiado, vuelve abrir el bazar para adquirirlo', '', '', '');
                        } else if (idprivadanewfurc == 'FAILPRESTAMO') {//nolang
                            winsor('myAle', 'Alerta', iw[78] + ' <button class="botoneg" onclick="masfuncs(\'winsor\',\'myprestamos\',\'\',\'\',\'\');">' + iw[88] + '</button>', '', '', '');
                        } else if (idprivadanewfurc == 'FALMAXALQUILER') {
                            winsor('myAle', 'Alerta', iw[79], '', '', '');
                        } else if (idprivadanewfurc == 'FALALQUILER') {
                            winsor('myAle', 'Alerta', iw[80], '', '', '');
                        } else if (idprivadanewfurc == 'AGOTADO') {
                            winsor('myAle', 'Alerta', iw[81], '', '', '');
                        } else if (idprivadanewfurc == 'FAILR') {
                            winsor('myAle', 'Alerta', iw[82], '', '', '');
                        } else if (idprivadanewfurc == 'FAILOTERIA') {
                            winsor('myAle', 'Alerta', iw[83], '', '', '');
                        } else if (idprivadanewfurc == 'FAILEMPRESA') {
                            winsor('myAle', 'Alerta', iw[84], '', '', '');
                        } else if (idprivadanewfurc == 'FAILCOINS') {
                            winsor('myAle', 'Alerta', iw[85], '', '', '');
                        } else if (idprivadanewfurc == 'FAILBITS') {
                            winsor('myAle', 'Alerta', iw[86], '', '', '');
                        } else if(idprivadanewfurc == 'FAILALERYVIP') {
                            winsor('myAle', 'Alerta', 'Ya tienes VIP, espera que acabe el mes.', '', '', '');
                        } else if (idprivadanewfurc == 'CATEGORIA_BLOQUEADA') {
                            winsor('myAle', 'Alerta', 'Actualmente tu cuenta tiene bloqueda la compra en esta categoria.', '', '', '');
                        } else if (idprivadanewfurc == 'REGALOS_BLOQUEADOS') {
                            winsor('myAle', 'Alerta', 'Actualmente tu cuenta tiene bloqueado el envio de regalos.', '', '', '');
                        }
                        else {
                            winsor('myAle', 'Alerta', iw[87], '', '', '');
                        }
                    }
                });
            },
            anadeamoc = function (este, cuantas, accion) {
                var encontrenmocya = 'no';

                if (document.getElementById('akimoc')) {
                    if (document.getElementById('mocua' + este.getAttribute('data-nomid')) && document.getElementById('mochi' + este.getAttribute('data-nomid'))) {
                        var cuantosenmoctenia = document.getElementById('mocua' + este.getAttribute('data-nomid')).innerHTML;

                        cuantosenmoctenia = parseInt(cuantosenmoctenia);
                        if (accion == 'agrego' || accion == 'agregodcambio') {
                            cuantosenmoctenia += cuantas;

                        } else
                            cuantosenmoctenia -= cuantas;
                        encontrenmocya = 'si';

                        //alert('cuantosenmoctenia',cuantosenmoctenia);
                        if (accion != 'recogermiro') {
                            document.getElementById('mocua' + este.getAttribute('data-nomid')).innerHTML = cuantosenmoctenia;
                            if (cuantosenmoctenia <= 0) {
                                encontrenmocya = 'no';
                                document.getElementById('mochi' + este.getAttribute('data-nomid')).className = 'cajafurnis novisible';
                            } else {
                                document.getElementById('mochi' + este.getAttribute('data-nomid')).className = 'cajafurnis';
                            }
                        } else if (cuantosenmoctenia < 0) {
                            encontrenmocya = 'no';
                        }
                    } else if (accion == 'agrego') {

                        //no existe cuadro en mochila
                        //document.getElementById("tituloamigos").className=document.getElementById("tituloamigos").className.replace('transpa','');
                        var ul = document.getElementById("akimoc");

                        var li = document.createElement("div");//nolang

                        //<div class="cajafurnis" id="mochi803" data-a="" '="" data-idf="300000" data-nom="803"
                        //data-nomid="803" data-anim="" data-gir="" data-idpt="mascota" data-idpc=""
                        //data-f="png" data-ienc="" data-ifur="1" data-pxtop="1" data-pxleft="6">
                        //<span id="mocua803">1</span><img src="http://5.145.168.233/fly/i/fursv5/803/300000mini.png"></div>
                        //var boxesff = document.getElementById('akimoc').getElementsByClassName('cajafurnis'),
                        //iff = boxesff.length;
                        //
                        //while(iff--) {
                        //
                        //if(boxesff[iff])
                        //boxesff[iff].onclick = function(){muevomueble(this.id,'si')};
                        //}
                        //  echo '<img data-idem="'.$_SESSION['idempresaloteria'].'"
                        //data-alqui="'.$alquilable.'" src="'+dominiobase+'fly/i/fursv5/'.$furniS['nombre'].'/'.$furniS['id'].'mini.png"
                        //data-a="'.$furniS['accion'].'" data-nomid="'.$furniS['nombre'].'" data-nom="'.$nomfurni.'"
                        // data-des="'.$descrip.'" data-idf="'.$furniS['id'].'" data-idpc="'.$furniS['tengofyaidpcuatro'].'"
                        //  data-acci="'.$furniS['accion'].'" data-pxle="'.round($furniS['pxleft']).'" data-pxto="'.round($furniS['pxtop']).'"
                        //  data-forma="'.$furniS['formato'].'" data-coins="'.$precio.'" data-cat="'.$furniS['cat'].'" class="rca">';
                        //
                        //<div class="cajafurnis" id="mochi803" data-a="" '="" data-idf="300000" data-nom="803"
                        //data-nomid="803" data-anim="" data-gir="" data-idpt="mascota" data-idpc=""
                        //data-f="png" data-ienc="" data-ifur="1" data-pxtop="1" data-pxleft="6">
                        //<span id="mocua803">1</span><img src="http://5.145.168.233/fly/i/fursv5/803/300000mini.png"></div>

                        li.className = 'cajafurnis';
                        li.setAttribute('id', 'mochi' + este.getAttribute('data-nomid'));
                        li.onclick = function () { muevomueble(this.getAttribute('id'), 'si') };
                        li.setAttribute('data-a', este.getAttribute('data-a'));
                        li.setAttribute('data-idf', este.getAttribute('data-idf'));
                        li.setAttribute('data-nom', este.getAttribute('data-nom'));
                        li.setAttribute('data-nomid', este.getAttribute('data-nomid'));
                        li.setAttribute('data-anim', este.getAttribute('data-anim'));
                        li.setAttribute('data-gir', este.getAttribute('data-gir'));
                        li.setAttribute('data-idpt', este.getAttribute('data-idpt'));
                        li.setAttribute('data-idpc', este.getAttribute('data-idpc'));
                        li.setAttribute('data-f', este.getAttribute('data-f'));
                        li.setAttribute('data-ienc', este.getAttribute('data-ienc'));
                        li.setAttribute('data-ifur', este.getAttribute('data-ifur'));
                        li.setAttribute('data-pxtop', este.getAttribute('data-pxtop'));
                        li.setAttribute('data-pxleft', este.getAttribute('data-pxleft'));
                        li.innerHTML = '<span id="mocua' + este.getAttribute('data-nomid') + '">' + cuantas + '</span><img src="' + dominiobase + 'fly/i/fursv5/' + este.getAttribute('data-nomid') + '/' + este.getAttribute('data-idf') + 'mini.png">';
                        if (ul.querySelector('.cajafurnis')) {
                            //////////////consola.log('hay li');
                            ul.insertBefore(li, ul.querySelector('.cajafurnis'));
                            //ul.insertBefore(ul.getElementsByTagName('li')[0]);
                            //ul = ul.getElementsByTagName('li')[0].parentNode.parentNode;
                        } else
                            ul.appendChild(li);

                    }

                    if (accion == 'agrego' || accion == 'agregodcambio') {
                        borrar('mocvacia');
                        //////////consola.log('borro mocvacia');
                    } else {

                        miromocsitavacia();

                    }

                }
                //////////////consola.log('anadeamoc');
                //////////////consola.log(este.getAttribute('data-nomid'));

                return encontrenmocya;
            },
            miromocsitavacia = function () {
                if (document.getElementById("akimoc")) {
                    var cuantascajasfurnvisibles = document.getElementById("akimoc").querySelectorAll('.cajafurnis').length;
                    var cuantascajasfurnnovisibles = document.getElementById("akimoc").querySelectorAll('.novisible').length;
                    cuantascajasfurnvisibles -= cuantascajasfurnnovisibles;

                    //////////consola.log('cuantascajasfurnvisibles '+cuantascajasfurnvisibles);
                    if (cuantascajasfurnvisibles == 0)//nolang
                    {
                        if (!document.getElementById('mocvacia')) {
                            var ula = document.getElementById("akimoc");

                            var ppee = document.createElement("p");
                            ppee.id = 'mocvacia';
                            ppee.align = 'center';//nolang
                            ppee.innerHTML = iw[90] + '<br/><br/>' + iw[89] + '<br/><br/><button class="btnwo" onclick="document.getElementById(\'newbtn_tienda\').click();">' + iw[91] + '</button></p>';
                            ula.appendChild(ppee);
                        }
                    }
                }
            },
            soni = function (soundobj) {

                //consola.log('soni',soundobj);
                if (volum == 'si' && soundobj && soundobj != '') {
                    if (soundobj.substring(0, 2) != '//' && soundobj.substring(0, 4) != 'http') {
                        soundobj = dominiobase + soundobj;
                    }
                    var knumri = 'son' + document.querySelectorAll('span.soni').length + 'i';
                    var audios = document.createElement('span');
                    audios.className = 'soni';
                    audios.id = knumri;
                    audios.innerHTML = '<audio autoplay><source src="' + soundobj + '" type="audio/mpeg"></audio>';
                    document.body.appendChild(audios);

                    //////console.log('soundobj',soundobj);

                    window.setTimeout(borrar, 9000, knumri);

                }
            },
            soni_ev = function (soundobj) {

                //consola.log('soni',soundobj);
                if (volum == 'si' && soundobj && soundobj != '') {
                    if (soundobj.substring(0, 2) != '//' && soundobj.substring(0, 4) != 'http') {
                        soundobj = dominiobase + soundobj;
                    }
                    var knumri = 'son' + document.querySelectorAll('span.soni').length + 'i';
                    var audios = document.createElement('span');
                    audios.className = 'soni';
                    audios.id = knumri;
                    audios.innerHTML = '<audio autoplay><source src="' + soundobj + '" type="audio/mpeg"></audio>';
                    document.body.appendChild(audios);
            
                    // Ajustar el volumen del audio al 50%
                    var audioElement = audios.querySelector('audio');
                    if (audioElement) {
                        audioElement.volume = 0.4;
                    }
            
                    //////console.log('soundobj',soundobj);
            
                    window.setTimeout(borrar, 9000, knumri);
            
                }
            },
            soniv2 = function (soundobj, tiempo) {

                //consola.log('soni',soundobj);
                if (volum == 'si') {

                    if (soundobj.substring(0, 2) != '//' && soundobj.substring(0, 4) != 'http') {
                        soundobj = dominiobase + soundobj;
                    }
                    var knumri = 'son' + document.querySelectorAll('span.soni').length + 'i';
                    var audios = document.createElement('span');
                    audios.className = 'soni';
                    audios.id = knumri;
                    audios.innerHTML = '<audio autoplay><source src="' + soundobj + '" type="audio/mpeg"></audio>';
                    document.body.appendChild(audios);


                    window.setTimeout(borrar, tiempo, knumri);

                }
            },
            vermoca = function () {


                if (!document.getElementById('globomoc')) {
                    borrarclase('globonewmenu');

                    var creodonde = document.getElementById('cabarriaki');
                    var creo = document.createElement('div');
                    creo.id = 'globomoc';
                    creo.className = 'globonewmenu leftmoc';

                    //creo.onmouseenter = function(){
                    //document.onmousemove = function(){}

                    //leftahor = parseInt(document.getElementById('kekoall').style.left.replace('px',''));
                    //};
                    //nolang
                    //<img src="'+dominiobase+'imagesnew/game/coletilla_arri.png" class="coletiarribamoc">
                    creo.innerHTML = '<div class="tituloglobos">' + iw[92] + '</div><div id=\'akimoc\'></div>';//.appendTo('#cabarri')
                    creodonde.appendChild(creo);



                    if (document.getElementById('akimoc')) {
                        document.getElementById('akimoc').innerHTML = '<p align="center"><img src="' + dominiobase + 'imagesnew/game/cargando.gif"></p>';
                        kajax({
                            data: 'mikeka=' + yasoid + '&idi=' + idila,
                            url: 'todoincs/vermoc.php',
                            type: 'get',
                            success: function (response) {
                                if (document.getElementById('akimoc')) {
                                    document.getElementById('akimoc').innerHTML = response;
                                    //cajafurnis
                                    var boxesff = document.getElementById('akimoc').querySelectorAll('.cajafurnis'),
                                        iff = boxesff.length;
                                    if (iff > 0) {
                                        while (iff--) {

                                            if (boxesff[iff])
                                                boxesff[iff].onclick = function () { muevomueble(this.id, 'si') };
                                        }
                                    } else {
                                        //Nolang
                                        miromocsitavacia();
                                        //document.getElementById('akimoc').innerHTML='<p align="center" id="mocvacia">Tu mochila parece estar vacia<br/><br/>¬øTe apetece ir de compras?<br/><br/><button class="btnwo" onclick="document.getElementById(\'newbtn_tienda\').click();">Ir al bazar</button></p>';
                                    }
                                }
                            }
                        });
                    }
                } else if (document.getElementById('globomoc').className == document.getElementById('globomoc').className.replace(' novisible', '')) {
                    //////////////consola.log('oculto');
                    borrarclase('globonewmenu');
                    //document.getElementById('globo'+cual).className = document.getElementById('globo'+cual).className+' novisible';
                } else {
                    //////////////consola.log('muestro');
                    //////////////consola.log(document.getElementById('globo'+cual).className);
                    //////////////consola.log('globonewmenu left'+cual);
                    borrarclase('globonewmenu');
                    document.getElementById('globomoc').classList.remove('novisible');
                }
            },
            verpestana = function (cual) {


                if (!document.getElementById('globo' + cual) || cual == 'busca') {

                    if (cual != 'busca' || cual == 'busca' && !elementExists(document.getElementById('globobusca'))) {
                        borrarclase('globonewmenu');

                        var creodonde = document.getElementById('cabarriaki');
                        var creo = document.createElement('div');
                        creo.id = 'globo' + cual;
                        creo.className = 'globonewmenu left' + cual + ' novisible';

                        //creo.onmouseenter = function(){
                        //document.onmousemove = function(){}

                        //leftahor = parseInt(document.getElementById('kekoall').style.left.replace('px',''));
                        //};
                        //nolang

                        //<img src="'+dominiobase+'imagesnew/game/coletilla_arri.png" class="coletiarriba'+cual+'">
                        if (cual == 'busca')
                            creo.innerHTML = '<div id=\'aki' + cual + '\'></div>';//.appendTo('#cabarri')
                        else
                            creo.innerHTML = '<div id=\'aki' + cual + '\'></div>';//.appendTo('#cabarri')


                        if (cual == 'ajustes') {
                            creodonde.appendChild(creo);
                            //if(creodonde.querySelector('#newbtn_ajustes')){
                            //creodonde.insertBefore(creo, creodonde.querySelector('#newbtn_ajustes'));
                            //}
                        } else
                            creodonde.appendChild(creo);
                    }

                    if (document.getElementById('aki' + cual)) {
                        if (cual != 'busca' && document.getElementById('aki' + cual).innerHTML == '')
                            document.getElementById('aki' + cual).innerHTML = '<p align="center"><img src="' + dominiobase + 'imagesnew/appico3/cargatrans.gif"></p>';

                        if (cual == 'ajustes') {

                            //no
                            var akiajustes = '<ul class="ulcla" style="margin:0;padding:0;">';

                            var nombrecuen = [];
                            if (Object.keys(kekoscuentas).length > 0) {
                                akiajustes += '<li class="nohover defau">Usar Kekocity como:</li>';

                                var sitoyencasa = '';
                                if (yosocas > 0) {
                                    sitoyencasa = '#/h/' + yosocas;
                                }
                                for (var imaggss in kekoscuentas) {
                                    nombrecuen = kekoscuentas[imaggss].split('----MINI----');

                                    if (!nombrecuen[0]) nombrecuen[0] = 'default.png';

                                    akiajustes += '<li onclick="window.location=\'/?aulogin=' + imaggss + sitoyencasa + '\';" style="padding-left:40px;height:15px;padding-top:7px;"> <img src="' + urlperfils + nombrecuen[0] + '" style="cursor: pointer;width:20px;height:20px;margin-top:-4px;margin-left:-26px;position:absolute;"/>' + nombrecuen[1] + '</li>';
                                }
                            }

                            if (videum == 'si')
                                akiajustes += '<li onclick="videoliza(document.getElementById(\'btnvideoo\'))" style="height:25px;padding-top:10px;"><img src="' + dominiobase + 'img/videoon.png" data-volu="si" id="btnvideoo" style="cursor: pointer;margin-left:8px;margin-top:-9px;margin-right:5px;float:left;"/>' + iw[97] + '</li>';
                            else
                                akiajustes += '<li onclick="videoliza(document.getElementById(\'btnvideoo\'))" style="height:25px;padding-top:10px;"><img src="' + dominiobase + 'img/videooff.png" data-volu="no" id="btnvideoo" style="cursor: pointer;margin-left:8px;margin-top:-9px;margin-right:5px;float:left;"/>' + iw[98] + '</li>';

                            if (volum == 'si')
                                akiajustes += '<li onclick="volumiza(document.getElementById(\'btnvoll\'))" style="height:25px;padding-top:10px;"><img src="' + dominiobase + 'img/volumenon.png" data-volu="si" id="btnvoll" style="cursor: pointer;margin-left:15px;margin-top:-5px;margin-right:5px;float:left;"/>' + iw[95] + '</li>';
                            else
                                akiajustes += '<li onclick="volumiza(document.getElementById(\'btnvoll\'))" style="height:25px;padding-top:10px;"><img src="' + dominiobase + 'img/volumenoff.png" data-volu="no" id="btnvoll" style="cursor: pointer;margin-left:15px;margin-top:-5px;margin-right:5px;float:left;"/>' + iw[96] + '</li>';

                            if (posici == 'si')
                                akiajustes += '<li onclick="posiciona(document.getElementById(\'btnposiciona\'))" style="height:25px;padding-top:10px;"><img src="' + dominiobase + 'img/autoposis.png" data-volu="si" id="btnposiciona" style="cursor: pointer;margin-left:15px;margin-top:-5px;margin-right:5px;float:left;"/>' + iw[374] + '</li>';
                            else
                                akiajustes += '<li onclick="posiciona(document.getElementById(\'btnposiciona\'))" style="height:25px;padding-top:10px;"><img src="' + dominiobase + 'img/autoposis.png" data-volu="no" id="btnposiciona" style="cursor: pointer;margin-left:15px;margin-top:-5px;margin-right:5px;float:left;"/>' + iw[375] + '</li>';

                            if (modonolag == 's')
                                akiajustes += '<li onclick="lagiza(document.getElementById(\'btnmodonolag\'))" style="height:25px;padding-top:10px;"><img src="' + dominiobase + 'imagesnew/appico4/silag.png" data-modonolag="s" id="btnmodonolag" style="cursor: pointer;margin-left:15px;margin-top:-4px;margin-right:5px;float:left;"/>' + iw[93] + '</li>';
                            else
                                akiajustes += '<li onclick="lagiza(document.getElementById(\'btnmodonolag\'))" style="height:25px;padding-top:10px;"><img src="' + dominiobase + 'imagesnew/appico4/nolag.png" data-modonolag="n" id="btnmodonolag" style="cursor: pointer;margin-left:15px;margin-top:-4px;margin-right:5px;float:left;"/>' + iw[94] + '</li>';

                            //nolang
                            //akiajustes+='<li onclick="document.getElementById(\'newbtn_coins\').click();void(0);" style="padding:4px 6px 6px 6px;">Recargar coins</li>';

                            //solicitarayuda
                            akiajustes += '<li id="btnayuda2022" style="padding-left: 15px;"><img src="/imagesnew/game/iconocandado.png" class="absolute" style="margin-top:-10px;"><span style="margin-left:25px;">' + iw[29] + '</span></li>';

                            akiajustes += '<li id="btnajustese" style="padding:4px 6px 6px 6px;">' + iw[99] + '</li>';
                            akiajustes += '<li id="btnajulook" style="padding:4px 6px 6px 6px;">' + iw[100] + '</li>';

                            akiajustes += '<li onclick="window.location=\'#/app/createhouse\';" style="padding:4px 6px 6px 6px;">' + iw[101] + '</li>';
                            akiajustes += '<li id="crearempresabb" style="padding:4px 6px 6px 6px;">' + iw[102] + '</li>';

                            akiajustes += '<li onclick="ponavis=\'n\';window.location=\'/?lgout=1\';void(0);" style="padding:4px 6px 6px 6px;">' + iw[103] + '</li>';



                            //akiajustes+='<li id="btnsos" style="padding:4px 6px 6px 6px;">Ayuda</li>';
                            akiajustes += '</ul>';
                            document.getElementById('aki' + cual).innerHTML = akiajustes;

                            document.getElementById('btnayuda2022').onclick = function () {
                                winsor('crearsos', '', '', '', '', '');
                            };
                            document.getElementById('btnajustese').onclick = function () {
                                winsor('myAjustes', iw[104], '', '', '', '');
                            };
                            document.getElementById('btnajulook').onclick = function () {
                                winsor('myLook', iw[105], '', '', '', '');
                            };
                            document.getElementById('crearempresabb').onclick = function () {
                                winsor('crearempresa', 'crearempresa', '', '', '', '');
                            };
                            document.getElementById('globo' + cual).className = document.getElementById('globo' + cual).className.replace(' novisible', '');
                        } else {
                            var mandodall = 'mikeka=' + yasoid + '&idi=' + idila;

                            if (cual == 'busca') {
                                mandodall += '&busc=' + encodeURI(document.getElementById('newbtn_buscatxt').value);
                            }
                            kajax({
                                data: mandodall,
                                url: 'todoincs/ver' + cual + '.php',
                                type: 'get',
                                success: function (response) {

                                    if (document.getElementById('aki' + cual)) {
                                        var obj = JSON.parse(response).katrixdata;

                                        var cabecerahtm = "";
                                        var cualmas = '';
                                        var cualtitulo = '';
                                        if (obj.length > 0) {

                                            //////console.log('length',obj.length);
                                            if (cual == 'busca') {

                                                document.getElementById('globo' + cual).classList.remove('novisible');

                                                cualmas = 'buscac';
                                                cualtitulo = iw[106];//ojoaki nolang
                                                cabecerahtm += "<div class='tituloglobos";
                                                //if(obj.length==0)
                                                cabecerahtm += " novisible";
                                                cabecerahtm += "' id='titulo" + cualmas + "'>" + cualtitulo + "</div>";
                                                cabecerahtm += "<ul class='ulcla' style='font-size:13px;cursor:default;' id='solis" + cualmas + "'></ul>";

                                                cualmas = 'busca1';
                                                cualtitulo = iw[107];//ojoaki nolang
                                                cabecerahtm += "<div class='tituloglobos";
                                                //if(obj.length==0)
                                                cabecerahtm += " novisible";
                                                cabecerahtm += "' id='titulo" + cualmas + "'>" + cualtitulo + "</div>";
                                                cabecerahtm += "<ul class='ulcla' style='font-size:13px;cursor:default;' id='solis" + cualmas + "'></ul>";

                                            }

                                            cabecerahtm += "<div class='tituloglobos";
                                            //if(obj.length==0)
                                            cabecerahtm += " novisible";
                                            cabecerahtm += "' id='titulo" + cual + "'>";
                                            switch (cual) {
                                                case 'amigos':
                                                    cabecerahtm += iw[108];//nolang
                                                    break;
                                                case 'notis':
                                                    cabecerahtm += iw[109];//nolang
                                                    break;
                                                case 'busca':
                                                    cabecerahtm += iw[110];//nolang
                                                    break;
                                            }
                                            cabecerahtm += "</div>";
                                            cabecerahtm += "<ul class='ulcla' style='font-size:13px;cursor:default;' id='solis" + cual + "'></ul>";

                                            document.getElementById('aki' + cual).innerHTML = cabecerahtm;
                                            for (var i = obj.length; i >= 0; i--) {

                                                if (obj[i]) {

                                                    if (cual == 'amigos' || cual == 'notis') {
                                                        try {

                                                            if (obj[i].keko)
                                                                obj[i].keko = replaceAlltodo(decodeURI(obj[i].keko), '+', ' ');
                                                        } catch (e) { }
                                                    }
                                                    recibolista(obj[i]);
                                                }
                                                //////////////consola.log('objeto'+i);
                                                //////////////consola.log(obj[i]);
                                            }
                                        }
                                        //else{
                                        //document.getElementById('globo'+cual).classList.add('novisible');
                                        //}

                                        if (cual == 'notis' && document.getElementById('boli' + cual)) {
                                            bolita(cual, 'resta', parseInt(document.getElementById('boli' + cual).innerHTML));
                                        }
                                        //document.getElementById('aki'+cual).innerHTML=response;
                                        ////botones amigos etc
                                        //var boxesff = document.getElementById('aki'+cual).getElementsByTagName('button'),
                                        //iff = boxesff.length;
                                        //
                                        //while(iff--) {  //si cambia cambiar en recibo
                                        //if(boxesff[iff])
                                        //boxesff[iff].onclick = function(){clickeboton(this)};
                                        //}
                                        if (cual != 'busca' && document.getElementById('globo' + cual)) {
                                            if (obj.length == 0)
                                                document.getElementById('globo' + cual).classList.add('novisible');
                                            else
                                                document.getElementById('globo' + cual).classList.remove('novisible');

                                        }
                                    }
                                }
                            });
                        }
                    }
                } else if (document.getElementById('globo' + cual).className == document.getElementById('globo' + cual).className.replace('novisible', '')) {
                    //////////////consola.log('oculto');
                    //if(cual == 'notis' && document.getElementById('boli'+cual)){
                    //bolita(cual,'resta',parseInt(document.getElementById('boli'+cual).innerHTML));
                    //}
                    //////////////consola.log('oculto solis'+cual);
                    borrarclase('globonewmenu');
                    //document.getElementById('globo'+cual).className = document.getElementById('globo'+cual).className+' novisible';
                } else {
                    //////////////consola.log('muestro solis'+cual);
                    //////////////consola.log(document.getElementById('globo'+cual).className);
                    //////////////consola.log('globonewmenu left'+cual);
                    borrarclase('globonewmenu');
                    if (document.getElementById("solis" + cual) && document.getElementById("solis" + cual).querySelector('li')) {
                        document.getElementById('globo' + cual).classList.remove('novisible');
                        if (cual == 'notis' && document.getElementById('boli' + cual) && parseInt(document.getElementById('boli' + cual).innerHTML) > 0) {
                            //////////////consola.log('leonotifis');
                            katman('leonotifis');
                            bolita(cual, 'resta', parseInt(document.getElementById('boli' + cual).innerHTML));

                        }
                    }
                }
            },
            bolita = function (datipo, acciores, cuantass) {
                if (document.getElementById('boli' + datipo)) {
                    var ahorn = parseInt(document.getElementById('boli' + datipo).innerHTML);
                    cuantass = parseInt(cuantass);
                    if (acciores == 'resta')
                        ahorn -= cuantass;
                    else
                        ahorn += cuantass;

                    if (ahorn > 0) {
                        document.getElementById('boli' + datipo).innerHTML = ahorn;
                        document.getElementById('boli' + datipo).style.display = 'inline';
                        if (datipo != 'notis' && document.getElementById("titulo" + datipo))
                            document.getElementById("titulo" + datipo).className = 'tituloglobos';


                    } else {
                        document.getElementById('boli' + datipo).innerHTML = 0;
                        document.getElementById('boli' + datipo).style.display = 'none';

                        if (datipo != 'notis' && document.getElementById("titulo" + datipo))
                            document.getElementById("titulo" + datipo).className = 'tituloglobos novisible';

                        if (document.getElementById("globo" + datipo) && datipo == 'amigos')
                            document.getElementById("globo" + datipo).className = 'globonewmenu left' + datipo + ' novisible';
                        else if (datipo == 'notis' && document.getElementById("globo" + datipo) && !document.getElementById("globo" + datipo).querySelector('li')) {
                            //no hay notificaciones escondo
                            document.getElementById("globo" + datipo).className = 'globonewmenu left' + datipo + ' novisible';
                        }
                    }
                }
            },
            clickeboton = function (este) {
                if (este) {
                    //////consola.log(este);
                    var datipo = este.getAttribute('data-tipo');
                    var tipobola = datipo;
                    var daacc = este.getAttribute('data-acc');
                    var daid = este.getAttribute('data-id');
                    var dade = este.getAttribute('data-de');
                    switch (datipo) {
                        case 'amigos'://amistad si cambia cambiar en btnamig de clickeko
                            katman('botonamistades', daid, dade, daacc);
                            break;
                        case 'trade'://empezar trade
                            if (daacc == 'si') {

                                katman('cambir', dade);
                                katman('borranot', daid);
                                //katman('cambir',dade);
                                //////consola.log('cambir a idkeko: '+dade);
                            } else {
                                //////consola.log('noti id'+daid);
                                katman('borranot', daid);
                            }
                            tipobola = 'notis';
                            break;
                        case 'invit'://empezar trade
                            if (daacc == 'si') {
                                katman('seguir', dade);
                                katman('borranot', daid);
                                //katman('cambir',dade);
                                //////consola.log('cambir a idkeko: '+dade);
                            } else {
                                //////consola.log('noti id'+daid);
                                katman('borranot', daid);
                            }
                            tipobola = 'notis';
                            break;
                    }
                    if (este && este.parentNode && este.parentNode.parentNode)
                        este.parentNode.parentNode.removeChild(este.parentNode);

                    //if(document.getElementById('cartakekon') && document.getElementById('cartakekon').getAttribute('data-idkekglobo')==daid){
                    //clickeko('','',daid);
                    //}

                    bolita(tipobola, 'resta', 1);
                }
            },
            accionar = function (accionalo, keidp, desdeacc) {
                //
                //if(keidp==0){
                //keidp=clikadolaidp;
                //}
                //keidp=parseInt(keidp);
                //////////consola.log('accionarya keidp'+keidp);

                //console.log('accionalo',accionalo,'  keidp',keidp,'  desdeacc',desdeacc)
                var desdeaccreal = desdeacc;
                if (desdeacc == 'btn') {
                    //moviendokekoall='si';
                    switch (accionalo) {
                        case 'recoger':
                        case 'recogertodos':
                        case 'recogertodostot':
                        case 'mover':
                        case 'play':
                        case 'tv':
                        case 'apagar':
                        case 'apagaryo':
                        case 'abrir':
                        case 'canjear':
                        case 'canjeartodos':
                        case 'vernota':
                        case 'vertrofeo':
                        case 'subirse':
                            gofcasa();
                            break;
                    }
                    desdeacc = '';
                }

                switch (accionalo) {
                    case 'comsste':
                        //consola.log('comprar');

                        var yastaelfurs = kkallaki.querySelector('[data-idp="' + keidp + '"][data-furn="si"]');
                        if (elementExists(yastaelfurs)) {
                            createshop('compra-' + yastaelfurs.getAttribute('data-idf'));
                        }
                        break;
                    case 'comprarloteria':
                        createshop(btncomprarloteria.getAttribute('data-loteriaemmi'));
                        break;
                    case 'publireferidos':
                        winsor('myAjax', 'referidos', iw[334], '560px', 'auto', btnpublireferidos.getAttribute('data-idempresareferidos'));
                        break;
                    case 'verb':
                        winsor('verb', 'verb', 'Ver empresa', '960px', '500px', btnverb.getAttribute('data-idempresaverb'));
                        break;
                    case 'crearempresa':
                    case 'myempresa':
                    case 'myemsolis':
                    case 'myprestamos':
                    case 'myloteria':
                    case 'gestionloteria':
                    case 'gestionprestamos':
                    case 'herramientas':
                        //ventanas empresas
                        winsor(accionalo, accionalo, nombcas.empresa, '', '', '');
                        break;
                    default:
                        if (accionalo == 'camara') {
                            vuifot();
                        }
                        else if (accionalo == 'vernota') {
                            katman('vernota', keidp);
                        }
                        else if (accionalo == 'editarcasa') {
                            winsor('myroom', iw[111] + ' ' + nombcas.nombre, yosocas, '', '', '');//nolang
                        }
                        else if (accionalo == 'mysector') {
                            winsor('mysector', iw[111] + ' ' + nombcas.nombre, yosocas, '', '', '');//nolang
                        }
                        else if (accionalo == 'alquilarparcela') {
                            //todoincs/myparcelav2.php?mikeka='+yasoid+'&idi='+idila+'&yosocas='+yosocas+'&sectory='+nombcas.sectory+'&sectorx='+nombcas.sectorx+'
                            winsor('myAjax', 'myparcelav2', '', '', '', '');//nolangNEW
                        }
                        else if (accionalo == 'vertrofeo') {
                            katman('vertrofeo', keidp);
                        }
                        else if (accionalo == 'solicitempl') {//solicitar empleo

                            if (elementExists(document.getElementById('solicitempl')) && !document.getElementById('solicitempl').disabled) {
                                kajax({
                                    type: "get",
                                    url: "todoincs/empresas_peti.php",
                                    data: "idem=" + nombcas.empresa + "&op=traba&idi=" + idila,
                                    success: function (response) { }
                                });
                                gofcasa();
                                document.getElementById('solicitempl').value = iw[112];
                                document.getElementById('solicitempl').setAttribute("disabled", "disabled");
                                nombcas.descripcion = document.getElementById('descrisele').innerHTML;
                            }
                        }
                        else if (accionalo == 'abandonarempleo') {//solicitar empleo

                            if (elementExists(document.getElementById('abandonarempleo')) && !document.getElementById('abandonarempleo').disabled) {
                                kajax({
                                    type: "get",
                                    url: "todoincs/empresas_peti.php",
                                    data: "idem=" + nombcas.empresa + "&op=trabajadores&ikek=" + yasoid + "&idi=" + idila,
                                    success: function (response) { }
                                });
                                gofcasa();
                                document.getElementById('abandonarempleo').value = iw[113];
                                document.getElementById('abandonarempleo').setAttribute("disabled", "disabled");
                                nombcas.descripcion = document.getElementById('descrisele').innerHTML;
                            }
                        }
                        else if (pmoc == 'no' && accionalo != 'recoger' && accionalo != 'girar' && accionalo != 'recogertodos' && accionalo != 'recogertodostot' && accionalo != 'abrir' && accionalo != 'canjear' || pmoc == 'si' && accionalo != 'recoger' && accionalo != 'recogertodos' && accionalo != 'recogertodostot' && accionalo != 'abrir' || pmoc == 'dueno') {
                            if (keidp > 0) {
                                var yastaelfur = kkallaki.querySelector('[data-idp="' + keidp + '"][data-furn="si"]');
                                if (elementExists(yastaelfur)) {
                                    switch (accionalo) {
                                        case 'subirse':
                                            var cortfuncchectot = ffursidpt['f' + keidp];//yastaelfur.getAttribute('data-idpt');//['f'+keidp];
                                            var theFrame = yastaelfur.getAttribute('data-idf');
                                            if (ffursidpt.indexOf('f' + keidp) >= 0 && cortfuncchectot && cortfuncchectot.substring(0, 4) == 'mesa' && cortfuncchectot != 'mesa23' && cortfuncchectot != 'mesa33'  && cortfuncchectot != 'mesa44' && cortfuncchectot != 'mesa32' && cortfuncchectot != 'mesa36' && cortfuncchectot != 'mesa2' && theFrame != '1003') {
                                                var enelboxsta = cuadroysimultim + 'c' + cuadroxsimultim;
                                                if (ffursidp[enelboxsta] == keidp && !kkallakik.querySelector('[data-box="' + enelboxsta + '"]')) {
                                                    mesaespecial = enelboxsta;
                                                    movigo('', 0);
                                                    //consola.log('subirse'+yastaelfur.getAttribute('data-box')+'cuadroy'+cuadroysimultim+'cuadrox'+cuadroxsimultim);
                                                }
                                            }
                                            break;
                                        case 'play':
                                            var quejueg = '';
                                            var nombrejueg = '';
                                            var theFrames = yastaelfur.getAttribute('data-idf');
                                            switch (theFrames) {
                                                case '400063':
                                                    quejueg = 'ruleta';
                                                    nombrejueg = iw[114];//nolang
                                                    break;
                                                case '4019398':
                                                    quejueg = 'ruleta';
                                                    nombrejueg = iw[114];//nolang
                                                    break;
                                                case '400058':
                                                    quejueg = 'uno';
                                                    nombrejueg = iw[115];//nolang
                                                    break;
                                            }
                                            winsor('myApps', nombrejueg, 'todoincs/playgov2.php?p=' + keidp + '&j=' + quejueg, '', '', '');
                                            break;
                                        case 'person':
                                            winsor('myBot', '', keidp, '', '', '');
                                            break;
                                        case 'cerverusconfig':
                                            winsor('mycerberus', '', keidp, '', '', '');
                                            break;
                                        case 'mover':
                                            if (pmoc != 'dueno' && pmoc != 'si' || pmoc != 'dueno' && kkallaki.querySelector('[data-so="' + keidp + '"]')) {
                                                //nolang
                                                alerta(iw[116]);
                                            } else {
                                                //////////consola.log('muevo mueeble idp'+keidp);
                                                muevomueble(keidp, 'no');
                                            }
                                            break;
                                        case 'configfurn':
                                            winsor('mycronometro', '', keidp, '', '', '');
                                            break;
                                        case 'accionar':
                                            var cojofurni = kkallaki.querySelector('[data-idp="' + keidp + '"]');
                                            if (cojofurni) {
                                                var loanimo = 'n';

                                                if (desdeaccreal == 'btn') {
                                                    var estegrap = graphvacio;
                                                    var kyv = ky;
                                                    var kxv = kx;
                                                    var mstartv = estegrap.nodes[kyv][kxv];
                                                    var mendv = estegrap.nodes[cojofurni.getAttribute('data-y')][cojofurni.getAttribute('data-x')];
                                                    var mresultv = astar.search(estegrap.nodes, mstartv, mendv, true);
                                                    if (mresultv.length <= 1) {
                                                        loanimo = 's';
                                                    }
                                                } else {
                                                    loanimo = 's';
                                                }

                                                if (loanimo == 's') {

                                                    katman('accionarv3', 'accionar', keidp, 1, 1, 1);
                                                    katman('animasolo', keidp);
                                                }

                                            }
                                            break;
                                        case 'canjeartodos':
                                            ////consola.log('accionar palanca keidp'+keidp);


                                            var yalorecojjids = [];
                                            var anadopamocc;
                                            var todosarecoger = kkallaki.querySelectorAll('[data-nomid][data-idpc="exan"]');
                                            if (todosarecoger.length > 0) {
                                                for (var yss = 0; yss < todosarecoger.length; yss++) {
                                                    if (todosarecoger[yss] && !yalorecojjids[todosarecoger[yss].getAttribute('data-idp')]) {
                                                        katman('accionarv3', 'canjear', todosarecoger[yss].getAttribute('data-idp'), 1, 1, 1);
                                                        yalorecojjids[todosarecoger[yss].getAttribute('data-idp')] = 'si';
                                                    }
                                                }
                                            }
                                            break;
                                        case 'canjear':
                                            ////consola.log('accionar palanca keidp'+keidp);
                                            katman('accionarv3', 'canjear', keidp, 1, 1, 1);
                                            break;
                                        case 'girar':
                                            if (kkallaki.querySelector('[data-so="' + keidp + '"]')) {
                                                //nolang
                                                alerta(iw[117]);
                                            } else {
                                                //if(mirosicabeencasillas(clikadolaidp,yastaelfur[0].getAttribute('data-y'),yastaelfur[0].getAttribute('data-x'),yastaelfur[0].getAttribute('data-idpc'))){
                                                if (mirosiNOpuedegirar(yastaelfur.getAttribute('data-y'), yastaelfur.getAttribute('data-x'), yastaelfur)) {
                                                    katman('accionarv3', 'girardoble', keidp, 1, 1, 1);
                                                } else {
                                                    katman('accionarv3', 'girar', keidp, 1, 1, 1);
                                                    //consola.log('si puede girar');
                                                }
                                            }
                                            break;
                                        case 'recogertodostot':

                                            var mirosiestaenca = yosocas;
                                            if (modocity == 'si') {
                                                mirosiestaenca = nombcas.sector;
                                            }

                                            var yalorecojjids = [];
                                            var anadopamocc;
                                            var todosarecoger = kkallaki.querySelectorAll('[data-nomid][data-icas="' + mirosiestaenca + '"]');
                                            if (todosarecoger.length > 0) {
                                                for (var yss = 0; yss < todosarecoger.length; yss++) {
                                                    if (todosarecoger[yss] && !yalorecojjids[todosarecoger[yss].getAttribute('data-idp')]) {
                                                        anadopamocc = anadeamoc(todosarecoger[yss], 1, 'agrego');
                                                        yalorecojjids[todosarecoger[yss].getAttribute('data-idp')] = 'si';
                                                    }
                                                }
                                            }
                                            var idsma = 0;
                                            if (mascos) {
                                                for (var yss in mascos) {
                                                    if (mascos[yss]) {
                                                        idsma = yss.replace('masco', '');
                                                        katman('borramascota', idsma);
                                                    }
                                                }
                                            }
                                            katman('accionarv3', 'recogertodostot', keidp, 1, 1, 1);
                                            break;
                                        case 'girartodos':

                                            var mirosiestaenca = yosocas;
                                            if (modocity == 'si') {
                                                mirosiestaenca = nombcas.sector;
                                            }
                                            var reconomid = yastaelfur.getAttribute('data-idf');
                                            var yalorecojjids = [];

                                            var todosarecoger = kkallaki.querySelectorAll('[data-idf="' + reconomid + '"][data-icas="' + mirosiestaenca + '"]');
                                            if (todosarecoger.length > 0) {
                                                var avisoderec = 'gi';
                                                for (var yss = 0; yss < todosarecoger.length; yss++) {
                                                    if (todosarecoger[yss] && !yalorecojjids[todosarecoger[yss].getAttribute('data-idp')]) {
                                                        yalorecojjids[todosarecoger[yss].getAttribute('data-idp')] = 'si';
                                                        if (yss >= (todosarecoger.length - 2) && avisoderec == 'recogertodos') avisoderec = '';
                                                        accionar('girar', todosarecoger[yss].getAttribute('data-idp'), avisoderec);
                                                    }
                                                }
                                            }
                                            break;
                                        case 'recogertodos':
                                            var mirosiestaenca = yosocas;
                                            if (modocity == 'si') {
                                                mirosiestaenca = nombcas.sector;
                                            }
                                            var reconomid = yastaelfur.getAttribute('data-nomid');
                                            var yalorecojjids = [];
                                            var todosarecoger = kkallaki.querySelectorAll('[data-nomid="' + reconomid + '"][data-icas="' + mirosiestaenca + '"]');
                                            if (todosarecoger.length > 0) {
                                                var avisoderec = 'recogertodos';
                                                for (var yss = 0; yss < todosarecoger.length; yss++) {
                                                    if (todosarecoger[yss] && !yalorecojjids[todosarecoger[yss].getAttribute('data-idp')]) {
                                                        yalorecojjids[todosarecoger[yss].getAttribute('data-idp')] = 'si';
                                                        if (yss >= (todosarecoger.length - 2) && avisoderec == 'recogertodos') avisoderec = '';
                                                        else if (avisoderec == '') avisoderec = 'recogertodos';
                                                        accionar('recoger', todosarecoger[yss].getAttribute('data-idp'), avisoderec);
                                                    }
                                                }
                                            }
                                            break;
                                        case 'abrir':

                                            var alturamesasuelto = yastaelfur.getAttribute('data-alt');
                                            alturamesasuelto = parseInt(alturamesasuelto);

                                            var sobreelmuebles_ya = kkallaki.querySelectorAll('[data-so="' + keidp + '"]');
                                            if (sobreelmuebles_ya.length > 0) {
                                                if (yastaelfur.getAttribute('data-idpt') != '' && yastaelfur.getAttribute('data-idpt').substr(0, 4) == 'mesa') {
                                                    alturamesasuelto += parseInt(yastaelfur.getAttribute('data-idpt').replace('mesa', ''));
                                                }

                                                if (alturamesasuelto > 0) {
                                                    //sobreelmuebles_ya=kkallaki.querySelectorAll('[data-so="'+keidp+'"]');
                                                    if (sobreelmuebles_ya.length > 0) {
                                                        var idpbaj = 0;
                                                        var idpbajs = [];
                                                        for (var y = 0; y < sobreelmuebles_ya.length; y++) {
                                                            idpbaj = sobreelmuebles_ya[y].getAttribute('data-idp');
                                                            if (idpbaj && !idpbajs[idpbaj]) {
                                                                idpbajs[idpbaj] = 1;
                                                                ////////consola.log((idpbaj+'sumo'+alturamesasuelto);
                                                                katman('faltur', idpbaj, alturamesasuelto);
                                                                //////////consola.log(('habia idp sobre elquesuelto'+idpbaj+'sumoalturamesa'+alturamesasuelto);
                                                            }
                                                        }
                                                    }
                                                }
                                            }

                                            katman('accionarv3', 'abrir', keidp, 1, 1, 1);

                                            break;
                                        case 'recoger':

                                            var alturamesasuelto = yastaelfur.getAttribute('data-alt');
                                            alturamesasuelto = parseInt(alturamesasuelto);

                                            var sobreelmuebles_ya = kkallaki.querySelectorAll('[data-so="' + keidp + '"]');
                                            if (sobreelmuebles_ya.length > 0) {
                                                if (yastaelfur.getAttribute('data-idpt') != '' && yastaelfur.getAttribute('data-idpt').substr(0, 4) == 'mesa') {
                                                    alturamesasuelto += parseInt(yastaelfur.getAttribute('data-idpt').replace('mesa', ''));
                                                }

                                                if (alturamesasuelto > 0) {
                                                    //sobreelmuebles_ya=kkallaki.querySelectorAll('[data-so="'+keidp+'"]');
                                                    if (sobreelmuebles_ya.length > 0) {
                                                        var idpbaj = 0;
                                                        var idpbajs = [];
                                                        for (var y = 0; y < sobreelmuebles_ya.length; y++) {
                                                            idpbaj = sobreelmuebles_ya[y].getAttribute('data-idp');
                                                            if (idpbaj && !idpbajs[idpbaj]) {
                                                                idpbajs[idpbaj] = 1;
                                                                ////////consola.log((idpbaj+'sumo'+alturamesasuelto);
                                                                katman('faltur', idpbaj, alturamesasuelto);
                                                                //////////consola.log(('habia idp sobre elquesuelto'+idpbaj+'sumoalturamesa'+alturamesasuelto);
                                                            }
                                                        }
                                                    }
                                                }
                                            }

                                            if (document.getElementById('masco' + keidp)) {
                                                katman('borramascota', keidp);
                                            }

                                            katman('accionarv3', 'recoger', keidp, 1, 1, 1);

                                            if (yastaelfur && document.getElementById('akimoc')) {


                                                var anadopamocc = anadeamoc(yastaelfur, 1, 'agrego');
                                                //var encontrenmoc='no';
                                                //if(document.getElementById('mocua'+yastaelfur[0].getAttribute('data-nomid')) && document.getElementById('mochi'+yastaelfur[0].getAttribute('data-nomid'))){
                                                //var cuantosenmoctenia=document.getElementById('mocua'+yastaelfur[0].getAttribute('data-nomid')).innerHTML;
                                                //cuantosenmoctenia++;
                                                //encontrenmoc='si';
                                                //document.getElementById('mochi'+yastaelfur[0].getAttribute('data-nomid')).style.display='inline';
                                                //document.getElementById('mocua'+yastaelfur[0].getAttribute('data-nomid')).innerHTML=cuantosenmoctenia;
                                                //}
                                                //if(encontrenmoc=='no' && desdeacc != 'recogertodos'){
                                                //window.setTimeout(vermoca,300);window.setTimeout(vermoca,301);
                                                //}

                                            }
                                            break;
                                        case 'animar':
                                            if (kkallaki.querySelector('[data-so="' + keidp + '"]')) {
                                                //nolang
                                                alerta(iw[118]);
                                                //alerta('no puedes animarlo porque hay algo sobre √©l, recoge antes lo que haya encima de este mueble');
                                            } else {
                                                var cojofurni = kkallaki.querySelector('[data-idp="' + keidp + '"]');
                                                if (elementExists(cojofurni)) {
                                                    var esnomid = cojofurni.getAttribute('data-nomid');
                                                    var loanimo = 'n';
                                                    if (esnomid == '1009') {//es dado

                                                        var estegrap = graphvacio;
                                                        var kyv = ky;
                                                        var kxv = kx;
                                                        var mstartv = estegrap.nodes[kyv][kxv];
                                                        var mendv = estegrap.nodes[cojofurni.getAttribute('data-y')][cojofurni.getAttribute('data-x')];
                                                        var mresultv = astar.search(estegrap.nodes, mstartv, mendv, true);
                                                        if (mresultv.length <= 1) {
                                                            loanimo = 's';
                                                        }
                                                    } else if (esnomid == '10445' || esnomid == '1052' || esnomid == '1892' || esnomid == '343' || esnomid == '1093' || esnomid == '1571' || esnomid == '1922' || esnomid == '2040' || esnomid == '2138') {
                                                        //es kekomove o es puerta
                                                        if (pmoc == 'no')
                                                            loanimo = 'n';
                                                        else
                                                            loanimo = 's';
                                                    } else {
                                                        loanimo = 's';
                                                    }

                                                    if (loanimo == 's')
                                                        katman('accionarv3', 'animar', keidp, 1, 1, 1);

                                                }
                                            }
                                            //consola.log('giro idp'+clikadolaidp);
                                            break;
                                        case 'tv':
                                            winsor('mytv', iw[119], '', keidp, '', '');//nolang
                                            break;
                                        case 'apagar':
                                            katman('apagotv', keidp);
                                            direcpam(iw[120]);
                                            break;
                                        case 'apagaryo':
                                            borrarclase('tvyog'); borrarclase('tvyogd');
                                            borrarclase('tvyogm'); borrarclase('tvyogdm');
                                            borrarclase('tvyogmega'); borrarclase('tvyogdmega');
                                            break;
                                    }


                                }
                            }
                        }

                    // TENGOCLICADO=null;
                    //TENGOCLICADOtipo=null;
                    //TENGOCLICADODATA={};
                    //nombreblanhbb.innerText = nombcas.nombre;
                    //document.getElementById('blanhbbFLOAT').classList.add('novisible');
                }
            },
            trompaoz = function (asdasa, babdasa, taamoisa) {
                var asdasai = asdasa;
                var esiniciobo = 'n';
                //asdasa = parseInt(asdasa);
                //babdasa = babdasa;
                var ployyee = ployy;
                var ploxxee = ploxx;
                if (enboxyinicial == asdasa && enboxxinicial == babdasa) {

                    if (enboxyinicial != 31 || enboxxinicial != 8)
                        esiniciobo = 's';
                    //consola.log('inicio')
                }
                //consola.log('enboxyinicial',enboxyinicial,'c',enboxxinicial);
                //consola.log('snboxyinicial',asdasa,'c',babdasa);

                if (taamoisa != '') {
                    asdasa -= mirployy;
                    babdasa -= mirploxx;
                }
                var LEFpalEncima = 0;
                var restarealLEF = babdasa;
                restarealLEF = restarealLEF * 36;
                LEFpalEncima += restarealLEF;

                var restarealLETF = asdasa;
                restarealLETF = restarealLETF * 36;
                LEFpalEncima += restarealLETF;

                var TOPpalEncima = 522;
                if (modocity == 'si') TOPpalEncima = 0;
                var restarealTop = babdasa;
                restarealTop = restarealTop * 18;
                TOPpalEncima -= restarealTop;

                var restarealToXp = asdasa;
                restarealToXp = restarealToXp * 18;
                TOPpalEncima += restarealToXp;
                if (taamoisa == 't') {
                    LEFpalEncima -= 10;
                    TOPpalEncima -= 80;
                }
                var tnnhy = 400;
                if (modocity == 'si') {
                    tnnhy = 2000;
                }
                ////consola.log('ployy',ployy,'ploxx',ploxx);
                if (ployyee == 31 && ploxxee == 9) {
                    tnnhy += 50;
                }
                if (mirployy == -8 && mirploxx == -9 && babdasa > 15) {
                    //if(taamoisa != 'f'){
                    LEFpalEncima -= 252;//casa de 2 plantas
                    TOPpalEncima -= 144;
                    //}
                    ////consola.log('casa de 2 plantas');
                    tnnhy += 600;
                    //////consola.log('trompa '+asdasa+'c'+babdasa);
                }

                //consola.log('ployyee',ployyee,' ploxxee',ploxxee,' asdasa',asdasa,' babdasa',babdasa);
                if (ployyee == 23 && ploxxee == 21) {
                    if (asdasa > 10 && babdasa == 18) {
                        //if(cuadroy > 6 && cuadrox == 8){
                        TOPpalEncima -= 80;
                        TOPpalEncima += (asdasa * 8);
                        //}
                    }
                    else if (asdasa > 10 && babdasa < 20) {
                        TOPpalEncima += 136;
                    }
                }
                //casa alargada \
                if (ployyee == 21 && ploxxee == 9 && asdasa > 9 && babdasa < 16) {
                    TOPpalEncima += 10;
                }

                tnnhy += asdasa * 4;
                tnnhy -= babdasa * 4;
                if (esiniciobo == 's') {
                    tnnhy = 15;
                }
                //tnnhy=parseInt(tnnhy);
                var devvss = { etop: TOPpalEncima, eleft: LEFpalEncima, ezindex: tnnhy };
                return devvss;
                //return LEFpalEncima;
            },
            subeburbs = function () {
                var burbujas = akiburbujastdd.querySelectorAll('div.mibuba');
            
                let alturaEspacio = 8; // espacio entre burbujas
            
                // Recorremos de abajo hacia arriba
                for (let i = burbujas.length - 1; i >= 0; i--) {
                    let burbuja = burbujas[i];
            
                    // Si es la √∫ltima, no la movemos a√∫n
                    if (i === burbujas.length - 1) {
                        let top = parseInt(burbuja.style.top) || 220;
                        burbuja.style.top = top + 'px';
                        burbuja.setAttribute('data-palame', top);
                    } else {
                        // La burbuja siguiente (m√°s nueva)
                        let burbujaDebajo = burbujas[i + 1];
                        let topDebajo = parseInt(burbujaDebajo.getAttribute('data-palame')) || 0;
                        let alturaDebajo = burbujaDebajo.offsetHeight;
            
                        // Nueva posici√≥n: encima de la burbuja siguiente
                        let nuevoTop = topDebajo - alturaDebajo - alturaEspacio;
            
                        // Eliminar si est√° fuera de rango
                        if (nuevoTop <= 35) {
                            burbuja.parentNode.removeChild(burbuja);
                        } else {
                            burbuja.style.top = nuevoTop + 'px';
                            burbuja.setAttribute('data-palame', nuevoTop);
                        }
                    }
                }
            },
            
            subeburbstots = function () {
                subeburbs();
            },
            vuifot = function () {

                var mifokaaho = fok;
                var akiffurs = ffurs[ky + 'c' + kx];

                if (akiffurs != 'nada' && miart != 10 && !elementExists(document.getElementById('myfoto'))) {
                    winsor('myfoto', '', '', '', '', '');
                    maccion = 'inger';
                    miart = 10;
                    controlmia();
                } else {
                    maccion = '';
                    miart = '';
                    borrar('myfoto');
                    controlmia();
                    //katman('golabelnew', mifokaaho,'');
                }
            },
            vuifotfestival = function () {
                //if(vextr['cargf'] == null){
                //
                //cargascript('todoincs/ncal5.js','ncal',function(){
                //vextr['cargf'] = 's';
                //vuifotfestivalya();});
                //kajax({
                //  type: "get",
                //  data: "na=nas",
                //  url: 'js/ncal2.js',
                //  success: function (response) {
                //  eval(response);
                //vextr['cargf'] = 's';
                //vuifotfestivalya();
                //}});

                //}else{
                vuifotfestivalya();
                //}
            },
            yafotorende = function (canvas) {
                //$('.tvyog,.tvyogd,.tvyogm,.tvyogdm,#blanhbb,#akiburbujas,.winsor,#abajo,.webcamm').css("display","");

                if (elementExists(document.getElementById('myfoto'))) {
                    var kinle = document.getElementById('myfoto').style.left;
                    var kinto = document.getElementById('myfoto').style.top;
                    kajax({
                        data: "soyid=" + yasoid + '&kinle=' + kinle + '&kinto=' + kinto + '&idi=' + idila + '&dato=' + canvas.toDataURL("image/png"),
                        url: 'todoincs/hagofotov2.php',
                        type: 'post',
                        success: function (response) {
                            borrar('floatpafot');
                            if (elementExists(document.getElementById('myfoto'))) {
                                borrar('floatpafot');
                                //if($("#myfoto").length == 1){
                                document.getElementById('myfoto').style.width = '550px';
                                document.getElementById('myfoto').style.height = '320px';
                                document.getElementById('myfoto').style.background = '';
                                //$("#myfoto").css({'background':'','width':'550px','height':'270px'});

                                borrar('btnfotya');
                                //if($('#btnfotya').length == 1)$('#btnfotya').remove();
                                document.getElementById('myfoto').querySelector('div').innerHTML = response;
                                //$("#myfoto > div:first").html(response);
                                if (elementExists(document.getElementById('damfot'))) {
                                    document.getElementById('damfot').onclick = function () {
                                        creafoto(document.getElementById('kefect').value, document.getElementById('knot').value, document.getElementById('damfot').getAttribute('data-fil'));
                                    };
                                }
                                if (elementExists(document.getElementById('novuifo'))) {
                                    document.getElementById('novuifo').onclick = function () {
                                        vuifot();
                                    };
                                }

                                //$("#novuifo").click(function(){
                                //kf.vuifot();
                                //});
                            }
                        }
                    });
                }
            },
            vuifotfestivalya = function () {
                if (elementExists(document.getElementById('myfoto'))) {
                    var kinle = document.getElementById('myfoto').style.left;
                    var kinto = document.getElementById('myfoto').style.top;

                    borrar('floatpafot');
                    borrar('floatpafotd');
                    if (document.getElementById('btnfotya')) {
                        document.getElementById('btnfotya').innerHTML = iw[123];
                        document.getElementById('btnfotya').setAttribute('disabled', true);
                    }

                    var creo = document.createElement('div');
                    creo.id = "floatpafot";
                    creo.style.position = 'fixed';
                    creo.style.top = '0px';
                    creo.style.left = '0px';
                    creo.style.width = '100%';
                    creo.style.height = '100%';
                    creo.style.minWidth = '100%';
                    creo.style.minHeight = '100%';
                    creo.style.background = '#000';
                    creo.style.zIndex = '-1';
                    document.body.appendChild(creo);

                    var creod = document.createElement('iframe');
                    creod.id = "floatpafotd";
                    creod.src = '/ifracam.php';
                    creod.className = 'transpa';
                    document.body.appendChild(creod);

                    //<div id="floatpafot" style="position:fixed;top:0px;left:0px;width:100%;
                    //height:100%;min-width:100%;min-height:100%;background:#000;z-index:-1;">
                    //$('');
                    //$('<div id="floatpafot" style="position:fixed;top:0px;left:0px;width:100%;height:100%;min-width:100%;min-height:100%;background:#000;z-index:-1;"></div>').appendTo('body');
                    //document.('.tvyog,.tvyogd,.tvyogm,.tvyogdm,#blanhbb,#akiburbujas,.winsor,#abajo,.webcamm').css("display","none");
                    //$('.tvyog,.tvyogd,.tvyogm,.tvyogdm,#blanhbb,#akiburbujas,.winsor,#abajo,.webcamm').css("display","none");
                    //$('#btnfotya').html(idinew[102]).attr("disabled","disabled");


                }
            },
            creafoto = function (lefect, lnota, lfile) {
                vuifot();
                kajax({
                    data: "soyid=" + yasoid + "&lefect=" + lefect + "&lnota=" + lnota + "&lfile=" + lfile + "&idi=" + idila,
                    url: 'todoincs/hagofotoya.php',
                    type: 'post',
                    success: function (response) {
                        borrar('globomoc');
                    }
                });
            },
            creaparedpng = function (tipos, numerosuelo, cuadrosy, cuadrosx, posicionpared) {

                if (numerosuelo != 8) {
                    var numerodesueloreal = numerosuelo;

                    if (numerosuelo < 10) numerosuelo = 10;

                    if (posicionpared == 'da')
                        numerosuelo = '2-' + numerosuelo + '.png';
                    else
                        numerosuelo = '-' + numerosuelo + '.png';

                    var estecuadroy = 0;
                    var estecuadrox = 0;
                    var left = 0;
                    var top = 0;
                    var lefty = 0;
                    var topy = 0;
                    var ytotal = 0;
                    var xtotal = 0;
                    var cuadrosyreal = cuadrosy;
                    var sinpuerta = '';
                    var topeste = 0;
                    var lefteste = 0;
                    var estecuadrox = 0;
                    cuadrosx++;
                    var canvas, context;

                    if (tipos == 'salaextranormal') {
                        if (!document.getElementById("paredsalaextranormal" + posicionpared)) {

                            var sueloabajoss = document.createElement('canvas');
                            sueloabajoss.id = "paredsalaextranormal" + posicionpared;
                            kkallaki.appendChild(sueloabajoss);
                        }
                        canvas = document.getElementById("paredsalaextranormal" + posicionpared);
                    }
                    else if (tipos == 'arriba') {
                        if (!document.getElementById("paredarriba" + posicionpared)) {

                            var sueloabajoss = document.createElement('canvas');
                            sueloabajoss.id = "paredarriba" + posicionpared;
                            kkallaki.appendChild(sueloabajoss);
                        }
                        canvas = document.getElementById("paredarriba" + posicionpared);
                    } else {
                        canvas = document.getElementById("paredcasa" + posicionpared);
                    }

                    if (elementExists(canvas)) {
                        var image = new Image();
                        context = canvas.getContext('2d');
                        var ponsaporta = 'sip';

                        image.onload = function () {
                            ////consola.log('imageonload creaparedpng'+image.src);
                            if (cuadrosy == 1 && cuadrosx > 1) {
                                cuadrosy = 0;
                                sinpuerta = 'sin';
                            }

                            if (cuadrosy == 17 && cuadrosx == 1 && posicionpared == 'da') {
                                cuadrosy--;//casa de 2 plantas derecha
                            }
                            var cuadrosycreo = cuadrosy;
                            var cuadrosxcreo = cuadrosx;
                            var cuadrosyempiezo = 1;
                            var cuadrosxempiezo = 1;

                            if (tipos == 'arriba') {
                                sinpuerta = 'sin';
                            }
                            if (posicionpared == 'ia' && ployy == 13 && ploxx == 23) {
                                sinpuerta = 'sin';
                                cuadrosyempiezo = 2;
                                cuadrosxempiezo = 2;
                                //consola.log('sin puerta a la izquierda casa con escaleras');
                            }
                            if (posicionpared == 'da' && ployy == 13 && ploxx == 23) {
                                //if(cuadrosy == 12 && cuadrosx == 24){//casa alargada /
                                //consola.log('puerta a la derecha casa con escaleras');
                                sinpuerta = 'puertaderecha';
                                cuadrosxempiezo = 1;
                                cuadrosyempiezo = 1;
                            }

                            //consola.log('creaparedpng '+cuadrosy+'c'+cuadrosx+' posicionpared'+posicionpared+' cuadrosxempiezo'+cuadrosxempiezo);



                            left = (cuadrosx * 36);
                            left -= 36;//izquierda inicial

                            ytotal = (cuadrosx * 18);//alto
                            ytotal += 35;
                            ytotal += cuadrosx;


                            ytotal = (cuadrosx * 18);//anncho
                            ytotal += (cuadrosy * 18);//anncho
                            ytotal += 44;
                            ytotal -= 18;

                            ytotal += 100;
                            //$ytotal+=300;

                            xtotal = (cuadrosx * 36);//anncho
                            xtotal += (cuadrosy * 36);//anncho
                            xtotal += 35;
                            //$xtotal+=36;
                            //$xtotal+=$left;

                            //$xtotal-=$left;
                            //$ytotal=1000;
                            //creo cuadro transparente
                            canvas.width = xtotal;
                            canvas.height = ytotal
                            //$image = imagecreatetruecolor($xtotal, $ytotal);imagealphablending($image, false);
                            //$col=imagecolorallocatealpha($image,255,255,255,127);
                            //imagefilledrectangle($image,0,0,$xtotal, $ytotal,$col);imagealphablending($image,true);
                            //imagesavealpha($image,true);

                            //imagen del suelo a copiar
                            //$im = imagecreatefrompng($imagen.'.png');$x = imagesx($im);$y = imagesy($im);

                            top = 0;//top inicial

                            //
                            //consola.log('creaparedpng '+cuadrosy+'c'+cuadrosx+' posicionpared'+posicionpared);
                            for (var cuadrox = 1; cuadrox <= cuadrosx; cuadrox++) {
                                //consola.log('22creaparedpng '+'c'+cuadrox+' vs'+cuadrosxempiezo+' posicionpared'+posicionpared);
                                if (cuadrox >= cuadrosxempiezo && sinpuerta != 'puertaderecha' || cuadrox > cuadrosxempiezo && sinpuerta == 'puertaderecha') {
                                    if (cuadrosy == 4 && cuadrosx == 1) {//escenario abajo derecha encima

                                        //imagecopy($image,$im,$left,$top,0,0,$x,$y);
                                        if (numerodesueloreal > 9)
                                            context.drawImage(image, left, top);
                                    }
                                    else if (posicionpared == 'ia' && cuadrox == (cuadrosx - 2) && sinpuerta == '') {


                                        //////console.log('sunouerta cuadrox',cuadroy,'c',cuadrox);
                                        if (cuadroy == 1 && cuadrox == 12) {
                                            if (numerodesueloreal > 9)
                                                context.drawImage(image, left, top);
                                        }
                                        ponsaporta = 'sip';
                                        //context.drawImage(image,left,top,image.width,image.height);
                                        //consola.log('puerta');
                                        //rompaoz(22,23,'f');
                                    } else {

                                        if (cuadrosy == 0 && cuadrosx == 16) {//casamini

                                            topeste = top;
                                            lefteste = left;
                                            if (cuadrox > 12 && cuadrox > 1 || cuadrox <= 14 && cuadrox > 1) { //pared <-- izquierda abajo y planta superior izquierda
                                                if (cuadrox <= 12) {
                                                    topeste += 18;
                                                    lefteste += 36;
                                                }
                                                if (numerodesueloreal > 9)
                                                    context.drawImage(image, lefteste, topeste);


                                                //imagecopy($image,$im,$lefteste,$topeste,0,0,$x,$y);//cuadro rojo /

                                            }
                                        } else if (cuadrosy == 0 && cuadrosx == 18) {//escenario

                                            topeste = top;
                                            if (cuadrox > 10 || cuadrox <= 4) { //pared <-- izquierda abajo y planta superior izquierda
                                                if (cuadrox <= 5) {
                                                    topeste += 72;
                                                }
                                                if (numerodesueloreal >= 10)
                                                    context.drawImage(image, left, topeste);
                                                //imagecopy($image,$im,$left,$topeste,0,0,$x,$y);//cuadro rojo /

                                            }
                                        } else {

                                            //////console.log('cuadrox',cuadrox,' cuadrosy',cuadrosy,' cuadrosx',cuadrosx,' posicionpared',posicionpared,' tipos',tipos);

                                            if (numerodesueloreal >= 10) {

                                                if (cuadrox != 14 && cuadrosy == 0 && cuadrosx == 14 || cuadrosy != 0 || cuadrosx != 14)
                                                    context.drawImage(image, left, top);
                                            }
                                            //imagecopy($image,$im,$left,$top,0,0,$x,$y);//cuadro rojo /
                                        }
                                    }
                                }
                                topy = top;
                                lefty = left;
                                top += 18; left -= 36;
                                for (var cuadroy = 1; cuadroy <= cuadrosy; cuadroy++) {
                                    topy += 18; lefty += 36; estecuadroy++;
                                    if (cuadrox >= cuadrosxempiezo && cuadroy >= cuadrosyempiezo) {
                                        //sinpuerta == 'puertaderecha' && posicionpared == 'da' ||
                                        if (sinpuerta == 'puertaderecha' && posicionpared == 'da' || posicionpared == 'da' && cuadroy < cuadrosy || cuadrosy == 8 && cuadrosx == 1 && cuadroy < cuadrosy || posicionpared != 'da') {

                                            //consola.log('ployy',ployy,'ploxx',ploxx);
                                            if (posicionpared == 'da' && cuadroy >= (cuadrosy - 2) && sinpuerta == 'puertaderecha') {

                                                ponsaporta = 'si';
                                                //context.drawImage(image,left,top,image.width,image.height);
                                                //consola.log('puerta derecha casa con escaleras');
                                                //rompaoz(22,23,'f');
                                            }
                                            else if (cuadrosy == 0 && cuadrosx == 16) {//casa mini
                                                ponsaporta = 'na';
                                                //if($cuadroy < 4)
                                                //imagecopy($image,$im,$lefty,$topy,0,0,$x,$y);

                                            } else if (cuadrosy == 0 && cuadrosx == 18) {//escenario
                                                if (cuadroy < 4 && numerodesueloreal >= 10)
                                                    context.drawImage(image, lefty, topy);
                                                //imagecopy($image,$im,$lefty,$topy,0,0,$x,$y);

                                            } else if (cuadrosy == 19 && cuadrosx == 1) {//escenario derecha piso abajo
                                                if (cuadroy <= 6 && numerodesueloreal >= 10)
                                                    context.drawImage(image, lefty, topy);
                                                //imagecopy($image,$im,$lefty,$topy,0,0,$x,$y);
                                                if (cuadroy == 7 && numerodesueloreal >= 10) {//bloque cortado centro
                                                    context.drawImage(image, lefty, topy);
                                                    //context.drawImage(image,(lefty-19),(topy-5),image.width,image.height);
                                                    //imagecopy($image,$im,($lefty-19),($topy-5),10,10,$x,$y);
                                                }

                                            } else if (numerodesueloreal >= 10) {
                                                context.drawImage(image, lefty, topy);
                                                //imagecopy($image,$im,$lefty,$topy,0,0,$x,$y);


                                            }
                                        } else if (cuadrosy != 8 || cuadrosx != 1) {
                                            if (numerodesueloreal >= 10)
                                                context.drawImage(image, (lefty - 28), (topy - 14));
                                            //context.drawImage(image,lefty,(topy-14),28,0);
                                            //imagecopy($image,$im,$lefty,($topy-14),28,0,($x-28),$y);
                                        }

                                    }
                                }
                            }

                            //imagepng($image,$nombrearchivo);
                            //imagepng($image,"i/s4/2p$numerosuelo.$cuadrosyreal.$cuadrosx.$posicionpared.png",0);
                            //imagedestroy($image);
                            //imagedestroy($im);

                        };
                        image.src = dominiobase + 'fly/i/suelosv5/pared' + numerosuelo;
                    }
                }
            },
            direcpam = function (quedigoo) {
                katman('pama', micoli, quedigoo, 0);
            },
            creasuelopng = function (tipos, numerosuelo, cuadrosy, cuadrosx) {
                if (numerosuelo != 8) {
                    //consola.log('creasuelopng');
                    var estecuadroy = 0;
                    var estecuadrox = 0;
                    var numerosueloreal = numerosuelo;
                    if (numerosuelo < 10) numerosuelo = 10;
                    //inicio creo suelo
                    var canvas, context;

                    var margentopsuelog = (18 * (30 - cuadrosy));
                    var margenleftsuelog = (36 * (30 - cuadrosx));
                    margenleftsuelog -= 36;
                    margentopsuelog += 18;

                    cuadrosy--;
                    cuadrosx++;

                    //consola.log('cuadrosy',cuadrosy,' cuadrosx',cuadrosx);
                    if (cuadrosy == 30 && cuadrosx == 10) {
                        margenleftsuelog -= (cuadrosx * 36);
                        margentopsuelog += (cuadrosx * 18);
                    }
                    if (cuadrosy == 20 && cuadrosx == 10) {
                        margenleftsuelog -= (cuadrosx * 18);
                        margentopsuelog += (cuadrosx * 18);
                        margentopsuelog -= 90;
                    }
                    if (cuadrosy == 12 && cuadrosx == 24) {
                        //margenleftsuelog-=(cuadrosx*18);
                        //margentopsuelog+=(cuadrosx*18);
                        margentopsuelog -= 108;
                        margenleftsuelog += 216;
                    }
                    //margentopsuelog-=522;

                    ////consola.log('creasuelopng cuadrosy'+cuadrosy+' cuadrosx'+cuadrosx);

                    document.getElementById("paredcasaia").style.left = (margenleftsuelog - 7) + 'px';
                    document.getElementById("paredcasaia").style.top = (margentopsuelog - 109) + 'px';

                    document.getElementById("paredcasada").style.left = (((margenleftsuelog - 7) + (36 * cuadrosx)) - 2) + 'px';
                    //document.getElementById("paredcasada").style.left=((margenleftsuelog-7)+(36*cuadrosx))+'px';

                    //casa de 3 hab

                    if (cuadrosy == 12 && cuadrosx == 24) {//casa alargada /
                        //consola.log('alarga2');
                        document.getElementById("paredcasada").style.top = (margentopsuelog - 114) + 'px';
                        document.getElementById("paredcasada").style.left = (((margenleftsuelog - 78) + (36 * cuadrosx)) - 2) + 'px';
                        //document.getElementById("paredcasada").style.left=(margenleftsuelog-36)+'px';
                    }
                    else if (cuadrosy == 16 && cuadrosx == 16) {
                        document.getElementById("paredcasada").style.top = (margentopsuelog - 78) + 'px';
                    } else if (ployy == 19 && ploxx == 17)//casa 2 habitaciones
                        document.getElementById("paredcasada").style.top = (margentopsuelog - 41) + 'px';
                    else {
                        document.getElementById("paredcasada").style.top = (margentopsuelog - 113) + 'px';
                    }
                    //document.getElementById("paredcasada").style.top=(margentopsuelog-109)+'px';
                    document.getElementById("suelocasa").style.left = margenleftsuelog + 'px';
                    document.getElementById("suelocasa").style.top = margentopsuelog + 'px';

                    if (cuadrosy == 12 && cuadrosx == 6) {//casa de 2 plantas casa de 2 pisos duplex
                        margenleftsuelog -= (cuadrosx * 36);
                        margentopsuelog -= (cuadrosx * 18);
                        margentopsuelog -= 36;

                        document.getElementById("paredcasaia").style.left = (margenleftsuelog - 8) + 'px';
                        document.getElementById("paredcasaia").style.top = (margentopsuelog + 144) + 'px';
                        document.getElementById("suelocasa").style.left = margenleftsuelog + 'px';
                        document.getElementById("suelocasa").style.top = margentopsuelog + 'px';
                        document.getElementById("suelocasa").style.zIndex = 600;
                        document.getElementById("paredcasada").style.left = (((margenleftsuelog - 7) + (36 * cuadrosx)) - 2) + 'px';
                        document.getElementById("paredcasada").style.top = (margentopsuelog + 139) + 'px';

                        document.getElementById("paredarribada").style.position = 'absolute';
                        document.getElementById("paredarribada").style.left = (((margenleftsuelog - 7) + (36 * cuadrosx)) - 39) + 'px';
                        document.getElementById("paredarribada").style.top = (margentopsuelog - 112) + 'px';
                        document.getElementById("paredarribaia").style.position = 'absolute';
                        document.getElementById("paredarribaia").style.zIndex = 6;
                        document.getElementById("paredarribaia").style.left = (margenleftsuelog - 8) + 'px';
                        document.getElementById("paredarribaia").style.top = (margentopsuelog - 108) + 'px';
                    }


                    if (tipos == 'abajo') {
                        if (!document.getElementById("sueloabajo")) {

                            var sueloabajoss = document.createElement('canvas');
                            sueloabajoss.id = 'sueloabajo';
                            kkallaki.appendChild(sueloabajoss);
                        }
                        canvas = document.getElementById("sueloabajo");
                        document.getElementById("sueloabajo").style.position = 'absolute';
                        document.getElementById("sueloabajo").style.left = margenleftsuelog + 'px';
                        document.getElementById("sueloabajo").style.top = (margentopsuelog + 252) + 'px';
                        document.getElementById("sueloabajo").style.zIndex = 5;
                    } else if (tipos == 'salaextrasuelo') {
                        canvas = document.getElementById("salaextrasuelo");

                    } else {
                        canvas = document.getElementById("suelocasa");

                    }

                    if (canvas) {
                        //var margentopsuelog = 0;
                        //var margenleftsuelog = 0;
                        //$top=($margentopinicial+540);//top inicial
                        //margenleftsuelog-=138;

                        //////consola.log(canvas,canvas);
                        context = canvas.getContext('2d');
                        var image = new Image();


                        var left = (cuadrosx * 36);
                        left -= 36;//izquierda inicial
                        //////////consola.log(('left'+left);
                        var ytotal = (cuadrosx * 18);//alto
                        ytotal += 35;
                        ytotal += cuadrosx;


                        ytotal = (cuadrosx * 18);//anncho
                        ytotal += (cuadrosy * 18);//anncho
                        ytotal += 44;
                        ytotal -= 18;

                        //$ytotal+=300;

                        var xtotal = (cuadrosx * 36);//anncho
                        xtotal += (cuadrosy * 36);//anncho
                        xtotal += 35;

                        var top = 0;//top inicial
                        var topaponer = 0;
                        var topyaponer = 0;
                        var topy = 0;
                        var lefty = 0;
                        // width 1475px; height: 746px;

                        canvas.width = xtotal;

                        //consola.log('cuadrosy',cuadrosy,' cuadrosx',cuadrosx);
                        if (cuadrosy == 22 && cuadrosx == 22) {
                            ytotal += 1000;
                        }
                        if (cuadrosy == 20 && cuadrosx == 10) {
                            ytotal += 100;
                        }
                        canvas.height = ytotal;
                        var cuadrosycreo = cuadrosy;
                        var cuadrosxcreo = cuadrosx;
                        var cuadrosyempiezo = 1;
                        var cuadrosxempiezo = 1;
                        if (cuadrosy == 12 && cuadrosx == 24) {//casa alargada /
                            cuadrosxempiezo = 2;
                        }
                        image.onload = function () {
                            ////consola.log('imageload creasuelopng');
                            //ctx.drawImage(img,0,0,image.width,image.height,0,0,400,300);

                            for (var cuadrox = 1; cuadrox <= cuadrosxcreo; cuadrox++) {
                                //////////consola.log(('pongo');

                                if (cuadrox >= cuadrosxempiezo) {
                                    if (cuadrosy == 22 && cuadrosx == 22) {//CASA CON ESCALERA

                                        topaponer = top;
                                        if (numerosueloreal >= 10)
                                            context.drawImage(image, left, topaponer, 70, 43);
                                    }
                                    else if (cuadrosy == 18 && cuadrosx == 18) { // soy escenario 2 casas
                                        topaponer = top;
                                        if (cuadrox > 10 && numerosueloreal >= 10)
                                            context.drawImage(image, left, topaponer);//cuadro rojo /
                                    } else if (cuadrosy == 16 && cuadrosx == 16) { // soy escenario 2 casas
                                        topaponer = top;
                                        //$topaponer+=50;
                                        if (cuadrox > 12 && numerosueloreal >= 10)
                                            context.drawImage(image, left, topaponer);
                                        //imagecopy($image,$im,$left,$topaponer,0,0,$x,$y);//cuadro rojo /
                                    } else if (numerosueloreal >= 10) {
                                        context.drawImage(image, left, top);
                                        //imagecopy($image,$im,$left,$top,0,0,$x,$y);//cuadro rojo /
                                    }
                                }
                                topy = top;
                                lefty = left;
                                top += 18; left -= 36;
                                for (var cuadroy = 1; cuadroy <= cuadrosycreo; cuadroy++) {
                                    topy += 18; lefty += 36; estecuadroy++;
                                    topyaponer = topy;

                                    if (cuadrox >= cuadrosxempiezo && cuadroy >= cuadrosyempiezo) {
                                        if (cuadrosy == 20 && cuadrosx == 10) {//casa alargada \
                                            //consola.log('alargada');
                                            if (cuadroy > 4 && cuadrox > 4) topyaponer += 10;
                                            if (numerosueloreal >= 10)
                                                context.drawImage(image, lefty, topyaponer);

                                        }
                                        else if (cuadrosy == 22 && cuadrosx == 22) {//casa con escalera
                                            if (cuadroy > 6 && cuadrox == 8) {
                                                topyaponer -= 184;
                                                topyaponer += (cuadroy * 8);//soy escalera
                                            } if (cuadroy > 6 && cuadrox > 6) {
                                                topyaponer += 136;
                                            }
                                            if (cuadroy <= 6 && cuadrox == 7 && numerosueloreal >= 10 || cuadroy == 7 && cuadrox != 7 && cuadrox <= 8 && numerosueloreal >= 10 || cuadroy <= 6 && cuadrox == 9 && numerosueloreal >= 10 || cuadroy >= 22 && cuadrox == 9 && numerosueloreal >= 10 || cuadroy != 7 && cuadrox != 9 && cuadrox != 7 && numerosueloreal >= 10)
                                                context.drawImage(image, lefty, topyaponer);
                                        } else if (cuadrosy == 16 && cuadrosx == 16) { // casa varias hab

                                            //hab peque√±a entrada --
                                            if (cuadrox > 1 && cuadroy < 8 && cuadrox > 12
                                                || cuadrox > 1 && cuadroy < 3 && cuadrox < 13
                                                || cuadrox > 1 && cuadrox < 9 && cuadroy < 9
                                                || cuadrox > 1 && cuadrox < 6 && cuadroy >= 9 && cuadroy <= 11
                                                || cuadrox > 1 && cuadrox < 8 && cuadroy >= 11
                                                || cuadrox > 1 && cuadroy > 7 && cuadrox > 12) {
                                                if (numerosueloreal >= 10)
                                                    context.drawImage(image, lefty, topy);
                                            }
                                        } else if (cuadrosy == 18 && cuadrosx == 18) { // soy escenario 2 casas

                                            if (cuadrox > 10 || cuadrox >= 7 && cuadrox <= 10 && cuadroy >= 7 && cuadroy <= 10
                                                || cuadrox != 7 && cuadrox != 8 && cuadrox != 9 && cuadrox != 10 && cuadrox != 1 && cuadrox != 2 && cuadroy < 16 && cuadroy > 1) {//abajo -- camino -- arriba
                                                if (numerosueloreal >= 10)
                                                    context.drawImage(image, lefty, topy);
                                            }
                                        }
                                        else if (cuadrosx == 28 && cuadrosy == 28) {//soy con L
                                            if (cuadroy < 11 || cuadrox < 12) {
                                                if (numerosueloreal >= 10)
                                                    context.drawImage(image, lefty, topy);
                                            }
                                            //imagecopy(image,im,lefty,topy,0,0,x,y);
                                        } else if (cuadrosx == 26 && cuadrosy == 26) {//soy con en medio negro
                                            if (cuadroy < 7 || cuadroy == 7 && cuadrox > 20 || cuadroy == 7 && cuadrox < 6 || cuadrox != 6 && cuadrox != 20 && cuadroy < 18 && cuadroy > 7 || cuadroy == 18 && cuadrox > 20 || cuadroy == 18 && cuadrox < 6 || cuadroy > 18) {
                                                if (numerosueloreal >= 10)
                                                    context.drawImage(image, lefty, topy);
                                            }
                                            //imagecopy(image,im,lefty,topy,0,0,x,y);
                                        } else if (cuadrosx == 40 && cuadrosy == 40) {//soy con corte recto /\
                                            if (cuadroy < 2 && cuadrox != 2 && cuadroy > 0 || cuadrox == 2 || cuadrox != 2 && cuadroy < (42 - cuadrox)) {
                                                if (numerosueloreal >= 10)
                                                    context.drawImage(image, lefty, topy);
                                            }
                                            //magecopy(image,im,lefty,topy,0,0,x,y);
                                        } else if (numerosueloreal >= 10) {
                                            context.drawImage(image, lefty, topy);
                                        }
                                    }
                                }

                            }
                        };
                        image.src = dominiobase + "fly/i/suelosv5/suelo" + numerosuelo + ".png";
                    }
                }
            },
            GraphNodeType = {
                OPEN: 1,
                WALL: 0
            },
            Graph = function (grid) {
                var nodes = [];


                for (var x = 0; x < grid.length; x++) {
                    nodes[x] = [];

                    for (var y = 0, row = grid[x]; y < row.length; y++) {
                        nodes[x][y] = new GraphNode(x, y, row[y]);
                    }
                }


                this.input = grid;
                this.nodes = nodes;
            },
            GraphNode = function (x, y, type) {
                this.data = {};
                this.x = x;
                this.y = y;
                this.pos = {
                    x: x,
                    y: y
                };
                this.type = type;
            };

        GraphNode.prototype.isWall = function () {
            return this.type == GraphNodeType.WALL;
        };

        var BinaryHeap = function (scoreFunction) {
            this.content = [];
            this.scoreFunction = scoreFunction;
        };

        BinaryHeap.prototype = {
            push: function (element) {
                // Add the new element to the end of the array.
                this.content.push(element);


                // Allow it to sink down.
                this.sinkDown(this.content.length - 1);
            },
            pop: function () {
                // Store the first element so we can return it later.
                var result = this.content[0];
                // Get the element at the end of the array.
                var end = this.content.pop();
                // If there are any elements left, put the end element at the
                // start, and let it bubble up.
                if (this.content.length > 0) {
                    this.content[0] = end;
                    this.bubbleUp(0);
                }
                return result;
            },
            remove: function (node) {
                var i = this.content.indexOf(node);

                // When it is found, the process seen in 'pop' is repeated
                // to fill up the hole.
                var end = this.content.pop();


                if (i !== this.content.length - 1) {
                    this.content[i] = end;

                    if (this.scoreFunction(end) < this.scoreFunction(node)) {
                        this.sinkDown(i);
                    }
                    else {
                        this.bubbleUp(i);
                    }
                }
            },
            size: function () {
                return this.content.length;
            },
            rescoreElement: function (node) {
                this.sinkDown(this.content.indexOf(node));
            },
            sinkDown: function (n) {
                // Fetch the element that has to be sunk.
                var element = this.content[n];


                // When at 0, an element can not sink any further.
                while (n > 0) {


                    // Compute the parent element's index, and fetch it.
                    var parentN = ((n + 1) >> 1) - 1,
                        parent = this.content[parentN];
                    // Swap the elements if the parent is greater.
                    if (this.scoreFunction(element) < this.scoreFunction(parent)) {
                        this.content[parentN] = element;
                        this.content[n] = parent;
                        // Update 'n' to continue at the new position.
                        n = parentN;
                    }


                    // Found a parent that is less, no need to sink any further.
                    else {
                        break;
                    }
                }
            },
            bubbleUp: function (n) {
                // Look up the target element and its score.
                var length = this.content.length,
                    element = this.content[n],
                    elemScore = this.scoreFunction(element);

                while (true) {
                    // Compute the indices of the child elements.
                    var child2N = (n + 1) << 1, child1N = child2N - 1;
                    // This is used to store the new position of the element,
                    // if any.
                    var swap = null;
                    // If the first child exists (is inside the array)...
                    if (child1N < length) {
                        // Look it up and compute its score.
                        var child1 = this.content[child1N],
                            child1Score = this.scoreFunction(child1);


                        // If the score is less than our element's, we need to swap.
                        if (child1Score < elemScore)
                            swap = child1N;
                    }


                    // Do the same checks for the other child.
                    if (child2N < length) {
                        var child2 = this.content[child2N],
                            child2Score = this.scoreFunction(child2);
                        if (child2Score < (swap === null ? elemScore : child1Score)) {
                            swap = child2N;
                        }
                    }


                    // If the element needs to be moved, swap it, and continue.
                    if (swap !== null) {
                        this.content[n] = this.content[swap];
                        this.content[swap] = element;
                        n = swap;
                    }


                    // Otherwise, we are done.
                    else {
                        break;
                    }
                }
            }
        };

        var astar = {
            init: function (grid) {
                for (var x = 0, xl = grid.length; x < xl; x++) {
                    for (var y = 0, yl = grid[x].length; y < yl; y++) {
                        var node = grid[x][y];
                        node.f = 0;
                        node.g = 0;
                        node.h = 0;
                        node.cost = node.type;
                        node.visited = false;
                        node.closed = false;
                        node.parent = null;
                    }
                }
            },
            heap: function () {
                return new BinaryHeap(function (node) {
                    return node.f;
                });
            },
            search: function (grid, start, end, diagonal, heuristic) {
                astar.init(grid);
                heuristic = heuristic || astar.manhattan;
                diagonal = !!diagonal;


                var openHeap = astar.heap();


                openHeap.push(start);


                while (openHeap.size() > 0) {


                    // Grab the lowest f(x) to process next.  Heap keeps this sorted for us.
                    var currentNode = openHeap.pop();


                    // End case -- result has been found, return the traced path.
                    if (currentNode === end) {
                        var curr = currentNode;
                        var ret = [];
                        while (curr.parent) {
                            ret.push(curr);
                            curr = curr.parent;
                        }
                        return ret.reverse();
                    }


                    // Normal case -- move currentNode from open to closed, process each of its neighbors.
                    currentNode.closed = true;


                    // Find all neighbors for the current node. Optionally find diagonal neighbors as well (false by default).
                    var neighbors = astar.neighbors(grid, currentNode, diagonal);


                    for (var i = 0, il = neighbors.length; i < il; i++) {
                        var neighbor = neighbors[i];


                        if (neighbor.closed || neighbor.isWall()) {
                            // Not a valid node to process, skip to next neighbor.
                            continue;
                        }


                        // The g score is the shortest distance from start to current node.
                        // We need to check if the path we have arrived at this neighbor is the shortest one we have seen yet.
                        var gScore = currentNode.g + neighbor.cost;
                        var beenVisited = neighbor.visited;


                        if (!beenVisited || gScore < neighbor.g) {


                            // Found an optimal (so far) path to this node.  Take score for node to see how good it is.
                            neighbor.visited = true;
                            neighbor.parent = currentNode;
                            neighbor.h = neighbor.h || heuristic(neighbor.pos, end.pos);
                            neighbor.g = gScore;
                            neighbor.f = neighbor.g + neighbor.h;


                            if (!beenVisited) {
                                // Pushing to heap will put it in proper place based on the 'f' value.
                                openHeap.push(neighbor);
                            }
                            else {
                                // Already seen the node, but since it has been rescored we need to reorder it in the heap
                                openHeap.rescoreElement(neighbor);
                            }
                        }
                    }
                }


                // No result was found - empty array signifies failure to find path.
                return [];
            },
            manhattan: function (pos0, pos1) {
                // See list of heuristics: http://theory.stanford.edu/~amitp/GameProgramming/Heuristics.html


                var d1 = Math.abs(pos1.x - pos0.x);
                var d2 = Math.abs(pos1.y - pos0.y);
                return d1 + d2;
            },
            neighbors: function (grid, node, diagonals) {
                var ret = [];
                var x = node.x;
                var y = node.y;


                // West
                if (grid[x - 1] && grid[x - 1][y]) {
                    ret.push(grid[x - 1][y]);
                }


                // East
                if (grid[x + 1] && grid[x + 1][y]) {
                    ret.push(grid[x + 1][y]);
                }


                // South
                if (grid[x] && grid[x][y - 1]) {
                    ret.push(grid[x][y - 1]);
                }


                // North
                if (grid[x] && grid[x][y + 1]) {
                    ret.push(grid[x][y + 1]);
                }


                if (diagonals) {


                    // Southwest
                    if (grid[x - 1] && grid[x - 1][y - 1]) {
                        ret.push(grid[x - 1][y - 1]);
                    }


                    // Southeast
                    if (grid[x + 1] && grid[x + 1][y - 1]) {
                        ret.push(grid[x + 1][y - 1]);
                    }


                    // Northwest
                    if (grid[x - 1] && grid[x - 1][y + 1]) {
                        ret.push(grid[x - 1][y + 1]);
                    }


                    // Northeast
                    if (grid[x + 1] && grid[x + 1][y + 1]) {
                        ret.push(grid[x + 1][y + 1]);
                    }


                }


                return ret;
            }
        },
            dimegraphvacio = function (cuadrosy, cuadrosx) {

                var nodesvacio = [];

                for (var x = 0; x <= cuadrosy; x++) {
                    var nodeRowvacio = [];
                    for (var y = 0; y <= cuadrosx; y++) {

                        nodeRowvacio.push(1);
                    }
                    nodesvacio.push(nodeRowvacio);
                }
                graphvacio = new Graph(nodesvacio);
            },
            dimegraphbots = function (cuadrosy, cuadrosx) {

                var nodes = [];
                var enbox = '';
                var akihayf = '';
                var akihayk = '';
                var akinotraspasar = notraspasar;
                var commkekos = [];
                var canvaskekos = kkallakik.querySelectorAll('[data-box]'),
                    iddcan = canvaskekos.length;
                if (iddcan >= 1) {
                    while (iddcan--) {
                        var stannbo = canvaskekos[iddcan].getAttribute('data-box');
                        commkekos[stannbo] = 's';
                    }
                }

                for (var x = 0; x <= cuadrosy; x++) {
                    var nodeRow = [];
                    for (var y = 0; y <= cuadrosx; y++) {

                        if (x != 0 || x == enboxyinicial && y == enboxxinicial) {
                            enbox = x + 'c' + y;

                            if (ffurs[enbox]) akihayf = ffurs[enbox]; else akihayf = '';

                            if (commkekos[enbox]) akihayk = commkekos[enbox]; else akihayk = '';

                            switch (akihayf) {
                                case '':
                                case 'pu':
                                case 'anim':
                                case 'pelo':
                                case 'cesped':
                                    if (akihayk)
                                        nodeRow.push(5);
                                    else
                                        nodeRow.push(1);
                                    break;
                                default:
                                    nodeRow.push(GraphNodeType.WALL);
                            }

                        } else
                            nodeRow.push(GraphNodeType.WALL);

                    }
                    nodes.push(nodeRow);
                }
                var dalegrap = new Graph(nodes);
                return dalegrap;
            },
            dimegraph = function (cuadrosy, cuadrosx, estoymesaespecial, voyx, yovoyayx) {

                var nodes = [];
                var enbox = '';
                var akihayf = '';
                var akihayk = '';
                var akinotraspasar = notraspasar;
                var commkekos = [];
                var canvaskekos = kkallakik.querySelectorAll('[data-box]:not([data-idkek="' + yasoid + '"])'),
                    iddcan = canvaskekos.length;
                if (iddcan >= 1) {
                    while (iddcan--) {
                        var stannbo = canvaskekos[iddcan].getAttribute('data-box');
                        commkekos[stannbo] = 's';
                    }
                }

                var cuadroynum = -1;
                var cuadroxnum = 0;
                var cuadroxnumbase = -1;
                if (sy > 0 || sx > 0 || sy < 0 || sx < 0) {
                    cuadroynum += (ployy * sy);
                    cuadroxnumbase += (ploxx * sx);
                }

                if (voyx != '' && commkekos[voyx]) {
                    delete commkekos[voyx];
                }

                for (var x = 0; x <= cuadrosy; x++) {
                    var nodeRow = [];
                    cuadroynum++;
                    cuadroxnum = cuadroxnumbase;
                    for (var y = 0; y <= cuadrosx; y++) {
                        cuadroxnum++;

                        if (x != 0 && modocity == 'no' || modocity == 'si' || cuadroynum == enboxyinicial && cuadroxnum == enboxxinicial) {
                            enbox = cuadroynum + 'c' + cuadroxnum;

                            if (ffurs[enbox]) akihayf = ffurs[enbox]; else akihayf = '';

                            if (commkekos[enbox]) akihayk = commkekos[enbox]; else akihayk = '';

                            if (estoymesaespecial == enbox) {
                                akihayf = '';
                            }
                            switch (akihayf) {
                                case 'stop':
                                case 'cana':
                                case 'nmos':
                                    //console.log('WALL',x,'C',y, ' enbox',enbox);
                                    nodeRow.push(GraphNodeType.WALL);
                                    break;
                                case 'sentado_se':
                                case 'sentado_sw':
                                case 'sentado_ne':
                                case 'sentado_nw':
                                    //console.log('enbox:',enbox,' yovoyayx',yovoyayx);
                                    if (enbox != yovoyayx)
                                        nodeRow.push(GraphNodeType.WALL);
                                    else
                                        nodeRow.push(5);

                                    break;
                                case '':
                                case 'nada':
                                case 'anim':
                                case 'pelo':
                                case 'cesped':
                                    //if(cuadroynum>=1 && cuadroxnum>=1 && ffurs[(cuadroynum+1)+'c'+cuadroxnum] && ffurs[cuadroynum+'c'+(cuadroxnum-1)]){
                                    //nodeRow.push(GraphNodeType.WALL);
                                    //}
                                    //else{
                                    if (akihayk == '')
                                        nodeRow.push(1);
                                    else if (akinotraspasar == 1)
                                        nodeRow.push(GraphNodeType.WALL);
                                    else
                                        nodeRow.push(5);
                                    //}
                                    break;
                                default:
                                    if (akihayk == '') {
                                        if (akihayf != '') {
                                            nodeRow.push(5);
                                        } else {
                                            nodeRow.push(1);
                                        }
                                    } else if (akinotraspasar == 1)
                                        nodeRow.push(GraphNodeType.WALL);
                                    else
                                        nodeRow.push(5);
                                    break;
                            }
                        } else
                            nodeRow.push(GraphNodeType.WALL);

                    }
                    nodes.push(nodeRow);
                }
                var elgraphya = new Graph(nodes);

                return elgraphya;
            },
            fas = function (kyta, kxta, kyac, kxac) {
                var dy = kyta - kyac;
                var dx = kxta - kxac;
                var fa = 0;

                if (dy == 0 && dx == 1) { fa = 1; }
                else if (dy == -1 && dx == 1) { fa = 7; }
                else if (dy == -1 && dx == 0) { fa = 2; }
                else if (dy == -1 && dx == -1) { fa = 6; }
                else if (dy == 0 && dx == -1) { fa = 5; }
                else if (dy == 1 && dx == -1) { fa = 8; }
                else if (dy == 1 && dx == 0) { fa = 4; }
                else if (dy == 1 && dx == 1) { fa = 9; }

                return fa;
            },
            clickado = function (yastalaidp, desde) {

                let esunammessa = 'n';
                //console.log('clickado yastalaidp',yastalaidp,' desde',desde);


                let miroporf = document.getElementById('idencf' + yastalaidp);
                if (!elementExists(miroporf)) {
                    miroporf = document.getElementById('idf' + yastalaidp);
                }
                let keidp = yastalaidp;
                if (elementExists(miroporf)) {
                    if (ffursidpt.indexOf('f' + keidp)) {
                        let cortfuncchectot = ffursidpt['f' + keidp];
                        let theFrame = miroporf.getAttribute('data-idf');
                        if (ffursidpt.indexOf('f' + keidp) >= 0 && cortfuncchectot && cortfuncchectot.substring(0, 4) == 'mesa' && cortfuncchectot != 'mesa23' && cortfuncchectot != 'mesa33' && cortfuncchectot != 'mesa44' && cortfuncchectot != 'mesa36' && cortfuncchectot != 'mesa32' && cortfuncchectot != 'mesa2' && theFrame != '1003') {
                            esunammessa = 'y';
                        }
                    }
                    //sinp tengo poderes furni antes no se veia box
                    // if(desde== 'box' && pmoc == 'no' && esunammessa == 'n'){
                    //console.log('HAGODESAPARECERCLIC PORQUE NO TENGO PODERES',TENGOCLICADODATA);
                    //    TENGOCLICADO=null;
                    //    TENGOCLICADOtipo=null;
                    //    TENGOCLICADODATA={};
                    //   document.getElementById('blanhbbFLOAT').classList.add('novisible');
                    //}
                    //else  {
                    //console.log('miro left', (parseInt(miroporf.style.left.replace('px', '')) - parseInt(miroporf.getAttribute('data-pxleft'))) + 'px');
                    // blanhbbFLOAT.style.left = ((parseInt(miroporf.style.left.replace('px', '')) - parseInt(miroporf.getAttribute('data-pxleft'))) - 10) + 'px';
                    //blanhbbFLOAT.style.top = ((parseInt(miroporf.style.top.replace('px', '')) - parseInt(miroporf.getAttribute('data-pxtop'))) - 80) + 'px';

                    TENGOCLICADO = yastalaidp;
                    TENGOCLICADOtipo = 'furni';
                    TENGOCLICADODATA = { yastalaidp: yastalaidp, desde: desde };
                    document.getElementById('blanhbb').classList.remove('blanexpandido');

                    //nombreblanhbb.innerText = damelang(miroporf.getAttribute('data-nomid'));

                    //console.log('TENGOCLICADO', TENGOCLICADO, ' TENGOCLICADOtipo', TENGOCLICADOtipo);
                    //}


                    clickadoV4(yastalaidp, desde);
                } else {
                    //console.log('no hay clikado');
                    TENGOCLICADO = null;
                    TENGOCLICADOtipo = null;
                    TENGOCLICADODATA = {};
                    //nombreblanhbb.innerText = nombcas.nombre;
                    //document.getElementById('blanhbbFLOAT').classList.add('novisible');
                }

            },
            clickadoV4 = function (yastalaidp, desde) {
                var theFramep = yastalaidp;
                var descrifurn = '';
                var nombrefurn = '';
                var posta = '';
                var plac = yosoplac;
                //ffurscass[ffursidp[cuals]]
                ////
                //consola.log('theFramep'+theFramep+' ffurscass'+ffurscass[theFramep]);

                var todofur;
                if (yastalaidp == '')
                    todofur = kkallaki.querySelector('[data-box="' + desde + '"]');
                else
                    todofur = kkallaki.querySelector('[data-idp="' + yastalaidp + '"]');

                if (elementExists(todofur)) {
                    var yopmoc = pmoc;

                    if (todofur.getAttribute('data-nomid') == '1727' && todofur.getAttribute('data-idf') != '400882' && miart == 'motosierra') {
                        //arbol

                        var grapky = ky;
                        var grapkx = kx;
                        //if(sy > 0 || sx > 0 || sy < 0 || sx < 0){
                        //grapky-=(ployy*sy);
                        //grapkx-=(ploxx*sx);
                        //}

                        var mabdanumv = fas(todofur.getAttribute('data-y'), todofur.getAttribute('data-x'), grapky, grapkx);
                        if (mabdanumv > 0) {

                            if (!vextr['clickarbol']) vextr['clickarbol'] = 0;

                            var ahoreschor = Math.floor(new Date().getTime() / 1000);

                            var diferencl = ahoreschor - vextr['clickarbol'];
                            var arbolidp = todofur.getAttribute('data-idp');
                            if (diferencl >= 2) {
                                //console.log('arbolmadera',{idp:arbolidp,miart:miart,idf:todofur.getAttribute('data-idf')});
                                katman('arbolmadera', { idp: arbolidp, miart: miart, idf: todofur.getAttribute('data-idf') });
                                vextr['clickarbol'] = ahoreschor;
                            }
                        }
                    }
                    if (todofur.getAttribute('data-icas') != nombcas.sector && todofur.getAttribute('data-icas') != yosocas) {
                        yopmoc = 'no';
                    }
                    var theFrame = todofur.getAttribute('data-idf');
                    var theFramep = todofur.getAttribute('data-idp');
                    ultimoidpclickado = theFramep;
                    theFrame = parseInt(theFrame);
                    var woap = todofur.getAttribute('data-box');
                    var girs = todofur.getAttribute('data-gir');
                    var fuidpt = todofur.getAttribute('data-idpt');
                    var akifur = todofur.getAttribute('data-a');
                    var idpc = todofur.getAttribute('data-idpc');
                    var nomideste = todofur.getAttribute('data-nomid');
                    var furanim = todofur.getAttribute('data-anim');

                    if (akifur == 'poster' || akifur == 'poster2') {
                        posta = 'post';
                    }
                    if (todofur.getAttribute('data-nomid') > 0)
                        nombrefurn = damelang(todofur.getAttribute('data-nomid'));

                    if (todofur.getAttribute('data-des') > 0)
                        descrifurn = damelang(todofur.getAttribute('data-des'));

                    if (detectandocasilla == 'si') {
                        detectandocasilla = 'no';//nolang
                        //consola.log('detectandocasilla');
                        if (document.getElementById('frammycerberus')) {
                            var x = document.getElementById("frammycerberus");
                            var y = (x.contentWindow || x.contentDocument);
                            if (y.document) y = y.document;
                            if (y.getElementById('agregarcerverus') && y.getElementById('agregarcerverus').value == 'si') {
                                if (y.querySelector('.boxfurnmcerverusvacio') && !y.querySelector('.boxfurnmcerverus[data-idpet="' + theFramep + '" ]')) {
                                    var librb = y.querySelector('.boxfurnmcerverusvacio');
                                    librb.className = "boxfurnmcerverus";
                                    librb.innerHTML = "<img src='" + dominiobase + "fly/i/fursv5/" + todofur.getAttribute('data-nomid') + "/" + todofur.getAttribute('data-idf') + "mini.png'>";
                                    librb.setAttribute("data-idpet", theFramep);

                                    var parametros = "soyid=" + yasoid + '&' +
                                        "idi=" + idila + '&' +
                                        "insad=" + yosocas + '&' +
                                        "idp=" + y.getElementById('idprivadacerverus').value + '&' +
                                        "idfo=" + todofur.getAttribute('data-idf') + '&' +
                                        "addidp=" + theFramep;
                                    kajax({
                                        data: parametros,
                                        url: 'todoincs/mycerverusv3.php',
                                        type: 'get',
                                        success: function () { }
                                    });
                                    if (!y.querySelector('.boxfurnmcerverusvacio')) {
                                        y.getElementById('agregarcerverus').value = 'no';
                                    }
                                }
                            }
                        }
                    }

                    if (theFrame >= 200 && theFrame <= 213) {
                        katman('dimestiker', yastalaidp, theFrame, todofur.getAttribute('data-a'));
                    }

                    //
                    var cortfuncchectot = todofur.getAttribute('data-idpt');
                    var furnisExcepciones = ['mesa23', 'mesa33', 'mesa36', 'mesa32', 'mesa2', 'mesa44']; //!furnisExcepciones.includes(cortfuncchectot)

                    if (cortfuncchectot && cortfuncchectot.startsWith('mesa') && !furnisExcepciones.includes(cortfuncchectot) && theFrame !== '1003') {
                        akiblanhbb.querySelector('#btnsubirse').classList.remove('novisible');
                    } else {
                        akiblanhbb.querySelector('#btnsubirse').classList.add('novisible');
                    }
                    //akiblanhbb.querySelector('#miniima').style.width = '50px';
                    //akiblanhbb.querySelector('#miniima').style.height = '50px';

                    akiblanhbb.querySelector('#miniima').src = dominiobase + "fly/i/fursv5/" + nomideste + "/" + theFrame + "mini.png";
                    akiblanhbb.querySelector('#miniima').classList.remove('novisible');
                    akiblanhbb.querySelector('#miniimak').classList.add('novisible');
                    akiblanhbb.querySelector('#nomsele').innerHTML = nombrefurn;
                    //akiblanhbb.querySelector('#nomsele').classList.add('furni_nombre');
                    //akiblanhbb.querySelector('#miniima').classList.remove('novisible');
                    //akiblanhbb.className='';
                    akiblanhbb.querySelector('#btnssgente').classList.add('novisible');
                    akiblanhbb.querySelector('#btnssfurnis').classList.remove('novisible');
                    akiblanhbb.querySelector('#descrisele').innerHTML = descrifurn;

                    if (theFrame != '678') {
                        akiblanhbb.querySelector('#btncomsste').classList.remove('novisible');
                        //akiblanhbb.querySelector('#btnalqsste').classList.remove('novisible');
                    } else {
                        akiblanhbb.querySelector('#btncomsste').classList.add('novisible');
                        //akiblanhbb.querySelector('#btnalqsste').classList.add('novisible');
                    }

                    if (posta == 'post' || girs < 1 || yopmoc == 'no') {
                        akiblanhbb.querySelector('#btngirar').classList.add('novisible');
                        akiblanhbb.querySelector('#btngirartodos').classList.add('novisible');
                    } else {
                        akiblanhbb.querySelector('#btngirar').classList.remove('novisible');
                        akiblanhbb.querySelector('#btngirartodos').classList.remove('novisible');
                    }

                    //if(posta == 'post' || girs < 1 || yopmoc == 'no')
                    //akiblanhbb.querySelector('#btngirartodos').classList.add('novisible');
                    //else akiblanhbb.querySelector('#btngirartodos').classList.remove('novisible');

                    if (theFrame != '20001' && theFrame != '20002' || yopmoc == 'no')
                        akiblanhbb.querySelector('#btnperson').classList.add('novisible');
                    else akiblanhbb.querySelector('#btnperson').classList.remove('novisible');
                    if (theFrame == '4011384' || theFrame == '4011383' || theFrame == '801' || theFrame == '802' || theFrame == '5543' || theFrame == '5544')//es una tv
                    {
                        akiblanhbb.querySelector('#btntv').classList.remove('novisible');

                        var miroditv = kkallaki.querySelector('#akitv' + theFramep);
                        var puedoapagar = 'n';

                        if (elementExists(miroditv)) {
                            if (miroditv.getAttribute('data-ivid') != 'off') {


                                if (miroditv.getAttribute('data-idkek') == yasoid || yopmoc == 'si' || yopmoc == 'dueno') {
                                    puedoapagar = 's';
                                }
                            }

                            if (puedoapagar == 's')
                                akiblanhbb.querySelector('#btnapagar').classList.remove('novisible');
                            else
                                akiblanhbb.querySelector('#btnapagar').classList.add('novisible');


                            if (miroditv.getAttribute('data-ivid') != 'off') {
                                akiblanhbb.querySelector('#btnapagaryo').classList.remove('novisible');
                            } else {
                                akiblanhbb.querySelector('#btnapagaryo').classList.add('novisible');
                            }
                        } else {
                            akiblanhbb.querySelector('#btnapagaryo').classList.add('novisible');
                            akiblanhbb.querySelector('#btnapagar').classList.add('novisible');

                        }

                    } else {
                        akiblanhbb.querySelector('#btntv').classList.add('novisible');
                        akiblanhbb.querySelector('#btnapagar').classList.add('novisible');
                        akiblanhbb.querySelector('#btnapagaryo').classList.add('novisible');
                    }

                    //ruleta 400063 uno 400058
                    if (theFrame == '400063' || theFrame == '4019398' || theFrame == '400058') {
                        akiblanhbb.querySelector('#btnplay').classList.remove('novisible');
                    } else {
                        akiblanhbb.querySelector('#btnplay').classList.add('novisible');
                    }

                    //posta == 'post' ||
                    if (yopmoc == 'no')
                        akiblanhbb.querySelector('#btnmover').classList.add('novisible');
                    else akiblanhbb.querySelector('#btnmover').classList.remove('novisible');

                    //contador cronometro
                    if (theFrame != '400150' && theFrame != '400149' || yopmoc == 'no')
                        akiblanhbb.querySelector('#btnconfigfurn').classList.add('novisible');
                    else
                        akiblanhbb.querySelector('#btnconfigfurn').classList.remove('novisible');


                    //if(posta == 'post' || yopmoc != 'dueno' || idpc != ''){
                    //akiblanhbb.querySelector('#btnsubir').classList.add('novisible');
                    //akiblanhbb.querySelector('#btnbajar').classList.add('novisible');
                    //}else{
                    //akiblanhbb.querySelector('#btnsubir').classList.remove('novisible');
                    //akiblanhbb.querySelector('#btnbajar').classList.remove('novisible');
                    //}

                    if (yopmoc != 'dueno') {//&& plac != 'mod4'
                        akiblanhbb.querySelector('#btnrecoger').classList.add('novisible');
                    } else {
                        akiblanhbb.querySelector('#btnrecoger').classList.remove('novisible');
                    }
                    //&& plac != 'mod4'
                    if (yopmoc != 'dueno')
                        akiblanhbb.querySelector('#btnrecogertodos').classList.add('novisible');
                    else akiblanhbb.querySelector('#btnrecogertodos').classList.remove('novisible');

                    if (idpc != 'exan' || yopmoc != 'dueno') {//&& plac != 'mod4'
                        akiblanhbb.querySelector('#btncanjeartodos').classList.add('novisible');
                        akiblanhbb.querySelector('#btncanjear').classList.add('novisible');
                    } else {
                        akiblanhbb.querySelector('#btncanjeartodos').classList.remove('novisible');
                        akiblanhbb.querySelector('#btncanjear').classList.remove('novisible');
                    }
                    var soloconpoderes = 'no';

                    if (todofur.getAttribute('data-nomid') == '1009' || yopmoc != 'no' && todofur.getAttribute('data-anim') != '' && todofur.getAttribute('data-anim') != todofur.getAttribute('data-idf'))
                        akiblanhbb.querySelector('#btnanimar').classList.remove('novisible');
                    else {
                        akiblanhbb.querySelector('#btnanimar').classList.add('novisible');
                    }
                    if (idpc == 'cerberusbtn') {
                        akiblanhbb.querySelector('#btnaccionar').classList.remove('novisible');
                        if (yopmoc == 'dueno') {
                            akiblanhbb.querySelector('#btncerverusconfig').classList.remove('novisible');
                        } else {
                            akiblanhbb.querySelector('#btncerverusconfig').classList.add('novisible');
                        }
                    } else {
                        akiblanhbb.querySelector('#btnaccionar').classList.add('novisible');
                        akiblanhbb.querySelector('#btncerverusconfig').classList.add('novisible');
                    }

                    if (idpc == 'cerberusbox' && yopmoc == 'dueno') {
                        akiblanhbb.querySelector('#btncerverusconfig').classList.remove('novisible');
                    } else if (idpc != 'cerberusbtn') {
                        akiblanhbb.querySelector('#btncerverusconfig').classList.add('novisible');
                    }

                    if (fuidpt == 'trofeo') {
                        akiblanhbb.querySelector('#btnvertrofeo').classList.remove('novisible');
                    } else {
                        akiblanhbb.querySelector('#btnvertrofeo').classList.add('novisible');
                    }
                    if (theFrame != 678) {
                        akiblanhbb.querySelector('#btnvernota').classList.add('novisible');
                        akiblanhbb.querySelector('#btnabrir').classList.add('novisible');
                    } else {
                        akiblanhbb.querySelector('#btnvernota').classList.remove('novisible');

                        if (yopmoc == 'dueno')
                            akiblanhbb.querySelector('#btnabrir').classList.remove('novisible');
                        else
                            akiblanhbb.querySelector('#btnabrir').classList.add('novisible');
                    }

                    akiblanhbb.querySelector('#descrisele').innerHTML = descrifurn;


                    //es una foto
                    if (theFrame == '5198' || theFrame == '5199') {

                        kajax({
                            data: 'id=' + theFramep,
                            url: 'todoincs/hagofotoinfo.php',
                            type: 'get',
                            success: function (response) {
                                akiblanhbb.querySelector('#descrisele').innerHTML = response;
                            }
                        });
                    }

                }

            },
            kanvasclicksele = function (ponloen, mropab) {
                var canvas = document.createElement('canvas');
                if (canvas) {
                    canvas.width = 90;
                    canvas.height = 120;
                    var mropabe = mropab.split('L');
                    var context = canvas.getContext('2d');
                    var sources = [];
                    var soynadar = 0;
                    var leftcabeza = 0;
                    var topcabeza = [];
                    //fotocabeza
                    var carafok4 = 'stand4';
                    var carafot = 'stand4';
                    var sexx = 'keka';
                    var mirosieskeka = mropabe[5].replace('/', '.');
                    if (mirosieskeka < 50 || mirosieskeka >= 500)
                        sexx = 'keko';

                    if (mropabe[18] == 4) mropabe[18] = 3;//temporal cabezas v14 no tiene click

                    var urlcabe = 'cabezasv1' + mropabe[18];
                    var urlcara = 'carasv1' + mropabe[18];
                    var urlcuerpo = '' + sexx + 'scuerpov11';

                    mropabe[4] = 'stand4';
                    //////////////consola.log('mropabe',mropabe);
                    if (mropabe[8]) {
                        sources.push(dominiobase + "kekbasetodov7click/" + urlcuerpo + "/" + mropabe[8] + ".png");
                        topcabeza.push(0);
                    }
                    if (mropabe[12]) {
                        sources.push(dominiobase + "kekbasetodov7click/bamb/" + mropabe[12] + ".png");
                        topcabeza.push(0);
                    }
                    if (mropabe[6]) {
                        sources.push(dominiobase + "kekbasetodov7click/panta/" + mropabe[6] + ".png");
                        topcabeza.push(0);
                    }
                    if (mropabe[5] && mropabe[5] != 50) {
                        sources.push(dominiobase + "kekbasetodov7click/camisa/" + mropabe[5] + ".png");
                        topcabeza.push(0);
                    }
                    if (mropabe[8]) {
                        sources.push(dominiobase + "kekbasetodov7click/" + urlcabe + "/" + mropabe[8] + ".png");
                        topcabeza.push(0);
                        if (carafot)//cara
                        {
                            sources.push(dominiobase + "kekbasetodov7click/" + urlcara + "/" + mropabe[8] + ".png");
                            topcabeza.push(0);
                        }
                    }
                    if (mropabe[16]) {//collar
                        sources.push(dominiobase + "kekbasetodov7click/collar/" + mropabe[16] + ".png");
                        topcabeza.push(0);
                    }
                    //if(mropabe[17]){
                    //sources.push(dominiobase+"kekbasetodov7click/cinturon/"+mropabe[17]+".png");
                    //topcabeza.push(0);
                    //}

                    if (mropabe[12]) {
                        sources.push(dominiobase + "kekbasetodov7click/bamb/" + mropabe[12] + ".png");
                        topcabeza.push(0);
                    }



                    if (mropabe[7]) {
                        if (mropabe[13]) {
                            sources.push(dominiobase + "kekbasetodov7click/pelocor/" + mropabe[7] + ".png");
                        } else {
                            sources.push(dominiobase + "kekbasetodov7click/pelo/" + mropabe[7] + ".png");
                        }
                        topcabeza.push(0);
                    }
                    if (mropabe[11])//ojos - gafas
                    {
                        sources.push(dominiobase + "kekbasetodov7click/sombrero/" + mropabe[11] + ".png");
                        topcabeza.push(0);
                    }
                    //boca (barbas)// && carafot4antesdebailar != 'stand1' && carafot4antesdebailar != 'stand2' && carafot4 != 'stand7')
                    if (mropabe[10] && mropabe[4] != 'stand7') {
                        sources.push(dominiobase + "kekbasetodov7click/sombrero/" + mropabe[10] + ".png");
                        topcabeza.push(0);
                    }

                    if (mropabe[13])//sombrero
                    {
                        sources.push(dominiobase + "kekbasetodov7click/sombrero/" + mropabe[13] + ".png");
                        topcabeza.push(0);
                    } if (mropabe[9])//nariz (mascaras)
                    {
                        sources.push(dominiobase + "kekbasetodov7click/sombrero/" + mropabe[9] + ".png");
                        topcabeza.push(0);
                    }

                    loadImages(sources, function (images) {
                        //canvas.width=canvas.width;
                        for (var prop = 0; prop < sources.length; prop++) {
                            if (topcabeza[prop] != '30') {//no es pelo recortado
                                //context.drawImage(images[prop], 0, 0);

                                context.drawImage(images[prop], 0, 0);
                            } else {
                                context.drawImage(images[prop], 0, topcabeza[prop], canvas.width, canvas.height, 0, topcabeza[prop], canvas.width, canvas.height);
                            }

                        }
                        ponloen.src = canvas.toDataURL();
                    });

                }
            },
            clickeko = function (boyCLIKADOP, boxCLIKADOP, kieCLIKADOP) {
                //console.log('clickeko',boyCLIKADOP,boxCLIKADOP,kieCLIKADOP);
                let stekaCLIKADOP = null;
                let staenboxCLIKADOP = boyCLIKADOP + 'c' + boxCLIKADOP;
                if (kieCLIKADOP == '')
                    stekaCLIKADOP = kkallakik.querySelector('[data-box="' + staenboxCLIKADOP + '"]');
                else
                    stekaCLIKADOP = kkallakik.querySelector('[data-idkek="' + kieCLIKADOP + '"]');

                if (elementExists(stekaCLIKADOP)) {
                    TENGOCLICADO = stekaCLIKADOP.getAttribute('data-idkek');
                    TENGOCLICADOtipo = 'keko';
                    TENGOCLICADODATA = { boyCLIKADOP: 0, boxCLIKADOP: 0, kieCLIKADOP: TENGOCLICADO };

                    //console.log('KEKO---TENGOCLICADO',TENGOCLICADO);

                    document.getElementById('minimizabla').classList.remove('novisible');
                    document.getElementById('blanhbb').classList.remove('blanexpandido');
                    //nombreblanhbb.innerText=stekaCLIKADOP.getAttribute('data-kek');
                    //blanhbbFLOAT.style.left = stekaCLIKADOP.style.left;
                    //blanhbbFLOAT.style.top = stekaCLIKADOP.style.top;
                    //setTimeout(addClass,100,document.getElementById('blanhbbFLOAT'),'blanhconsele');

                    //document.getElementById('minimizabla').click();

                    clickekoV4(TENGOCLICADODATA.boyCLIKADOP, TENGOCLICADODATA.boxCLIKADOP, TENGOCLICADODATA.kieCLIKADOP);
                }

            },
            clickekoV4 = function (boy, box, kie) {

                var staenbox = boy + 'c' + box,
                    kieconk = '',
                    estoyarti = miart,
                    steka;
                if (kie == '')
                    steka = kkallakik.querySelector('[data-box="' + staenbox + '"]');
                else
                    steka = kkallakik.querySelector('[data-idkek="' + kie + '"]');

                if (elementExists(steka)) {
                    var yasoide = yasoid;
                    kie = steka.getAttribute('data-idkek');
                    //$("#botonesaccion").css('display','none');
                    if (isNaN(kie) == true) {

                        if (steka) {
                            //mascota
                            //var idprivada = kie.replace('masco','');
                            //if($('#kekoallaki > #idf'+idprivada).length == 1){
                            //$('#kekoallaki > #idf'+idprivada).click();
                            //} else if($('#kekoallaki > #idf'+idprivada).length == 1){
                            //$('#kekoallaki > #idf'+idprivada).click();
                            //}
                            //

                            if (steka.getAttribute('data-idm') == '20001' || steka.getAttribute('data-idm') == '20002') {
                                //akiblanhbb.querySelector('#miniima').style.width = '90px';
                                //akiblanhbb.querySelector('#miniima').style.height = '120px';
                                akiblanhbb.querySelector('#miniima').classList.add('novisible');
                                akiblanhbb.querySelector('#miniimak').classList.remove('novisible');
                                //akiblanhbb.querySelector('#miniima').src = 'gk/sv7.php?src=stand4'+steka.getAttribute('data-rop')+'.gif';

                                var pongsa = "standL4LLLL" + steka.getAttribute('data-rop');
                                kanvasclicksele(akiblanhbb.querySelector('#miniimak'), pongsa);

                                akiblanhbb.querySelector('#descrisele').innerHTML = '<br/><img src="' + dominiobase + 'images/camarero.png"/>';
                            } else {
                                akiblanhbb.querySelector('#miniima').classList.remove('novisible');
                                akiblanhbb.querySelector('#miniimak').classList.add('novisible');
                                //akiblanhbb.querySelector('#miniima').style.width = '50px';
                                //akiblanhbb.querySelector('#miniima').style.height = '50px';
                                akiblanhbb.querySelector('#miniima').src = dominiobase + 'imagesnew/perrosv3/' + steka.getAttribute('data-idm') + '/' + steka.getAttribute('data-color') + '/stand4.gif';
                                akiblanhbb.querySelector('#descrisele').innerHTML = '' + iw[127] + '' + steka.getAttribute('data-fecha');
                            }
                            //akiblanhbb.querySelector('#miniima').classList.remove('novisible');
                            akiblanhbb.querySelector('#nomsele').innerHTML = steka.getAttribute('data-nombre');
                            //akiblanhbb.className='';


                        }
                        akiblanhbb.querySelector('#btnssgente').classList.add('novisible');
                        akiblanhbb.querySelector('#btnssfurnis').classList.add('novisible');

                    } else {
                        kieconk = 'k' + kie;
                        ultimoidpclickado = kie;
                        var epmoc = pmoc;

                        var estaenyke = steka.getAttribute('data-y');
                        var estaenxke = steka.getAttribute('data-x');

                        var estaensecy = Math.floor(estaenyke / ployy);
                        var estaensecx = Math.floor(estaenxke / ploxx);

                        if (modocity == 'si' && estaensecy != sy || modocity == 'si' && estaensecx != sx) {
                            epmoc = 'no';
                        }
                        //var url =  '#/'+encodeURI(steka.getAttribute('data-kek'));

                        //
                        //akiblanhbb.querySelector('#"hreperfil").setAttribute('href',url);
                        var misi = limpia(steka.getAttribute('data-misi'), kie, 1, 'mision');
                        //var tags= steka.getAttribute('data-tags');
                        var keknam = steka.getAttribute('data-kek');
                        var conpows = steka.getAttribute('data-cpws');
                        var tienepermas = false;
                        if (conpows >= 1) {
                            tienepermas = true;
                        }
                        var plak = steka.getAttribute('data-placs');

                        akiblanhbb.querySelector('#btnssfurnis').classList.add('novisible');

                        akiblanhbb.querySelector('#miniima').classList.add('novisible');
                        akiblanhbb.querySelector('#miniimak').classList.remove('novisible');

                        //akiblanhbb.querySelector('#miniima').classList.add('novisible');
                        //akiblanhbb.querySelector('#blanhbb').classList.add('novisible');
                        akiblanhbb.querySelector('#descrisele').innerHTML = misi;

                        //akiblanhbb.querySelector('#miniima').style.width = '90px';
                        //akiblanhbb.querySelector('#miniima').style.height = '120px';

                        var pongs = "standL4LLLL" + steka.getAttribute('data-rop');
                        kanvasclicksele(akiblanhbb.querySelector('#miniimak'), pongs);

                        //akiblanhbb.querySelector('#miniima').src = 'gk/sv7.php?src=stand4'+steka.getAttribute('data-rop')+'.gif';




                        var descri = '<div class="akimisi">' + misi + '<br><div id="placastot"><div class="placasCont"></div>';
                        //var taggg = '';
                        //var tagga = tags;

                        /////<br><br>

                        var clasoci = steka.getAttribute('data-csoc');
                        var claeco = steka.getAttribute('data-ceco');
                        var idem = steka.getAttribute('data-idem');
                        var empre = steka.getAttribute('data-empre');
                        //,'Clase baja','Clase media','Clase alta','√É‚Ä∞lite'

                        if (clasoci == '') {
                            clasoci = iw[128];
                        }
                        else if (clasoci == '1') {
                            clasoci = iw[129];
                        }
                        else if (clasoci == '2') {
                            clasoci = iw[130];
                        }
                        else if (clasoci == '3') {
                            clasoci = iw[131];
                        }

                        if (claeco == '') {
                            claeco = iw[132];
                        }
                        else if (claeco == '1') {
                            claeco = iw[133];
                        }
                        else if (claeco == '2') {
                            claeco = iw[134];
                        }
                        else if (claeco == '3') {
                            claeco = iw[135];
                        }
                        //<div style="width:100%;min-width:100%;height:90px;min-height:90px;display:block;">&nbsp;</div>
                        //descri += '<br/><br/>';

                        var urlfotoya = urlperfils + steka.getAttribute('data-imagenmini');

                        if (steka.getAttribute('data-imagenmini') != 'default.png' || steka.getAttribute('data-imagenmini') != '') {
                            urlfotoya = urlperfils + 'resiz.php?src=' + steka.getAttribute('data-imagenmini') + '&h=130&w=130';
                        }

                        descri += '</div></div><br/><img src="' + urlfotoya + '" class="minideke"/>';


                        descri += '<div id="akitotsoci" class="infodeke"><div><span><img class="fleft" src="/imagesnew/megusta.png"/> <b class="fleftico" title="Me gustas del keko"> ' + verCantidadConPuntos(steka.getAttribute('data-mgus')) + '</b></span>';
                        descri += '<br><br><img class="fleft" src="/imagesnew/corazon.png"/> <b class="fleftico"  title="Vida del keko">' + steka.getAttribute('data-vida') + '/100</b>';
                        descri += '<br><br>' + iw[124] + '<br><b>' + clasoci + '</b>';
                        descri += '<br><br>' + iw[125] + '<br><b>' + claeco + '</b>';
                        

                        //descri += '<br/><br/><br/><br/>';
                        //if(tagga != null && tagga != ''){
                        //descri+= '<br/><br/>Tags<br/>';
                        //tagga = tagga.split(",");
                        //descri +='<br/>';
                        //for(var ktag in tagga){
                        //descri +='<div class="ktagb">'+tagga[ktag]+'</div>';
                        //}
                        //}

                        descri += '</div></div><br/><br/><br/><br/><br/><br/><br/><br/><br/>';


                        var descriseleElement = akiblanhbb.querySelector('#descrisele');
                        akiblanhbb.querySelector('#descrisele').innerHTML = descri;

                        var maxplacas = 1;
                        var plaeke;
                        var placasOficiales = DATAPlacasOficiales.todas;
                        if (plak && plak != '') {
                            plaeke = plak.split(",");
                            maxplacas = plaeke.length;

                            if (maxplacas > 3)
                                maxplacas = 3;

                            if (maxplacas > 0) {

                                var contPlacas = descriseleElement.querySelector('#placastot .placasCont');

                                for (var iplac = 0; iplac < maxplacas; iplac++) {
                                    if (plaeke[iplac]) {
                                        var placaident = plaeke[iplac],

                                            urlplaca = dominiobase + 'fly/placas/' + placaident + '.png';


                                        var imgCreate;

                                        if (placasOficiales.indexOf(placaident) != -1) {
                                            imgCreate = document.createElement('div');
                                            imgCreate.className = 'placa ' + (placaident == 'placapupu' ? 'apestado' : 'oficial');
                                            imgCreate.innerHTML = '<img src="' + urlplaca + '">';
                                        } else {
                                            imgCreate = document.createElement('img');
                                            imgCreate.className = 'placa';
                                            imgCreate.src = urlplaca;
                                        }

                                        contPlacas.append(imgCreate);
                                    }
                                }
                            }
                        }


                        //if(tagga != '' && tagga != null){
                        //$("#descrisele .ktagb").click(function(){$("#tebusc").val($(this).html());$("#tebuscbb").click();});
                        //}
                        //$('#akitotsoci > div:first').slimScroll({ height: '130px'});
                        //$('#placastot > div:first').slimScroll({ height: '50px'});
                        akiblanhbb.querySelector('#nomsele').innerHTML = keknam;
                        //akiblanhbb.className='';

                        if (yasoid != kie && epmoc == 'dueno') {

                            if (tienepermas == true)
                                akiblanhbb.querySelector('#btnpermiso').innerHTML = '<img src="' + dominiobase + 'imagesnew/appico3/powa.png"/>' + iw[136];
                            else
                                akiblanhbb.querySelector('#btnpermiso').innerHTML = '<img src="' + dominiobase + 'imagesnew/appico3/powa.png"/>' + iw[137];

                            akiblanhbb.querySelector('#btnpermiso').classList.remove('novisible');
                        } else {
                            akiblanhbb.querySelector('#btnpermiso').classList.add('novisible');
                        }
                        if (epmoc == 'si' && yasoide != kie && conpows != '2' || epmoc == 'dueno' && yasoide != kie && conpows != '2') {
                            akiblanhbb.querySelector('#btnkick').classList.remove('novisible');
                            akiblanhbb.querySelector('#btnban').classList.remove('novisible');
                        } else {

                            //console.log('nooo conpows',conpows,' epmoc',epmoc,' kie',kie);
                            akiblanhbb.querySelector('#btnkick').classList.add('novisible');
                            akiblanhbb.querySelector('#btnban').classList.add('novisible');
                        }

                        if (yasoide == kie) {

                            akiblanhbb.querySelector('#btnwebcamm').classList.remove('novisible');//es inline

                            //Nolang
                            if (!elementExists(document.getElementById('kekoallakic').querySelector('#ifra' + yasoid)))
                                akiblanhbb.querySelector('#btnwebcamm').innerHTML = '<img src="' + dominiobase + 'imagesnew/appico3/cam.png"/>' + iw[138];
                            else
                                akiblanhbb.querySelector('#btnwebcamm').innerHTML = '<img src="' + dominiobase + 'imagesnew/appico3/cam.png"/>' + iw[139];

                            akiblanhbb.querySelector('#btnajustes').classList.remove('novisible');
                            akiblanhbb.querySelector('#btnlook').classList.remove('novisible');
                            akiblanhbb.querySelector('#btnduerme').classList.add('novisible');
                            if (mbailo == 'baila') {
                                akiblanhbb.querySelector('#btnbailar').innerHTML = '<img src="' + dominiobase + 'imagesnew/appico3/baila.png"/>' + iw[140];
                            } else {
                                akiblanhbb.querySelector('#btnbailar').innerHTML = '<img src="' + dominiobase + 'imagesnew/appico3/baila.png"/>' + iw[141];
                            }
                            akiblanhbb.querySelector('#btnbailar').classList.remove('novisible');
                            //akiblanhbb.querySelector('#btnbailard').classList.remove('novisible');
                            akiblanhbb.querySelector('#btnsentarme').classList.remove('novisible');
                            //akiblanhbb.querySelector('#btncarao').classList.remove('novisible');
                            //akiblanhbb.querySelector('#btncaragrr').classList.remove('novisible');
                            //akiblanhbb.querySelector('#btncaraay').classList.remove('novisible');
                            //akiblanhbb.querySelector('#btncarajaja').classList.remove('novisible');
                            akiblanhbb.querySelector('#btnestirarme').classList.remove('novisible');
                            akiblanhbb.querySelector('#btncamara').classList.remove('novisible');
                            akiblanhbb.querySelector('#btndarobj').classList.add('novisible');
                            akiblanhbb.querySelector('#btnbesarse').classList.add('novisible');
                            akiblanhbb.querySelector('#btnmegustas').classList.add('novisible');
                            akiblanhbb.querySelector('#btnpatear').classList.add('novisible');
                            akiblanhbb.querySelector('#btnherramientas').classList.remove('novisible');

                            akiblanhbb.querySelector('#btndisparar').classList.add('novisible');

                        } else {
                            akiblanhbb.querySelector('#btnwebcamm').classList.add('novisible');
                            akiblanhbb.querySelector('#btnherramientas').classList.add('novisible');
                            if (estoyarti == 'pistola' || estoyarti == 'pistolaazul' || estoyarti == 'thompson') {
                                akiblanhbb.querySelector('#btndisparar').classList.remove('novisible');
                            } else {
                                akiblanhbb.querySelector('#btndisparar').classList.add('novisible');
                            }
                            //akiblanhbb.querySelector('#btncarajaja').classList.add('novisible');
                            //akiblanhbb.querySelector('#btncaraay').classList.add('novisible');
                            //akiblanhbb.querySelector('#btncaragrr').classList.add('novisible');
                            //akiblanhbb.querySelector('#btncarao').classList.add('novisible');
                            akiblanhbb.querySelector('#btnajustes').classList.add('novisible');
                            akiblanhbb.querySelector('#btnlook').classList.add('novisible');

                            if (miart != '' && !isNaN(miart)) {
                                akiblanhbb.querySelector('#btndarobj').classList.remove('novisible');
                            } else {
                                akiblanhbb.querySelector('#btndarobj').classList.add('novisible');
                            }

                            if (modocity == 'si') {
                                akiblanhbb.querySelector('#btnbesarse').classList.add('novisible');
                                akiblanhbb.querySelector('#btnpatear').classList.add('novisible');
                            } else {
                                akiblanhbb.querySelector('#btnpatear').classList.remove('novisible');
                                akiblanhbb.querySelector('#btnbesarse').classList.remove('novisible');
                            }
                            akiblanhbb.querySelector('#btnmegustas').classList.remove('novisible');
                            akiblanhbb.querySelector('#btnduerme').classList.add('novisible');
                            akiblanhbb.querySelector('#btnbailar').classList.add('novisible');
                            //akiblanhbb.querySelector('#btnbailard').classList.add('novisible');
                            akiblanhbb.querySelector('#btnsentarme').classList.add('novisible');
                            akiblanhbb.querySelector('#btnestirarme').classList.add('novisible');
                            akiblanhbb.querySelector('#btncamara').classList.add('novisible');
                        }
                        if (yasoide == kie) {
                            akiblanhbb.querySelector('#btncambiar').classList.add('novisible');
                        } else {
                            akiblanhbb.querySelector('#btncambiar').classList.remove('novisible');
                        }
                        if (yasoide != kie) {

                            var elestipcuenta = steka.getAttribute('data-tcue');

                            //consola.log(mitipocuenta,'elestipcuenta',elestipcuenta);

                            if (mitipocuenta == 0 && elestipcuenta == '0')
                                akiblanhbb.querySelector('#btnamigo').classList.remove('novisible');
                            else
                                akiblanhbb.querySelector('#btnamigo').classList.add('novisible');

                            if (kekosigno.indexOf(kieconk) >= 0) {
                                akiblanhbb.querySelector('#btnignorar').innerHTML = '<img src="' + dominiobase + 'imagesnew/appico3/ignor.png"/>' + iw[142]; //nolang
                            } else {
                                akiblanhbb.querySelector('#btnignorar').innerHTML = '<img src="' + dominiobase + 'imagesnew/appico3/ignor.png"/>' + iw[143]; //nolang
                            }
                            akiblanhbb.querySelector('#btnignorar').classList.remove('novisible');

                            if (kekosusu == kie) {
                                akiblanhbb.querySelector('#btnsusurrar').innerHTML = '<img src="' + dominiobase + 'imagesnew/appico3/susu.png"/>' + iw[144]; //nolang
                            } else
                                akiblanhbb.querySelector('#btnsusurrar').innerHTML = '<img src="' + dominiobase + 'imagesnew/appico3/susu.png"/>' + iw[145]; //nolang

                            akiblanhbb.querySelector('#btnsusurrar').classList.remove('novisible');

                        } else {
                            akiblanhbb.querySelector('#btnamigo').classList.add('novisible');
                            akiblanhbb.querySelector('#btnignorar').classList.add('novisible');
                            akiblanhbb.querySelector('#btnsusurrar').classList.add('novisible');
                        }

                        if (!misamigs[kieconk]) {
                            if (vextr['peti' + kie]) {
                                akiblanhbb.querySelector('#btnamigo').disabled = true;

                                akiblanhbb.querySelector('#btnamigo').innerHTML = '<img src="' + dominiobase + 'imagesnew/appico/addamigo.png"/>' + iw[146];

                            } else {
                                akiblanhbb.querySelector('#btnamigo').disabled = false;

                                akiblanhbb.querySelector('#btnamigo').innerHTML = '<img src="' + dominiobase + 'imagesnew/appico/addamigo.png"/>' + iw[147];

                            }
                        } else {
                            akiblanhbb.querySelector('#btnamigo').disabled = false;

                            akiblanhbb.querySelector('#btnamigo').innerHTML = '<img src="' + dominiobase + 'imagesnew/appico/addamigo.png"/>' + iw[148];

                        }
                        //akiblanhbb.querySelector('#miniima').classList.remove('novisible');
                        akiblanhbb.querySelector('#btnssgente').classList.remove('novisible');
                        //if(akiblanhbb.querySelector('#botonesaccion').style.display == 'none'){akiblanhbb.querySelector('#botonesaccion').style.display='block';this.innerHTML='Menos';}else{akiblanhbb.querySelector('#botonesaccion').classList.add('novisible');this.innerHTML='M√°s';}



                    }
                }
            },
            btnnntoque = function (idbtn, accion) {
                var btnnamigglobo = document.getElementById(idbtn);
                if (btnnamigglobo) {
                    ////////////consola.log('btnnntoque');
                    var textamigo = '';
                    var disabledamigo = '';
                    textamigo = iw[149];//nolang
                    var esteidkeko = btnnamigglobo.getAttribute('data-idkkk');
                    if (btnnamigglobo.getAttribute('data-esamig') == '1' || misamigs['k' + esteidkeko]) {
                        if (accion == 'click' && !vextr['toq' + esteidkeko]) {
                            vextr['toq' + esteidkeko] = 's';
                            katman('mandonoti', esteidkeko, 2, '', '', '', '');
                        }
                    }

                    if (vextr['toq' + esteidkeko]) {
                        disabledamigo = 'disabled="disabled" ';
                        textamigo = iw[150];
                    }

                    if (textamigo != '')
                        btnnamigglobo.innerHTML = textamigo;
                    if (disabledamigo == 'disabled="disabled" ') {
                        btnnamigglobo.setAttribute('disabled', 'disabled');
                    } else {
                        btnnamigglobo.removeAttribute('disabled');
                    }
                    btnnamigglobo.onclick = function () {
                        btnnntoque(this.id, 'click');
                    };
                }
            },
            btnnnamistad = function (idbtn) {
                var btnnamigglobo = document.getElementById(idbtn);
                if (btnnamigglobo) {
                    if (mitipocuenta != 0) {
                        btnnamigglobo.classList.add('novisible');
                    } else {
                        var textamigo = '';
                        var disabledamigo = '';
                        var esteidkeko = btnnamigglobo.getAttribute('data-idkkk');
                        if (btnnamigglobo.getAttribute('data-esamig') == '1') {

                            if (idbtn == 'btnamigo')
                                textamigo = iw[151];//Nolang
                            else
                                textamigo = iw[152];//Nolang

                        } else {
                            textamigo = iw[153];//Nolang
                            if (btnnamigglobo.getAttribute('data-esamig') == '1') {
                                if (idbtn == 'btnamigo')
                                    textamigo = iw[154];//Nolang
                                else
                                    textamigo = iw[155];//Nolang

                            } else if (vextr['peti' + esteidkeko] == 1) {
                                textamigo = iw[156];//solicitud enviada
                                disabledamigo = 'disabled="disabled" ';
                            }
                            else if (vextr['peti' + esteidkeko] == 2) {
                                textamigo = iw[157];//aceptar como amigo
                            }
                        }

                        //if(idbtn == 'btnamigo' && textamigo != ''){
                        //textamigo='<img src="'+dominiobase+'imagesnew/appico/addamigo.png"/> <span>'+textamigo+'</span>';
                        //}

                        btnnamigglobo.innerHTML = textamigo;
                        if (disabledamigo == 'disabled="disabled" ') {
                            btnnamigglobo.setAttribute('disabled', 'disabled');
                        }
                        btnnamigglobo.onmouseup = function () {
                            agregaramigo(idbtn, esteidkeko, '');
                        };
                    }
                }
            },
            cargadinaboxs = function () {
                if (document.getElementById('appaki')) {
                    var mirodinaboxs = document.getElementById('appaki').querySelectorAll('[data-dinabox]')
                        , cuantosdinas = mirodinaboxs.length;;
                    if (cuantosdinas > 0) {
                        while (cuantosdinas--) {
                            if (mirodinaboxs[cuantosdinas]) {
                                cargadinabox(mirodinaboxs[cuantosdinas]);
                            }
                        }
                    }
                }
            },
            compartiryaformkweet = function (estaid, esteformm, datadinabox, para) {


                //console.log('estaid',estaid);
                //console.log('esteformm',esteformm);
                //console.log('datadinabox',datadinabox);
                //console.log('para',para);
                var privacidad = 0;
                var datos = '';
                var texto = '';
                var accion = 'nw';
                var bd = 'yo';
                if (document.getElementById('compartirya' + estaid)) {
                    texto = document.getElementById('compartirya' + estaid).value;
                }
                if (document.getElementById('spriv' + estaid + 'o')) {
                    privacidad = document.getElementById('spriv' + estaid + 'o').value;
                }
                if (document.getElementById('compartirya' + estaid + 'fom')) {
                    var fotisdiv = document.getElementById('compartirya' + estaid + 'fom').querySelectorAll('div[data-t]');
                    ////////////consola.log('fotisdiv',fotisdiv);
                    if (fotisdiv.length > 0) {
                        for (var ibura = 0; ibura < fotisdiv.length; ibura++) {
                            if (fotisdiv[ibura]) {
                                ////////////consola.log('datat'+fotisdiv[ibura].getAttribute('data-t'));
                                datos += fotisdiv[ibura].getAttribute('data-t') + ',' + fotisdiv[ibura].getAttribute('data-i') + ',' + fotisdiv[ibura].getAttribute('data-u') + ';';
                                fotisdiv[ibura].parentNode.removeChild(fotisdiv[ibura]);
                            }
                        }
                    }
                    datos += enviyawowperf();
                }

                ////console.log('datos',datos);
                if (texto != '' || datos != '') {
                    ////////////
                    //console.log('mando kweet para'+para);

                    texto = texto.replace(/\n/g, '\n ');

                    katman('ckweet', 'kweet', bd, para, accion, texto, datos, privacidad);
                    document.getElementById('compartirya' + estaid).value = '';
                    resizeTextarea(document.getElementById('compartirya' + estaid));
                    if (datadinabox == 'pushfotos' && document.getElementById('volverprfil')) {
                        document.getElementById('volverprfil').click();
                    }
                }
                borrar('sobretododiv');
                //document.body.scrollTop=0;
                ////////////consola.log('mando kweet');
            },
            conupload = function (event) {

                var formData = new FormData();
                var fileSelect = event.target;
                var files = fileSelect.files;
                for (var ifile = 0; ifile < files.length; ifile++) {
                    var file = files[ifile];

                    //  if (file.type.match('image.*')) {
                    //    continue;
                    //  }
                    formData.append('archivos[]', file, file.name);
                }
                // Start upload
                var urluplosss = urlperfils;
                urluplosss = urluplosss.replace('uploads/', 'uplospa.php');

                // Set up the request.
                borrar('subiendoarchivo');
                var imageElement = document.createElement('div');
                imageElement.classList.add('uploading');
                imageElement.id = 'subiendoarchivo';
                imageElement.innerHTML = '<span class="progress"><img src="' + dominiobase + 'imagesnew/game/cargando.gif"></span>';
                document.getElementById(event.target.getAttribute('data-base') + 'fom').querySelector('div.photos').appendChild(imageElement);


                var xhr = new XMLHttpRequest();
                xhr.open('POST', urluplosss, true);
                // Set up a handler for when the request finishes.
                xhr.onload = function () {
                    if (xhr.status === 200) {
                        borrar('subiendoarchivo');

                        var datosimagenTOT = xhr.responseText.split('\n');
                        for (var iuplo = 0; iuplo < datosimagenTOT.length; iuplo++) {
                            var datosimagen = datosimagenTOT[iuplo].split(':::YA:::');
                            var imageElement = document.createElement('div');
                            imageElement.classList.add('uploading');
                            imageElement.innerHTML = '<span class="progress"><span></span></span>';
                            var progressElement = imageElement.querySelector('span.progress span');
                            progressElement.style.width = 0;
                            document.getElementById(event.target.getAttribute('data-base') + 'fom').querySelector('div.photos').appendChild(imageElement);

                            var idfoto = datosimagen[0];
                            var tipoarchivo = datosimagen[1];
                            var tipoarchivokatr = 'f';
                            var urlfoto = datosimagen[2];
                            imageElement.classList.remove('uploading');
                            imageElement.classList.add('uploaded');

                            switch (tipoarchivo) {
                                case 'mp4':
                                    tipoarchivokatr = 'v';
                                    imageElement.innerHTML = '<video controls height="500"><source src="' + urlperfils + urlfoto + '" type="video/' + tipoarchivo + '"></video>';
                                    imageElement.style.width = '100%';
                                    imageElement.style.maxHeight = '500px';
                                    break;
                                default:
                                    tipoarchivokatr = 'f';
                                    imageElement.style.width = '90px';

                                    imageElement.style.height = '90px';
                                    imageElement.style.backgroundImage = 'url(' + urlperfils + urlfoto + ')';
                            }
                            imageElement.setAttribute('data-t', tipoarchivokatr);
                            imageElement.setAttribute('data-i', idfoto);
                            imageElement.setAttribute('data-u', urlfoto);
                        }
                    } else {
                        alerta('Error al procesar el formulario');
                    }

                };
                xhr.send(formData);

            },
            cargadinabox = function (este) {
                switch (este.getAttribute('data-dinabox')) {
                    case 'ads':
                        if (este.innerHTML == '')
                            este.innerHTML = '<p align="center"><img src="' + dominiobase + 'imagesnew/game/cargando.gif"></p>';
                        cargadinaboxajax(este, '');
                        break;
                    case 'photos'://nolang
                    case 'friends':
                        if (este.innerHTML == '')
                            este.innerHTML = '<p align="center"><img src="' + dominiobase + 'imagesnew/game/cargando.gif"></p>';
                        kajax({
                            data: 'mikeka=' + yasoid + '&idi=' + idila + '&dinabox=' + este.getAttribute('data-dinabox') + '&dinabox2=' + este.getAttribute('data-dinabox2') + '&pag=' + este.getAttribute('data-pag') + '&de=' + este.getAttribute('data-de'),
                            url: 'todoincs/verdinabox.php',
                            type: 'get',
                            success: function (response) {
                                cargadinaboxajax(este, response);
                            }
                        });
                        break;
                    case 'ajax':
                        if (este.innerHTML == '')
                            este.innerHTML = '<p align="center"><img src="' + dominiobase + 'imagesnew/game/cargando.gif"></p>';
                        kajax({
                            data: 'mikeka=' + yasoid + '&idi=' + idila + '&dinabox=' + este.getAttribute('data-dinabox') + '&dinabox2=' + este.getAttribute('data-dinabox2') + '&pag=' + este.getAttribute('data-pag') + '&de=' + este.getAttribute('data-de'),
                            url: este.getAttribute('data-dinabox2'),
                            type: 'get',
                            success: function (response) {
                                cargadinaboxajax(este, response);
                            }
                        });
                        break;
                    case 'push'://nolang
                    case 'pushfotos'://nolang

                        var hiddensoloyo = '';
                        if (este.getAttribute('data-para') >= 1) {
                            hiddensoloyo = ' novisible';
                        }
                        if (este.getAttribute('data-dinabox') == 'push') {
                            var texte = iw[159];
                            //<button class="btnpes fleft"><img src="'+dominiobase+'imagesnew/appico/invitar.png"> Invitaci√≥n</button>
                            este.innerHTML = '<button class="btnpes big on fleft"><img src="' + dominiobase + 'imagesnew/appico/actuestado.png"> ' + iw[160] + '</button> ' +
                                '<div class="fileUpload big btnpes"><img src="' + dominiobase + 'imagesnew/appico/foto.png"> ' + iw[161] + '<input type="file" data-base="compartirya' + este.id + '" id="filecompartirya' + este.id + '" class="upload" multiple /></div>' +
                                '<br/>' +
                                '<form id="compartirya' + este.id + 'fom"><textarea placeholder="' + texte + '" class="textcompartir" id="compartirya' + este.id + '">' +
                                '</textarea> <div id="masconapub' + este.id + '"></div> <div class="photos"></div>' +
                                '<button class="btnwo fright" style="margin-right:10px;margin-left:5px;">' + iw[162] + '</button><div class="btnselec fright" id="sprivsel' + este.id + '" style="width:100px;margin-top:1px;margin-right:4px;"><div id="spriv' + este.id + 'opsant" class="blockselante">' +
                                '<img src="' + dominiobase + 'maskeko/images/cat_1.png"/> <span>' + iw[163] + '</span></div>' +
                                '<div id="spriv' + este.id + 'ops"><div class="blockseldi" id="spriv' + este.id + '0">' +
                                '<img src="' + dominiobase + 'maskeko/images/cat_1.png"/> <span>' + iw[163] + '</span></div>' +
                                '<div class="blockseldi" id="spriv' + este.id + '1"><img src="' + dominiobase + 'images/casas.png"/> <span>' + iw[164] + '</span>' +
                                '</div>' +
                                '<div class="blockseldi' + hiddensoloyo + '" id="spriv' + este.id + '2"><img src="' + dominiobase + 'maskeko/images/like.png"/> ' +
                                '<span>' + iw[165] + '</span></div>' +
                                '<input type="hidden" id="spriv' + este.id + 'o" value="0"/></div></div></form>' +
                                '<br/><br/><br/>';
                        } else if (este.getAttribute('data-dinabox') == 'pushfotos') {
                            var texte = iw[166];

                            //<button class="btnpes fleft"><img src="'+dominiobase+'imagesnew/appico/invitar.png"> Invitaci√≥n</button>
                            este.innerHTML = '' +
                                '' +
                                '<br/>' +
                                '<form id="compartiryafom"><textarea placeholder="' + texte + '" class="textcompartir" id="compartirya">' +
                                '</textarea> <div id="masconapub"></div> <div class="fileUpload btnwo"><img src="' + dominiobase + 'imagesnew/appico/foto.png"> ' + iw[161] + '<input type="file" data-base="compartirya" id="filecompartirya" class="upload" multiple /></div><br/><br/><br/><div class="photos"></div>' +
                                '<button class="btnwo fright" style="margin-right:10px;margin-left:5px;">' + iw[162] + '</button><div class="btnselec fright" id="sprivsel" style="width:100px;margin-top:1px;margin-right:4px;"><div id="sprivopsant" class="blockselante">' +
                                '<img src="' + dominiobase + 'maskeko/images/cat_1.png"/> <span>' + iw[163] + '</span></div>' +
                                '<div id="sprivops"><div class="blockseldi" id="spriv0">' +
                                '<img src="' + dominiobase + 'maskeko/images/cat_1.png"/> <span>' + iw[163] + '</span></div>' +
                                '<div class="blockseldi" id="spriv1"><img src="' + dominiobase + 'images/casas.png"/> <span>' + iw[164] + '</span>' +
                                '</div>' +
                                '<div class="blockseldi' + hiddensoloyo + '" id="spriv2"><img src="' + dominiobase + 'maskeko/images/like.png"/> ' +
                                '<span>' + iw[165] + '</span></div>' +
                                '<input type="hidden" id="sprivo" value="0"/></div></div></form>' +
                                '<br/><br/><br/>';
                        }
                        //if(este.getAttribute('data-dinabox') == 'pushfotos'){
                        //
                        //}
                        seleccionable('spriv' + este.id);
                        if (document.getElementById('filecompartirya' + este.id) && document.getElementById('filecompartirya' + este.id).addEventListener)
                            document.getElementById('filecompartirya' + este.id).addEventListener('change', conupload);
                        //hazeventlistener(document.querySelector('input[type=file]'),"change",
                        //function(event){conupload(event)});

                        //document.querySelector('input[type=file]').addEventListener('change', function(event){
                        //conupload(event)});

                        // onkeydown="kekoprofilecheck();" onchange="kekoprofilecheck();" onkeyup="kekoprofilecheck();"
                        document.getElementById('compartirya' + este.id).onkeyup = function () { resizeTextarea(this); kekoprofilecheck(); };
                        document.getElementById('compartirya' + este.id).onkeydown = function () { kekoprofilecheck(); };
                        document.getElementById('compartirya' + este.id).onchange = function () { kekoprofilecheck(); };
                        document.getElementById('compartirya' + este.id + 'fom').onsubmit = function () {
                            compartiryaformkweet(este.id, document.getElementById('compartirya' + este.id + 'fom'), este.getAttribute('data-dinabox'), este.getAttribute('data-para'));
                            return false;
                        };

                        break;
                    default:
                        este.innerHTML = 'ERROR dinabox anonymous data-dinabox ' + este.getAttribute('data-dinabox');
                }
            },
            cargadinaboxajax = function (este, response) {
                if (este) {
                    if (este.innerHTML == '<p align="center"><img src="' + dominiobase + 'imagesnew/game/cargando.gif"></p>')
                        este.innerHTML = '';//<br/><br/>
                    var estetipodinabox1 = este.getAttribute('data-dinabox');

                    if (estetipodinabox1 == 'ads') {//publicidad
                        var eslaurldina = este.getAttribute('data-dinabox2');

                        if (eslaurldina.substring(0, 2) != '//' && eslaurldina.substring(0, 4) != 'http') {
                            eslaurldina = dominiobase + eslaurldina;
                        }

                        este.innerHTML = '<iframe scrolling="no" class="frams" src="' + eslaurldina + '" width="' + este.getAttribute('data-w') + '" height="' + este.getAttribute('data-h') + '"></iframe>';
                    } else {
                        var estetipou = este.getAttribute('data-dinabox');
                        var estetipo = este.getAttribute('data-dinabox2');

                        switch (estetipou) {
                            case 'ajax':
                                este.innerHTML = response;
                                break;
                            default:
                                var obj = JSON.parse(response).katrixdata;
                                for (var i = 0; i < obj.length; i++) {

                                    switch (estetipo) {
                                        case 'friends':
                                            var creo = document.createElement('div');
                                            creo.style.width = '130px';
                                            creo.style.height = '130px';
                                            creo.style.cursor = 'pointer';
                                            creo.style.display = 'inline-block';
                                            creo.className = 'linkde';
                                            creo.setAttribute('data-globkek', obj[i].keko);
                                            creo.setAttribute('data-globkid', obj[i].idkeko);
                                            //function cargolinkde('id',dentrodeid){this.getAttribute('data-globkek')

                                            creo.style.border = '2px solid #fff';
                                            if (!obj[i].demini) obj[i].demini = 'default.png';
                                            creo.style.background = 'url(' + urlperfils + obj[i].demini + ') no-repeat';
                                            creo.style.backgroundSize = '100% 100%';
                                            creo.innerHTML = '<span class="titulow" style="width:auto;">' + obj[i].keko + '</span>';
                                            este.appendChild(creo);
                                            break;
                                        case 'photos':
                                            var creo = document.createElement('img');
                                            creo.style.width = '24%';
                                            creo.style.height = '24%';
                                            creo.style.cursor = 'pointer';
                                            creo.style.border = '2px solid #fff';
                                            //creo.style.margin='5px';
                                            creo.src = urlperfils + encodeURI(obj[i].url);
                                            creo.setAttribute('data-idmuro', obj[i].idmuro);
                                            creo.setAttribute('data-idfoto', obj[i].id);
                                            creo.setAttribute('data-idkeko', obj[i].idkeko);
                                            creo.onclick = function () {
                                                sobretodo(this);
                                            };
                                            //creo.style.background='url(http://5.145.168.233/uploads/'+encodeURI(obj[i].url)+')';
                                            //creo.className='fleft';
                                            //creo.innerHTML='aa';
                                            este.appendChild(creo);
                                            break;
                                    }
                                    ////////////consola.log('cargadinaboxajax');//OJOAKI
                                }
                        }

                        if (estetipo == 'friends' || estetipo == 'photos') {
                            if (estetipo == 'friends') cargolinkde('id', este.id);
                            borrar('btnvmasliss');
                            if (document.getElementById(estetipo + 'total')) {
                                var amigstoootal = parseInt(document.getElementById(estetipo + 'total').innerHTML);
                                if (isNaN(amigstoootal)) amigstoootal = 0;

                                var buscotagnn = 'div';
                                if (estetipo == 'photos') buscotagnn = 'img';
                                //////consola.log('cuantos'+este.getElementsByTagName(buscotagnn).length+' total'+amigstoootal);
                                if (este.querySelectorAll(buscotagnn).length < amigstoootal) {

                                    var creovmas = document.createElement('button');
                                    creovmas.style.width = '90%';
                                    creovmas.style.marginTop = '30px';
                                    creovmas.style.marginBottom = '30px';
                                    creovmas.style.marginLeft = '5%';
                                    creovmas.style.lineHeight = '20px';
                                    creovmas.style.textAlign = 'center';
                                    creovmas.setAttribute('id', 'btnvmasliss');
                                    creovmas.className = 'btnwo';
                                    creovmas.innerHTML = 'Ver m√°s';//nolang
                                    creovmas.style.cursor = 'pointer';
                                    creovmas.style.display = 'block';
                                    creovmas.onclick = function () {
                                        vermasdinasbox(this, este);
                                    };
                                    este.appendChild(creovmas);
                                } else if (amigstoootal == 0 && obj.length == 0) {

                                    var creovmas = document.createElement('div');
                                    creovmas.style.width = '90%';
                                    creovmas.style.marginTop = '30px';
                                    creovmas.style.marginBottom = '30px';
                                    creovmas.style.marginLeft = '5%';
                                    creovmas.style.lineHeight = '20px';
                                    creovmas.style.fontSize = '18px';
                                    creovmas.style.color = '#2A3338';
                                    creovmas.style.textAlign = 'center';
                                    creovmas.setAttribute('id', 'btnvmasliss');
                                    if (estetipo == 'photos') {
                                        if (este.getAttribute('data-de') == yasoid) {
                                            creovmas.innerHTML = iw[167];//nolang
                                            creovmas.onclick = function () {
                                                if (document.getElementById('filecompartirya')) document.getElementById('filecompartirya').click();
                                            };
                                        } else
                                            creovmas.innerHTML = iw[168] + ' ' + este.getAttribute('data-dekeko') + ' ' + iw[169];//nolang

                                    } else if (estetipo == 'friends') {
                                        if (este.getAttribute('data-de') == yasoid) {
                                            creovmas.innerHTML = iw[170];//nolang
                                        } else
                                            creovmas.innerHTML = iw[171] + ' ' + este.getAttribute('data-dekeko') + ' ' + iw[172];//nolang

                                    }
                                    //////consola.log('este',este);
                                    creovmas.style.cursor = 'pointer';
                                    creovmas.style.display = 'block';
                                    este.appendChild(creovmas);
                                }

                            }
                        }
                    }
                }
            },
            vermasdinasbox = function (esteboton, este) {
                if (este && esteboton) {
                    esteboton.setAttribute('disabled', 'disabled');
                    esteboton.innerHTML = '<img src="' + dominiobase + 'imagesnew/appico3/cargatrans.gif">';
                    var pagahoo = este.getAttribute('data-pag');
                    pagahoo = parseInt(pagahoo);
                    pagahoo++;
                    este.setAttribute('data-pag', pagahoo);
                    cargadinabox(este);
                }
            },
            sobretodo = function (este) {

                ////////////consola.log('idmuro'+este.getAttribute('data-idmuro')+' idfoto'+este.getAttribute('data-idfoto')+' idkeko'+este.getAttribute('data-idkeko'));
                borrar('sobretododiv');
                var creo = document.createElement('div');
                creo.style.width = '100%';
                creo.style.height = '100%';
                creo.style.top = '0px';
                creo.style.left = '0px';
                creo.style.position = 'fixed';
                creo.style.zIndex = 5;
                creo.style.background = 'rgba(0, 0, 0, 0.6)';
                creo.id = 'sobretododiv';

                creo.innerHTML = '<div id="sobretododivya" style="margin-top:150px; margin-left:5%; height:' + parseInt(document.documentElement.clientHeight / 1.5) + 'px;width:' + parseInt(document.documentElement.clientWidth / 1.2) + 'px"></div>';
                document.getElementById('web').appendChild(creo);
                cargakweets('sobretododivya', 'idfoto', este.getAttribute('data-idfoto'));
            },
            resizeTextarea = function (a) {
                a.style.height = 'auto';
                a.style.height = a.scrollHeight + 'px';
            },
            cargakweets = function (enquediv, dedonde, pagina) {
                //console.log('pagina',pagina);
                if (dedonde != 'welcome' && dedonde != 'idfoto') {
                    dedonde = parseInt(dedonde);
                }
                if (!pagina || pagina == '' || pagina == 0) {
                    pagina = 0;
                }
                else if (isNaN(pagina) && pagina != 'idmuro') {
                    pagina = parseInt(pagina);
                }

                //console.log('')
                ////////////
                //console.log('cargakweets dedonde'+dedonde+' pagina'+pagina+' enquediv'+enquediv);

                if (document.getElementById(enquediv)) {
                    if (enquediv == 'akikweets') {
                        borrar('cargandokweets');
                    }
                    var creodonde = document.getElementById(enquediv);
                    var creo = document.createElement('div');
                    creo.innerHTML = '<p align="center"><img src="' + dominiobase + 'imagesnew/appico3/cargatrans.gif"></p>';

                    if (enquediv != 'akikweets')
                        creo.setAttribute('id', 'cargandokweetssobretodo');
                    else
                        creo.setAttribute('id', 'cargandokweets');

                    creodonde.appendChild(creo);
                }

                if (enquediv == 'akikweets') {
                    objextra.pagina = pagina;
                    objextra.enquediv = enquediv;
                    objextra.dedonde = dedonde;
                }
                var nadaaa = 's';
                //console.log(`data: mikeka=${yasoid}idi=${idila}&dedonde='${encodeURI(dedonde)}&pagina=${pagina}`)
                kajax({
                    data: 'mikeka=' + yasoid + '&idi=' + idila + '&dedonde=' + encodeURI(dedonde) + '&pagina=' + pagina,
                    url: 'todoincs/kweets.php',
                    type: 'get',
                    success: function (response) {

                        //console.log(response)

                        if (enquediv == 'akikweets' && dedonde != objextra.dedonde) {
                            //console.log('no cargo tweets otro dedonde',dedonde,objextra.dedonde);

                            nadaaa = 'N';
                        } else {
                            //console.log('sicargo enquediv',enquediv);

                            if (enquediv == 'akikweets')
                                borrar('cargandokweets');
                            else
                                borrar('cargandokweetssobretodo');

                            var obj = JSON.parse(response).katrixdata;
                            for (var i = 0; i < obj.length; i++) {//for(var i=obj.length;i>=0;i--){

                                if (obj[i]) cargokweet(enquediv, obj[i], dedonde, pagina);
                            }
                            if (obj.length == 0 && enquediv == 'sobretododivya') {
                                borrar('sobretododiv');
                            }
                            //console.log('HOLA EE333');

                            if (obj.length == 5 && document.getElementById(enquediv) && enquediv == 'akikweets') {
                                var creovmas = document.createElement('button');
                                creovmas.style.width = '90%';
                                creovmas.style.marginTop = '30px';
                                creovmas.style.marginBottom = '30px';
                                creovmas.style.marginLeft = '5%';
                                creovmas.style.lineHeight = '20px';
                                creovmas.style.textAlign = 'center';
                                creovmas.setAttribute('id', 'cargandokweets');
                                creovmas.className = 'btnwo';
                                creovmas.innerHTML = 'Ver m√°s';//nolang
                                creovmas.style.cursor = 'pointer';
                                creovmas.style.display = 'block';
                                creovmas.setAttribute('data-desdedon', dedonde);
                                creovmas.onclick = function () { vermaskwwetsya(this.getAttribute('data-desdedon')); };

                                //pagina++;
                                //cargakweets(enquediv,dedonde,pagina);
                                document.getElementById(enquediv).appendChild(creovmas);
                            }

                            var indexcargandomas = vars.indexOf('cargandomas');
                            if (indexcargandomas >= 0) {
                                vars.splice(indexcargandomas, 1);
                            }

                            if (pagina == 'idmuro') {
                                //console.log('SALDOIDMURO dedonde',dedonde,' enquediv',enquediv,' objextra.dedonde',objextra.dedonde);

                                if (enquediv == 'akikweets')
                                    entroosalgocanales('salgo', 'todos');


                                if (obj && obj[0] && obj[0].de && obj[0].de != yasoid) {
                                    entroosalgocanales('entrosolo', 'k' + obj[0].de);
                                    ////console.log('entro');
                                }
                                //else{
                                ////console.log('noentro');
                                //}
                            } else if (dedonde == 'welcome') {
                                entroosalgocanales('entro', 'todos');
                            } else if (dedonde != 'idfoto') {
                                //console.log('dedonde',dedonde);
                                if (canales.indexOf('k' + dedonde) == -1) {
                                    //console.log('saldodetodos dedonde',dedonde,' objextra.dedonde',objextra.dedonde,' inde',canales.indexOf('k'+dedonde));
                                    entroosalgocanales('salgo', 'todos');
                                    if (dedonde != yasoid)
                                        entroosalgocanales('entrosolo', 'k' + dedonde);
                                }
                            }
                        }
                    }
                });

            },
            entroosalgocanales = function (queha, cual) {
                var imagg;

                //console.log('entroosalgocanales',queha,' cual',cual);
                if (queha == 'entro') {
                    if (Object.keys(misamigs).length > 0) {
                        for (imagg in misamigs) {
                            if (canales.indexOf(imagg) == -1) {
                                canales.push(imagg);

                                //console.log('me unoal canal',imagg);
                                katman('entroalcanal', imagg);
                            }
                        }
                    }
                } else if (queha == 'entrosolo') {
                    if (canales.indexOf(cual) == -1) {
                        canales.push(cual);

                        //console.log('me SOLOal canal',cual);
                        katman('entroalcanal', cual);
                    }
                } else if (queha == 'salgo') {

                    if (canales.length > 0) {
                        for (var icana = 0; icana < canales.length; icana++) {
                            imagg = canales[icana];

                            //console.log('salgodelcanal',imagg);
                            katman('salgodelcanal', imagg);
                        }
                        canales = [];
                    }
                } else if (queha == 'reconecto') {
                    if (canales.length > 0) {
                        for (var icana = 0; icana < canales.length; icana++) {
                            imagg = canales[icana];

                            //console.log('entroalcanal',imagg);
                            katman('entroalcanal', imagg);
                        }
                    }
                }
            },
            vermaskwwetsya = function (DESDEDON) {

                //console.log('vermaskwwetsya dedonde',objextra.dedonde,DESDEDON);
                objextra.pagina++;
                cargakweets(objextra.enquediv, objextra.dedonde, objextra.pagina);
            },
            cargokweet = function (enquediv, este, dedonde, pagina) {

                if (!este.kdatos) este.kdatos = '';

                if (!"C√≥digo innecesario") {
                    //anti ataque nenyer 2021 IMPORTANTE OJOAKI SECURITY
                    este.kdatos = este.kdatos.replace(/\+/g, ' ');
                    este.kdatos = este.kdatos.replaceAll('atob', '');
                    este.kdatos = este.kdatos.replaceAll('javascript', '');
                    este.kdatos = este.kdatos.replaceAll('eval', '');
                    este.kdatos = este.kdatos.replaceAll('(', '');
                    este.kdatos = este.kdatos.replaceAll(')', '');
                    este.kdatos = este.kdatos.replaceAll('`', '');
                    este.kdatos = este.kdatos.replaceAll('¬¥', '');
                    este.kdatos = este.kdatos.replaceAll('function', '');
                    este.kdatos = este.kdatos.replaceAll('cookie', '');
                    este.kdatos = este.kdatos.replaceAll('http', '');
                    este.kdatos = stripHtml(este.kdatos);

                    if (!dedonde) dedonde = '';
                    //console.log('dedonde',dedonde);
                    if (isNaN(dedonde) && dedonde != 'idfoto') {
                        //anti ataque nenyer 2021 IMPORTANTE OJOAKI SECURITY
                        dedonde = dedonde.replace(/\+/g, ' ');
                        dedonde = dedonde.replaceAll('atob', '');
                        dedonde = dedonde.replaceAll('javascript', '');
                        dedonde = dedonde.replaceAll('eval', '');
                        dedonde = dedonde.replaceAll('(', '');
                        dedonde = dedonde.replaceAll(')', '');
                        dedonde = dedonde.replaceAll('`', '');
                        dedonde = dedonde.replaceAll('¬¥', '');
                        dedonde = dedonde.replaceAll('function', '');
                        dedonde = dedonde.replaceAll('cookie', '');
                        dedonde = dedonde.replaceAll('http', '');
                        dedonde = stripHtml(dedonde);
                    }

                    if (!pagina) pagina = 0;

                    if (isNaN(pagina)) {
                        //anti ataque nenyer 2021 IMPORTANTE OJOAKI SECURITY
                        pagina = pagina.replace(/\+/g, ' ');
                        pagina = pagina.replaceAll('atob', '');
                        pagina = pagina.replaceAll('javascript', '');
                        pagina = pagina.replaceAll('eval', '');
                        pagina = pagina.replaceAll('(', '');
                        pagina = pagina.replaceAll(')', '');
                        pagina = pagina.replaceAll('`', '');
                        pagina = pagina.replaceAll('¬¥', '');
                        pagina = pagina.replaceAll('function', '');
                        pagina = pagina.replaceAll('cookie', '');
                        pagina = pagina.replaceAll('http', '');
                        pagina = stripHtml(pagina);
                    }
                }

                //  //console.log('cargokweet',enquediv,este,dedonde,pagina);
                var ponelkweet = 'n';
                if (enquediv == 'sobretododivya') {
                    este.bd = 'so';
                    ponelkweet = 's';
                } else if (enquediv != 'akikweets') {
                    este.bd = 'sh';
                    ponelkweet = 's';
                } else {
                    este.bd = 'yo';
                    var diiakkikweets = document.getElementById('akikweets');
                    if (elementExists(diiakkikweets)) {//OJOAKI
                        ////console.log('pongokweetSI');
                        if (este.para && !este.parakeko && este.para == yasoid) {
                            este.parakeko = yasokek;
                        }
                        if (diiakkikweets.getAttribute('data-desdehash') || pagina == 'idmuro' || diiakkikweets.getAttribute('data-bd') == este.bd && este.de == yasoid || diiakkikweets.getAttribute('data-bd') == este.bd && diiakkikweets.getAttribute('data-dedonde') == este.de || diiakkikweets.getAttribute('data-bd') == este.bd && diiakkikweets.getAttribute('data-dedonde') == este.para || diiakkikweets.getAttribute('data-bd') == este.bd && !diiakkikweets.getAttribute('data-dedonde')) {

                            if (pagina == 'idmuro') {
                                diiakkikweets.setAttribute('data-bd', este.bd);
                                diiakkikweets.setAttribute('data-dedonde', este.de);
                            }
                            //console.log('siloponGOOO',diiakkikweets.getAttribute('data-bd'),este.bd,' dedonde',diiakkikweets.getAttribute('data-dedonde'),este.para);

                            ponelkweet = 's';
                        } else {
                            //console.log('nopongokweet',diiakkikweets.getAttribute('data-bd'),este.bd,' dedonde',diiakkikweets.getAttribute('data-dedonde'),este.para);
                            ponelkweet = 'n';
                        }
                    } else {
                        //console.log('DOSnopongokweet',diiakkikweets.getAttribute('data-bd'),este.bd,' dedonde',diiakkikweets.getAttribute('data-dedonde'),este.para);

                        ponelkweet = 'n';
                    }
                }

                //console.log('hola',enquediv);
                // && document.getElementById(enquediv).getAttribute('data-bd') == este.bd
                ////////////consola.log('cargokweet',este);

                //consola.log('nopongoelkweet');
                //}else{
                if (ponelkweet == 's') {

                    //console.log('lo cargo ya');
                    if (!este.mamigo) este.mamigo = '';
                    if (document.getElementById(enquediv)) {
                        if (!este.demini) este.demini = 'default.png';
                        if (!este.para) {
                            este.para = '';
                        }
                        if (!este.parakeko) {
                            este.parakeko = '';
                        }
                        var creodonde = document.getElementById(enquediv);
                        var creo = document.createElement('div');
                        creo.setAttribute('id', 'kweet' + este.bd + este.id);
                        creo.setAttribute('data-bd', este.bd);
                        creo.setAttribute('data-id', este.id);
                        creo.setAttribute('data-de', este.de);
                        creo.setAttribute('data-para', este.para);
                        creo.setAttribute('data-parakeko', este.parakeko);
                        creo.setAttribute('data-mgusta', este.mgusta);
                        creo.setAttribute('data-ahor', este.ahor);
                        creo.setAttribute('data-fech', este.fech);
                        creo.setAttribute('data-clike', este.clike);
                        creo.setAttribute('data-mamigo', este.mamigo);
                        creo.setAttribute('data-ccom', este.ccom);
                        creo.setAttribute('data-ccommos', 0);
                        if (dedonde == 'idfoto')
                            creo.setAttribute('data-idfoto', pagina);


                        creo.setAttribute('data-kdatos', este.kdatos);
                        creo.className = 'boxkweet';//nolang
                        var kedatos = '';
                        if (!este.kmsg) este.kmsg = '';

                        var heig = 200;
                        var wiid = 200;
                        if (enquediv == 'sobretododivya') {

                            heig = creodonde.style.height.replace('px', '');
                            heig = parseInt(heig);
                            wiid = creodonde.style.width.replace('px', '');
                            wiid = parseInt(wiid);
                            wiid -= 320;
                        }
                        var wiidfoto = wiid;
                        if (wiid > heig) {
                            wiid = heig;
                            wiidfoto = heig;
                        } else if (wiid < heig) {
                            heig = wiid;
                            wiidfoto = heig;
                        }
                        if (este.kdatos) {
                            //consola.log('estekdat=',este.kdatos,'=');
                            var kdatosen = '';
                            var soytipo = '';

                            if (enquediv == 'sobretododivya') {
                                kedatos += '<div style="height:' + (heig - 40) + 'px;width:' + wiid + 'px;overflow:auto;">';
                                wiidfoto += 'px';
                                creo.style.width = (wiid + 330) + 'px';
                                creo.style.height = (heig + 40) + 'px';
                                creo.style.margin = '0 auto';
                            } else {
                                kedatos += '<div style="margin-top:10px;display:block" id="blocksfots' + este.bd + este.id + '">';
                                wiidfoto = '100%';
                            }

                            //console.log('este.kdatos',este.kdatos);
                            var kdatose = este.kdatos.split(';');
                            for (var ibura = 0; ibura < kdatose.length; ibura++) {
                                if (kdatose[ibura]) {
                                    kdatosen = kdatose[ibura].split(',');

                                    switch (kdatosen[0]) {//foto kweet //OJOAKI uploads
                                        case 's':
                                            //compartir
                                            //idkweet a compartir kdatosen[1]
                                            kedatos += '<div id="share' + parseInt(este.id) + '' + parseInt(kdatosen[1]) + '"></div>';
                                            //console.log('share'+parseInt(este.id)+''+parseInt(kdatosen[1]));
                                            setTimeout(cargakweets, 100, 'share' + parseInt(este.id) + '' + parseInt(kdatosen[1]), parseInt(kdatosen[1]), 'idmuro');
                                            break;

                                        case 'f':
                                            ////console.log('FOTO',kdatosen[1]);

                                            if (kdatosen[1] && kdatosen[2]) {
                                                if (dedonde != 'idfoto' || dedonde == 'idfoto' && kdatosen[1] == pagina) {

                                                    var ponurlfotoya = encodeURI(urlperfils + kdatosen[2]);
                                                    if (dedonde != 'idfoto') {
                                                        setTimeout(function (creo, este, kdatosen) {
                                                            var imgnew = new Image();
                                                            var pondewii = '';
                                                            var pondehei = '';
                                                            imgnew.onload = function () {

                                                                var estaiii = creo.querySelector('[data-idkeko="' + este.de + '"][data-idmuro="' + este.id + '"][data-idfoto="' + parseInt(kdatosen[1]) + '"]');


                                                                estaiii.src = this.src;
                                                                pondewii = this.width;
                                                                pondehei = this.height;
                                                                if (300 < pondehei) {
                                                                    pondewii = (pondewii / (pondehei / 300));
                                                                    pondehei = '300px';
                                                                } else {
                                                                    pondehei += 'px';
                                                                }

                                                                if (estaiii.parentNode.offsetWidth < pondewii) {
                                                                    pondewii = '100%';
                                                                } else {
                                                                    pondewii += 'px';
                                                                }
                                                                //if(this.height>300){
                                                                estaiii.style.width = pondewii;
                                                                estaiii.style.height = pondehei;
                                                                //}
                                                                //console.log('h',this.height);
                                                                //console.log('w',this.width);
                                                            }
                                                            imgnew.src = encodeURI(urlperfils + kdatosen[2]);
                                                        }, 30, creo, este, kdatosen);
                                                        ponurlfotoya = '';
                                                    }
                                                    kedatos += '<img data-idkeko="' + este.de + '" data-idmuro="' + este.id + '" data-idfoto="' + parseInt(kdatosen[1]) + '" src="' + ponurlfotoya + '" style="width:' + wiidfoto + '"/>';

                                                }
                                            }
                                            break;
                                        case 'v':
                                            //video de keko
                                            if (kdatosen[1] && kdatosen[2]) {
                                                if (dedonde != 'idfoto' || dedonde == 'idfoto' && kdatosen[1] == pagina)
                                                    var tipoarchivo = kdatosen[2].split('.');
                                                tipoarchivo = tipoarchivo[(tipoarchivo.length - 1)];
                                                //kedatos += '<video controls style="max-height: 400px;"><source src="' + encodeURI(urlperfils + kdatosen[2]) + '" type="video/' + tipoarchivo + '"></video>';
                                                kedatos += `
                                                            <div class="video-container">
                                                                <video id="custom-video" style="max-height: 400px;" controls>
                                                                    <source src="${encodeURI(urlperfils + kdatosen[2])}" type="video/${tipoarchivo}">
                                                                </video>
                                                            </div>
                                                            `;


                                                //imageElement.style.width = '100%';
                                                //imageElement.style.maxHeight = '500px';

                                                //kedatos+='<img data-idkeko="'+este.de+'" data-idmuro="'+este.id+'" data-idfoto="'+parseInt(kdatosen[1])+'" src="'+encodeURI(urlperfils+kdatosen[2])+'" style="width:'+wiidfoto+'"/>';
                                            }
                                            break;
                                        case 'tt': //video de youtube
                                            ////console.log('video',kdatosen[2]);
                                            if (kdatosen[1] && kdatosen[2]) {
                                                if (dedonde != 'idfoto' || dedonde == 'idfoto' && encodeURI(kdatosen[2]) == pagina)
                                                    kedatos += '<div id="vid' + este.id + encodeURI(kdatosen[2]) + '" class="pointer" onclick="veddvv(\'' + encodeURI(kdatosen[2]) + '\',\'vid' + este.id + encodeURI(kdatosen[2]) + '\')">'
                                                        + '<h3>' + limpia(kdatosen[3], este.de, 1, 'mision') + '</h3><h4>' + limpia(kdatosen[4], este.de, 1, 'mision') + '</h4>' + '<div id="dplvid' + este.id + encodeURI(kdatosen[2]) + '"><img data-idkeko="' + este.de + '" data-idmuro="' + este.id + '" data-idvideo="' + encodeURI(kdatosen[2]) + '" src="' + encodeURI(kdatosen[1]) + '" style="width:' + wiidfoto + '"/></div></div>';
                                            }
                                            break;
                                    }
                                }
                            }
                            kedatos += '</div>';
                        }
                        var parahtml = '';
                        var mostraredita = '<img src="' + dominiobase + 'imagesnew/appico3/edit.png?v=4" class="opciones fright" data-opcionestipo="kweet">';

                        if (este.parakeko) {//nolang

                            parahtml += ' para <span class="linkde" data-globkid="' + este.para + '" data-globkek="' + este.parakeko + '">' + este.parakeko + '</span>';
                        }


                        var estemin = yomini;
                        var urlfotoya = urlperfils + estemin;

                        if (estemin != 'default.png' && estemin != 'casa.png' && estemin != '') {
                            urlfotoya = urlperfils + 'resiz.php?src=' + estemin + '&h=32&w=32';
                        } else {
                            urlfotoya = '/uploads/default.png';
                        }

                        if (enquediv == 'sobretododivya') {
                            //if(wiid>heig){
                            //wiid=heig;
                            //}
                            ////////////consola.log('heig'+heig);
                            var divmsg = '<div style="width:' + wiid + 'px;margin-right:302px;height:' + heig + 'px;font-size:14px;margin-top:8px;margin-bottom:8px;padding:5px;">'
                                + kedatos + '</div>';

                            creo.innerHTML = '<img src="' + dominiobase + 'imagesnew/app/closee.gif" class="fright cerrar" style="margin-right:2px;margin-top:5px;" onclick="this.parentNode.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode.parentNode);void(0);"><div class="tituloglobos" style="height:40px;"><img data-globkid="' + este.de + '" data-globkek="' + este.dekeko + '" src="' + urlperfils + este.demini + '" class="linkde fleft radinoti"/>' +
                                '<div class="fleft"><span data-globkid="' + este.de + '" data-globkek="' + este.dekeko + '" class="linkde">' + este.dekeko + '</span>' +
                                parahtml + '<div class="hace" id="hacekweet' + este.bd + este.id + '">' + iw[173] + '</div>' +
                                '</div>' + mostraredita + '</div>'
                                + '<div style="float:right;width:300px;height:' + (heig - 20) + 'px;overflow-x:hidden;overflow-y:auto;">' +
                                '<div style="padding:4px;font-size:14px;margin-top:10px;">' + limpia(este.kmsg, este.de, 100, 'web') + '</div>' +
                                '<div id="barycomskweet' + este.bd + este.id + '"></div><ul id="kweetcomens' + este.bd + este.id + '" class="boxcomentsya"></ul><div class="boxcoments" id="estecoms' + este.bd + este.id + '">' +
                                '<img src="' + urlfotoya + '" class="fleft radinoti icocomsflo"/> ' +
                                '<div class="texcomswrap"><div class="texcoms"><form id="forcomkweet' + este.bd + este.id + '"><input type="text" id="inpucomkweet' + este.bd + este.id + '" class="texinput" placeholder="Escribe un comentario"/></form></div></div></div></div>' + divmsg;

                        } else {
                            var divmsg = '<div style="font-size:14px;margin-top:8px;margin-bottom:8px;padding:5px;">'
                                + limpia(este.kmsg, este.de, 100, 'web') + kedatos + '</div>';
                            creo.innerHTML = '<div class="tituloglobos" style="height:40px;"><img data-globkid="' + este.de + '" data-globkek="' + este.dekeko + '" src="' + urlperfils + este.demini + '" class="linkde fleft radinoti"/><div class="fleft"><span data-globkid="' + este.de + '" data-globkek="' + este.dekeko + '" class="linkde">' + este.dekeko + '</span>' + parahtml + '<div class="hace" id="hacekweet' + este.bd + este.id + '">' + iw[173] + '</div></div>'
                                + mostraredita + '</div>' + divmsg + '<div id="barycomskweet' + este.bd + este.id + '"></div><ul id="kweetcomens' + este.bd + este.id + '" class="boxcomentsya"></ul><div class="boxcoments" id="estecoms' + este.bd + este.id + '">' +
                                '<img src="' + urlfotoya + '" class="fleft radinoti icocomsflo"/> ' +
                                '<div class="texcomswrap"><div class="texcoms"><form id="forcomkweet' + este.bd + este.id + '"><input type="text" id="inpucomkweet' + este.bd + este.id + '" class="texinput" placeholder="Escribe un comentario"/></form></div></div></div>';

                        }



                        creo.querySelector('.opciones').onclick = function () { veropcioneskweet(this) };

                        if (!este.posicion) {//creo abajo
                            creodonde.appendChild(creo);
                        } else {
                            if (creodonde.querySelector('.boxkweet')) {
                                //////////////consola.log('hay li');
                                ////////////consola.log('creoarriba');
                                creodonde.insertBefore(creo, creodonde.querySelector('.boxkweet'));
                            } else {

                                creodonde.appendChild(creo);
                            }
                        }

                        if (este.bd == 'sh') {

                            //console.log('barycomskweet'+este.bd+este.id);
                            creodonde.querySelector('#kweetcomens' + este.bd + este.id).className = 'novisible';
                            creodonde.querySelector('#estecoms' + este.bd + este.id).className = 'novisible';
                            creodonde.querySelector('#barycomskweet' + este.bd + este.id).className = 'novisible';

                        }

                        if (creodonde.querySelector('#blocksfots' + este.bd + este.id)) {


                            var boxes = creodonde.querySelector('#blocksfots' + este.bd + este.id).querySelectorAll('img'),
                                i = boxes.length;

                            while (i--) {
                                ////////consola.log(('id'+boxes[i].id);
                                if (boxes[i]) {
                                    if (boxes[i].getAttribute('data-idfoto')) {
                                        boxes[i].style.cursor = 'pointer';
                                        boxes[i].onclick = function () {
                                            sobretodo(this);
                                        }
                                    }
                                }
                            }
                            //creo.setAttribute('data-idmuro',obj[i].idmuro);
                            //creo.setAttribute('data-idfoto',obj[i].id);
                            //creo.setAttribute('data-idkeko',obj[i].idkeko);
                            //creo.onclick = function(){
                            //sobretodo(this);
                            //};S
                        }
                        cargolinkde('id', 'kweet' + este.bd + este.id);
                        ////////////consola.log('cargokweet',este);
                        hacecuanto('kweet', este.bd, este.id);
                        actualikes('kweet', este.bd, este.id);

                        if (este.ccom >= 1) {
                            cargocomentarios(este.bd, este.id, 0, 'nuevo', 0);
                        }

                        creodonde.querySelector('#forcomkweet' + este.bd + este.id).onsubmit = function () {
                            mandocomentario('kweet', este.bd, este.id);
                            return false;
                        };
                    }
                }
            },
            clickeopciondekweet = function (e) {
                var elem, evt = e ? e : event;
                if (evt.srcElement) elem = evt.srcElement;
                else if (evt.target) elem = evt.target;

                var hagoop = elem.getAttribute('data-op');
                var este_kweetpara = elem.parentNode.getAttribute('data-este_kweetpara');
                var este_kweetde = elem.parentNode.getAttribute('data-este_kweetde');
                var este_kweetid = elem.parentNode.getAttribute('data-este_kweetid');
                var este_comentarioid = elem.parentNode.getAttribute('data-este_comentarioid');
                var este_comentariode = elem.parentNode.getAttribute('data-este_comentariode');
                switch (hagoop) {
                    case 'eliminarkweet':
                        katman('opskweets', hagoop, este_kweetpara, este_kweetde, este_kweetid, este_comentarioid, este_comentariode);
                        //consola.log('hagoop '+hagoop+', este_kweetpara',este_kweetpara,' este_kweetde',este_kweetde,' este_kweetid',este_kweetid,' este_comentarioid',este_comentarioid,' este_comentariode',este_comentariode);
                        break;
                    case 'eliminarcomentario':
                        katman('opskweets', hagoop, este_kweetpara, este_kweetde, este_kweetid, este_comentarioid, este_comentariode);
                        //consola.log('hagoop '+hagoop+', este_kweetpara',este_kweetpara,' este_kweetde',este_kweetde,' este_kweetid',este_kweetid,' este_comentarioid',este_comentarioid,' este_comentariode',este_comentariode);
                        break;
                    //default:
                    //consola.log('error noseop',hagoop);
                }
                //consola.log('clickeopciondekweet hagoop '+hagoop+' elem',elem);
            },
            veropcioneskweet = function (estecliopcio) {
                //console.log('veropcioneskweet',estecliopcio);
                var pontex = '';
                var ponop = '';
                var htmmenuocus = '';
                var existia = 'n';
                var estecliopcioopcionestipo = estecliopcio.getAttribute('data-opcionestipo');
                var este_kweetpara = 0;
                var este_kweetde = 0;
                var este_kweetid = 0;
                var este_comentarioid = 0;
                var este_comentariode = 0;
                var eeyasoid = yasoid;
                var estedebasekweet;
                var estedebasecoment;
                var ponletops = 0;
                //console.log('estecliopcioopcionestipo',estecliopcioopcionestipo);
                switch (estecliopcioopcionestipo) {
                    case 'comentario':
                        estedebasecoment = estecliopcio.parentNode.parentNode.parentNode;
                        if (estedebasecoment.getAttribute('data-bd') == 'so') {
                            estedebasekweet = estecliopcio.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;
                            ponletops = estedebasecoment.parentNode.parentNode.scrollTop;

                        } else
                            estedebasekweet = estecliopcio.parentNode.parentNode.parentNode.parentNode.parentNode;

                        //estecliopcio=estecliopcio.parentNode.parentNode;
                        este_kweetpara = estedebasekweet.getAttribute('data-para');
                        este_kweetde = estedebasekweet.getAttribute('data-de');
                        este_kweetid = estedebasekweet.getAttribute('data-id');
                        este_comentarioid = estedebasecoment.getAttribute('data-id');
                        este_comentariode = estedebasecoment.getAttribute('data-de');

                        //console.log('eeyasoid', eeyasoid, 'este_kweetpara', este_kweetpara, 'este_comentariode', este_comentariode, 'este_kweetde', este_kweetde);
                        if (['mod5', 'mod4', 'mod3.5', 'mod3'].indexOf(yosoplac) != -1 || eeyasoid == este_comentariode || eeyasoid == este_kweetde) {
                            pontex = iw[372]; ponop = 'eliminarcomentario';//nolang
                            htmmenuocus += '<div class="blockseldi" data-op="' + ponop + '">' + pontex + '&nbsp;&nbsp;</div>';
                        }


                        if (htmmenuocus != '')
                            removeClass(estecliopcio, 'novisible');
                        break;
                    case 'kweet':
                        estedebasekweet = estecliopcio.parentNode.parentNode;
                        este_kweetpara = estedebasekweet.getAttribute('data-para');
                        este_kweetde = estedebasekweet.getAttribute('data-de');
                        este_kweetid = estedebasekweet.getAttribute('data-id');
                        este_comentarioid = 0;
                        este_comentariode = 0;
                        //console.log('eliminarkweet', eeyasoid, 'este_kweetpara', eeyasoid, 'este_kweetde', este_kweetde);
                        if (['mod5', 'mod4', 'mod3.5', 'mod3'].indexOf(yosoplac) != -1 || eeyasoid == este_kweetde || eeyasoid == este_kweetpara || eeyasoid == este_comentariode) {
                            pontex = iw[373]; ponop = 'eliminarkweet';//nolang
                            htmmenuocus += '<div class="blockseldi" data-op="' + ponop + '">' + pontex + '&nbsp;&nbsp;</div>';
                        }

                        break;
                }

                //ponloentopse-=20;

                if (htmmenuocus != '') {
                    //chatearcon('',this.getAttribute('data-aaid'),'btn','','');
                    htmmenuocus = '<div class="btnselec absolute" style="margin-top:20px;" ' +
                        'data-este_kweetpara="' + este_kweetpara + '" data-este_kweetde="' + este_kweetde + '" ' +
                        'data-este_kweetid="' + este_kweetid + '" data-este_comentarioid="' + este_comentarioid + '" ' +
                        'data-este_comentariode="' + este_comentariode + '"' +
                        '>' + htmmenuocus + '</div>';

                    var creo = document.createElement('div');
                    creo.className = 'menuopciones fright';
                    creo.innerHTML = htmmenuocus;

                    if (ponletops > 0) {
                        creo.style.marginTop = '-' + ponletops + 'px';
                    }
                    //creo.style.top='50px';
                    estecliopcio.parentNode.insertBefore(creo, estecliopcio);
                    creo.firstChild.style.marginLeft = '-' + creo.firstChild.offsetWidth + 'px';
                    creo.firstChild.onmousedown = function (e) { clickeopciondekweet(e) };
                    var habiahechoclickenopcioneskweet = function () {
                        borrarclase('menuopciones');
                        if (estecliopcioopcionestipo == 'comentario') addClass(estecliopcio, 'novisible');
                        //consola.log('habiahechoclickenopcioneskweet estecliopcioopcionestipo',estecliopcioopcionestipo);
                        window.removeEventListener("mouseup", habiahechoclickenopcioneskweet, false);
                    }
                    window.addEventListener("mouseup", habiahechoclickenopcioneskweet, false);

                    if (ponletops > 0) {
                        estedebasecoment.parentNode.parentNode.addEventListener("scroll", habiahechoclickenopcioneskweet, false);
                    }

                }
                //'veropcioneskweet',estecliopcio.parentNode.parentNode,
                //consola.log('este_kweetpara',este_kweetpara,' este_kweetde',este_kweetde,' este_kweetid',este_kweetid,' este_comentarioid',este_comentarioid,' este_comentariode',este_comentariode);
                //consola.log('estedebasecoment',estedebasecoment);
                //consola.log('existia',existia,'  estecliopcioopcionestipo',estecliopcioopcionestipo);
            },
            lediclickalinkde = function () {
                if (vextr['lediclickalinkde']) delete (vextr['lediclickalinkde']);
            }, cargolinkde = function (tipooid, dentrodeid) {
                //linkde
                //'kweet'+este.bd+este.id

                ////////////consola.log('cargolinkde='+dentrodeid);
                var boxprin;

                if (tipooid == 'id') {
                    boxprin = document.getElementById(dentrodeid);
                } else {
                    boxprin = dentrodeid;
                }
                if (boxprin) {
                    var boxes = boxprin.querySelectorAll('.linkde'),
                        i = boxes.length;

                    if (tipooid == 'id') {//en los globos se ve feo solo hago link a muro
                        while (i--) {
                            ////////consola.log(('id'+boxes[i].id);
                            if (boxes[i]) {
                                boxes[i].onclick = function () {
                                    borrar('sobretododiv');
                                    vextr['lediclickalinkde'] = 1;
                                    window.setTimeout(lediclickalinkde, 200);
                                    window.location = '#/' + encodeURI(this.getAttribute('data-globkek'));
                                    borrar('cartakeko');
                                    salgodeglobo(this);
                                };

                                boxes[i].onmouseover = function () {
                                    entroenglobo(this);
                                };
                                boxes[i].onmouseout = function () {
                                    salgodeglobo(this);
                                };
                            }
                        }
                    } else {
                        while (i--) {
                            ////////consola.log(('id'+boxes[i].id);
                            if (boxes[i]) {
                                boxes[i].onclick = function () {
                                    vextr['lediclickalinkde'] = 1;
                                    window.setTimeout(lediclickalinkde, 200);
                                    window.location = '#/' + encodeURI(this.getAttribute('data-globkek'));
                                };
                            }
                        }
                    }
                }
            },
            entroenglobo = function (este) {
                ////////////consola.log('entroenglobo');
                //////consola.log('entro en globo');
                if (englobinter) {
                    window.clearTimeout(englobinter);
                    ////////////consola.log('borro englobinter');
                }
                //englobinter = window.setTimeout(entroengloboya,700,este,'entra');


                englobinter = window.setTimeout(entroengloboya, 700, este, 'entra');

                if (document.getElementById('cartakeko')) {
                    document.getElementById('cartakeko').setAttribute('data-idkeksobreu', este.getAttribute('data-globkid'));
                }
                ////////////consola.log('entroenglobo globkid '+este.getAttribute('data-globkid'))
            },
            salgodeglobo = function (este) {
                ////////////consola.log('salgodeglobo '+este.getAttribute('data-globkid'));

                //////consola.log('salgodeglobo');
                if (!document.getElementById('cartakeko') || document.getElementById('cartakeko') && document.getElementById('cartakeko').getAttribute('data-idkeksobreu') == este.getAttribute('data-globkid')) {
                    if (englobinter) {
                        window.clearTimeout(englobinter);
                    }

                    englobinter = window.setTimeout(entroengloboya, 400, este, 'sale');

                }
            },
            entroengloboya = function (este, opcion) {

                ////////////consola.log('entroengloboya opcion'+opcion);
                switch (opcion) {
                    case 'entra':
                        var yaexis = 'n';
                        if (document.getElementById('cartakeko')) {
                            if (document.getElementById('cartakeko').getAttribute('data-idkekglobo') != este.getAttribute('data-globkid') && document.getElementById('cartakeko').getAttribute('data-idkekglobo') != este.getAttribute('data-globkek'))
                                borrar('cartakeko');
                            else
                                yaexis = 's';
                        }
                        if (yaexis == 'n') {
                            var creo = document.createElement('div');
                            creo.setAttribute('id', 'cartakeko');
                        } else {
                            var creo = document.getElementById('cartakeko');
                        }
                        creo.setAttribute('data-idkekglobo', este.getAttribute('data-globkid'));
                        creo.setAttribute('data-idkeksobreu', este.getAttribute('data-globkid'));
                        creo.className = 'globocaas';
                        ////////////consola.log('left'+este.offsetLeft+' top'+este.offsetTop);
                        creo.style.position = 'absolute';
                        creo.style.height = '130px';
                        creo.style.width = '430px';
                        creo.onmouseover = function () {
                            entroenglobo(este);
                        };
                        var lopondreennn = 'web';
                        if (document.getElementById('sobretododivya')) {
                            creo.style.top = (este.offsetTop - 155) + 'px';
                            creo.style.zIndex = 6;
                            lopondreennn = 'sobretododivya';
                        } else {
                            creo.style.zIndex = 2;
                            creo.style.top = (este.offsetTop - 155) + 'px';
                        }
                        creo.style.left = (este.offsetLeft - 10) + 'px';
                        if (yaexis == 'n') {
                            creo.innerHTML = '<div id="cartakekoya"><p align="center"><img src="' + dominiobase + 'imagesnew/game/cargando.gif"></p></div><img src="' + dominiobase + 'imagesnew/appico/coletilla_aba.png" style="position:absolute;bottom:-10px">';

                            document.getElementById(lopondreennn).appendChild(creo);
                            var esteidkeko = este.getAttribute('data-globkid');
                            kajax({
                                data: 'mikeka=' + yasoid + '&idi=' + idila + '&idkek=' + encodeURI(esteidkeko),
                                url: 'todoincs/verglobo.php',
                                type: 'get',
                                success: function (response) {
                                    vergloboya(esteidkeko, response);
                                }
                            });
                        }
                        break;
                    case 'sale':
                        borrar('cartakeko');
                        break;
                }
            },
            vergloboya = function (esteidkeko, response) {

                if (document.getElementById('cartakekoya')) {
                    document.getElementById('cartakekoya').innerHTML = response;

                    btnnnamistad('btnamigglobo');
                    if (document.getElementById('btnkekonomperfilglobo')) {
                        document.getElementById('btnkekonomperfilglobo').onclick = function () {
                            window.location = '#/' + encodeURI(document.getElementById('btnkekonomperfilglobo').innerHTML);
                            borrar('sobretododiv');
                            borrar('cartakeko');
                        }
                        if (document.getElementById('btnverperfilglobo')) {
                            document.getElementById('btnverperfilglobo').innerHTML = 'Ver perfil';//nolang
                            document.getElementById('btnverperfilglobo').onclick = function () {
                                window.location = '#/' + encodeURI(document.getElementById('btnkekonomperfilglobo').innerHTML);
                                borrar('sobretododiv');
                                borrar('cartakeko');
                            }
                        }
                    }
                    if (document.getElementById('aspectoglobo'))
                        kanvasclick(document.getElementById('aspectoglobo'), document.getElementById('aspectoglobo').getAttribute('data-asp'));
                }
            },
            mandocomentario = function (quees, estebd, esteid) {
                if (document.getElementById('inpucom' + quees + estebd + esteid) && document.getElementById('inpucom' + quees + estebd + esteid).value != '') {
                    var kalll = document.getElementById('inpucom' + quees + estebd + esteid).value;
                    document.getElementById('inpucom' + quees + estebd + esteid).value = '';
                    //
                    ////////////consola.log('mandocomentario quees'+quees+' texto'+kalll+' esteid'+esteid+' estebd'+estebd);
                    katman('megustacoms', quees, estebd, esteid, 'nw', kalll);
                }
            },
            cargocomentarios = function (estebd, idmuro, pagina, esnuevo, cuantos) {
                kajax({
                    data: 'mikeka=' + yasoid + '&idi=' + idila + '&estebd=' + encodeURI(estebd) + '&idmuro=' + encodeURI(idmuro) + '&pagina=' + pagina + '&esnuevo=' + esnuevo + '&cuantos=' + cuantos,
                    url: 'todoincs/vercomentarios.php',
                    type: 'get',
                    success: function (response) {
                        var obj = JSON.parse(response).katrixdata;
                        //console.log('estebd',estebd,' idmuro',idmuro);
                        var estad9vkweet = document.getElementById('kweet' + estebd + idmuro);

                        if (estad9vkweet) {
                            //todos los comenntarios que hay
                            var todoscsom = estad9vkweet.getAttribute('data-ccom');
                            //Comentarios mostrados
                            var todosccommos = estad9vkweet.getAttribute('data-ccommos');
                            todosccommos = parseInt(todosccommos);
                            todosccommos += obj.length;
                            var mascoms = todoscsom - todosccommos;

                            estad9vkweet.setAttribute('data-ccommos', todosccommos);
                            /////////////consola.log('todoscsom'+todoscsom+' todosccommos'+todosccommos);

                            if (esnuevo == "viejo") {
                                for (var i = 0; i < obj.length; i++) {
                                    if (obj[i]) {
                                        obj[i].bd = estebd;
                                        cargocomentario(obj[i], esnuevo);
                                    }
                                }
                            } else {
                                for (var i = obj.length; i >= 0; i--) {
                                    if (obj[i]) {
                                        obj[i].bd = estebd;
                                        cargocomentario(obj[i], esnuevo);
                                    }
                                }
                            }

                            if (mascoms > 0) {
                                cargocomentario({ 'bd': estebd, 'idmuro': idmuro, 'soyvermas': 's', 'mascoms': mascoms, 'todoscsom': todoscsom, 'todosccommos': todosccommos }, 'viejo');
                            } else {
                                borrar('btnmascoms' + estebd + idmuro);
                            }
                        }
                    }
                });
            },
            cargocomentario = function (este, esnuevo) {
                //siempre bd = yo
                if (!este.bd)
                    este.bd = 'yo';
                var textovmas = '';//nolang
                var cuantos = 0;
                var esnuevobtn = 'viejo';
                if (!este.kmsg) este.kmsg = '';
                var mirosiexisc = document.getElementById('kweetcomens' + este.bd + este.idmuro);
                if (!elementExists(mirosiexisc)) {
                    //consola.log('no existe bloque '+este.bd+este.idmuro);
                } else {
                    if (!este.demini) este.demini = 'default.png';

                    var ul = document.getElementById('kweetcomens' + este.bd + este.idmuro);

                    var creo = document.createElement('li');
                    creo.setAttribute('id', 'comens' + este.bd + este.id);
                    creo.setAttribute('data-bd', este.bd);
                    creo.setAttribute('data-id', este.id);
                    creo.setAttribute('data-de', este.de);
                    creo.setAttribute('data-mgusta', este.mgusta);
                    creo.setAttribute('data-clike', este.clike);
                    creo.setAttribute('data-ahor', este.ahor);
                    creo.setAttribute('data-fech', este.fech);
                    creo.setAttribute('data-clike', este.clike);
                    creo.setAttribute('data-mamigo', '');
                    if (!este.soyvermas) {

                        //OJOAKI
                        var mostraredita = '';
                        mostraredita = '<img src="' + dominiobase + 'imagesnew/appico3/edit.png?v=4" class="opciones fright" data-opcionestipo="comentario">';

                        var estemin = este.demini;
                        var urlfotoya = urlperfils + estemin;

                        if (estemin != 'default.png' && estemin != 'casa.png' && estemin != '') {
                            urlfotoya = urlperfils + 'resiz.php?src=' + estemin + '&h=32&w=32';
                        } else {
                            urlfotoya = '/uploads/default.png';
                        }

                        creo.innerHTML = '<img src="' + urlfotoya + '" data-globkid="' + este.de + '" data-globkek="' + este.dekeko + '" class="linkde fleft radinoti icocomsflo"/> ' +
                            '<div class="texcomswrap"><div class="texcoms">' + mostraredita + '<b class="linkde" data-globkid="' + este.de + '" data-globkek="' + este.dekeko + '">' + este.dekeko + '</b> ' + limpia(este.kmsg, este.de, 100, 'coment') + '<br/><div id="hacecomens' + este.bd + este.id + '" class="fleft"></div> <div id="barycomscomens' + este.bd + este.id + '"></div></div></div>';


                        if (mostraredita) {
                            creo.querySelector('.opciones').onclick = function () { veropcioneskweet(this) };
                        }
                    } else {//nolang
                        borrar('btnmascoms' + este.bd + este.idmuro);
                        if (este.mascoms > 25) {
                            textovmas = iw[174] + ' <span class="fright">' + este.todosccommos + ' de ' + este.todoscsom + '</span>';
                        } else {
                            if (este.mascoms > 1)
                                textovmas = iw[177] + ' ' + este.mascoms + ' ' + iw[175];
                            else if (este.mascoms == 1)
                                textovmas = iw[177] + ' ' + este.mascoms + ' ' + iw[176];
                            cuantos = este.mascoms;
                            esnuevobtn = 'ultimos';
                        }
                        creo.setAttribute('id', 'btnmascoms' + este.bd + este.idmuro);

                        creo.onclick = function () { cargocomentarios(este.bd, este.idmuro, este.todosccommos, esnuevobtn, cuantos); };
                        creo.innerHTML = '<img src="' + dominiobase + 'imagesnew/appico/coms.png" class="fleftico"/> <a class="links">' + textovmas + '</a>';

                    }
                    if (esnuevo == 'viejo' || esnuevo == 'ultimos') {
                        if (ul.querySelector('li')) {
                            //////////////consola.log('hay li');
                            ul.insertBefore(creo, ul.querySelector('li'));
                        }
                        ////////////consola.log('es viejo');
                    } else {

                        ul.appendChild(creo);
                    }
                    if (!este.soyvermas) {
                        ////////////consola.log('no soyvermas');

                        hacecuanto('comens', este.bd, este.id);
                        //<div id="barycomskweet'+este.bd+este.id+'"></div>
                        actualikes('comens', este.bd, este.id);
                        cargolinkde('id', 'comens' + este.bd + este.id);
                    }
                }
            },
            hacecuanto = function (quees, estebd, esteid) {
                //////consola.log('hace'+quees+estebd+esteid);
                if (document.getElementById('hace' + quees + estebd + esteid) && document.getElementById(quees + estebd + esteid)) {
                    var hacedov = document.getElementById(quees + estebd + esteid);
                    ////////////consola.log('este.ahor'+este.ahor+' fech'+este.fech+' hace'+hace);
                    var hace = parseInt(hacedov.getAttribute('data-ahor')) - parseInt(hacedov.getAttribute('data-fech'));
                    ////////////consola.log(' hace'+hace);

                    //////consola.log('hace'+hace);
                    var textohace = '';
                    if (hace < 3) {
                        textohace = iw[178];
                    } else if (hace < 20) {
                        textohace = hace + ' seg';//nolang
                    } else if (hace < 60) {
                        textohace = iw[179];//nolang
                    } else if (hace < 3600) {
                        textohace = parseInt(hace / 60) + ' ' + iw[180];//nolang
                    } else if (hace < 86400) {
                        if (parseInt(hace / 3600) > 1)
                            textohace = parseInt(hace / 3600) + ' ' + iw[181];//nolang
                        else
                            textohace = parseInt(hace / 3600) + ' ' + iw[182];//nolang

                    } else if (hace < 2592000) {
                        if (parseInt(hace / 86400) > 1)
                            textohace = parseInt(hace / 86400) + ' ' + iw[183];//nolang
                        else
                            textohace = parseInt(hace / 86400) + ' ' + iw[184];//nolang

                    } else {
                        var fech = parseInt(hacedov.getAttribute('data-fech'));
                        fech = (fech * 1000); fech = parseInt(fech);
                        ////////////consola.log('fech'+fech);
                        var d = new Date(fech);
                        var mes = d.getMonth(); mes++;
                        var n = d.getDate() + '/' + mes + '/' + d.getFullYear();
                        textohace = n;//nolang
                    }
                    document.getElementById('hace' + quees + estebd + esteid).innerHTML = textohace + ' &nbsp;';
                }
            },
            clickmegustakweet = function (quees, estebd, esteid) {
                if (document.getElementById(quees + estebd + esteid)) {
                    var estekweet = document.getElementById(quees + estebd + esteid);
                    var miraclikes = estekweet.getAttribute('data-clike');
                    miraclikes = parseInt(miraclikes);
                    if (estekweet.getAttribute('data-mgusta') != 1) {
                        estekweet.setAttribute('data-mgusta', 1);
                        miraclikes++;
                        katman('megustacoms', quees, estebd, esteid, 's', '');
                    } else {
                        estekweet.setAttribute('data-mgusta', 0);
                        miraclikes--;
                        katman('megustacoms', quees, estebd, esteid, 'n', '');
                    }
                    estekweet.setAttribute('data-clike', miraclikes);
                    actualikes(quees, estebd, esteid);
                }

            },
            actualikes = function (quees, estebd, esteid) {

                if (document.getElementById(quees + estebd + esteid) && document.getElementById('barycoms' + quees + estebd + esteid)) {

                    var baryys = document.getElementById(quees + estebd + esteid);
                    var mgustatex = '';
                    var cargosubirbtnimagenes = 'n';
                    var mgusta = baryys.getAttribute('data-mgusta');
                    mgusta = parseInt(mgusta);
                    var clike = baryys.getAttribute('data-clike');
                    clike = parseInt(clike);
                    var mamigo = baryys.getAttribute('data-mamigo');
                    var ccom = baryys.getAttribute('data-ccom');
                    //
                    //if(este.mgusta==0)
                    //mgustatex = 'Me gusta';
                    //else
                    //mgustatex = 'Ya no me gusta ';
                    var mgustatex = '';
                    var gustatotales = clike;
                    if (mgusta > 0) {
                        if (clike > 1) {//Le gusta a mas de 1 y ami
                            mgustatex = iw[185];//nolang
                            clike--;
                            if (mamigo) {

                                if (clike > 1)
                                    mgustatex += ', ' + iw[186] + ' <span class="linkde" data-globkid="' + mamigo + '" data-globkek="' + mamigo + '">' + mamigo + '</span>';
                                else
                                    mgustatex += ' ' + iw[187] + ' <span class="linkde" data-globkid="' + mamigo + '" data-globkek="' + mamigo + '">' + mamigo + '</span>';
                                clike--;
                            }
                            if (clike > 1)
                                mgustatex += ' ' + iw[187] + ' ' + clike + ' ' + iw[188];
                            else if (clike == 1)
                                mgustatex += ' ' + iw[187] + ' ' + clike + ' ' + iw[189];
                            else
                                mgustatex += ' ' + iw[190];
                        } else
                            mgustatex = iw[191];
                    } else if (clike > 0) {//ami no me gusta pero a alguien le gusta
                        if (mamigo) {//pero le gusta algun amigo
                            mgustatex += iw[192] + ' <span class="linkde" data-globkid="' + mamigo + '" data-globkek="' + mamigo + '">' + mamigo + '</span>';
                            clike--;
                            if (clike > 1) {
                                mgustatex += ' ' + iw[193] + ' ' + clike + ' ' + iw[194];
                            } else if (clike == 1) {
                                mgustatex += ' ' + iw[193] + ' ' + clike + ' ' + iw[195];
                            } else {
                                mgustatex += ' ' + iw[196];
                            }
                        } else if (clike > 1) {
                            mgustatex += iw[199] + ' ' + clike + ' ' + iw[197];
                        } else if (clike == 1) {
                            mgustatex += iw[199] + ' ' + clike + ' ' + iw[198];
                        }
                    }

                    var btnmegusta = iw[200];
                    if (mgusta > 0) {
                        btnmegusta = iw[201];
                    }
                    //<a href="javascript:void(0)" class="links">Comentar</a>

                    var pongohhh = '';
                    if (quees == 'comens') {//me gusta de comentarios de kweet
                        pongohhh = '<a class="links min fleft" id="mgusta' + quees + estebd + esteid + '">' + btnmegusta +
                            '</a>';

                        //if(mgustatex!=''){
                        pongohhh = '<div class="dimgusta min"> ' + pongohhh;
                        if (gustatotales > 0)
                            pongohhh += ' <img src="' + dominiobase + 'imagesnew/appico/mgusta.png" class="fleftico"> ' + gustatotales;

                        pongohhh += '</div>';
                        //}else{
                        //pongohhh ='<div class="dimgusta min">'+pongohhh+'</div>';
                        //}
                    } else { //me gusta un kweet
                        pongohhh = '<a class="links" id="mgusta' + quees + estebd + esteid + '">' + btnmegusta + '</a>';

                        ////////////consola.log('data-de',baryys.getAttribute('data-de'));
                        if (estebd == 'so' && baryys.getAttribute('data-de') == yasoid) {
                            cargosubirbtnimagenes = 's';
                            pongohhh += '<a class="links" id="asignarcomomini" data-idfoto="' + baryys.getAttribute('data-idfoto') + '">' + iw[202] + '</a>';
                            pongohhh += '<a class="links" id="asignarcomoportada" data-idfoto="' + baryys.getAttribute('data-idfoto') + '">' + iw[203] + '</a>';
                        }

                        pongohhh += '<a onclick="document.getElementById(\'inpucom' + quees + estebd + esteid + '\').focus();" class="links">' + iw[204] + '</a>';//nolang

                        if (estebd != 'sh') {
                            pongohhh += '<a class="links" id=\'compartir' + quees + estebd + esteid + '\'>Compartir</a>';//nolang
                        }

                        if (mgustatex != '') {
                            pongohhh += '<div class="dimgusta"><img src="' + dominiobase + 'imagesnew/appico/mgusta.png" class="fleftico">' + mgustatex + '</div>';
                        }
                    }

                    //if(document.getElementById('barycoms'+estebd+esteid))
                    document.getElementById('barycoms' + quees + estebd + esteid).innerHTML = pongohhh;
                    cargolinkde('id', 'barycoms' + quees + estebd + esteid);

                    if (estebd != 'sh') {
                        if (document.getElementById('compartir' + quees + estebd + esteid)) {
                            document.getElementById('compartir' + quees + estebd + esteid).onclick = function () {
                                var estaidmiro = this.id.replace('compartirkweet', 'kweet');
                                var idcompartir = esteid;
                                if (document.getElementById(estaidmiro).querySelector('.boxkweet')) {
                                    idcompartir = document.getElementById(estaidmiro).querySelector('.boxkweet').getAttribute('data-id');
                                }
                                document.body.scrollTop = 0;
                                borrar('sobretododiv');
                                var creo = document.createElement('div');
                                creo.style.width = '100%';
                                creo.style.height = '100%';
                                creo.style.top = '0px';
                                creo.style.left = '0px';
                                creo.style.position = 'absolute';
                                creo.style.zIndex = 5;
                                creo.style.background = 'rgba(0, 0, 0, 0.6)';
                                creo.id = 'sobretododiv';

                                creo.innerHTML = '<div id="sobretododivya" style="margin-top:150px; margin-left:5%; height:' + parseInt(document.documentElement.clientHeight / 1.5) + 'px;width:' + parseInt(document.documentElement.clientWidth / 1.2) + 'px">' +
                                    '<img src="' + dominiobase + 'imagesnew/app/closee.gif" class="fright cerrar" style="margin-right:20px;margin-top:20px;" onclick="this.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode);void(0);"><div id="sobretododivyaaki"></div></div>';
                                document.getElementById('web').appendChild(creo);
                                document.getElementById('sobretododivyaaki').innerHTML = '<div id="sobretododivyauplo" class="boxhome" data-dinabox="push" data-para="0"></div>';
                                cargadinabox(document.getElementById('sobretododivyauplo'));




                                var imageElement = document.createElement('div');
                                imageElement.setAttribute('data-t', 's');
                                imageElement.setAttribute('data-i', parseInt(idcompartir));
                                imageElement.setAttribute('id', parseInt(idcompartir) + 'compayasss');
                                imageElement.style.maxWidth = '100%';
                                imageElement.style.maxHeight = '100%';
                                imageElement.setAttribute('data-u', '');
                                document.getElementById('compartiryasobretododivyauplofom').querySelector('div.photos').appendChild(imageElement);

                                setTimeout(cargakweets, 100, parseInt(idcompartir) + 'compayasss', parseInt(idcompartir), 'idmuro');

                                //alert('si'+idcompartir);

                            };
                        }
                    }

                    if (document.getElementById('mgusta' + quees + estebd + esteid)) {
                        document.getElementById('mgusta' + quees + estebd + esteid).onclick = function () {
                            clickmegustakweet(quees, estebd, esteid);
                        };
                    }
                    if (cargosubirbtnimagenes == 's') {
                        if (document.getElementById('asignarcomomini')) {
                            document.getElementById('asignarcomomini').onclick = function () {
                                asignarfotocomo('mini', this.getAttribute('data-idfoto'));
                            };
                        }
                        if (document.getElementById('asignarcomoportada')) {
                            document.getElementById('asignarcomoportada').onclick = function () {
                                asignarfotocomo('perfil', this.getAttribute('data-idfoto'));
                            };
                        }
                    }
                }
            },
            asignarfotocomo = function (tipoim, idfoto) {
                katman('asignarfotocomo', tipoim, idfoto);
                ////////////consola.log('asignarfotocomo tipoim'+tipoim+' idfoto'+idfoto);
            },
            hicescroll = function () {
                var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
                var scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight;
                var clientHeight = document.documentElement.clientHeight || document.body.clientHeight;
                var scrollahora = scrollHeight - scrollTop - clientHeight;

                //consola.log('scrollahora',scrollahora,' scrollTop',scrollTop,' scrollHeight',scrollHeight,' clientHeight',clientHeight);
                if (scrollahora < 100 && vars.indexOf('cargandomas') == -1) {
                    vars.push('cargandomas');
                    var cargandokweetsbtnex = document.getElementById('cargandokweets');
                    if (elementExists(cargandokweetsbtnex)) {
                        if (cargandokweetsbtnex.getAttribute('data-desdedon') && cargandokweetsbtnex.getAttribute('data-desdedon') == objextra.dedonde) {
                            //console.log('MANDOAvermaskwwetsya div:',cargandokweetsbtnex.getAttribute('data-desdedon'),objextra.dedonde);
                            vermaskwwetsya(objextra.dedonde);
                        }
                        //consola.log('vermaskwwetsya');
                    }
                }
            },
            verwebdespuesajax = function () {
                if (vars.indexOf('onscroll') == -1) {
                    vars.push('onscroll');
                    document.addEventListener("scroll", hicescroll, false);
                }

                if (yosocas > 0) {//ojoaki
                    if (!document.getElementById('volverjuego')) {
                        var creo = document.createElement('div');
                        creo.id = 'volverjuego';
                        //creo.style.width='200px';
                        //creo.style.height='200px';
                        //creo.style.display='inherit';
                        //creo.style.position='absolute';
                        //creo.style.marginLeft='100%';
                        //creo.style.marginTop='40px';
                        //
                        creo.className = 'contenedor fixed'; // NOLANG
                        creo.style.position = 'fixed';
                        creo.style.top = '5%';
                        creo.style.left = '34%';
                        creo.style.transform = 'translate(-50%, -50%)';
                        creo.innerHTML = '<div class="btnwo ok fright">' + iw[205] + ' <button class="btnwo" id="volvernbtncassa">' + iw[206] + '</button> o <button class="btnwo" id="salirbtncasa">' + iw[207] + '</button></div>';


                        //document.getElementById('web').insertBefore(creo, document.getElementById('web').firstChild);
                        document.getElementById('cabarri').appendChild(creo);

                        document.getElementById('volvernbtncassa').onclick = function () {
                            window.location = '#/backgame';

                        };
                        document.getElementById('salirbtncasa').onclick = function () {
                            yosocas = 0;
                            borrar('volverjuego');
                            katman('salirdecasa');
                            verwebdespuesajax();
                        };
                    }
                    //document.getElementById('web').className='transpaweb';
                    //document.getElementById('web').style.height = document.documentElement.clientHeight+'px';
                    //////consola.log(document.documentElement.clientHeight+'px');
                    document.getElementById('web').className = '';
                    //document.getElementById('botonzoommen').classList.add('novisible');
                    //document.getElementById('botonzoommas').classList.add('novisible');
                    document.getElementById('formasu').className = 'novisible';
                    document.getElementById('kekoall').className = 'hidden';//.removeAttribute('class');
                    akiblanhbb.className = 'novisible';
                    document.getElementById('akiburbujas').className = 'hidden';//.removeAttribute('class');
                    document.body.classList.add('negrosinmargen');
                    akiblanhbb.className = 'novisible';
                } else {
                    document.getElementById('web').className = '';
                    //document.getElementById('botonzoommen').classList.add('novisible');
                    //document.getElementById('botonzoommas').classList.add('novisible');
                    document.getElementById('formasu').className = 'novisible';
                    document.getElementById('kekoall').className = 'novisible';
                    kkallaki.innerHTML = '';
                    document.getElementById('kekoallakic').innerHTML = '';
                    destroyCoins(); kkallakik.innerHTML = '';
                    document.getElementById('akiburbujas').innerHTML = '';

                    akiblanhbb.className = 'novisible';
                    document.getElementById('akiburbujas').className = 'novisible';
                    document.body.classList.add('negrosinmargen');
                }
                //document.getElementById('columnagris').removeAttribute('class');
                borrar('cartakeko');
                if (document.getElementById('globosnoti'))
                    document.getElementById('globosnoti').style.bottom = '10px';
                //escalo()
            },
            escalo = function () {
                //////consola.log('escalo');
                //////consola.log('anchopan'+anchopan);
                if (document.getElementById('coletill')) {
                    document.getElementById('coletill').innerHTML = '';
                    document.getElementById('coletill').className = 'novisible';
                }
                //consola.log('anchopan',anchopan);
                if (anchopan < 1000) {
                    //antes 2022
                    //document.body.classList.add('conmargen');
                    //document.getElementById('cabarri').className='absolute';
                } else {
                    //antes 2022
                    //document.body.classList.remove('conmargen');
                    //document.getElementById('cabarri').className='fixed';
                }
                //absolute
                posicionachats('todos', '');
            },
            posicionachats = function (cualquiero, desde) {

                //////consola.log('posicionachats cualquiero'+cualquiero+' desde'+desde);
                var anchodechats = 260;
                var eanchopantot = anchopan;
                if (document.getElementById('formasu').className == '') {
                    eanchopantot -= 300;
                }
                var chatsocults;
                var chatsvisibles = 0;
                var estaelquequiero = 'n';
                var yoquieroeste;
                if (cualquiero != 'todos')
                    yoquieroeste = document.getElementById('akichats').querySelector('div.chatsdiv[data-kami="' + cualquiero + '"]');

                if (cualquiero != 'todos' && desde == 'btn') {
                    if (yoquieroeste) {
                        if (yoquieroeste.className != yoquieroeste.className.replace(' novisible', '')) {
                            yoquieroeste.className = yoquieroeste.className.replace(' novisible', '');
                            anchodechats += 305;
                            chatsvisibles++;
                        }
                        yoquieroeste.className = yoquieroeste.className.replace(' expandido', '') + ' expandido';
                        //yoquieroeste.className = yoquieroeste.className.replace(' expandido','')+' expandido';
                    }

                }
                var chatsopens = document.getElementById('akichats').querySelectorAll('div.chatsdiv:not([id="btnchatlis"])');

                if (chatsopens.length > 0) {
                    for (var istecha = (chatsopens.length - 1); istecha >= 0; istecha--) {
                        if (chatsopens[istecha].className == chatsopens[istecha].className.replace(' novisible', '')) {
                            anchodechats += 305;
                            chatsvisibles++;
                            //////consola.log(istecha,' ',chatsopens[istecha].getAttribute('data-kami'));
                        }

                        if (anchodechats > eanchopantot && chatsvisibles > 1) {
                            if (desde != 'btn' || chatsopens[istecha].getAttribute('data-kami') != cualquiero && desde == 'btn') {
                                //estaelquequiero='n';
                                //anchodechats-=305;
                                //chatsvisibles--;
                                chatsopens[istecha].className = chatsopens[istecha].className.replace(' novisible', '') + ' novisible';
                            }
                        }
                    }

                    //////consola.log('estaelquequiero',estaelquequiero);
                    if (chatsvisibles == 0 && chatsopens[0]) {
                        chatsopens[0].className = chatsopens[0].className.replace(' novisible', '');
                        //////consola.log('muetrochatPORQUESTBAOCULTO');
                        chatsvisibles++;
                    }

                    if (cualquiero != 'todos' && desde == 'recibo' && yoquieroeste) {
                        var elchatdelquemeenviaesta = 'expandido';
                        if (yoquieroeste.className != yoquieroeste.className.replace(' novisible', ''))
                            elchatdelquemeenviaesta = 'novisible';
                        else if (yoquieroeste.className == yoquieroeste.className.replace(' expandido', ''))
                            elchatdelquemeenviaesta = 'minimizado';

                        if (elchatdelquemeenviaesta == 'novisible') {
                            //recibe mensaje de un keko y tiene su chat novisible
                            soni('images/noti.mp3');
                        } else if (elchatdelquemeenviaesta == 'minimizado') {
                            var estetis = yoquieroeste.querySelector('.titulochats');
                            if (estetis) {
                                //recibe mensaje de un keko y tiene su chat minimizado
                                addClass(estetis, 'newmsg');
                                if (minimizado == 's') {
                                    soni('images/noti.mp3');
                                }
                            }
                        } else if (minimizado == 's') {
                            soni('images/noti.mp3');//ventana minimizado siempre hago aviso
                        }

                        //////consola.log('elchatdelquemeenviaesta'+elchatdelquemeenviaesta);
                    }
                    chatsocults = document.getElementById('akichats').querySelectorAll('div.novisible:not([id="btnchatlis"])');

                    //////consola.log('chatsvisibles'+chatsvisibles+' chatsocults'+chatsocults.length);
                    borrar('verchatsocults');
                    if (chatsocults.length > 0) {
                        var chatn = document.createElement("div");
                        chatn.className = 'btnwo fleft';
                        chatn.setAttribute('id', 'verchatsocults');
                        chatn.onclick = function () { verchatsocultos() };
                        chatn.innerHTML = chatsocults.length + ' <img src="' + dominiobase + 'imagesnew/appico3/chats.png"/>';
                        document.getElementById('akichats').appendChild(chatn);
                    }
                    //////consola.log('chatsvisibles'+chatsvisibles+' chatsocults',chatsocults.length);
                }
            },
            verchatsocultos = function () {
                if (document.getElementById('verchatsocults')) {
                    document.getElementById('verchatsocults').onclick = function () { };
                    var miroyachatsocults = document.getElementById('akichats').querySelectorAll('div.novisible:not([id="btnchatlis"])');

                    var ponloentopse = -25;
                    var htmmenuocus = '';
                    var idamigaoc = 0; var nomamigooso = '';
                    for (var istechas = 0; istechas < miroyachatsocults.length; istechas++) {
                        idamigaoc = miroyachatsocults[istechas].getAttribute('data-kami');
                        nomamigooso = miroyachatsocults[istechas].getAttribute('data-kekokami');
                        htmmenuocus += '<div class="blockseldi" style="padding-top:8px;" data-aaid="' + idamigaoc + '">' + nomamigooso + '</div>';
                        ponloentopse -= 28;
                    }
                    if (htmmenuocus != '') {
                        //chatearcon('',this.getAttribute('data-aaid'),'btn','','');
                        htmmenuocus = '<div class="btnselec" style="position:absolute;width:100px;margin-top:' + ponloentopse + 'px;">' + htmmenuocus + '</div>';
                        document.getElementById('verchatsocults').innerHTML += htmmenuocus;
                        var btnsvchatsocults = document.getElementById('verchatsocults').querySelectorAll('div.blockseldi');

                        for (var istechasvv = 0; istechasvv < btnsvchatsocults.length; istechasvv++) {
                            btnsvchatsocults[istechasvv].onclick = function () {
                                chatearcon('', this.getAttribute('data-aaid'), 'btn', '', '');
                            }
                        }
                    }
                }
            },          
            verjuego = function () {
                //document.body.className='negro';
                document.getElementById('web').className = 'novisible';
                //document.getElementById('botonzoommen').classList.remove('novisible');
                //document.getElementById('botonzoommas').classList.remove('novisible');
                document.body.classList.remove('negrosinmargen');
                document.getElementById('appaki').innerHTML = '';
                //if(document.getElementById('formasu').className)
                document.getElementById('formasu').className = '';
                //if(document.getElementById('kekoall').className)
                document.getElementById('kekoall').className = '';
                //if(document.getElementById('akiburbujas').className)
                document.getElementById('akiburbujas').className = '';
                TENGOCLICADO = null;
                TENGOCLICADOtipo = null;
                TENGOCLICADODATA = {};
                //nombreblanhbb.innerText = nombcas.nombre;
                akiblanhbb.className = '';
                borrar('volverjuego'); borrar('cartakeko');
                //document.getElementById('kekoall').style.left='0px';
                //document.getElementById('kekoall').style.top='0px';
                //leftahor=0;
                //leftahor = parseInt(document.getElementById('kekoall').style.left.replace('px',''));
                //if(document.getElementById('globosnoti'))
                //document.getElementById('globosnoti').style.bottom='10px';
                // posiciono();

                var indexcargandomas = vars.indexOf('cargandomas');
                if (indexcargandomas >= 0) {
                    vars.splice(indexcargandomas, 1);
                    //consola.log('cargandomas');
                }
                var indexonscroll = vars.indexOf('onscroll');
                if (indexonscroll >= 0) {
                    vars.splice(indexonscroll, 1);
                    //consola.log('removeonsccroll');
                    document.removeEventListener("scroll", hicescroll, false);
                }

                entroosalgocanales('salgo', 'todos');
            },
            verapp = function (este) {

                var parmsurl = '#/' + este.getAttribute('data-ct');

                if (este.getAttribute('data-ctd')) {

                    parmsurl += '/' + este.getAttribute('data-ctd');
                }

                window.location = parmsurl;

            },
            startMoving = function (estaas, evt) { // The function that sets up the div coordinates to make it move. Executed on the onmousedown event on the div.
                evt = evt || window.event;

                evt.preventDefault();
                var posX = evt.clientX, // The x-coordinate of the mouse pointer position on the screen
                    posY = evt.clientY, // The y-coordinate of the mouse pointer position on the screen
                    a = document.getElementById(estaas.id), // Points to the div element
                    divTop = a.style.top,
                    divLeft = a.style.left; // We need the initial position of the div so that we can determine its final position on dragging

                divTop = divTop.replace('px', ''); // Just so that we can perform calculations on the variable.
                divLeft = divLeft.replace('px', ''); // Just so that we can perform calculations on the variable.
                var diffX = posX - divLeft, // We keep this value so that we can calculate the final position of the element
                    diffY = posY - divTop; // We keep this value so that we can calculate the final position of the element

                var moversto = function (evt) { // Whenever the mouse moves, this function is execulted
                    evt = evt || window.event;
                    var posX = evt.clientX, // Mouse x-coordinate
                        posY = evt.clientY, // Mouse y-coordinate
                        aX = posX - diffX, // The final x-coordinate of the element
                        aY = posY - diffY; // The final y-coordinate of the element
                    move(a, aX, aY); // Function to assign the style rules to the element

                };
                var moverestoyano = function () { // Whenever the mouse moves, this function is execulted
                    document.removeEventListener("mousemove", moversto, false);
                    document.removeEventListener("mouseup", moverestoyano, false);
                };

                document.addEventListener("mousemove", moversto, false);
                document.addEventListener("mouseup", moverestoyano, false);

            },
            move = function (a, xpos, ypos) { // Function to assign the style rules to the element
                xpos += 'px';
                ypos += 'px';
                a.style.left = xpos;
                a.style.top = ypos;
            },
            lolsolo = function (e) {
                var evt = e ? e : event;

                var clientXx = evt.clientX,
                    clientYy = evt.clientY,
                    eenbox,
                    lolposixze;


                if (modocity == 'si') {
                    clientYy += 522;
                }
                var esployy = ployy,
                    esploxx = ploxx,
                    calculocolumna = 0,
                    calculofila = 0,
                    colmenostrent = 0,
                    filamenostrent = 0,
                    cuadroysimul = 0,
                    cuadroxsimul = 0,
                    cuadroysimultime = 0,
                    cuadroxsimultime = 0,
                    mirployye = mirployy,
                    mirploxxe = mirploxx;

                //consola.log('clientYy',clientYy,'clientXx',clientXx);
                clientYy -= altoahor;//document.getElementById('kekoall').style.top.replace('px','');
                clientXx -= leftahor;//document.getElementById('kekoall').style.left.replace('px','');
                calculocolumna = (clientXx / 36);
                calculocolumna = Math.ceil(calculocolumna);
                calculofila = (clientYy / 18);
                calculofila = Math.ceil(calculofila);
                calculofila = parseInt(calculofila);

                colmenostrent = parseInt(calculocolumna);
                colmenostrent -= 30;
                filamenostrent = parseInt(calculofila);
                filamenostrent -= 30;

                cuadroysimul = parseInt(calculofila);
                cuadroysimul += colmenostrent;
                cuadroxsimul = parseInt(calculocolumna);
                cuadroxsimul -= filamenostrent;
                cuadroysimul = Math.round(cuadroysimul / 2);
                cuadroxsimul = Math.round(cuadroxsimul / 2);
                cuadroxsimul -= 1;
                cuadroysimul -= 1;
                cuadroysimultime = cuadroysimul;
                cuadroxsimultime = cuadroxsimul;


                cuadroysimultime += mirployye;
                cuadroxsimultime += mirploxxe;
                //cuadroysimultim = parseInt(cuadroysimultim);
                //cuadroxsimultim = parseInt(cuadroxsimultim);

                //casa de 2 plantas lol //OJOAKI
                //if(mirployy == -8 && mirploxx == -9 && cuadroxsimultim > 6){
                //cuadroysimul+=7;
                //}
                if (mirployye == -8 && mirploxxe == -9) {
                    //casa de 2 plantas lol //OJOAKI
                    //konsPA.className = "wopen";
                    //////consola.log('2 plantas '+cuadroysimultim+'c'+cuadroxsimultim);
                    if (cuadroxsimultime > 6) {
                        cuadroysimul += 7;
                        cuadroysimultime += 7;
                        //cuadroxsimultim+=cuadroysimultim;
                    }
                    //if(cuadroysimultim <= 0){
                    //cuadroysimul+=6;
                    //cuadroysimultim+=6;
                    ////cuadroxsimultim+=cuadroysimultim;
                    //}
                    //////consola.log('2 plantas '+cuadroysimultim+'c'+cuadroxsimultim);
                }
                ////////
                //
                ////consola.log(cuadroysimultim+'c'+cuadroxsimultim+' cuadroysimul'+cuadroysimul+'c'+cuadroysimul);
                //cuadrosy 22 cuadrosx 22

                //consola.log('esployy',esployy,' esploxx',esploxx,' cuadroysimultime',cuadroysimultime,' cuadroxsimultime',cuadroxsimultime);

                //cuadrosy 22 cuadrosx 22
                //consola.log('ante eenbox',cuadroysimultime+'c'+cuadroxsimultime);

                if (esployy == 23 && esploxx == 21) {//CASA CON ESCALERA
                    //consola.log('anteeenboxya',cuadroysimultime+'c'+cuadroxsimultime);
                    if (cuadroysimultime > 7 && cuadroxsimultime < 16) {
                        if (cuadroysimultime >= 8 && cuadroysimultime <= 12 && cuadroxsimultime < 13) {
                            cuadroysimultime = 8;
                            cuadroxsimultime = 0;
                            cuadroysimul = 8;
                            cuadroxsimul = 0;

                        } else {
                            if (cuadroysimultime >= 8 && cuadroxsimultime >= 10) {//ESTA EN ESCALERA
                                var sumoplu = 8 - cuadroysimultime;
                                var sumoplud = 14 - cuadroxsimultime;
                                sumoplu = sumoplu / 3;
                                sumoplud = sumoplud / 2;
                                //sumoplu+=1;
                                //sumoplu2-=1;
                                sumoplu = parseInt(sumoplu);
                                sumoplud = parseInt(sumoplud);

                                //consola.log('es8 sumoplu',sumoplu,' sumoplu2:',sumoplud);
                                if (sumoplud >= 1 || sumoplu >= -1 && sumoplud == 0) {//escalera derecha arriba encima de escalera sino no muestro
                                    cuadroysimul += sumoplu;
                                    cuadroysimultime += sumoplu;
                                    cuadroysimul += sumoplud;
                                    cuadroysimultime += sumoplud;
                                    cuadroxsimul = 14;
                                    cuadroxsimultime = 14;
                                    //cuadroxsimul-=sumoplu;
                                    //cuadroxsimultime-=sumoplu;
                                    //cuadroxsimul+=sumoplu2;
                                    //cuadroxsimultime+=sumoplu2;
                                } else {
                                    cuadroysimultime = 8;
                                    cuadroxsimultime = 0;
                                    cuadroysimul = 8;
                                    cuadroxsimul = 0;
                                }
                            } else {
                                cuadroysimul -= 4;
                                cuadroysimultime -= 4;
                                cuadroxsimul += 4;
                                cuadroxsimultime += 4;
                            }
                        }
                    }
                }//fin casa escalera

                //consola.log('eenboxya',cuadroysimultime+'c'+cuadroxsimultime);
                eenbox = cuadroysimultime + 'c' + cuadroxsimultime;
                //consola.log('eenbox',eenbox);
                //eenbox != ultimeenbox &&
                //ultimeenbox != eenbox &&
                //ultimeenbox=eenbox;
                if (ultimeenbox != eenbox) {
                    ultimeenbox = eenbox;

                    //consola.log('eenbox',cuadroysimultime+'c'+cuadroxsimultime);
                    //consola.log('ienbox',enboxyinicial+'c'+enboxxinicial);
                    //consola.log('esployy',esployy,' esploxx',esploxx,' cuadroysimultime',cuadroysimultime,' cuadroxsimultime',cuadroxsimultime);


                    if (modocity == 'si' || enboxyinicial == cuadroysimultime && enboxxinicial == cuadroxsimultime || cuadroysimultime > 0 && cuadroxsimultime >= 0 && cuadroysimultime <= esployy && cuadroxsimultime <= esploxx && ffurs[eenbox] != 'nmos') {
                        lolposixze = trompaoz(cuadroysimultime, cuadroxsimultime, 'f');
                        lolposixze.ezindex -= 8;
                        enxasoo.style.zIndex = lolposixze.ezindex;
                        enxasoo.style.left = lolposixze.eleft + 'px';
                        enxasoo.style.top = lolposixze.etop + 'px';
                        enxasoo.classList.remove('novisible');
                    } else {
                        enxasoo.classList.add('novisible');
                    }
                }
            },
            mirosiNOcabeaqui = function (casillaye, casillaxe, divmueblle) {

                var eeployy = ployy;
                var eeploxx = ploxx;
                var casillaycero = 0;
                var casillaxcero = 0;
                if (modocity == 'si') {
                    casillaycero = 2;
                    casillaxcero = 2;
                    if (sy > 0 || sx > 0 || sy < 0 || sx < 0) {
                        casillaye += (eeployy * sy);
                        casillaxe += (eeploxx * sx);
                        casillaycero += (eeployy * sy);
                        casillaxcero += (eeploxx * sx);
                        eeployy += (eeployy * sy);
                        eeploxx += (eeploxx * sx);
                    }

                    eeployy -= 2;
                    eeploxx -= 2;

                }

                //console.log('casillaye',casillaye);

                var idpee4 = divmueblle.getAttribute('data-idpc');
                var sipooodre = 's';
                var casillayxstamir = casillaye + 'c' + casillaxe;
                var casillayxstae = casillayxstamir;
                var todofur;
                var akistalaidpinicio = ffursidp[casillayxstamir];//kgraph.nodes[casillaye][casillaxe].idp;
                //var posicx = casillaidp.split('c',2);
                var casyecheck = parseInt(casillaye);
                var casxecheck = parseInt(casillaxe);
                var yybocheck = 0;
                var xxbocheck = 0;
                var sobreunamesa = 'si';
                var casillasamirar = [];
                var casillasamirary = [];
                var casillasamirarx = [];
                if (akistalaidpinicio) {
                    //kkallaki.querySelector('[data-idp="'+akistalaidpinicio+'"]');
                    todofur = kkallaki.querySelector('[data-idp="' + akistalaidpinicio + '"]');
                    //if(elementExists(todofur))todofur = document.getElementById('idencf'+akistalaidpinicio);
                    if (elementExists(todofur)) {
                        if (todofur.getAttribute('data-idpt') == '' && todofur.getAttribute('data-a') != '' || todofur.getAttribute('data-idpt').substr(0, 4) != 'mesa' && todofur.getAttribute('data-a') != '') {
                            sobreunamesa = 'no';
                        }
                    }
                }

                casillasamirary.push(casyecheck);
                casillasamirarx.push(casxecheck);
                casillasamirar.push(casillayxstae);
                if (idpee4 > 0) {
                    var cortiyaidp4ce = idpee4.split('.', 2);
                    var eyecheck = parseInt(cortiyaidp4ce[1]);
                    var execheck = parseInt(cortiyaidp4ce[0]);

                    for (var iicheck = 1; iicheck < eyecheck; iicheck++) {
                        yybocheck = (casyecheck + iicheck);
                        xxbocheck = casxecheck;
                        casillayxstae = yybocheck + 'c' + xxbocheck;
                        casillasamirary.push(yybocheck);
                        casillasamirarx.push(xxbocheck);
                        casillasamirar.push(casillayxstae);
                        for (var xxcheck = 1; xxcheck < execheck; xxcheck++) {
                            yybocheck = (casyecheck + iicheck);
                            xxbocheck = (casxecheck - xxcheck);
                            casillayxstae = yybocheck + 'c' + xxbocheck;
                            casillasamirary.push(yybocheck);
                            casillasamirarx.push(xxbocheck);
                            casillasamirar.push(casillayxstae);

                        }

                    }
                    for (var xxcheck = 1; xxcheck < execheck; xxcheck++) {
                        yybocheck = casyecheck;
                        xxbocheck = (casxecheck - xxcheck);
                        casillayxstae = yybocheck + 'c' + xxbocheck;
                        casillasamirary.push(yybocheck);
                        casillasamirarx.push(xxbocheck);
                        casillasamirar.push(casillayxstae);
                    }
                }

                var ultimaaltura = 0;
                if (ffursencmaltur[casillayxstamir])
                    ultimaaltura = ffursencmaltur[casillayxstamir];
                var akialtuu = 0;
                for (var stasc = 0; stasc < casillasamirar.length; stasc++) {
                    yybocheck = casillasamirary[stasc];
                    xxbocheck = casillasamirarx[stasc];
                    casillayxstae = casillasamirar[stasc];
                    //akistalaidpinicio != ffursidp[casillayxstae] && sobreunamesa == 'no'
                    akialtuu = 0;
                    if (ffursencmaltur[casillayxstae])
                        akialtuu = ffursencmaltur[casillayxstae];
                    sobreunamesa = 'si';
                    if (ffursidp[casillayxstae]) {
                        //kkallaki.querySelector('[data-idp="'+akistalaidpinicio+'"]');
                        todofur = kkallaki.querySelector('[data-idp="' + ffursidp[casillayxstae] + '"]');
                        //if(elementExists(todofur))todofur = document.getElementById('idencf'+akistalaidpinicio);
                        if (elementExists(todofur)) {
                            if (todofur.getAttribute('data-idpt') == '' && todofur.getAttribute('data-a') != '' || todofur.getAttribute('data-idpt').substr(0, 4) != 'mesa' && todofur.getAttribute('data-a') != '') {
                                sobreunamesa = 'no';
                            }
                        }
                    }
                    if (modocity == 'si' && xxbocheck <= casillaxcero || modocity == 'si' && eeployy <= yybocheck || modocity == 'si' && eeploxx <= xxbocheck || /* Esto fue puesto por NENYER */ ((yybocheck <= casillaycero || xxbocheck < casillaxcero) && [yybocheck, xxbocheck].toString() != [enboxyinicial, enboxxinicial].toString())/* Esto fue puesto por NENYER */ || eeployy < yybocheck || eeploxx < xxbocheck || ffurs[casillayxstae] == 'nmos' || akialtuu != ultimaaltura || sobreunamesa == 'no') {
                        //consola.log('sobreunamesa'+sobreunamesa+' casillayxstae',casillayxstae,' yybocheck',yybocheck,' xxbocheck',xxbocheck, 'alturaaki:',akialtuu,' ultima ',ultimaaltura);
                        sipooodre = 'n';
                        return true;
                    }
                    ultimaaltura = akialtuu;
                }

                if (sipooodre == 's') {
                    return false;
                }
            },
            lol = function (e, alturaextra, devuelvecuadro) {
                //lolsolo(e);//OJOAKI kitar
                var evt = e ? e : event;
                if (modonolag == 's') {
                    lolsolo(evt);
                }
                var clientXx = evt.clientX;//parseInt(evt.pageX);
                var clientYy = evt.clientY;//parseInt(evt.pageY);

                if (modocity == 'si') {
                    clientYy += 522;
                }
                var ktama = 36;
                var ktamb = 30;
                var ktamc = 18;
                var cuadroysimultime = 0;
                var cuadroxsimultime = 0;

                //consola.log('clientYy',clientYy,'clientXx',clientXx);
                clientYy -= altoahor;//document.getElementById('kekoall').style.top.replace('px','');
                clientXx -= leftahor;//document.getElementById('kekoall').style.left.replace('px','');

                if (alturaextra > 0) {
                    //////////consola.log(('sumo'+alturaextra);
                    clientYy += parseInt(alturaextra);
                }

                var calculocolumna = (clientXx / ktama);

                calculocolumna = Math.ceil(calculocolumna);

                var calculofila = (clientYy / ktamc);
                calculofila = Math.ceil(calculofila);
                calculofila = parseInt(calculofila);


                var colmenostrent = parseInt(calculocolumna);
                colmenostrent -= ktamb;
                var filamenostrent = parseInt(calculofila);
                filamenostrent -= ktamb;

                var cuadroysimul = parseInt(calculofila);
                cuadroysimul += colmenostrent;
                var cuadroxsimul = parseInt(calculocolumna);
                cuadroxsimul -= filamenostrent;
                cuadroysimul = Math.round(cuadroysimul / 2);
                cuadroxsimul = Math.round(cuadroxsimul / 2);
                cuadroxsimul -= 1;
                cuadroysimul -= 1;
                cuadroysimultime = cuadroysimul;
                cuadroxsimultime = cuadroxsimul;

                cuadroysimultime += mirployy;
                cuadroxsimultime += mirploxx;
                cuadroysimultime = parseInt(cuadroysimultime);
                cuadroxsimultime = parseInt(cuadroxsimultime);
                var esployy = ployy;
                var esploxx = ploxx;

                if (mirployy == -8 && mirploxx == -9) {
                    if (cuadroxsimultime > 6) {
                        cuadroysimul += 7;
                        cuadroysimultime += 7;
                    }
                }

                if (esployy == 23 && esploxx == 21) {//CASA CON ESCALERA
                    //consola.log('anteeenboxya',cuadroysimultime+'c'+cuadroxsimultime);
                    if (cuadroysimultime > 7 && cuadroxsimultime < 16) {
                        if (cuadroysimultime >= 8 && cuadroysimultime <= 12 && cuadroxsimultime < 13) {
                            cuadroysimultime = 8;
                            cuadroxsimultime = 0;
                            cuadroysimul = 8;
                            cuadroxsimul = 0;

                        } else {
                            if (cuadroysimultime >= 8 && cuadroxsimultime >= 10) {//ESTA EN ESCALERA
                                var sumoplu = 8 - cuadroysimultime;
                                var sumoplud = 14 - cuadroxsimultime;
                                sumoplu = sumoplu / 3;
                                sumoplud = sumoplud / 2;
                                //sumoplu+=1;
                                //sumoplu2-=1;
                                sumoplu = parseInt(sumoplu);
                                sumoplud = parseInt(sumoplud);

                                //consola.log('es8 sumoplu',sumoplu,' sumoplu2:',sumoplud);
                                if (sumoplud >= 1 || sumoplu >= -1 && sumoplud == 0) {//escalera derecha arriba encima de escalera sino no muestro
                                    cuadroysimul += sumoplu;
                                    cuadroysimultime += sumoplu;
                                    cuadroysimul += sumoplud;
                                    cuadroysimultime += sumoplud;
                                    cuadroxsimul = 14;
                                    cuadroxsimultime = 14;
                                    //cuadroxsimul-=sumoplu;
                                    //cuadroxsimultime-=sumoplu;
                                    //cuadroxsimul+=sumoplu2;
                                    //cuadroxsimultime+=sumoplu2;
                                } else {
                                    cuadroysimultime = 8;
                                    cuadroxsimultime = 0;
                                    cuadroysimul = 8;
                                    cuadroxsimul = 0;
                                }
                            } else {
                                cuadroysimul -= 4;
                                cuadroysimultime -= 4;
                                cuadroxsimul += 4;
                                cuadroxsimultime += 4;
                            }
                        }
                    }
                }//fin casa escalera

                cuadroysimultim = cuadroysimultime;
                cuadroxsimultim = cuadroxsimultime;

                if (idpmuevo > 0) {
                    moviendomueble(evt, alturaextra, cuadroysimultim, cuadroxsimultim, devuelvecuadro);
                }
                //if(devuelvecuadro=='s'){
                //return {'cuadroy':cuadroysimultim,'cuadrox':cuadroxsimultim}
                //}
            },
            moviendomueble = function (evt, alturaextra, cuadroysimultims, cuadroxsimultims, devuelvecuadro) {//muevo mueble
                ////////
                ////consola.log('moviendomueble');

                var konsPAmm = document.getElementById('mueblemover');
                if (konsPAmm) {

                    //INICIO MOVER POSTER

                    var esteploy = parseInt(ployy);
                    var esteplox = parseInt(ploxx);
                    var tengofyaidacc = document.getElementById('einfomovv').getAttribute('data-a');
                    //if(esteploy == 19 && esteplox == 17){

                    if (tengofyaidacc == 'poster' || tengofyaidacc == 'poster2') {
                        if (document.getElementById('einfomovv').getAttribute('data-aorigi') != 'poster' && document.getElementById('einfomovv').getAttribute('data-aorigi') != 'poster2') {
                            document.getElementById('einfomovv').setAttribute('data-aorigi', document.getElementById('einfomovv').getAttribute('data-a'));
                        }
                        var tengofyaid = document.getElementById('einfomovv').getAttribute('data-idf');
                        tengofyaid = parseInt(tengofyaid);
                        var valipared = false;
                        var validpareiz = false;
                        var validparede = false;
                        var caacsabasatim = cuadroysimultims;
                        var caacsbbasatim = cuadroxsimultims;
                        if (esteploy == 19 && esteplox == 17) {
                            //izquierda abajo - izquierda arriba - derecha arriba - derecha abajo
                            if (caacsabasatim < 0 && caacsabasatim > -2 && caacsbbasatim != 2 && caacsbbasatim < 9
                                || caacsabasatim <= 3 && caacsabasatim > 0 && caacsbbasatim > 13 && caacsbbasatim < 16
                                || caacsbbasatim > 16 && caacsbbasatim < 20 && caacsabasatim > 1
                                || caacsbbasatim >= 8 && caacsbbasatim <= 9 && caacsabasatim >= 1 && caacsabasatim < 6) {
                                valipared = true;
                                if (caacsbbasatim > 16 && caacsbbasatim < 20 && caacsabasatim > 1 && tengofyaidacc == 'poster'
                                    || caacsbbasatim >= 8 && caacsbbasatim <= 9 && caacsabasatim >= 1 && caacsabasatim < 6 && tengofyaidacc == 'poster')
                                    validparede = true;

                                if (caacsabasatim < 0 && caacsabasatim > -2 && caacsbbasatim != 2 && caacsbbasatim < 9 && tengofyaidacc == 'poster2'
                                    || caacsabasatim <= 3 && caacsabasatim > 0 && caacsbbasatim > 13 && caacsbbasatim < 17 && tengofyaidacc == 'poster2')
                                    validpareiz = true;


                            }

                        } else {
                            if (caacsabasatim <= 0 && caacsabasatim > -2 && caacsbbasatim != 2 && (caacsbbasatim - 1) < esteplox
                                || caacsbbasatim >= (esteplox + 1)
                                && caacsbbasatim < (esteplox + 3) && caacsabasatim > 0) {
                                valipared = true;
                            }

                            if (caacsabasatim <= 0 && caacsabasatim > -2 && caacsbbasatim != 2 && (caacsbbasatim - 1) < esteplox && tengofyaidacc == 'poster2')
                                validpareiz = true;
                            else if (caacsbbasatim >= (esteplox + 1)
                                && caacsbbasatim < (esteplox + 3) && caacsabasatim > 0 && tengofyaidacc == 'poster')
                                validparede = true;

                        }

                        //console.lag('caacsabasatim'+caacsabasatim+'c'+caacsbbasatim);
                        if (valipared == true) {

                            if (validparede == true) {
                                tengofyaidacc = 'poster2';
                                if (document.getElementById('einfomovv').getAttribute('data-a') == 'poster') {
                                    tengofyaid++;
                                }
                                document.getElementById('einfomovv').setAttribute('data-idf', tengofyaid);
                                document.getElementById('einfomovv').setAttribute('data-a', 'poster2');
                                document.getElementById('einfomovv').setAttribute('src', dominiobase + 'fly/i/fursv5/' + document.getElementById('einfomovv').getAttribute('data-nomid') + '/' + tengofyaid + document.getElementById('einfomovv').getAttribute('data-prefi'));
                                if (document.getElementById('einfomovvencima'))
                                    document.getElementById('einfomovvencima').setAttribute('src', dominiobase + 'fly/i/fursv5/' + document.getElementById('einfomovv').getAttribute('data-nomid') + '/' + tengofyaid + document.getElementById('einfomovvencima').getAttribute('data-prefi'));
                            }
                            else if (validpareiz == true) {

                                tengofyaidacc = 'poster';
                                if (document.getElementById('einfomovv').getAttribute('data-a') == 'poster2') {
                                    tengofyaid--;
                                }
                                document.getElementById('einfomovv').setAttribute('data-idf', tengofyaid);
                                document.getElementById('einfomovv').setAttribute('data-a', 'poster');
                                document.getElementById('einfomovv').setAttribute('src', dominiobase + 'fly/i/fursv5/' + document.getElementById('einfomovv').getAttribute('data-nomid') + '/' + tengofyaid + document.getElementById('einfomovv').getAttribute('data-prefi'));
                                if (document.getElementById('einfomovvencima'))
                                    document.getElementById('einfomovvencima').setAttribute('src', dominiobase + 'fly/i/fursv5/' + document.getElementById('einfomovv').getAttribute('data-nomid') + '/' + tengofyaid + document.getElementById('einfomovvencima').getAttribute('data-prefi'));

                            }
                            var clientXx = parseInt(evt.pageX);
                            var clientYy = parseInt(evt.pageY);

                            var mipospxtopd = parseInt(document.getElementById('einfomovv').getAttribute('data-pxtop'));
                            var mipospxleftd = parseInt(document.getElementById('einfomovv').getAttribute('data-pxleft'));
                            var mipospxtop = parseInt(document.getElementById('kekoall').style.top.replace('px', ''));
                            var mipospxleft = parseInt(document.getElementById('kekoall').style.left.replace('px', ''));
                            document.getElementById('einfomovv').setAttribute('data-ile', (clientXx - mipospxleft));
                            document.getElementById('einfomovv').setAttribute('data-ito', (clientYy - mipospxtop));
                            //document.getElementById('einfomovv').setAttribute('data-ile',((clientXx-mipospxleft)+mipospxleftd));
                            //document.getElementById('einfomovv').setAttribute('data-ito',((clientYy-mipospxtop)+mipospxtopd));

                            ////////consola.log(('x'+clientXx+' y'+clientYy);
                            //document.getElementById('einfomovv').setAttribute('data-ile',clientXx);
                            //document.getElementById('einfomovv').setAttribute('data-ito',clientYy);
                            konsPAmm.style.left = (clientXx - mipospxleft) + 'px';
                            konsPAmm.style.top = (clientYy - mipospxtop) + 'px';
                            konsPAmm.style.zIndex = 4;
                            konsPAmm.style.display = 'inline';
                            ////////consola.log(('SI validoposteraki');
                        } else {//poster no valido aki
                            ////////consola.log(('novalidoposteraki');
                            konsPAmm.style.display = 'none';
                        }
                    } else {

                        if (modocity == 'si') {
                            if (sy > 0 || sx > 0 || sy < 0 || sx < 0) {
                                cuadroysimultim -= (ployy * sy);
                                cuadroxsimultim -= (ploxx * sx);
                            }
                        }
                        var estrompaoz = trompaoz(cuadroysimultims, cuadroxsimultims, 'f');
                        var topakmm = estrompaoz.etop;
                        konsPAmm.style.left = estrompaoz.eleft + 'px';
                        konsPAmm.style.top = topakmm + 'px';
                        konsPAmm.style.zIndex = (estrompaoz.ezindex + 1);

                        if (mirosiNOcabeaqui(cuadroysimultim, cuadroxsimultim, document.getElementById('einfomovv'))) {
                            konsPAmm.style.opacity = 0.1;//no cabe
                            if (document.getElementById('einfomovv').getAttribute('data-idpc') == '0.2') {
                                if (document.getElementById('einfomovv').getAttribute('data-pedi') != 'si') {
                                    document.getElementById('einfomovv').setAttribute('data-pedi', 'si');
                                    katman('pixleftypixtop', document.getElementById('einfomovv').getAttribute('data-gir'));
                                }
                                if (document.getElementById('einfomovv').getAttribute('data-girpxleft') != '') {
                                    if (document.getElementById('einfomovv').getAttribute('data-girado') == 'n') {
                                        document.getElementById('einfomovv').setAttribute('data-idpc', '2.0');
                                        document.getElementById('einfomovv').setAttribute('data-girado', 's');
                                        document.getElementById('einfomovv').setAttribute('data-idfahora', document.getElementById('einfomovv').getAttribute('data-gir'));
                                        konsPAmm.style.marginLeft = document.getElementById('einfomovv').getAttribute('data-girpxleft') + 'px';
                                        konsPAmm.style.marginTop = document.getElementById('einfomovv').getAttribute('data-girpxtop') + 'px';
                                        document.getElementById('einfomovv').setAttribute('src', dominiobase + 'fly/i/fursv5/' + document.getElementById('einfomovv').getAttribute('data-nomid') + '/' + document.getElementById('einfomovv').getAttribute('data-gir') + document.getElementById('einfomovv').getAttribute('data-prefi'));
                                        if (document.getElementById('einfomovvencima'))
                                            document.getElementById('einfomovvencima').setAttribute('src', dominiobase + 'fly/i/fursv5/' + document.getElementById('einfomovv').getAttribute('data-nomid') + '/' + document.getElementById('einfomovv').getAttribute('data-gir') + document.getElementById('einfomovvencima').getAttribute('data-prefi'));

                                    } else {
                                        document.getElementById('einfomovv').setAttribute('data-idpc', '2.0');
                                        document.getElementById('einfomovv').setAttribute('data-girado', 'n');
                                        document.getElementById('einfomovv').setAttribute('data-idfahora', document.getElementById('einfomovv').getAttribute('data-idf'));
                                        konsPAmm.style.marginLeft = document.getElementById('einfomovv').getAttribute('data-pxleft') + 'px';
                                        konsPAmm.style.marginTop = document.getElementById('einfomovv').getAttribute('data-pxtop') + 'px';
                                        document.getElementById('einfomovv').setAttribute('src', dominiobase + 'fly/i/fursv5/' + document.getElementById('einfomovv').getAttribute('data-nomid') + '/' + document.getElementById('einfomovv').getAttribute('data-idf') + document.getElementById('einfomovv').getAttribute('data-prefi'));
                                        if (document.getElementById('einfomovvencima'))
                                            document.getElementById('einfomovvencima').setAttribute('src', dominiobase + 'fly/i/fursv5/' + document.getElementById('einfomovv').getAttribute('data-nomid') + '/' + document.getElementById('einfomovv').getAttribute('data-idf') + document.getElementById('einfomovvencima').getAttribute('data-prefi'));

                                    }
                                }
                            } else if (document.getElementById('einfomovv').getAttribute('data-idpc') == '2.0') {
                                if (document.getElementById('einfomovv').getAttribute('data-pedi') != 'si') {
                                    document.getElementById('einfomovv').setAttribute('data-pedi', 'si');
                                    katman('pixleftypixtop', document.getElementById('einfomovv').getAttribute('data-gir'));
                                }
                                if (document.getElementById('einfomovv').getAttribute('data-girpxleft') != '') {
                                    if (document.getElementById('einfomovv').getAttribute('data-girado') == 'n') {
                                        document.getElementById('einfomovv').setAttribute('data-idpc', '0.2');
                                        document.getElementById('einfomovv').setAttribute('data-girado', 's');
                                        document.getElementById('einfomovv').setAttribute('data-idfahora', document.getElementById('einfomovv').getAttribute('data-gir'));
                                        konsPAmm.style.marginLeft = document.getElementById('einfomovv').getAttribute('data-girpxleft') + 'px';
                                        konsPAmm.style.marginTop = document.getElementById('einfomovv').getAttribute('data-girpxtop') + 'px';
                                        document.getElementById('einfomovv').setAttribute('src', dominiobase + 'fly/i/fursv5/' + document.getElementById('einfomovv').getAttribute('data-nomid') + '/' + document.getElementById('einfomovv').getAttribute('data-gir') + document.getElementById('einfomovv').getAttribute('data-prefi'));
                                        if (document.getElementById('einfomovvencima'))
                                            document.getElementById('einfomovvencima').setAttribute('src', dominiobase + 'fly/i/fursv5/' + document.getElementById('einfomovv').getAttribute('data-nomid') + '/' + document.getElementById('einfomovv').getAttribute('data-gir') + document.getElementById('einfomovvencima').getAttribute('data-prefi'));
                                    } else {
                                        document.getElementById('einfomovv').setAttribute('data-idpc', '0.2');
                                        document.getElementById('einfomovv').setAttribute('data-girado', 'n');
                                        document.getElementById('einfomovv').setAttribute('data-idfahora', document.getElementById('einfomovv').getAttribute('data-idf'));
                                        konsPAmm.style.marginLeft = document.getElementById('einfomovv').getAttribute('data-pxleft') + 'px';
                                        konsPAmm.style.marginTop = document.getElementById('einfomovv').getAttribute('data-pxtop') + 'px';
                                        document.getElementById('einfomovv').setAttribute('src', dominiobase + 'fly/i/fursv5/' + document.getElementById('einfomovv').getAttribute('data-nomid') + '/' + document.getElementById('einfomovv').getAttribute('data-idf') + document.getElementById('einfomovv').getAttribute('data-prefi'));
                                        if (document.getElementById('einfomovvencima'))
                                            document.getElementById('einfomovvencima').setAttribute('src', dominiobase + 'fly/i/fursv5/' + document.getElementById('einfomovv').getAttribute('data-nomid') + '/' + document.getElementById('einfomovv').getAttribute('data-idf') + document.getElementById('einfomovvencima').getAttribute('data-prefi'));
                                    }
                                }

                            }
                            if (document.getElementById('einfomovv').getAttribute('data-idpt') != '' || cuadroysimultim >= 0 && cuadroxsimultim >= 0 && cuadroysimultim <= ployy && cuadroxsimultim <= ploxx && ffursencmaltur[cuadroysimultims + 'c' + cuadroxsimultims] >= 1)
                                konsPAmm.style.zIndex = (parseInt(konsPAmm.style.zIndex) + parseInt(1));

                            if (cuadroysimultim >= 0 && cuadroxsimultim >= 0 && cuadroysimultim <= ployy && cuadroxsimultim <= ploxx && ffursencmaltur[cuadroysimultims + 'c' + cuadroxsimultims] >= 1) {
                                konsPAmm.style.top = (parseInt(konsPAmm.style.top) - parseInt(ffursencmaltur[cuadroysimultims + 'c' + cuadroxsimultims])) + 'px';
                                //if(kgraph.nodes[cuadroysimultim][cuadroxsimultim].altura>0)konsPAmm.style.zIndex+=4;
                            }
                            //if(!mirosiNOcabeaqui(cuadroysimultim,cuadroxsimultim,document.getElementById('einfomovv'))){
                            //if(devuelvecuadro!='rechekk')
                            //var loliza = lol(evt,alturaextra,'rechekk');
                            //}
                            //consola.log('nocabe');
                        } else {
                            konsPAmm.style.opacity = 0.8;
                            if (document.getElementById('einfomovv').getAttribute('data-idpt') != '' || cuadroysimultim >= 0 && cuadroxsimultim >= 0 && cuadroysimultim <= ployy && cuadroxsimultim <= ploxx && ffursencmaltur[cuadroysimultim + 'c' + cuadroxsimultim] >= 1)
                                konsPAmm.style.zIndex = (parseInt(konsPAmm.style.zIndex) + parseInt(1));
                            if (cuadroysimultim >= 0 && cuadroxsimultim >= 0 && cuadroysimultim <= ployy && cuadroxsimultim <= ploxx && ffursencmaltur[cuadroysimultims + 'c' + cuadroxsimultims] >= 1)
                                konsPAmm.style.top = (parseInt(konsPAmm.style.top) - parseInt(ffursencmaltur[cuadroysimultims + 'c' + cuadroxsimultims])) + 'px';
                            //consola.log('sicabe');
                            //consola.log('sicabe');

                        }
                        //consola.log('cuadroxsimultim'+cuadroysimultim+'c'+cuadroxsimultim);

                        //if(ffursidp[masda])
                    }
                }
            },
            movigo = function (evt, alturaextralol) {
                //var clikkboxs=

                var divamirayy = document.getElementById('k' + yasoid);
                if (elementExists(divamirayy)) {


                    if (mesaespecial == '') {
                        lol(evt, alturaextralol, 's');

                        if (mesaespecialhice != '') {
                            if (ffursidp[mesaespecialhice] && ffursidp[mesaespecialhice] == ffursidp[cuadroysimultim + 'c' + cuadroxsimultim]) {
                                mesaespecial = cuadroysimultim + 'c' + cuadroxsimultim;
                            } else {
                                mesaespecial = '';
                                mesaespecialhice = '';
                            }
                        }

                    } else {
                        if (mesaespecialhice == mesaespecial) {
                            mesaespecial = '';
                            mesaespecialhice = '';
                        } else {
                            mesaespecialhice = mesaespecial;
                        }
                    }
                    var vesy = cuadroysimultim;
                    var vesx = cuadroxsimultim;

                    ////consola.log('movigo alturaextralol'+alturaextralol+' para'+vesy+'c'+vesx);
                    ////consola.log('movigo');

                    var habiakekomenosuno = 'n';
                    if (idpmuevo > 0) {
                        sueltomueble(vesy, vesx);
                    } else if (modocity == 'si' || vesy == enboxyinicial && vesx == enboxxinicial && bowb == 'no' || vesy > 0 && vesx >= 0 && vesy <= ployy && vesx <= ploxx && bowb == 'no') {

                        var grapky = ky;
                        var grapkx = kx;
                        var grapvesy = vesy;
                        var grapvesx = vesx;
                        var despueseven = 'no';
                        if (modocity == 'si') {

                            if (sy > 0 || sx > 0 || sy < 0 || sx < 0) {
                                grapky -= (ployy * sy);
                                grapkx -= (ploxx * sx);
                                grapvesy -= (ployy * sy);
                                grapvesx -= (ploxx * sx);
                            }
                            if (grapvesy < 0) { grapvesy = 0; despueseven = 'si'; }
                            if (grapvesx < 0) { grapvesx = 0; despueseven = 'si'; }

                            if (grapvesy > ployy) { grapvesy = ployy; despueseven = 'si'; }
                            if (grapvesx > ploxx) { grapvesx = ploxx; despueseven = 'si'; }

                            //console.log('vesy',vesy,'c',vesx,' grapky',grapky,' grapkx',grapkx,' grapvesy',grapvesy,' grapvesx',grapvesx);
                        }

                        if (despueseven == 'si') {
                            movigoeve = evt;
                        } else {
                            movigoeve = '';
                        }
                        var palbox = vesy + 'c' + vesx;

                        if (detectandocasilla == 'sicasilla') {
                            detectandocasilla = 'no';//nolang
                            if (document.getElementById('frammycerberus')) {
                                var x = document.getElementById("frammycerberus");
                                var xff = (x.contentWindow || x.contentDocument);
                                var y = (x.contentWindow || x.contentDocument);
                                if (y.document) y = y.document;
                                if (y.getElementById('casillaadetectar'))
                                    y.getElementById('casillaadetectar').innerHTML = 'Casilla detectada: ' + vesy + 'x' + vesx;//nolang
                                y.getElementById('spapadete').setAttribute('data-casy', vesy);
                                y.getElementById('spapadete').setAttribute('data-casx', vesx);
                                xff.spapadetefun();
                                //y.getElementById('spapadete').click();
                                //$('#spapadete').getAttribute({'data-casy':payfix,'data-casx':paxfix}).click();
                                //$('#spapadete').click();
                            }
                        }
                        //var akiyahaykek=kkallakik.querySelector('[data-box="'+palbox+'"]');



                        if (!kkallakik.querySelector('[data-box="' + palbox + '"]')) {
                            if (habiakekomenosuno == 'n') {
                                if (ffursidp[palbox]) {//alturaextralol==0 &&

                                    if (timeouclic) window.clearTimeout(timeouclic);
                                    timeouclic = window.setTimeout(clickado, 10, ffursidp[palbox], 'box');
                                } else {

                                    if (kkallakik.querySelector('[data-box="' + (vesy + 1) + 'c' + (vesx - 1) + '"]')) {

                                        if (timeouclic) window.clearTimeout(timeouclic);
                                        timeouclic = window.setTimeout(clickeko, 10, (vesy + 1), (vesx - 1), '');
                                        habiakekomenosuno = 's';
                                    } else {
                                        if (timeouclic) window.clearTimeout(timeouclic);
                                        timeouclic = window.setTimeout(gofcasa, 10);
                                    }
                                }
                            }
                        } else {

                            if (timeouclic) window.clearTimeout(timeouclic);
                            timeouclic = window.setTimeout(clickeko, 10, vesy, vesx, '');

                        }
                        var mirocabesita = 's';
                        var pay = vesy;
                        var pax = vesx;
                        //Soy beber
                        switch (ffurs[palbox]) {
                            case 'bsen':
                                vesy++;
                                break;
                            case 'bswn':
                                vesx--;
                                break;
                            case 'bnw':
                                vesy--;
                                break;
                            case 'bne':
                                vesx++;
                                break;
                        }

                        var despuesvoyaotro = 'n';
                        if (vesy > 0 && vesx >= 0 && vesy <= ployy && vesx <= ploxx) {
                            if (pay != vesy || pax != vesx) {
                                despuesvoyaotro = 's';
                            }
                        } else {
                            despuesvoyaotro = 'n';
                            vesy = pay;
                            vesx = pax;
                        }

                        palbox = vesy + 'c' + vesx;

                        ////////consola.log(kkallakik.querySelector('[data-box="'+palbox+'"]:not([data-idkek="'+yasoid+'"])'));
                        if (!kkallakik.querySelector('[data-box="' + palbox + '"]:not([data-idkek="' + yasoid + '"])')) {
                            //////consola.log('boypahi');
                            var kgraph = dimegraph(ployy, ploxx, mesaespecial, '', palbox);

                            var mstart = kgraph.nodes[grapky][grapkx];
                            var stabaenbox = grapky + 'c' + grapkx;
                            var mend = kgraph.nodes[grapvesy][grapvesx];
                            var mresult = astar.search(kgraph.nodes, mstart, mend, condiags);

                            var creomresul = [];
                            var harecmia = 'n';
                            if (mresult.length > 0) {
                                numt++;
                                tengoidpelota = 0;

                                if (ffurs[stabaenbox] == 'pelo') {
                                    if (mresult.length != 2)
                                        harecmia = 'chuta';
                                }
                                //consola.log('harecmia',harecmia);

                                if (sisigotimeout) {
                                    //consola.log('11borrosisigo');
                                    window.clearTimeout(sisigotimeout);//sisigotimeout='';
                                }

                                //if(movigoyainter){
                                //window.clearInterval(movigoyainter);
                                //}
                                for (var i = 0; i < mresult.length; i++) {

                                    //console.log('1movigoyas',mresult[i].x,'c',mresult[i].y);
                                    if (sy > 0 || sx > 0 || sy < 0 || sx < 0) {
                                        mresult[i].x += (ployy * sy);
                                        mresult[i].y += (ploxx * sx);
                                    }
                                    //console.log('2movigoyas',mresult[i].x,'c',mresult[i].y);

                                    var stopu = { y: mresult[i].y, x: mresult[i].x, cmia: harecmia, ponfurka: '' };
                                    harecmia = 'n';
                                    creomresul.push(stopu);
                                }
                                if (despuesvoyaotro == 's') {
                                    //console.log('despues voy a otro');
                                    var stopu = { y: pax, x: pay, cmia: 'n', ponfurka: '' };
                                    creomresul.push(stopu);
                                }
                                mresulta = creomresul;

                                //movigoyainter = window.setInterval(movigoyas,360);
                                //movigoyas();
                                //movigoyainter = window.setInterval(movigoyas,360);
                                mirocabesita = 'n';
                            } else if (mresult.length == 0 && palbox == stabaenbox && despuesvoyaotro == 's') {
                                numt++;
                                if (sisigotimeout) {
                                    window.clearTimeout(sisigotimeout);//sisigotimeout='';
                                }
                                //if(movigoyainter){
                                //window.clearInterval(movigoyainter);
                                //}
                                var stopu = { y: pax, x: pay, cmia: 'n', ponfurka: '' };
                                creomresul.push(stopu);
                                mresulta = creomresul;

                                //movigoyainter = window.setInterval(movigoyas,360);
                                //movigoyas();
                                //movigoyainter = window.setInterval(movigoyas,360);

                                mirocabesita = 'n';
                            }
                        }
                        // && numt == ultnumt
                        if (mirocabesita == 's' && numt == ultnumt) {//INICIO MIRO

                            var akihayfurv = '';
                            var akihayfurvreal = '';
                            var kyv = ky; var kxv = kx;
                            var venbox = kyv + 'c' + kxv;
                            if (ffurs[venbox]) akihayfurvreal = ffurs[venbox];
                            if (akihayfurvreal == '' || akihayfurvreal == 'nada' || akihayfurvreal == 'stop' || akihayfurvreal == 'cesped' || akihayfurvreal == 'pu') {
                                var estegrap = graphvacio;

                                var mstartv = estegrap.nodes[grapky][grapkx];
                                var mendv = estegrap.nodes[grapvesy][grapvesx];
                                var mresultv = astar.search(estegrap.nodes, mstartv, mendv, true);
                                //consola.log('mresultv'+mresultv.length);
                                if (mresultv.length > 0) {
                                    var mabdanumv = fas(mresultv[0].x, mresultv[0].y, grapky, grapkx);
                                    //consola.log('mabdanumv'+mabdanumv);
                                    if (mabdanumv > 0) {
                                        if (akihayfurvreal == 'nada') {
                                            mbailo = ''; miart = '';
                                            akihayfurv = 'nada';
                                        } else {
                                            akihayfurv = mbailo;
                                        }
                                        var sifokasv = 'standL' + mabdanumv + 'L' + akihayfurv + 'L' + maccion + 'L' + miart;
                                        if (sifokasv != fok) {
                                            ////////consola.log('MIROO '+sifokasv);
                                            if (akihayfurvreal != 'stop') {
                                                //consola.log('golabelnew',sifokasv);
                                                ultmabdanum = mabdanumv;
                                                fok = sifokasv;
                                                katman('golabelnew', sifokasv, '', 0);

                                            } else {

                                                //consola.log('ponfurka',sifokasv);
                                                if (sisigotimeout) {
                                                    window.clearTimeout(sisigotimeout);//sisigotimeout='';
                                                }
                                                //if(movigoyainter)
                                                //window.clearInterval(movigoyainter);

                                                mbailo = '';
                                                mresulta = [];
                                                mresulta[0] = { 'cmia': 'si', 'y': kx, 'x': ky, 'ponfurka': mabdanumv };
                                                //movigoyainter = window.setInterval(movigoyas,360);
                                                //movigoyas();
                                            }
                                        }

                                    }
                                }
                            }
                            //fotopacabezamira('s','',vesy,vesx,'fuerzo');

                        }//FIN MIRO

                    } else {
                        if (!TENGOCLICADOtipo || TENGOCLICADOtipo == 'keko' || TENGOCLICADOtipo == 'furni' && TENGOCLICADODATA && TENGOCLICADODATA.desde && TENGOCLICADODATA.desde != 'idp') {

                            //console.log('clicknada2',TENGOCLICADODATA);
                            TENGOCLICADO = null;
                            TENGOCLICADOtipo = null;
                            TENGOCLICADODATA = {};
                            //nombreblanhbb.innerText = nombcas.nombre;
                            //document.getElementById('blanhbbFLOAT').classList.add('novisible');
                        }
                    }
                }
            },
            posiciono = function () {

                leftahor = 0;
                var posixz = trompaoz(ky, kx, 't');

                posixz.eleft = (posixz.eleft / -1);
                posixz.etop = (posixz.etop / -1);

                //if(enboxyinicial==31 && enboxxinicial == 8){
                ////es una zona
                //posixz.eleft+=500;
                //posixz.etop+=altopan;
                //posixz.etop-=130;
                //}else{
                posixz.eleft += parseInt(anchopan / 10);
                posixz.etop += parseInt(altopan / 2);
                //}

                if (posici == 'si') {
                    addClass(document.getElementById('kekoall'), 'trans');
                    window.setTimeout(removeClass, 1000, document.getElementById('kekoall'), 'trans');
                }
                leftahor = posixz.eleft;
                altoahor = posixz.etop;
                document.getElementById('kekoall').style.left = posixz.eleft + 'px';//posixz.eleft+'px';
                document.getElementById('kekoall').style.top = posixz.etop + 'px';//posixz.etop+'px';
                //////consola.log('top'+posixz.etop);
                //////consola.log('left'+posixz.eleft);
            },
            //movigoyasOJOAKI = function(){
            //
            //var mresultalargo = mresulta.length,
            //mresultacero,
            //alturacuadro=0,
            //lohago='s',
            //harefok,
            //mabdanum=0,
            //kya=0,
            //kxa=0,
            //kyya=ky,
            //kxya=kx,
            //kyae=0,
            //kxae=0,
            //mposixz,
            //despuesfur,
            //soobreidp=0,
            //sorechekenvio,
            //akeboxtoy;
            //
            //if(mresultalargo>0){
            //mresultacero=mresulta[0];
            //mresulta.shift();
            //mresultalargo--;
            //kya=mresultacero.x;
            //kxa=mresultacero.y;
            //mabdanum = fas(kya,kxa,kyya,kxya);
            //harefok='walkL'+mabdanum+'L'+mbailo+'L'+maccion+'L'+miart;
            //mposixz = trompaoz(kya,kxa,'t');
            //
            //ky=kya;
            //kx=kxa;
            //
            //kyae=kya;
            //kxae=kxa;
            //despuesfur='';
            //soobreidp=0;
            //sorechekenvio='';
            //akeboxtoy=kyae+'c'+kxae;
            ////OJOAKI
            //onsocks['hagostopya']({idkek:20001,trz:mposixz.ezindex,furk:harefok,tra:mposixz.eleft,tro:mposixz.etop,my:kyae,mx:kxae,albox:akeboxtoy,mabdanum:mabdanum,despuesfur:despuesfur,soyrech:sorechekenvio});
            //
            ////ws_node.send(JSON.stringify(['hagostopnew',{ezindex:mposixz.ezindex,harefok:harefok,eleft:mposixz.eleft,etop:mposixz.etop,kya:kyae,kxa:kxae,mabdanum:mabdanum,despuesfur:despuesfur,soobreidp:soobreidp,sorechekenvio:sorechekenvio}]));
            ////katman('hagostopnew',{ezindex:mposixz.ezindex,harefok:harefok,eleft:mposixz.eleft,etop:mposixz.etop,kya:kyae,kxa:kxae,mabdanum:mabdanum,despuesfur:despuesfur,soobreidp:soobreidp,sorechekenvio:sorechekenvio});
            //
            //
            //}
            //},


            movigoyas = function () {

                ultigircab++;
                if (mresulta.length > 0) {

                    movigoyasJOS();
                    if (mresulta.length == 0 && posici == 'si') {
                        setTimeout(mirosiposiciono, 1000, numt);
                    }

                }
            },
            mirosiposiciono = function (siesenumt) {
                if (siesenumt == numt) {
                    posiciono();
                }
            },
            movigoyasJOS = function () {
                var mresultalargo = mresulta.length,
                    alturacuadro = 0,
                    lohago = 's';
                if (mresultalargo > 0) {
                    var mresultacero = mresulta[0];
                    ////
                    //consola.log('mresultacero',mresultacero);
                    mresulta.shift();
                    mresultalargo--;
                    var sorechek = 'n';
                    if (mresultacero.cmia) {
                        sorechek = mresultacero.cmia;
                    }

                    var sumetrz = 'n';
                    var kya = mresultacero.x;
                    var kxa = mresultacero.y;

                    if (sorechek == 'si' && kya == ky && kxa == kx) {
                        //consola.log('//OJOAKI misma posicion');
                        lohago = 'n';
                    }
                    if (lohago == 's') {
                        if (sorechek == 'siteleport' || sorechek == 'sisentarme') {
                            sorechek = 'si';
                        }
                        var fotogramavalidoparacmiadirecto = 'n';
                        var pondrefurka = '';
                        var pondrefurkaespecial = '';
                        if (mresultacero.ponfurka) {
                            pondrefurka = mresultacero.ponfurka;
                            pondrefurkaespecial = mresultacero.ponfurka;
                        }
                        var idkekointeractuo = 0;
                        var mabdanum = fas(kya, kxa, ky, kx);
                        var mabdanumreal = mabdanum;
                        var harefok = '';
                        var despuesfur = 'walk';
                        var continuare = 'si';
                        var hagostaaccion = 'n';
                        var akihaykekofin = 0;

                        var mposixz = trompaoz(kya, kxa, 't');
                        var enbox = kya + 'c' + kxa;
                        var yasumetrz = 'n';

                        if (ffurscerv.hasOwnProperty(enbox)) {
                            accionar('accionar', ffurscerv[enbox], 'deteccion');
                        }

                        if (sorechek == 'chuta') {
                            var stabaenbox = ky + 'c' + kx;
                            if (ffurs.hasOwnProperty(stabaenbox) && ffurs[stabaenbox] == 'pelo') {
                                var idpelota = ffursidp[stabaenbox];
                                if (mresultalargo == 0)
                                    katman('muevewow', 'chutainverso', idpelota, ky, kx, fas(ky, kx, kya, kxa));
                            }
                            sorechek = 'n';
                        }

                        var sifurka = '';
                        if (ffurs.hasOwnProperty(enbox)) sifurka = ffurs[enbox];

                        if (enbox == mesaespecial) {
                            sifurka = '';
                        }

                        harefok = 'walkL' + mabdanum + 'L' + mbailo + 'L' + maccion + 'L' + miart;
                        switch (sifurka) {
                            case 'nadb'://jacuzzi largo/
                                if (ffursidp[enbox] && ffurscass['f' + ffursidp[enbox]] != enbox) {
                                    mposixz.ezindex -= 2;
                                } else {
                                    mposixz.ezindex += 1;
                                }
                                yasumetrz = 's';
                                break;
                            case 'nadc'://jacuzzi horizontal \
                                if (ffursidp[enbox] && ffurscass['f' + ffursidp[enbox]] != enbox) {
                                    mposixz.ezindex -= 2;
                                } else {
                                    mposixz.ezindex += 1;
                                }
                                yasumetrz = 's';
                                break;
                            case 'nada':
                                despuesfur = 'stand';
                                if (mabdanum == 0) {
                                    mabdanum = 4;
                                    harefok = 'walkL4LnadaLL';
                                } else
                                    harefok = 'walkL' + mabdanum + 'LnadaLL';

                                if (ffurs[ky + 'c' + kx] != 'nada' && kkallaki.querySelector('[data-idp="' + ffursidp[enbox] + '"][data-idf="400006"]')) {
                                    //es agua salpica
                                    katman('animasolo', ffursidp[enbox]);
                                }
                                mbailo = '';
                                maccion = '';
                                miart = '';
                                if (bebetimeout) {
                                    window.clearTimeout(bebetimeout);
                                }
                                break;
                            case 'anim':
                                ////consola.log('anim'+ffursidp[enbox]);
                                if (ffursidp[enbox])
                                    katman('animasolo', ffursidp[enbox]);

                                break;

                            case 'sentado_ne':
                            case 'sentado_nw':
                            case 'sentado_se':
                            case 'sentado_sw':
                                //if(ffursidp[enbox] && ffurscass[ffursidp[enbox]] != enbox){
                                //mposixz.ezindex-=2;
                                //}
                                var estesofa = kkallaki.querySelector('[data-idp="' + ffursidp[enbox] + '"]');
                                if (estesofa.getAttribute('data-idpc') != '') {
                                    //es mas grande de un cuadro sumo1 si esta en el cuadro base o resto 2
                                    if (estesofa.getAttribute('data-box') == enbox) {
                                        mposixz.ezindex += 1;
                                        //console.log('sumo1');
                                    } else {
                                        //console.log('resto2');
                                        mposixz.ezindex -= 2;
                                    }

                                    yasumetrz = 's';
                                }
                                continuare = 'no';
                                break;
                            case 'movedb':
                            case 'moveda':
                            case 'moveia':
                            case 'moveib':
                                //harefok='standL1LLL';
                                mposixz.etop += 15;
                                pondrefurkaespecial = '';
                                //window.setTimeout(konmove,400,kya,kxa,numt);
                                //konmove(kya,kxa,numt);
                                //sorechek='kmove';
                                continuare = 'no';
                                //soykmove='s';
                                break;
                            case 'bswn':
                            case 'bsen':
                            case 'bnw':
                            case 'bne':
                                continuare = 'novoy';
                                //
                                //////consola.log('soybeber');
                                if (bebetimeout) {
                                    ////////consola.log('borro bebetimeout');
                                    window.clearTimeout(bebetimeout);
                                }
                                if (ffursidp[enbox]) {



                                    bebetimeout = window.setTimeout(beber, 12000, 1);
                                    //bebetimeout = window.setTimeout(beber,8000,1);
                                    ////////consola.log('soy bebe');
                                    katman('animasolo', ffursidp[enbox]);
                                    miart = damebebida(ffursidp[enbox]);
                                } else {
                                    miart = 1;
                                }
                                maccion = 'bebe';
                                harefok = 'walkL' + mabdanum + 'L' + mbailo + 'L' + maccion + 'L' + miart;
                                //OJOAKI bebe
                                break;
                            case 'estirado_ne':
                            case 'estirado_se':
                            case 'estirado_sw':
                            case 'estirado_nw':
                                if (ffursidp[enbox]) {
                                    var miaboidp = 'f' + ffursidp[enbox];
                                    var mirocasillas = ffurscass[miaboidp];
                                    var mirocasillase = mirocasillas.split('c', 2);
                                    var kyaes = parseInt(mirocasillase[0]);
                                    var kxaes = parseInt(mirocasillase[1]);

                                    if (ffursidp[ky + 'c' + kx] != ffursidp[enbox]) {
                                        continuare = 'no';
                                        enbox = kya + 'c' + kxa;

                                        var estesofa = kkallaki.querySelector('[data-idp="' + ffursidp[enbox] + '"]');

                                        var kyadif = kya - kyaes;
                                        var kxadif = kxa - kxaes;
                                        switch (estesofa.getAttribute('data-a')) {
                                            case 'estirado_ne':
                                                if (kyadif == 1 && kxadif == 0 || kyadif == 0 && kxadif == 0) {
                                                    continuare = 'si';
                                                } else {
                                                    kya = kyaes;
                                                    kxa = kxaes;
                                                }
                                                //////console.log('kyadif',kyadif,'c',kxadif,' kya',kya,'c',kxa);
                                                break;
                                            case 'estirado_nw':
                                                if (kyadif == 0 && kxadif == -1 || kyadif == 0 && kxadif == 0) {
                                                    continuare = 'si';
                                                } else {
                                                    kya = kyaes;
                                                    kxa = kxaes;
                                                }
                                                //////console.log('kyadif',kyadif,'c',kxadif,' kya',kya,'c',kxa);
                                                break;
                                            case 'estirado_sw':
                                                if (kyadif == 1 && kxadif == 0 || kyadif == 0 && kxadif == 0) {
                                                    continuare = 'si';
                                                } else {
                                                    kya = kyaes;
                                                    kxa = kxaes;
                                                }
                                                //////console.log('kyadif',kyadif,'c',kxadif,' kya',kya,'c',kxa);
                                                break;
                                            case 'estirado_se':
                                                if (kyadif == 0 && kxadif == -1 || kyadif == 0 && kxadif == 0) {
                                                    continuare = 'si';
                                                } else {
                                                    kya = kyaes;
                                                    kxa = kxaes;
                                                }
                                                //////console.log('kyadif',kyadif,'c',kxadif,' kya',kya,'c',kxa);
                                                break;
                                            default:
                                                kya = kyaes;
                                                kxa = kxaes;
                                        }
                                        //////console.log(estesofa.getAttribute('data-a'),'continuare',continuare,'  continuareNO ',kya,'c',kxa,'  ',kyaes,'c',kxaes,' idp2',estesofa.getAttribute('data-idpc'));

                                    } else {
                                        //////console.log('continuareSI mresultalargo',mresultalargo);
                                        if (mresultalargo > 0) {
                                            continuare = 'si';
                                            sifurka = '';
                                        } else {
                                            var estesofa = kkallaki.querySelector('[data-idp="' + ffursidp[enbox] + '"]');

                                            var kyadif = kya - kyaes;
                                            var kxadif = kxa - kxaes;
                                            switch (estesofa.getAttribute('data-a')) {
                                                case 'estirado_ne':
                                                    if (kyadif == 1 && kxadif == 0 || kyadif == 0 && kxadif == 0) {
                                                        continuare = 'si';
                                                    } else {
                                                        kya = kyaes;
                                                        kxa = kxaes;
                                                    }
                                                    //////console.log('kyadif',kyadif,'c',kxadif,' kya',kya,'c',kxa);
                                                    break;
                                                case 'estirado_nw':
                                                    if (kyadif == 0 && kxadif == -1 || kyadif == 0 && kxadif == 0) {
                                                        continuare = 'si';
                                                    } else {
                                                        kya = kyaes;
                                                        kxa = kxaes;
                                                    }
                                                    //////console.log('kyadif',kyadif,'c',kxadif,' kya',kya,'c',kxa);
                                                    break;
                                                case 'estirado_sw':
                                                    if (kyadif == 1 && kxadif == 0 || kyadif == 0 && kxadif == 0) {
                                                        continuare = 'si';
                                                    } else {
                                                        kya = kyaes;
                                                        kxa = kxaes;
                                                    }
                                                    //////console.log('kyadif',kyadif,'c',kxadif,' kya',kya,'c',kxa);
                                                    break;
                                                case 'estirado_se':
                                                    if (kyadif == 0 && kxadif == -1 || kyadif == 0 && kxadif == 0) {
                                                        continuare = 'si';
                                                    } else {
                                                        kya = kyaes;
                                                        kxa = kxaes;
                                                    }
                                                    //////console.log('kyadif',kyadif,'c',kxadif,' kya',kya,'c',kxa);
                                                    break;
                                                default:
                                                    continuare = 'novoy';
                                            }

                                        }
                                    }
                                }
                                mposixz = trompaoz(kya, kxa, 't');
                                switch (sifurka) {
                                    case 'estirado_ne':
                                        mposixz.etop += 12;
                                        mposixz.eleft -= 20;
                                        break;
                                    case 'estirado_se':
                                        mposixz.etop += 7;
                                        mposixz.eleft += 13;
                                        break;
                                    case 'estirado_sw':
                                        mposixz.etop += 8;
                                        mposixz.eleft -= 16;
                                        break;
                                    case 'estirado_nw':
                                        mposixz.etop += 11;
                                        mposixz.eleft += 20;
                                        break;
                                }
                                if (sorechek == 'cmia') {
                                    fotogramavalidoparacmiadirecto = 's';
                                    harefok = 'standL1L' + sifurka + 'L' + maccion + 'L' + miart;
                                }
                                mposixz.ezindex += 1;
                                yasumetrz = 's';
                                break;
                            case 'stop':
                            case 'cana':
                                continuare = 'novoy';
                                break;
                            case 'pu':
                                continuare = 'si';
                                if (mresultalargo > 0) {
                                    var estapuerta = kkallaki.querySelector('[data-box="' + enbox + '"][data-a="pu"]');
                                    if (elementExists(estapuerta)) {
                                        if (estapuerta.getAttribute('data-nomid') == '1922') {
                                            window.setTimeout(katman, 600, 'accionarv3', 'animar', estapuerta.getAttribute('data-idp'), 1, 1, 1);
                                        }
                                    }
                                }
                                break;
                            case '':
                            case 'cesped':
                                continuare = 'si';
                                break;
                            case 'pelo':
                                var idpelota = ffursidp[enbox];
                                if (idpelota) {
                                    switch (mresultalargo) {
                                        case 0:
                                            continuare = 'no';
                                            if (tengoidpelota !== idpelota) {
                                                katman('muevewow', 'chuta', idpelota, kya, kxa, mabdanum);
                                            } else if (tengoidpelotaara == idpelota) {
                                                katman('muevewow', 'arrastra', idpelota, kya, kxa, mabdanum);
                                            }
                                            tengoidpelotaara = 0;
                                            ////////consola.log(('chuta pelota leng'+mresultalargo+'idpelota'+idpelota);
                                            break;
                                        case 1:
                                            continuare = 'si';
                                            //if(tengoidpelota!=idpelota){
                                            //tengoidpelota=idpelota;

                                            //if(tengoidpelota==idpelota)
                                            //tengoidpelota=1;
                                            //else
                                            tengoidpelota = idpelota;

                                            katman('muevewow', 'arrastra', idpelota, kya, kxa, mabdanum);
                                            //consola.log('2arrastra pelota leng'+mresultalargo+'idpelota'+idpelota);
                                            //}
                                            break;
                                        default:
                                            continuare = 'si';
                                            tengoidpelota = idpelota;
                                            tengoidpelotaara = idpelota;
                                            katman('muevewow', 'arrastra', idpelota, kya, kxa, mabdanum);
                                            ////////
                                            //consola.log('arrastra pelota leng'+mresultalargo+'idpelota'+idpelota);
                                            break;
                                    }
                                }
                                break;
                            default:
                                continuare = 'no';
                        }


                        if (notraspasar == 1 || mresultalargo == 0) {

                            if (kkallakik.querySelector('[data-box="' + enbox + '"]:not([data-idkek="' + yasoid + '"])')) {
                                akihaykekofin = 1;//OJOAKI
                                ////consola.log('MOVIGOOOO akihaykekofin');
                            }
                        }

                        //if(sorechek == 'sipateo'){
                        //continuare = 'novoy';
                        //}
                        //else
                        
                        if (sorechek == 'patear' && yosocas == 1541) { //bloqueamos patear en evento estampida
                            return false;
                        }

                        if (akihaykekofin == 1 || sorechek == 'mebesar') {
                            switch (sorechek) {
                                case 'sibesar':
                                case 'sipateo':
                                case 'si':
                                case 'cmia':
                                    var nadaaaaa = 'nada';
                                    break;
                                case 'patear':
                                case 'besar':
                                case 'pasar':
                                case 'mebesar':
                                    
                                    //nolang
                                    continuare = 'noyparo';
                                    if (sorechek == 'besar' || sorechek == 'mebesar' || sorechek == 'pasar') {
                                        var aestekekolahag;
                                        if (kkallakik.querySelector('[data-box="' + enbox + '"]:not([data-idkek="' + yasoid + '"])')) {
                                            aestekekolahag = kkallakik.querySelector('[data-box="' + enbox + '"]:not([data-idkek="' + yasoid + '"])');
                                            idkekointeractuo = aestekekolahag.getAttribute('data-idkek');
                                            if (aestekekolahag.className.replace('besar', '') != aestekekolahag.className) {

                                                hagostaaccion = 's';
                                                continuare = 'no';

                                            }
                                        }
                                    }

                                    switch (sorechek) {
                                        case 'besar':
                                            //////consola.log('le mando a que me bese')
                                            if (hagostaaccion == 's') {
                                                sorechek = 'mebesar';

                                                katman('comandos', 'mebesar', idkekointeractuo);
                                                //////consola.log('mando comando mebesar a '+idkekointeractuo);
                                                hagostaaccion = 'n';
                                                continuare = 'noyparo';
                                            }
                                            break;
                                        case 'pasar':
                                            ////consola.log('patiarc  idk'+idkekointeractuo);
                                            if (idkekointeractuo > 0 && miart != '') {
                                                katman('patiarc', miart, idkekointeractuo);
                                                miart = '';
                                                maccion = '';
                                                if (bebetimeout) {
                                                    ////////consola.log('borro bebetimeout');
                                                    window.clearTimeout(bebetimeout);
                                                }
                                            }
                                            hagostaaccion = 'n';
                                            continuare = 'novoy';
                                            //patiarc(elk,para,de);
                                            break
                                        case 'patear':
                                        case 'mebesar':
                                            hagostaaccion = 's';
                                            continuare = 'no';
                                            break;
                                    }

                                    ////////consola.log('hagostaaccion: '+hagostaaccion+'sorechek: '+sorechek+'   continuare: '+continuare);

                                    if (hagostaaccion == 's') {
                                        var texpamass = '** Patear **';
                                        if (sorechek == 'besar' || sorechek == 'mebesar') texpamass = '** Muack **';
                                        //if(accion == 'patear' || accion == 'besar' && stamas.className.replace(' besar','') != stamas.className){
                                        direcpam(texpamass);

                                        parlo(sorechek, 2000);

                                        //if(sorechek == 'patear'){
                                        //bowb='si';
                                        //window.setTimeout(quitobowb, 1500);
                                        //}
                                        //sorechek='n';

                                        //////consola.log(sorechek+' de '+ky+'c'+kx+'  a  '+kya+'c'+kxa+ ' continuare '+continuare+' hagostaaccion'+hagostaaccion);
                                        var trmpaoazante = trompaoz(ky, kx, 't');
                                        //mposixz = trompaoz(ky,kx,'t');
                                        var trmpa = trmpaoazante.eleft;
                                        var trmpo = trmpaoazante.etop;
                                        var trmpz = trmpaoazante.ezindex;
                                        var trmpa_a = mposixz.eleft;
                                        var trmpo_a = mposixz.etop;
                                        var trmpz_a = mposixz.ezindex;
                                        var mabdan = fas(ky, kx, kya, kxa);
                                        var dividotromp1 = 1.25;
                                        var dividotromp2 = 1.5;
                                        if (sorechek == 'besar' || sorechek == 'mebesar') {
                                            dividotromp1 = 2.75;
                                            dividotromp2 = 4;
                                        }
                                        if (trmpa != trmpa_a) {
                                            var trmpa_d = trmpa - trmpa_a;
                                            //es recto arriba abajo o lados
                                            if (mabdan == 6 || mabdan == 9 || mabdan == 7 || mabdan == 8)
                                                trmpa_d = trmpa_d / dividotromp1;
                                            else
                                                trmpa_d = trmpa_d / dividotromp2;
                                            trmpa_d = parseInt(trmpa_d);
                                            trmpa -= trmpa_d;
                                        }
                                        if (trmpo != trmpo_a) {
                                            var trmpo_d = trmpo - trmpo_a;
                                            //es recto arriba abajo o lados
                                            if (mabdan == 6 || mabdan == 9 || mabdan == 7 || mabdan == 8)
                                                trmpo_d = trmpo_d / dividotromp1;
                                            else
                                                trmpo_d = trmpo_d / dividotromp2;

                                            trmpo_d = parseInt(trmpo_d);
                                            trmpo -= trmpo_d;
                                        }
                                        //////consola.log('de trmpo_a'+trmpo_a+' a '+trmpo);
                                        //////consola.log('de trmpa_a'+trmpa_a+' a '+trmpa);
                                        mposixz.etop = trmpo;
                                        mposixz.eleft = trmpa;

                                        if (sorechek != 'besar' && sorechek != 'mebesar') {
                                            //////consola.log('mabdan'+mabdan);
                                            if (mabdan == 2 || mabdan == 6 || mabdan == 7 || mabdan == 1)
                                                mposixz.ezindex = (trmpz_a - 1);
                                            else
                                                mposixz.ezindex = (trmpz_a + 1);
                                        } else {
                                            mposixz.ezindex = trmpz;
                                        }
                                    }
                                    //////consola.log('mabdan',mabdan);
                                    break;
                                default:
                                    continuare = 'novoy';
                            }

                        }
                        if (pondrefurkaespecial != '' && !sifurka && sorechek != 'kmove' || pondrefurkaespecial != '' && sifurka == 'stop' && sorechek != 'kmove') {
                            mabdanum = 1; continuare = 'no';

                            if (isNaN(pondrefurkaespecial)) {
                                harefok = 'standL' + mabdanum + 'L' + pondrefurkaespecial + 'L' + maccion + 'L' + miart;
                                sorechek = 'si';
                                mposixz.etop += 15;
                            } else {
                                harefok = 'standL' + pondrefurkaespecial + 'LL' + maccion + 'L' + miart;
                                sorechek = 'si';
                                if (sifurka != 'stop')
                                    mposixz.etop += 15;
                            }
                            mabdanum = 0;
                            //////consola.log('furka especial');
                        } else {
                            pondrefurkaespecial = '';
                        }


                        if (sorechek == 'cmia' && sifurka == 'stop' || continuare == 'si' || continuare == 'no') {
                            //if(ffursencmaltur[enbox]){
                            alturacuadro = ffursencmaltur[enbox];
                            if (alturacuadro > 0) {
                                mposixz.etop -= alturacuadro;
                                if (yasumetrz == 'n' && alturacuadro > 3) {
                                    mposixz.ezindex += 1;
                                }
                            }
                            //if(sumetrz=='n'&&ffursencmaltur[enbox]>=1){
                            //sumetrz='s';mposixz.ezindex++;mposixz.ezindex++;
                            //}
                            //}
                            var soobreidp = 0;//ffursidp[enbox];
                            if (!soobreidp) soobreidp = 0;
                            var soobreidpf = 'f' + soobreidp;

                            ////////consola.log(('soobreidp'+soobreidp);
                            //if(soobreidp>0){
                            //if(ffurscass[soobreidpf] != enbox){
                            //mposixz.ezindex-=3;
                            //}
                            //if(sumetrz=='n'&&ffursidpc[soobreidpf]){//es masgrande de 1cuadro
                            //mposixz.ezindex++;
                            //}
                            //
                            //}

                            //if(harecontrolmia=='si'||harecontrolmia=='kmove')sorechek=harecontrolmia;
                            //////consola.log(('hagostopnew'+kya+'c'+kxa);
                            if (sorechek == 'kmove') {

                                //harefok='standL0LLL';
                                //////consola.log(('mabdanum'+mabdanum);
                                if (pondrefurka) {// && pondrefurka !='moveda' && pondrefurka !='movedb' && pondrefurka !='moveia' && pondrefurka !='moveib'
                                    harefok = 'standL1L' + pondrefurka; if (mabdanum == 0) mabdanum = 1;
                                } else {
                                    if (mabdanum == 0) mabdanum = 8;
                                    harefok = 'standL' + mabdanum + 'L' + mbailo;
                                }
                                harefok += 'L' + maccion + 'L' + miart;
                                despuesfur = 'stand';

                                //ponfurka;
                            }
                            // || sorechek == 'cmia'
                            if (mabdanum > 0 || pondrefurkaespecial != '' || fotogramavalidoparacmiadirecto == 's') {
                                fok = harefok;
                            } else {
                                ////consola.log('fok'+fok);
                                harefok = fok;
                            }
                            //if(mabdanum>0)

                            ////


                            //sorechek='kmove';//OJOAKI
                            //
                            //,despuesfur,soobreidp,sorechek+
                            //////consola.log('hagostopnew a'+kya+'c'+kxa+'   mabdanum '+mabdanum+'sorechek '+sorechek);
                            var sorechekenvio = sorechek;
                            if (fotogramavalidoparacmiadirecto == 's') {
                                sorechekenvio = 'si';
                            }
                            if (sorechek == 'bomb') {
                                mposixz.etop -= 1000;
                            }
                            var kyae = kya;
                            var kxae = kxa;
                            //if(sorechek == 'patear'){
                            //kyae=ky;
                            //kxae=kx;
                            //}
                            if (mabdanumreal > 0) {
                                ultmabdanum = mabdanumreal;
                            }

                            katman('hagostopnew', { ezindex: mposixz.ezindex, harefok: harefok, eleft: mposixz.eleft, etop: mposixz.etop, kya: kyae, kxa: kxae, mabdanum: mabdanum, despuesfur: despuesfur, soobreidp: soobreidp, sorechekenvio: sorechekenvio });

                            if (continuare == 'no') {
                                mresulta = []; mresultalargo = 0;;
                            }
                        } else if (continuare == 'novoy') {
                            mresulta = []; mresultalargo = 0;;
                            ////consola.log('NOOOVOY PONGO A '+ky+'c'+kx+' deee '+kya+'c'+kxa);
                            if (sorechek !== 'disparar') {
                                kya = ky;
                                kxa = kx;
                            }
                        }
                        //
                        //if(mabdanum==0){
                        //mresulta=[];
                        //}
                        //

                        if (mresultalargo == 0 && continuare != 'noyparo' && pondrefurkaespecial == '' && fotogramavalidoparacmiadirecto == 'n') {
                            //var tiempo=350;
                            var tiempo = 400;
                            var ultmabdanumman = ultmabdanum;
                            if (mabdanumreal > 0) {
                                ultmabdanum = mabdanumreal;
                                ultmabdanumman = mabdanumreal;
                            }
                            //if(mabdanum==0||continuare=='novoy')tiempo=10;
                            //////
                            if (sorechek == 'mebesar') tiempo = 2000;
                            //
                            //////consola.log('mando sisigo tiempo'+tiempo);
                            //ultnumt=numt;//ojoakinumt
                            //////consola.log('sisigoultimo',tiempo,numt,ultmabdanum,ky,kx,kya,kxa,harefok,sorechek,'');
                            if (sorechek == 'cmia') {
                                tiempo = 50;
                                //////consola.log('controlmia');
                            }
                            if (sisigotimeout) {
                                window.clearTimeout(sisigotimeout);
                            }

                            //////consola.log('sisigoultimo tiempo',tiempo,' recheck ',sorechek,' de',ky,'c',kx,' a'+kya+'c'+kxa);
                            //if(sorechek == 'patear'){
                            //kyae=ky;
                            //kxae=kx;
                            //}
                            sisigotimeout = window.setTimeout(sisigoultimo, tiempo, numt, ultmabdanumman, ky, kx, kya, kxa, harefok, sorechek);

                            //sisigoultimo(numt,mabdanum,ky,kx,kya,kxa,harefok,sorechek,'');
                        }
                        if (continuare == 'si' || continuare == 'no') {
                            ky = kya;
                            kx = kxa;
                        }

                        //////consola.log('movigoyahora:'+ky+'c'+kx);
                    }
                }
            },
            bombya = function () {
                bowb = 'si';
                //bomb
                var encontrsitio = 'n';
                var buscoy = 0;
                var buscox = 0;
                var maxy = parseInt(ployy);
                var maxx = parseInt(ploxx);
                var cuals = '';

                if (sisigotimeout) {
                    window.clearTimeout(sisigotimeout);//sisigotimeout='';
                }
                if (movigoyainter)
                    window.clearInterval(movigoyainter);
                mresulta = [];
                mresulta[0] = { ponfurka: '', cmia: 'bomb', y: kx, x: ky };
                movigoyas();
                movigoyainter = window.setInterval(movigoyas, 360);

                do {
                    buscoy = addvaaa(1, maxy);
                    buscox = addvaaa(1, maxx);
                    cuals = buscoy + 'c' + buscox;
                    //console.lag('cuals'+cuals);
                    var akibomf = ffurs[cuals];
                    if (!kkallakik.querySelector('[data-box="' + cuals + '"]') && ffurs[cuals] != 'stop') {
                        encontrsitio = 's';
                    } else {
                        if (buscoy < 32) {
                            buscoy++;
                        } else {
                            buscoy = 22;
                            buscox--;
                        }
                    }
                } while (encontrsitio == 'n');
                ky = buscoy;
                kx = buscox;

                ///
                harecontrolmia = 'si';
                //ultnumt+=addvaaa(2,100);
                //numt-=10;
                //ultnumt=numt;
                mresulta = [];
                ////consola.log(('controlmia'+ky+'c'+kx);

                window.setTimeout(controlmia, 1000);

                window.setTimeout(quitobowb, 1500);
            },
            sisigoultimo = function (esnumt, esmabda, eraky, erakx, soykyyap, soykxxap, erafok, reche) {
                var soykmove = 'n';
                //if(sisigotimeout){
                //sisigotimeout=setTimeout(posiciono,1000);
                //}

                ////consola.log('sisigoultimo reche'+reche+' esmabda'+esmabda+' ultnumt'+ultnumt+'='+esnumt+' soykyyap'+soykyyap+'c'+soykxxap+' eraky'+eraky+'c'+erakx);

                if (ultnumt != esnumt || reche == 'si' || reche == 'cmia' || reche == 'sibesar' || reche == 'sipateo' || reche == 'kmove') {//reche == 'patear' ||
                    ////
                    //
                    //
                    ////consola.log('YAAA sisigoultimo reche'+reche+' esmabda'+esmabda+' ultnumt'+ultnumt+'='+esnumt+' soykyyap'+soykyyap+'c'+soykxxap+' eraky'+eraky+'c'+erakx);


                    if (modocity == 'si') {
                        var essoykyyap = soykyyap;
                        var essoykxxap = soykxxap;
                        var essy = sy;
                        var cambiosector = 'no';
                        var essx = sx;
                        if (essoykyyap == (ployy * essy) && essy > 1) {
                            sy--;
                            soykyyap -= ployy;
                            cambiosector = 'si';
                            //console.log('resto sectory',sy);
                        }

                        if (essoykxxap == (ploxx * essx) && essx > 1) {
                            sx--;
                            soykxxap -= ploxx;
                            cambiosector = 'si';
                            //console.log('resto sectorx',sx);
                        }

                        if (essoykyyap == (ployy * (essy + 1))) {
                            sy++;
                            soykxxap += ployy;
                            cambiosector = 'si';
                            //console.log('sumo sectory',sy);
                        }
                        if (essoykxxap == (ploxx * (essx + 1)) && essx < 24) {
                            sx++;
                            soykxxap += ploxx;
                            cambiosector = 'si';
                            //console.log('sumo sectorx',sx);
                        }
                        if (cambiosector == 'si') {

                            cargosectores();
                            if (movigoeve) {
                                var movigoevess = movigoeve;
                                movigoeve = '';
                                movigo(movigoevess, 0);
                                //console.log('despues voy a otro');
                            }
                            //posiciono();
                        }
                    }

                    ultnumt = esnumt;
                    var akihaykekofin = 0;//OJOAKI normal 0
                    if (reche == 'n') {
                        if (kkallakik.querySelector('[data-box="' + soykyyap + 'c' + soykxxap + '"]:not([data-idkek="' + yasoid + '"])')) {
                            akihaykekofin = 1;
                            ////consola.log('akihaykekofin');
                        }
                    }

                    var enbox = soykyyap + 'c' + soykxxap;
                    var sifurka = '';
                    if (ffurs[enbox]) sifurka = ffurs[enbox];

                    if (enbox == mesaespecial) {
                        sifurka = '';
                        mesaespecial = '';
                    }

                    if (modocity == 'no' && soykyyap == enboxyinicial && soykxxap == enboxxinicial && reche == 'n') {
                        //if(enbox=='0c2' && reche == 'n'){
                        katman('kickeame');
                    }
                    else if (sifurka != 'stop' && reche != 'patear' && reche != 'mebesar' && akihaykekofin == 0 || reche == 'si' || reche == 'cmia' || reche == 'sipateo' || reche == 'sibesar') {
                        var sifoka = '';
                        switch (sifurka) {
                            case 'nadb'://jacuzzi largo/
                                if (ffursidp[enbox] && ffurscass['f' + ffursidp[enbox]] != enbox)
                                    sifurka = 'sentado_sw';
                                else sifurka = 'sentado_ne';
                                sifoka = 'standL1L' + sifurka;
                                esmabda = 1;
                                mbailo = '';
                                break;
                            case 'bomb':
                                bombya();
                                break;
                            case 'nadc'://jacuzzi horizontal \
                                if (ffursidp[enbox] && ffurscass['f' + ffursidp[enbox]] != enbox)
                                    sifurka = 'sentado_se'; else sifurka = 'sentado_nw';
                                sifoka = 'standL1L' + sifurka;
                                esmabda = 1;
                                mbailo = '';
                                break;
                            case 'movedb':
                            case 'moveda':
                            case 'moveia':
                            case 'moveib':
                                //if(reche=='n')
                                konmove(soykyyap, soykxxap, esnumt, reche);
                                soykmove = 's';
                                mbailo = '';
                                break;
                            case 'sentado_ne':
                            case 'sentado_nw':
                            case 'sentado_se':
                            case 'sentado_sw':
                            case 'estirado_ne':
                            case 'estirado_nw':
                            case 'estirado_se':
                            case 'estirado_sw':
                                sifoka = 'standL1L' + sifurka; esmabda = 1;
                                mbailo = '';

                                break;
                            case 'nada':
                                if (esmabda == 0)
                                    esmabda = ultmabdanum;
                                else
                                    ultmabdanum = esmabda;
                                sifoka = 'standL' + esmabda + 'Lnada';
                                mbailo = '';
                                maccion = '';
                                miart = '';
                                if (bebetimeout) {
                                    window.clearTimeout(bebetimeout);
                                }

                                break;
                            case 'teleportse':
                                if (ffursidp[enbox] && reche != 'si') {
                                    bowb = 'si';
                                    //consola.log('TELEPORTSE desde '+enbox+' reche'+reche+' AKIHAYIDP'+ffursidp[enbox]);
                                    katman('teleportse', ffursidp[enbox]);
                                }
                                if (esmabda == 0) esmabda = 8;
                                sifoka = 'standL' + esmabda + 'L' + mbailo;
                                break;
                            default:
                                switch (reche) {
                                    case 'sipateo':
                                    case 'sibesar':
                                        esmabda = fas(eraky, erakx, soykyyap, soykxxap);
                                        break;
                                }


                                if (reche == 'disparar') {
                                    //////console.log('disparo box',eraky,erakx,'soy',soykyyap,soykxxap);
                                    var akienpateoidkek = 0;
                                    if (kkallakik.querySelector('[data-box="' + enbox + '"]:not([data-idkek="' + yasoid + '"])')) {
                                        akienpateoidkek = kkallakik.querySelector('[data-box="' + enbox + '"]:not([data-idkek="' + yasoid + '"])').getAttribute('data-idkek');
                                        //////console.log('disparo a',akienpateoidkek);

                                        switch (miart) {
                                            case 'pistola':
                                            case 'pistolaazul':
                                                katman('comandos', 'medisparar', akienpateoidkek);
                                                break;
                                            case 'thompson':
                                                katman('comandos', 'methompson', akienpateoidkek);
                                                break;
                                        }
                                    }
                                }

                                //////consola.log('esmabda',esmabda);
                                if (esmabda == 0) esmabda = 8;
                                sifoka = 'standL' + esmabda + 'L' + mbailo;
                            //sifoka='standL'+esmabda+'L'+maccion;
                        }
                        if (soykmove == 'n' && sifoka != '' && esmabda > 0) {// && esmabda >0
                            sifoka += 'L' + maccion + 'L' + miart;
                            //sifoka+='L'+miart+'L';
                            fok = sifoka;
                            //
                            //
                            ////////consola.log('golabelnew'+sifoka);
                            //posiciono();
                            katman('golabelnew', sifoka, '', 0);
                        }
                    }
                    else {
                        mresulta = [];
                        ////consola.log('BORRO MRESULTA');
                        if (reche == 'mebesar') {
                            //var akienpateoidkek=0;
                            //if(kkallakik.querySelector('[data-box="'+enbox+'"]:not([data-idkek="'+yasoid+'"])')){
                            //akienpateoidkek= kkallakik.querySelector('[data-box="'+enbox+'"]:not([data-idkek="'+yasoid+'"])').getAttribute('data-idkek');
                            //////consola.log('pateo a'+akienpateoidkek);
                            //katman('comandos','mepatearon',akienpateoidkek);
                            //}
                            //////consola.log('vuelvo sibesar  '+eraky+'c'+erakx);
                            mresulta[0] = { 'cmia': 'sibesar', 'y': erakx, 'x': eraky };
                            if (sisigotimeout) {
                                window.clearTimeout(sisigotimeout);//sisigotimeout='';
                            }
                        } else if (reche == 'patear') {
                            var akienpateoidkek = 0;
                            if (kkallakik.querySelector('[data-box="' + enbox + '"]:not([data-idkek="' + yasoid + '"])')) {
                                akienpateoidkek = kkallakik.querySelector('[data-box="' + enbox + '"]:not([data-idkek="' + yasoid + '"])').getAttribute('data-idkek');
                                //////consola.log('pateo a'+akienpateoidkek);
                                switch (reche) {
                                    case 'patear':
                                        katman('comandos', 'mepatearon', akienpateoidkek);

                                        mresulta[0] = { 'cmia': 'sipateo', 'y': erakx, 'x': eraky };
                                        if (sisigotimeout) {
                                            window.clearTimeout(sisigotimeout);//sisigotimeout='';
                                        }
                                        break;
                                }
                            }
                            //////console.log('me patearon');
                        } else if (reche != 'si' && reche != 'cmia' && bowb == 'no') {
                            //////consola.log('vuelvo atras '+eraky+'c'+erakx);
                            if (sisigotimeout) {
                                window.clearTimeout(sisigotimeout);//sisigotimeout='';
                            }
                            mresulta[0] = { 'cmia': 'si', 'y': erakx, 'x': eraky };
                            ////consola.log('vuelvo atras');
                        }
                    }
                }
            },
            damebebida = function (idpbeber) {
                var yaesmaquina = kkallaki.querySelector('[data-idp="' + idpbeber + '"][data-furn="si"]');

                var ranns = 1;
                if (yaesmaquina) {
                    var idf = yaesmaquina.getAttribute('data-idf');
                    idf = parseInt(idf);
                    if (idf == 4010597 || idf == 4010596) {
                        ranns = 5;//vino
                    }
                    else if (idf == 4010455 || idf == 4010454) {
                        ranns = 9;//chocolate
                    } else if (idf >= 400288 && idf <= 400291 || idf == 4016382 || idf == 4016381 || idf == 4016380 || idf == 4016379) {
                        ranns = 8;//helado
                    } else if (idf >= 5519 && idf <= 5522) {
                        ranns = 5;//cafetera
                    } else if (idf >= 5150 && idf <= 5153) {//pizza
                        ranns = 2;
                    } else if (idf == 5016 || idf == 5479 || idf == 5480 || idf == 5481 || idf == 5478) {
                        ranns = 5;//maquina de agua
                    } else if (idf == 6313 || idf == 6310 || idf == 6311 || idf == 6312) {
                        ranns = 6;//maquina de palomitas
                    } else {
                        ranns = addvaaa(1, 7);
                    }
                }
                return ranns;
            },
            beber = function (kvez) {
                if (miart != '' && !isNaN(miart) && miart > 0) {
                    kvez++;
                    var cuantotiempabe = 8000;
                    var valido = 'n';
                    if (maccion == 'bebe') {
                        maccion = 'inger'; valido = 's';
                        cuantotiempabe = 3000;
                    } else if (maccion == 'inger') {
                        maccion = 'bebe'; valido = 's';
                    }
                    if (bebetimeout) {
                        window.clearTimeout(bebetimeout);
                    }

                    if (kvez > 10) {
                        maccion = ''; valido = 'n';
                        miart = '';
                    } else {


                        bebetimeout = window.setTimeout(beber, cuantotiempabe, kvez);
                    }
                    if (valido == 's' && ultnumt == numt) {
                        if (maccion == 'inger') {
                            fok = fok.replace('bebe', 'inger');
                        } else if (maccion == 'bebe') {
                            fok = fok.replace('inger', 'bebe');
                        }
                        katman('golabelnew', fok, '', 0);
                        //controlmia();
                    } else {
                        controlmia();
                    }
                }
            },
            konmove = function (yysoykyyap, xxsoykxxap, nsoynumtk, nreche) {

                //////consola.log('konmove '+nreche+ ' '+yysoykyyap+'c'+xxsoykxxap);
                var kmovalido = 'n';
                var estoyeny = yysoykyyap;
                var estoyenx = xxsoykxxap;
                if (ultnumt == nsoynumtk && ky == yysoykyyap && kx == xxsoykxxap) {
                    //var akihaykekofin = kkallakik.querySelectorAll('[data-box="'+yysoykyyap+'c'+xxsoykxxap+'"]').length;
                    //if(akihaykekofin==0){
                    var enbox = yysoykyyap + 'c' + xxsoykxxap;
                    var sifurka = '';
                    var ahorafuuu = '';

                    if (ffurs[enbox]) sifurka = ffurs[enbox];
                    var sifoka = '';
                    switch (sifurka) {
                        case 'movedb':
                            kmovalido = 's';
                            yysoykyyap++;
                            sifoka = 'standL4L'; sifurka = 'sentado_nw';
                            if (ffurs[yysoykyyap + 'c' + xxsoykxxap])
                                ahorafuuu = ffurs[yysoykyyap + 'c' + xxsoykxxap];
                            if (yysoykyyap > 0 && xxsoykxxap >= 0 && yysoykyyap <= ployy && xxsoykxxap <= ploxx && bowb == 'no' && ahorafuuu != 'stop' && ahorafuuu != 'nmos' && !kkallakik.querySelector('[data-box="' + yysoykyyap + 'c' + xxsoykxxap + '"]')) {
                                //harecontrolmia='si';
                                mresulta = [];
                                harecontrolmia = 'kmove';
                                //ultmabdanum=4;
                                //fok=sifoka;
                                mresulta[0] = { 'cmia': harecontrolmia, 'y': xxsoykxxap, 'x': yysoykyyap, 'ponfurka': 'sentado_nw' };

                                if (sisigotimeout) {
                                    window.clearTimeout(sisigotimeout);//sisigotimeout='';
                                }
                                harecontrolmia = 'no';
                                ////////consola.log(('movedb de'+enbox+' a '+yysoykyyap+'c'+xxsoykxxap);
                            } else {
                                yysoykyyap = estoyeny;
                                xxsoykxxap = estoyenx;
                            }
                            break;
                        case 'moveda':
                            kmovalido = 's';
                            sifoka = 'standL1L';
                            //
                            sifurka = 'sentado_sw';
                            xxsoykxxap++;
                            if (ffurs[yysoykyyap + 'c' + xxsoykxxap])
                                ahorafuuu = ffurs[yysoykyyap + 'c' + xxsoykxxap];
                            if (yysoykyyap > 0 && xxsoykxxap >= 0 && yysoykyyap <= ployy && xxsoykxxap <= ploxx && bowb == 'no' && ahorafuuu != 'stop' && ahorafuuu != 'nmos' && !kkallakik.querySelector('[data-box="' + yysoykyyap + 'c' + xxsoykxxap + '"]')) {
                                mresulta = [];
                                //harecontrolmia='si';
                                harecontrolmia = 'kmove';
                                //ultmabdanum=1;
                                //fok=sifoka;
                                mresulta[0] = { 'cmia': harecontrolmia, 'y': xxsoykxxap, 'x': yysoykyyap, 'ponfurka': 'sentado_sw' };
                                //movigoya();
                                if (sisigotimeout) {
                                    window.clearTimeout(sisigotimeout);//sisigotimeout='';
                                }
                                harecontrolmia = 'no';
                                ////////consola.log(('moveda de'+enbox+' a '+yysoykyyap+'c'+xxsoykxxap);
                            } else {
                                yysoykyyap = estoyeny;
                                xxsoykxxap = estoyenx;
                                //if(nreche=='n'){
                                //mresulta=[];
                                //mresulta[0]= {'cmia':'si','y':xxsoykxxap,'x':yysoykyyap,'ponfurka':'sentado_sw'};
                                //////////////consola.log('hago controlmia');
                                //kmovalido='noes';
                                //}
                            }
                            break;
                        case 'moveia':
                            kmovalido = 's';
                            sifoka = 'standL2L';
                            sifurka = 'sentado_se';
                            yysoykyyap--;
                            if (ffurs[yysoykyyap + 'c' + xxsoykxxap])
                                ahorafuuu = ffurs[yysoykyyap + 'c' + xxsoykxxap];
                            if (yysoykyyap > 0 && xxsoykxxap >= 0 && yysoykyyap <= ployy && xxsoykxxap <= ploxx && bowb == 'no' && ahorafuuu != 'stop' && ahorafuuu != 'nmos' && !kkallakik.querySelector('[data-box="' + yysoykyyap + 'c' + xxsoykxxap + '"]')) {
                                mresulta = [];
                                //harecontrolmia='si';
                                harecontrolmia = 'kmove';
                                //ultmabdanum=2;
                                //fok=sifoka;
                                mresulta[0] = { 'cmia': harecontrolmia, 'y': xxsoykxxap, 'x': yysoykyyap, 'ponfurka': 'sentado_se' };
                                //movigoya();
                                if (sisigotimeout) {
                                    window.clearTimeout(sisigotimeout);//sisigotimeout='';
                                }
                                harecontrolmia = 'no';
                                ////////consola.log(('moveia de'+enbox+' a '+yysoykyyap+'c'+xxsoykxxap);
                            } else {
                                yysoykyyap = estoyeny;
                                xxsoykxxap = estoyenx;
                            }
                            break;
                        case 'moveib':
                            kmovalido = 's';
                            sifoka = 'standL5L';//
                            sifurka = 'sentado_ne';
                            xxsoykxxap--;
                            if (ffurs[yysoykyyap + 'c' + xxsoykxxap])
                                ahorafuuu = ffurs[yysoykyyap + 'c' + xxsoykxxap];
                            if (yysoykyyap > 0 && xxsoykxxap >= 0 && yysoykyyap <= ployy && xxsoykxxap <= ploxx && bowb == 'no' && ahorafuuu != 'stop' && ahorafuuu != 'nmos' && !kkallakik.querySelector('[data-box="' + yysoykyyap + 'c' + xxsoykxxap + '"]')) {
                                //harecontrolmia='si';
                                harecontrolmia = 'kmove';
                                //ultmabdanum=5;
                                mresulta = [];
                                //fok=sifoka;
                                mresulta[0] = { 'cmia': harecontrolmia, 'y': xxsoykxxap, 'x': yysoykyyap, 'ponfurka': 'sentado_ne' };
                                //movigoya();
                                if (sisigotimeout) {
                                    window.clearTimeout(sisigotimeout);//sisigotimeout='';
                                }
                                harecontrolmia = 'no';
                                //////consola.log(('moveib de'+enbox+' a '+yysoykyyap+'c'+xxsoykxxap);
                            } else {
                                yysoykyyap = estoyeny;
                                xxsoykxxap = estoyenx;
                                //if(nreche=='n'){}
                            }
                            break;
                        default:
                            //harecontrolmia='si';
                            //controlmia();
                            kmovalido = 'noes';
                        //////consola.log(('controlmia');
                        //
                    }
                    //}

                }
                ////////consola.log(('konmove ultnumt'+ultnumt+'='+nsoynumtk);//OJOAKI

                if (ultnumt == nsoynumtk && nsoynumtk == numt && sifurka) {
                    //
                    ////////consola.log('konmove kmovalido='+kmovalido+'='+ahorafuuu+'='+sifurka+'='+nreche+'='+yysoykyyap+'c'+xxsoykxxap+'='+estoyeny+'c'+estoyenx);
                    if (kmovalido != 'noes') {

                        if (ahorafuuu == 'stop' || ahorafuuu == 'cana' || ahorafuuu == 'nmos' || nreche == 'n') {
                            //yysoykyyap=estoyeny;
                            //xxsoykxxap=estoyenx;

                            var sifokas = 'standL1L' + sifurka;
                            sifokas += 'L' + maccion + 'L' + miart;
                            if (sifokas != fok && sifurka) {
                                fok = sifokas;
                                //////
                                //
                                ////////consola.log('kmove golabelnew'+sifokas);
                                katman('golabelnew', sifokas, '', 0);
                            }
                        }
                        if (yysoykyyap == estoyeny && xxsoykxxap == estoyenx && nreche == 'kmove' || yysoykyyap == estoyeny && xxsoykxxap == estoyenx && nreche == 'n') {
                            //if(nreche == 'kmove')
                            nreche = 'kmove';//
                            //¬°

                            window.setTimeout(konmove, 500, yysoykyyap, xxsoykxxap, nsoynumtk, nreche);
                            //window.setTimeout(konmove,2000,yysoykyyap,xxsoykxxap,nsoynumtk,nreche);
                        } else {
                            if (ffursidp[estoyeny + 'c' + estoyenx]) {
                                //////consola.log('fur'+ffurs[yysoykyyap+'c'+xxsoykxxap]);
                                if (ffurs[estoyeny + 'c' + estoyenx]) {
                                    switch (ffurs[estoyeny + 'c' + estoyenx]) {
                                        case 'movedb':
                                        case 'moveda':
                                        case 'moveia':
                                        case 'moveib':
                                            //////consola.log('animasolo '+estoyeny+'c'+estoyenx);
                                            katman('animasolo', ffursidp[estoyeny + 'c' + estoyenx]);
                                            break;
                                    }
                                }
                            }


                        }
                    }//else{
                    //////////consola.log('novalido');
                    //}
                }
            },
            muevekatrix = function (ladi, quemabda, tra, tro, trz) {

                var enqueveztrz = 10;
                //////////////consola.log('quemabda'+quemabda);
                switch (quemabda) {
                    case 1:
                    case 2:
                        enqueveztrz = 34;
                        break;
                    case 7:
                        enqueveztrz = 20;
                        break;
                }
                var haycambiosmov = 'no';
                var estaentop = ladi.style.top.replace('px', '');
                var estaenleft = ladi.style.left.replace('px', '');

                //var cntrlmm = tra+tro+trz;
                //ladi.setAttribute('data-contrlmv',cntrlmm);
                estaentop = parseInt(estaentop);
                estaenleft = parseInt(estaenleft);
                var cuantofaltatoptot = estaentop - tro;
                var cuantofaltalefttot = estaenleft - tra;
                var cuantofaltazindex = trz;

                var cuantofaltatop = 0;
                var cuantofaltaleft = 0;
                if (cuantofaltatoptot != 0)
                    cuantofaltatop = cuantofaltatoptot / 18;

                if (cuantofaltalefttot != 0)
                    cuantofaltaleft = cuantofaltalefttot / 18;

                ////consola.log('cuantofaltalefttot'+cuantofaltalefttot+' cuantofaltatoptot'+cuantofaltatoptot);

                ////////consola.log(('cuantofaltaleft'+cuantofaltaleft+' cuantofaltatop'+cuantofaltatop);

                ////////consola.log(('quemabda'+quemabda+' enqueveztrz'+enqueveztrz);
                enqueveztrz += '0';
                ////consola.log('enqueveztrz',enqueveztrz);

                window.setTimeout(muevekatrixzindex, enqueveztrz, ladi, trz);


                var lopongoentop = parseInt(estaentop);
                var lopongoenleft = parseInt(estaenleft);
                var lopongoentopin = 0;
                var lopongoenleftin = 0;
                var lopongoentopinult = 0;
                var lopongoenleftpinult = 0;
                var tiempl = 0;
                for (var ti = 1; ti <= 18; ti++) {
                    lopongoentop -= cuantofaltatop;
                    lopongoenleft -= cuantofaltaleft;
                    lopongoentopin = parseInt(lopongoentop);
                    lopongoenleftin = parseInt(lopongoenleft);


                    if (ti == 18) {
                        lopongoentopin = tro;
                        lopongoenleftin = tra;
                    }
                    if (lopongoentopinult != lopongoentopin || lopongoenleftpinult != lopongoenleftin) {

                        window.setTimeout(muevekatrixya, tiempl, ladi, lopongoentopin, lopongoenleftin);
                    }
                    lopongoentopinult = lopongoentopin;
                    lopongoenleftpinult = lopongoenleftin;
                    tiempl += 20;
                }
            },
            muevekatrixzindex = function (ladi, trz) {
                if (ladi) {
                    ladi.style.zIndex = trz;
                }
            },
            muevekatrixya = function (ladi, lopongoentopya, lopongoenleftya) {
                if (ladi) {
                    lopongoentopya += 'px';
                    lopongoenleftya += 'px'
                    ladi.style.top = lopongoentopya;
                    ladi.style.left = lopongoenleftya;
                }
            },
            quitoinfofurni = function (idprivada, checkeocontrolmira, desdelaaccion) {

                if (ffurscass['f' + idprivada]) {
                    var cassantes = ffurscass['f' + idprivada];
                    delete ffurscass['f' + idprivada];
                    var yostoyenbox = ky + 'c' + kx;
                    var cassantese = cassantes.split('c', 2);
                    var yesteTR = parseInt(cassantese[0]);
                    var xesteTR = parseInt(cassantese[1]);
                    var furni_encima_del = 'no';
                    var furnisenestebox;
                    var alturaextraplus = 0;
                    var furnissobreaa = kkallaki.querySelectorAll('[data-so="' + idprivada + '"]');
                    var imagenffurn = kkallaki.querySelector('[data-idp="' + idprivada + '"]');
                    if (imagenffurn) {
                        var iidpcuatro = imagenffurn.getAttribute('data-idpc');
                        var iidptres = imagenffurn.getAttribute('data-idpt');
                        alturaextraplus = imagenffurn.getAttribute("data-alt");
                        var el_mueble_que_quito_estaba_encima_de_idp = imagenffurn.getAttribute('data-so');
                        var furnis_debajo_del_que_quito = '';
                        if (el_mueble_que_quito_estaba_encima_de_idp != '') {
                            furnis_debajo_del_que_quito = kkallaki.querySelectorAll('[data-idp="' + el_mueble_que_quito_estaba_encima_de_idp + '"]');

                        }

                        //consola.log('el_mueble_que_quito_estaba_encima_de_idp'+el_mueble_que_quito_estaba_encima_de_idp);
                        var alturadelamesa = 0;
                        if (iidptres && iidptres.length > 4 && iidptres.substr(0, 4) == 'mesa') {
                            alturadelamesa = iidptres.substr(4, iidptres.length);
                        }
                        if (alturaextraplus != '' && alturaextraplus >= 1) {
                            alturadelamesa = parseInt(alturadelamesa);
                            alturadelamesa += parseInt(alturaextraplus);
                            //////////consola.log(('alturadelamesaconplus'+alturadelamesa);
                        }
                        //consola.log('alturadelamesa'+alturadelamesa);
                        //casilla donde estaba
                        var yybo = yesteTR;
                        var xxbo = xesteTR;
                        var stabox = yybo + "c" + xxbo;
                        if (ffursidp[stabox] == idprivada) {
                            //consola.log('esta en box'+stabox);
                            furni_encima_del = 'no';
                            //furnis encima del que quito
                            for (var i = 0; i < furnissobreaa.length; i++) {

                                if (mirosicabeencasillas(furnissobreaa[i].getAttribute('data-idp'), yybo, xxbo, furnissobreaa[i].getAttribute('data-idpc'))) {
                                    //consola.log('aki pongo ahora el mueble accion'+furnissobreaa[i].getAttribute('data-a'));
                                    ffurs[stabox] = furnissobreaa[i].getAttribute('data-a');
                                    ffursidp[stabox] = furnissobreaa[i].getAttribute('data-idp');
                                    //kgraph.nodes[yybo][xxbo].fur = furnissobreaa[i].getAttribute('data-a');
                                    //kgraph.nodes[yybo][xxbo].quitoCerrado('furni');
                                    furni_encima_del = 'si';
                                    break;
                                }
                            }
                            //furnis debajo del que quito
                            if (el_mueble_que_quito_estaba_encima_de_idp != '' && furni_encima_del == 'no') {
                                for (var i = 0; i < furnis_debajo_del_que_quito.length; i++) {
                                    if (mirosicabeencasillas(furnis_debajo_del_que_quito[i].getAttribute('data-idp'), yybo, xxbo, furnis_debajo_del_que_quito[i].getAttribute('data-idpc'))) {
                                        //consola.log('aki pongo ahora el mueble accion'+furnis_debajo_del_que_quito[i].getAttribute('data-a'));
                                        ffurs[stabox] = furnis_debajo_del_que_quito[i].getAttribute('data-a');
                                        ffursidp[stabox] = furnis_debajo_del_que_quito[i].getAttribute('data-idp');
                                        //kgraph.nodes[yybo][xxbo].fur = furnis_debajo_del_que_quito[i].getAttribute('data-a');
                                        //kgraph.nodes[yybo][xxbo].quitoCerrado(checkeocontrolmira);
                                        furni_encima_del = 'sidebajo';
                                        break;
                                    }
                                }
                            }
                            //busco otro furni en este box
                            if (furni_encima_del == 'no') {
                                furnisenestebox = kkallaki.querySelectorAll('[data-box="' + stabox + '"]');
                                for (var i = 0; i < furnisenestebox.length; i++) {
                                    if (furnisenestebox[i].getAttribute('data-idp') != idprivada) {
                                        //consola.log('aki pongo ahora el mueble accion'+furnisenestebox[i].getAttribute('data-a'));
                                        ffurs[stabox] = furnisenestebox[i].getAttribute('data-a');
                                        ffursidp[stabox] = furnisenestebox[i].getAttribute('data-idp');
                                        //kgraph.nodes[yybo][xxbo].fur = furnisenestebox[i].getAttribute('data-a');
                                        //kgraph.nodes[yybo][xxbo].quitoCerrado(checkeocontrolmira);
                                        furni_encima_del = 'sibox';
                                        break;
                                    }
                                }
                            }
                            if (alturadelamesa > 0) {
                                ffursencmaltur[yybo + 'c' + xxbo] -= alturadelamesa;
                                //////////consola.log((yybo+'c'+xxbo+' quitoalturadelamesa'+alturadelamesa);
                            }
                            if (furni_encima_del == 'no') {
                                //consola.log('quito furni'+stabox);

                                if (ffurs[stabox]) delete ffurs[stabox];
                                if (ffursidp[stabox]) delete ffursidp[stabox];
                                //kgraph.nodes[yybo][xxbo].fur='';
                                ffursencmaltur[yybo + 'c' + xxbo] = 0;
                                //kgraph.nodes[yybo][xxbo].quitoCerrado(checkeocontrolmira);
                            }
                            if (checkeocontrolmira == 'furni' && stabox == yostoyenbox && harecontrolmia == 'no') {
                                harecontrolmia = 'si'; window.setTimeout(controlmia, 10);
                            }

                            //////consola.log(''+yybo+'c'+xxbo+' == '+ffursencmaltur[yybo+'c'+xxbo]);
                        }//else if(alturadelamesa>0){//desdelaaccion =='moverkekomove' &&
                        //ffursencmaltur[yybo+'c'+xxbo]-=alturadelamesa;
                        //////////consola.log((yybo+'c'+xxbo+' quitoalturadelamesa'+alturadelamesa);

                        //}
                        if (iidpcuatro > 0) {
                            var cortiyaidp4 = iidpcuatro.split('.', 2);
                            var eye = parseInt(cortiyaidp4[1]);
                            var exe = parseInt(cortiyaidp4[0]);
                            //consola.log('eye'+eye+'exe'+exe);

                            if (eye >= 1) {
                                for (var ii = 1; ii < eye; ii++) {
                                    yybo = (yesteTR + ii);
                                    xxbo = xesteTR;
                                    stabox = yybo + "c" + xxbo;

                                    if (ffursidp[stabox] == idprivada) {
                                        //consola.log('esta en box'+stabox);
                                        furni_encima_del = 'no';
                                        for (var i = 0; i < furnissobreaa.length; i++) {
                                            if (mirosicabeencasillas(furnissobreaa[i].getAttribute('data-idp'), yybo, xxbo, furnissobreaa[i].getAttribute('data-idpc'))) {
                                                //consola.log('aki pongo ahora el mueble accion'+furnissobreaa[i].getAttribute('data-a'));
                                                ffurs[stabox] = furnissobreaa[i].getAttribute('data-a');
                                                ffursidp[stabox] = furnissobreaa[i].getAttribute('data-idp');
                                                //kgraph.nodes[yybo][xxbo].fur = furnissobreaa[i].getAttribute('data-a');
                                                //kgraph.nodes[yybo][xxbo].quitoCerrado(checkeocontrolmira);
                                                furni_encima_del = 'si';
                                                break;
                                            }
                                        }

                                        //furnis debajo del que quito
                                        if (el_mueble_que_quito_estaba_encima_de_idp != '' && furni_encima_del == 'no') {
                                            for (var i = 0; i < furnis_debajo_del_que_quito.length; i++) {
                                                if (mirosicabeencasillas(furnis_debajo_del_que_quito[i].getAttribute('data-idp'), yybo, xxbo, furnis_debajo_del_que_quito[i].getAttribute('data-idpc'))) {
                                                    //consola.log('aki pongo ahora el mueble accion'+furnis_debajo_del_que_quito[i].getAttribute('data-a'));
                                                    ffurs[stabox] = furnis_debajo_del_que_quito[i].getAttribute('data-a');
                                                    ffursidp[stabox] = furnis_debajo_del_que_quito[i].getAttribute('data-idp');
                                                    //kgraph.nodes[yybo][xxbo].fur = furnis_debajo_del_que_quito[i].getAttribute('data-a');
                                                    //kgraph.nodes[yybo][xxbo].quitoCerrado(checkeocontrolmira);
                                                    furni_encima_del = 'sidebajo';
                                                    break;
                                                }
                                            }
                                        }
                                        //busco otro furni en este box
                                        if (furni_encima_del == 'no') {
                                            furnisenestebox = kkallaki.querySelectorAll('[data-box="' + stabox + '"]');
                                            for (var i = 0; i < furnisenestebox.length; i++) {
                                                if (furnisenestebox[i].getAttribute('data-idp') != idprivada) {
                                                    //consola.log('aki pongo ahora el mueble accion'+furnisenestebox[i].getAttribute('data-a'));
                                                    ffurs[stabox] = furnisenestebox[i].getAttribute('data-a');
                                                    ffursidp[stabox] = furnisenestebox[i].getAttribute('data-idp');
                                                    //kgraph.nodes[yybo][xxbo].fur = furnisenestebox[i].getAttribute('data-a');
                                                    //kgraph.nodes[yybo][xxbo].quitoCerrado(checkeocontrolmira);
                                                    furni_encima_del = 'sibox';
                                                    break;
                                                }
                                            }
                                        }
                                        if (alturadelamesa > 0) {
                                            ffursencmaltur[yybo + 'c' + xxbo] -= alturadelamesa;
                                            //////////consola.log((yybo+'c'+xxbo+' quitoalturadelamesa'+alturadelamesa);
                                        }
                                        if (furni_encima_del == 'no') {
                                            //consola.log('quito furni'+stabox);
                                            if (ffurs[stabox]) delete ffurs[stabox];
                                            if (ffursidp[stabox]) delete ffursidp[stabox];
                                            //kgraph.nodes[yybo][xxbo].fur='';
                                            ffursencmaltur[yybo + 'c' + xxbo] = 0;
                                            //kgraph.nodes[yybo][xxbo].quitoCerrado(checkeocontrolmira);
                                        }

                                        //////consola.log(''+yybo+'c'+xxbo+' == '+ffursencmaltur[yybo+'c'+xxbo]);
                                        if (checkeocontrolmira == 'furni' && stabox == yostoyenbox && harecontrolmia == 'no') {
                                            harecontrolmia = 'si'; window.setTimeout(controlmia, 10);
                                        }
                                    }//else if(alturadelamesa>0){//desdelaaccion =='moverkekomove' &&
                                    //ffursencmaltur[yybo+'c'+xxbo]-=alturadelamesa;
                                    //////////consola.log((yybo+'c'+xxbo+' quitoalturadelamesa'+alturadelamesa);

                                    //}

                                    for (var xx = 1; xx < exe; xx++) {
                                        yybo = (yesteTR + ii);
                                        xxbo = (xesteTR - xx);
                                        stabox = yybo + "c" + xxbo;
                                        if (ffursidp[stabox] == idprivada) {
                                            //consola.log('esta en box'+stabox);
                                            furni_encima_del = 'no';
                                            for (var i = 0; i < furnissobreaa.length; i++) {
                                                if (mirosicabeencasillas(furnissobreaa[i].getAttribute('data-idp'), yybo, xxbo, furnissobreaa[i].getAttribute('data-idpc'))) {
                                                    //consola.log('aki pongo ahora el mueble accion'+furnissobreaa[i].getAttribute('data-a'));
                                                    ffurs[stabox] = furnissobreaa[i].getAttribute('data-a');
                                                    ffursidp[stabox] = furnissobreaa[i].getAttribute('data-idp');
                                                    //kgraph.nodes[yybo][xxbo].fur = furnissobreaa[i].getAttribute('data-a');
                                                    //kgraph.nodes[yybo][xxbo].quitoCerrado(checkeocontrolmira);
                                                    furni_encima_del = 'si';
                                                    break;
                                                }
                                            }

                                            //furnis debajo del que quito
                                            if (el_mueble_que_quito_estaba_encima_de_idp != '' && furni_encima_del == 'no') {
                                                for (var i = 0; i < furnis_debajo_del_que_quito.length; i++) {
                                                    if (mirosicabeencasillas(furnis_debajo_del_que_quito[i].getAttribute('data-idp'), yybo, xxbo, furnis_debajo_del_que_quito[i].getAttribute('data-idpc'))) {
                                                        //consola.log('aki pongo ahora el mueble accion'+furnis_debajo_del_que_quito[i].getAttribute('data-a'));
                                                        ffurs[stabox] = furnis_debajo_del_que_quito[i].getAttribute('data-a');
                                                        ffursidp[stabox] = furnis_debajo_del_que_quito[i].getAttribute('data-idp');
                                                        //kgraph.nodes[yybo][xxbo].fur = furnis_debajo_del_que_quito[i].getAttribute('data-a');
                                                        //kgraph.nodes[yybo][xxbo].quitoCerrado(checkeocontrolmira);
                                                        furni_encima_del = 'sidebajo';
                                                        break;
                                                    }
                                                }
                                            }
                                            //busco otro furni en este box
                                            if (furni_encima_del == 'no') {
                                                furnisenestebox = kkallaki.querySelectorAll('[data-box="' + stabox + '"]');
                                                for (var i = 0; i < furnisenestebox.length; i++) {
                                                    if (furnisenestebox[i].getAttribute('data-idp') != idprivada) {
                                                        //consola.log('aki pongo ahora el mueble accion'+furnisenestebox[i].getAttribute('data-a'));
                                                        ffurs[stabox] = furnisenestebox[i].getAttribute('data-a');
                                                        ffursidp[stabox] = furnisenestebox[i].getAttribute('data-idp');
                                                        //kgraph.nodes[yybo][xxbo].fur = furnisenestebox[i].getAttribute('data-a');
                                                        //kgraph.nodes[yybo][xxbo].quitoCerrado(checkeocontrolmira);
                                                        furni_encima_del = 'sibox';
                                                        break;
                                                    }
                                                }
                                            }
                                            if (alturadelamesa > 0) {
                                                ffursencmaltur[yybo + 'c' + xxbo] -= alturadelamesa;
                                                //////////consola.log((yybo+'c'+xxbo+' quitoalturadelamesa'+alturadelamesa);
                                            }
                                            if (furni_encima_del == 'no') {

                                                //consola.log('quito furni'+stabox);
                                                if (ffurs[stabox]) delete ffurs[stabox];
                                                if (ffursidp[stabox]) delete ffursidp[stabox];
                                                //kgraph.nodes[yybo][xxbo].fur='';
                                                ffursencmaltur[yybo + 'c' + xxbo] = 0;
                                                //kgraph.nodes[yybo][xxbo].quitoCerrado(checkeocontrolmira);
                                            }
                                            if (checkeocontrolmira == 'furni' && stabox == yostoyenbox && harecontrolmia == 'no') {
                                                harecontrolmia = 'si'; window.setTimeout(controlmia, 10);
                                            }
                                        }//else if(alturadelamesa>0){//desdelaaccion =='moverkekomove' &&
                                        //ffursencmaltur[yybo+'c'+xxbo]-=alturadelamesa;
                                        //////////consola.log((yybo+'c'+xxbo+' quitoalturadelamesa'+alturadelamesa);
                                        //}

                                        //////consola.log(''+yybo+'c'+xxbo+' == '+ffursencmaltur[yybo+'c'+xxbo]);
                                    }
                                }
                            }

                            if (exe >= 1) {
                                for (var xx = 1; xx < exe; xx++) {
                                    yybo = yesteTR;
                                    xxbo = (xesteTR - xx);
                                    stabox = yybo + "c" + xxbo;
                                    if (ffursidp[stabox] == idprivada) {
                                        //consola.log('esta en box'+stabox);
                                        furni_encima_del = 'no';
                                        for (var i = 0; i < furnissobreaa.length; i++) {
                                            if (mirosicabeencasillas(furnissobreaa[i].getAttribute('data-idp'), yybo, xxbo, furnissobreaa[i].getAttribute('data-idpc'))) {
                                                //consola.log('aki pongo ahora el mueble accion'+furnissobreaa[i].getAttribute('data-a'));
                                                ffurs[stabox] = furnissobreaa[i].getAttribute('data-a');
                                                ffursidp[stabox] = furnissobreaa[i].getAttribute('data-idp');
                                                //kgraph.nodes[yybo][xxbo].fur = furnissobreaa[i].getAttribute('data-a');
                                                //kgraph.nodes[yybo][xxbo].quitoCerrado(checkeocontrolmira);
                                                furni_encima_del = 'si';
                                                break;
                                            }
                                        }
                                        //furnis debajo del que quito
                                        if (el_mueble_que_quito_estaba_encima_de_idp != '' && furni_encima_del == 'no') {
                                            for (var i = 0; i < furnis_debajo_del_que_quito.length; i++) {
                                                if (mirosicabeencasillas(furnis_debajo_del_que_quito[i].getAttribute('data-idp'), yybo, xxbo, furnis_debajo_del_que_quito[i].getAttribute('data-idpc'))) {
                                                    //consola.log('aki pongo ahora el mueble accion'+furnis_debajo_del_que_quito[i].getAttribute('data-a'));
                                                    ffurs[stabox] = furnis_debajo_del_que_quito[i].getAttribute('data-a');
                                                    ffursidp[stabox] = furnis_debajo_del_que_quito[i].getAttribute('data-idp');
                                                    //kgraph.nodes[yybo][xxbo].fur = furnis_debajo_del_que_quito[i].getAttribute('data-a');
                                                    //kgraph.nodes[yybo][xxbo].quitoCerrado(checkeocontrolmira);
                                                    furni_encima_del = 'sidebajo';
                                                    break;
                                                }
                                            }
                                        }
                                        //busco otro furni en este box
                                        if (furni_encima_del == 'no') {
                                            furnisenestebox = kkallaki.querySelectorAll('[data-box="' + stabox + '"]');
                                            for (var i = 0; i < furnisenestebox.length; i++) {
                                                if (furnisenestebox[i].getAttribute('data-idp') != idprivada) {
                                                    //consola.log('aki pongo ahora el mueble accion'+furnisenestebox[i].getAttribute('data-a'));
                                                    ffurs[stabox] = furnisenestebox[i].getAttribute('data-a');
                                                    ffursidp[stabox] = furnisenestebox[i].getAttribute('data-idp');
                                                    //kgraph.nodes[yybo][xxbo].fur = furnisenestebox[i].getAttribute('data-a');
                                                    //kgraph.nodes[yybo][xxbo].quitoCerrado(checkeocontrolmira);
                                                    furni_encima_del = 'sibox';
                                                    break;
                                                }
                                            }
                                        }
                                        if (alturadelamesa > 0) {
                                            ffursencmaltur[yybo + 'c' + xxbo] -= alturadelamesa;
                                            //////////consola.log((yybo+'c'+xxbo+' quitoalturadelamesa'+alturadelamesa);
                                        }
                                        if (furni_encima_del == 'no') {
                                            //consola.log('quito furni'+stabox);
                                            if (ffurs[stabox]) delete ffurs[stabox];
                                            if (ffursidp[stabox]) delete ffursidp[stabox];
                                            //kgraph.nodes[yybo][xxbo].fur='';
                                            ffursencmaltur[yybo + 'c' + xxbo] = 0;
                                            //kgraph.nodes[yybo][xxbo].quitoCerrado(checkeocontrolmira);
                                        }
                                        if (checkeocontrolmira == 'furni' && stabox == yostoyenbox && harecontrolmia == 'no') {
                                            harecontrolmia = 'si'; window.setTimeout(controlmia, 10);
                                        }

                                        //////consola.log(''+yybo+'c'+xxbo+' == '+ffursencmaltur[yybo+'c'+xxbo]);
                                    }//else if(alturadelamesa>0){//desdelaaccion =='moverkekomove' &&
                                    //ffursencmaltur[yybo+'c'+xxbo]-=alturadelamesa;
                                    //////////consola.log((yybo+'c'+xxbo+' quitoalturadelamesa'+alturadelamesa);

                                    //}
                                }
                            }
                        }
                    }

                    //cambio sobreidp
                    if (desdelaaccion == 'mover' && checkeocontrolmira == 'furni' || desdelaaccion == 'recoger' && checkeocontrolmira == 'furni') {
                        var furnissobreelquequite = kkallaki.querySelectorAll('[data-so="' + idprivada + '"]');
                        for (var i = 0; i < furnissobreelquequite.length; i++) {
                            if (furnissobreelquequite[i])
                                furnissobreelquequite[i].setAttribute('data-so', el_mueble_que_quito_estaba_encima_de_idp);
                        }
                    }
                    //fin cambio sobreidp

                }
            },
            agregoinfofurni = function (idprivada, desdaccion) {//antes de ejecutar esta funcion agregar ffurscass['f'+idprivada]=casillaahora

                var cassantes = ffurscass['f' + idprivada];
                if (cassantes) {
                    //////////consola.log(('agregoinfo');
                    var cassantese = cassantes.split('c', 2);
                    var yesteTR = parseInt(cassantese[0]);
                    var xesteTR = parseInt(cassantese[1]);
                    var furni_encima_del = 'no';
                    var alturaextraplus = 0;
                    var furnissobreaa = kkallaki.querySelectorAll('[data-so="' + idprivada + '"]');
                    var imagenffurn = kkallaki.querySelector('[data-idp="' + idprivada + '"]');
                    //document.getElementById('idencf'+idprivada);
                    //if(!imagenffurn) imagenffurn = document.getElementById('idf'+idprivada);
                    if (elementExists(imagenffurn)) {
                        var iidpcuatro = imagenffurn.getAttribute('data-idpc');
                        var iidptres = imagenffurn.getAttribute('data-idpt');
                        var dat_acc = imagenffurn.getAttribute('data-a');

                        alturaextraplus = imagenffurn.getAttribute("data-alt");
                        var alturadelamesa = 0;
                        if (iidptres && iidptres.length > 4 && iidptres.substr(0, 4) == 'mesa') {
                            alturadelamesa = iidptres.substr(4, iidptres.length);
                        }
                        if (alturaextraplus != '' && alturaextraplus >= 1) {
                            alturadelamesa = parseInt(alturadelamesa);
                            alturadelamesa += parseInt(alturaextraplus);
                            //////////consola.log(('alturadelamesaconplus'+alturadelamesa);
                        }


                        //casilla donde estaba
                        var yybo = yesteTR;
                        var xxbo = xesteTR;
                        var stabox = yybo + "c" + xxbo;
                        var yostoyenbox = ky + 'c' + kx;
                        var akihayunfurniconidp;
                        var mirodatosdefur = '';
                        //consola.log('pongo en box'+stabox);
                        if (ffursidp[stabox]) {
                            akihayunfurniconidp = ffursidp[stabox];
                            if (elementExists(kkallaki.querySelector('[data-idp="' + akihayunfurniconidp + '"]')))
                                mirodatosdefur = kkallaki.querySelector('[data-idp="' + akihayunfurniconidp + '"]').getAttribute('data-so');
                            //if(document.getElementById('idencf'+akihayunfurniconidp))mirodatosdefur=document.getElementById('idencf'+akihayunfurniconidp).getAttribute('data-so');
                            //else if(document.getElementById('idf'+akihayunfurniconidp))mirodatosdefur=document.getElementById('idf'+akihayunfurniconidp).getAttribute('data-so');
                        }
                        //no esta encima de este idp que movi aqui

                        var alturadelabasecuadrobase = 0;//ffursencmaltur[yybo+'c'+xxbo];
                        //////////consola.log(('AGREGO alturadelamesa'+alturadelamesa+' O alturabasecuadro'+alturadelabasecuadrobase);
                        if (mirodatosdefur != idprivada) {
                            //////////consola.log(('no esta encima'+mirodatosdefur+'!='+idprivada);
                            ffursidp[stabox] = idprivada;
                            ffurs[stabox] = dat_acc;
                            //kgraph.nodes[yybo][xxbo].fur=dat_acc;
                            if (alturadelamesa > 0) {
                                if (ffursencmaltur[yybo + 'c' + xxbo] > 0)
                                    ffursencmaltur[yybo + 'c' + xxbo] = (parseInt(alturadelamesa) + parseInt(ffursencmaltur[yybo + 'c' + xxbo]));
                                else
                                    ffursencmaltur[yybo + 'c' + xxbo] = parseInt(alturadelamesa);
                            }

                            //////consola.log(''+yybo+'c'+xxbo+' == '+ffursencmaltur[yybo+'c'+xxbo]);

                            if (stabox == yostoyenbox && harecontrolmia == 'no' && desdaccion != 'moverkekomove') {
                                harecontrolmia = 'si'; window.setTimeout(controlmia, 10);
                            }

                            //kgraph.nodes[yybo][xxbo].quitoCerrado('furni');
                        }
                        if (iidpcuatro > 0) {
                            var cortiyaidp4 = iidpcuatro.split('.', 2);
                            var eye = parseInt(cortiyaidp4[1]);
                            var exe = parseInt(cortiyaidp4[0]);

                            if (eye >= 1) {
                                for (var ii = 1; ii < eye; ii++) {
                                    yybo = (yesteTR + ii);
                                    xxbo = xesteTR;
                                    stabox = yybo + "c" + xxbo;

                                    mirodatosdefur = '';
                                    akihayunfurniconidp = ffursidp[stabox];
                                    if (akihayunfurniconidp) {
                                        if (elementExists(kkallaki.querySelector('[data-idp="' + akihayunfurniconidp + '"]')))
                                            mirodatosdefur = kkallaki.querySelector('[data-idp="' + akihayunfurniconidp + '"]').getAttribute('data-so');
                                        //if(document.getElementById('idencf'+akihayunfurniconidp))mirodatosdefur=document.getElementById('idencf'+akihayunfurniconidp).getAttribute('data-so');
                                        //else if(document.getElementById('idf'+akihayunfurniconidp))mirodatosdefur=document.getElementById('idf'+akihayunfurniconidp).getAttribute('data-so');
                                    }
                                    //no esta encima de este idp que movi aqui
                                    if (mirodatosdefur != idprivada) {
                                        ffursidp[stabox] = idprivada;
                                        ffurs[stabox] = dat_acc;
                                        //kgraph.nodes[yybo][xxbo].fur=dat_acc;
                                        if (alturadelamesa > 0) {
                                            if (ffursencmaltur[yybo + 'c' + xxbo] > 0)
                                                ffursencmaltur[yybo + 'c' + xxbo] = (parseInt(alturadelamesa) + parseInt(ffursencmaltur[yybo + 'c' + xxbo]));
                                            else
                                                ffursencmaltur[yybo + 'c' + xxbo] = parseInt(alturadelamesa);//alturadelabasecuadrobase
                                        }//else
                                        //ffursencmaltur[yybo+'c'+xxbo] = parseInt(alturadelabasecuadrobase);

                                        //kgraph.nodes[yybo][xxbo].quitoCerrado('furni');

                                        //////consola.log(''+yybo+'c'+xxbo+' == '+ffursencmaltur[yybo+'c'+xxbo]);

                                        if (stabox == yostoyenbox && harecontrolmia == 'no' && desdaccion != 'moverkekomove') {
                                            harecontrolmia = 'si'; window.setTimeout(controlmia, 10);
                                        }
                                    }
                                    for (var xx = 1; xx < exe; xx++) {
                                        yybo = (yesteTR + ii);
                                        xxbo = (xesteTR - xx);
                                        stabox = yybo + "c" + xxbo;

                                        mirodatosdefur = '';
                                        if (ffursidp[stabox]) {
                                            akihayunfurniconidp = ffursidp[stabox];
                                            if (akihayunfurniconidp) {
                                                if (elementExists(kkallaki.querySelector('[data-idp="' + akihayunfurniconidp + '"]')))
                                                    mirodatosdefur = kkallaki.querySelector('[data-idp="' + akihayunfurniconidp + '"]').getAttribute('data-so');
                                                //if(document.getElementById('idencf'+akihayunfurniconidp))mirodatosdefur=document.getElementById('idencf'+akihayunfurniconidp).getAttribute('data-so');
                                                //else if(document.getElementById('idf'+akihayunfurniconidp))mirodatosdefur=document.getElementById('idf'+akihayunfurniconidp).getAttribute('data-so');
                                            }
                                        }
                                        //no esta encima de este idp que movi aqui
                                        if (mirodatosdefur != idprivada) {
                                            ffursidp[stabox] = idprivada;
                                            ffurs[stabox] = dat_acc;
                                            //kgraph.nodes[yybo][xxbo].fur=dat_acc;

                                            if (alturadelamesa > 0) {
                                                if (ffursencmaltur[yybo + 'c' + xxbo] > 0)
                                                    ffursencmaltur[yybo + 'c' + xxbo] = (parseInt(alturadelamesa) + parseInt(ffursencmaltur[yybo + 'c' + xxbo]));
                                                else
                                                    ffursencmaltur[yybo + 'c' + xxbo] = parseInt(alturadelamesa);//alturadelabasecuadrobase
                                            }//else
                                            //ffursencmaltur[yybo+'c'+xxbo] = parseInt(alturadelabasecuadrobase);

                                            //////consola.log(''+yybo+'c'+xxbo+' == '+ffursencmaltur[yybo+'c'+xxbo]);
                                            //kgraph.nodes[yybo][xxbo].quitoCerrado('furni');

                                            if (stabox == yostoyenbox && harecontrolmia == 'no' && desdaccion != 'moverkekomove') {
                                                harecontrolmia = 'si'; window.setTimeout(controlmia, 10);
                                            }
                                        }
                                    }

                                }
                            }

                            if (exe >= 1) {
                                for (var xx = 1; xx < exe; xx++) {
                                    yybo = yesteTR;
                                    xxbo = (xesteTR - xx);
                                    stabox = yybo + "c" + xxbo;
                                    mirodatosdefur = '';
                                    if (ffursidp[stabox]) {
                                        akihayunfurniconidp = ffursidp[stabox];
                                        if (akihayunfurniconidp) {
                                            if (elementExists(kkallaki.querySelector('[data-idp="' + akihayunfurniconidp + '"]')))
                                                mirodatosdefur = kkallaki.querySelector('[data-idp="' + akihayunfurniconidp + '"]').getAttribute('data-so');
                                            //if(document.getElementById('idencf'+akihayunfurniconidp))mirodatosdefur=document.getElementById('idencf'+akihayunfurniconidp).getAttribute('data-so');
                                            //else if(document.getElementById('idf'+akihayunfurniconidp))mirodatosdefur=document.getElementById('idf'+akihayunfurniconidp).getAttribute('data-so');
                                        }
                                    }
                                    //no esta encima de este idp que movi aqui
                                    if (mirodatosdefur != idprivada) {
                                        ffursidp[stabox] = idprivada;
                                        ffurs[stabox] = dat_acc;
                                        //kgraph.nodes[yybo][xxbo].fur=dat_acc;
                                        if (alturadelamesa > 0) {
                                            if (ffursencmaltur[yybo + 'c' + xxbo] > 0)
                                                ffursencmaltur[yybo + 'c' + xxbo] = (parseInt(alturadelamesa) + parseInt(ffursencmaltur[yybo + 'c' + xxbo]));
                                            else
                                                ffursencmaltur[yybo + 'c' + xxbo] = parseInt(alturadelamesa);
                                        }//else
                                        //ffursencmaltur[yybo+'c'+xxbo] = parseInt(alturadelabasecuadrobase);

                                        //////consola.log(''+yybo+'c'+xxbo+' == '+ffursencmaltur[yybo+'c'+xxbo]);
                                        //kgraph.nodes[yybo][xxbo].quitoCerrado('furni');
                                        if (stabox == yostoyenbox && harecontrolmia == 'no' && desdaccion != 'moverkekomove') {
                                            harecontrolmia = 'si'; window.setTimeout(controlmia, 10);
                                        }
                                    }
                                }
                            }
                        }
                    }

                }
            },
            coloreafun = function (sumarea) {
                var ara = micoli;
                ara = parseInt(ara);
                if (sumarea == 's') {
                    ara++;
                }
                //document.getElementById('colorea').setAttribute('data-este','s');
                if (ara == '2') {
                    document.getElementById('colorea').style.backgroundColor = '#AFAFAF';
                } else if (ara == '3') {
                    document.getElementById('colorea').style.backgroundColor = '#F0B848';
                } else if (ara == '4') {
                    document.getElementById('colorea').style.backgroundColor = '#FFD2F5';
                } else if (ara == '5') {
                    document.getElementById('colorea').style.backgroundColor = '#BFE6F1';
                } else if (ara == '6') {
                    document.getElementById('colorea').style.backgroundColor = '#FDCDCA';
                } else if (ara == '7') {
                    document.getElementById('colorea').style.backgroundColor = '#D3CBF2';
                } else if (ara == '8') {
                    document.getElementById('colorea').style.backgroundColor = '#E9F0C9';
                } else if (ara == '9') {
                    document.getElementById('colorea').style.backgroundColor = '#2991C5';
                } else if (ara == '10') {
                    document.getElementById('colorea').style.backgroundColor = '#EC521E';
                } else if (ara == '11') {
                    document.getElementById('colorea').style.backgroundColor = '#209E0A';
                } else if (ara == '12') {
                    document.getElementById('colorea').style.backgroundColor = '#9D0A2D';
                } else if (ara == '13') {
                    document.getElementById('colorea').style.backgroundColor = '#520A9D';
                } else if (ara == '14') {
                    document.getElementById('colorea').style.backgroundColor = '#9D0A1F';
                } else if (ara == '15') {
                    document.getElementById('colorea').style.backgroundColor = '#100A9D';
                } else {
                    document.getElementById('colorea').style.backgroundColor = '#fff';
                    ara = 1;
                }

                micoli = ara;
                //if(este == 'n'){
                //$.post("?cokiecha="+document.getElementById('sendmmcol').value);
                //}
                document.cookie = "colori=" + micoli + "; expires=Thu, 18 Dec 2063 12:00:00 GMT; path=/";

            };


        coloreafun('');

        var dimeelvideoya = function (idptele, lose) {
            if (lose == 'ya') {
                katman('dimevideoya', idptele);
            } else {
                var tuiempo = 500;
                tuiempo += (cuantoskekosaki * 100);
                //consola.log(tuiempo);
                window.setTimeout(dimeelvideoya, tuiempo, idptele, 'ya');
            }
            ////consola.log('dimeelvideoya');
        },
            bajacontador = function (idcontador, setime) {//Ojoaki contador
                ////
                //consola.log('bajacontador'+idcontador+' setime',setime);
                if (document.getElementById(idcontador) && document.getElementById(idcontador).getAttribute('data-setime') == setime) {
                    var tiempoecont = document.getElementById(idcontador).getAttribute('data-falta');
                    var setime = document.getElementById(idcontador).getAttribute('data-setime');
                    tiempoecont--;
                    setime++;
                    var aimpri = tiempoecont;
                    var aimprimin = '0';
                    if (aimpri >= 0) {
                        aimprimin = (aimpri / 60);
                        if (aimprimin >= 1) {
                            aimprimin = parseInt(aimprimin);
                            aimpri -= (aimprimin * 60);
                        } else {
                            aimprimin = '00';
                        }

                        if (aimprimin.toString().length == 1) aimprimin = '0' + aimprimin;
                        if (aimpri.toString().length == 1) aimpri = '0' + aimpri;

                        aimpri = '<div style="position: absolute; margin-top: 15px; margin-left:-5px;text-align:center; width:100%;">' +
                            document.getElementById(idcontador).getAttribute('data-texto') + '</div><br/><br/><br/><br/><div style="font-size:23px;margin-left:-5px;margin-top: 2px; text-align:center;width:100%;position:absolute;">' + aimprimin + ':' + aimpri + '</div>';
                    } else {
                        aimpri = '<div style="position: absolute; margin-top: 15px; margin-left:-5px;text-align:center; width:100%;">' +
                            document.getElementById(idcontador).getAttribute('data-texto') + '</div>';
                    }

                    document.getElementById(idcontador).innerHTML = aimpri;
                    document.getElementById(idcontador).setAttribute('data-falta', tiempoecont);
                    document.getElementById(idcontador).setAttribute('data-setime', setime);
                    if (tiempoecont >= 0)
                        window.setTimeout(bajacontador, 1000, idcontador, setime);
                }
            },
            gofcasa = function () {
                akiblanhbb.classList.remove('novisible');
                if (ultimoidpclickado != 1) {
                    ultimoidpclickado = 1;
                    TENGOCLICADO = null;
                    //nombreblanhbb.innerText = nombcas.nombre;
                    TENGOCLICADOtipo = null;
                    TENGOCLICADODATA = {};
                    //document.getElementById('blanhbbFLOAT').classList.add('novisible');
                    akiblanhbb.querySelector('#miniima').classList.add('novisible');
                    akiblanhbb.querySelector('#miniimak').classList.add('novisible');
                    akiblanhbb.querySelector('#btnssgente').classList.add('novisible');
                    akiblanhbb.querySelector('#btnssfurnis').classList.add('novisible');
                    //nombreblanhbb.innerText = nombcas.nombre;
                    akiblanhbb.querySelector('#nomsele').innerHTML = nombcas.nombre;
                    akiblanhbb.querySelector('#descrisele').innerHTML = nombcas.descripcion;
                }
            },
            limpia = function (str, ikkk, colores, desde) {
                var colorlink = '#000';
                if (desde == 'web' || desde == 'coment' || colores >= 9 && colores != 100) {
                    colorlink = '#fff';
                }

                var devuelveur = String(str);


                //Acepto saltos de linea para mensajes web
                //devuelveur = devuelveur.replace(/\n/g, '\n ');

                if (!devuelveur) devuelveur = '';

                //devuelveur = devuelveur.replaceAll('http','');
                //devuelveur = stripHtml(devuelveur);

                //devuelveur = devuelveur.replace(/\+/g, ' ');
                devuelveur = replaceAlltodo(devuelveur, '&', 'EsAnDD');
                devuelveur = replaceAlltodo(devuelveur, '<', '&lt;');
                devuelveur = replaceAlltodo(devuelveur, '>', '&gt;');
                devuelveur = replaceAlltodo(devuelveur, '"', '&quot;');
                devuelveur = replaceAlltodo(devuelveur, '.', 'eSpUNTO');
                devuelveur = replaceAlltodo(devuelveur, 'wwweSpUNTO', 'http://www.');
                devuelveur = replaceAlltodo(devuelveur, 'http://http', 'http');
                devuelveur = replaceAlltodo(devuelveur, 'https://http', 'https');
                devuelveur = replaceAlltodo(devuelveur, 'eSpUNTO', '.');

                if (devuelveur.substr(0, 1) == '#') devuelveur = ' ' + devuelveur;

                //console.log(devuelveur);
                ///devuelveur = replaceAlltodo(devuelveur,'\n#','\n http://{ALMOADILLASOLA}');

                /// devuelveur = replaceAlltodo(devuelveur,' #',' http://{ALMOADILLASOLA}');
                //devuelveur = replaceAlltodo(devuelveur,'#','http://{ALMOADILLA}');

                //.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;')
                //.replace(/./g, 'eSpUNTO').replace(/www./g, 'http://www.').replace('http://http', 'http').replace('https://http', 'https')
                //.replace(/eSpUNTO/g, '.');

                if (colores == 100) {
                    //Acepto saltos de linea para mensajes web
                    devuelveur = String(devuelveur).replace(/\n/g, '<br>');
                }
                if (devuelveur.indexOf('http://') >= 0 || devuelveur.indexOf('https://') >= 0) {
                    var devuelveure = devuelveur.split('http');
                    var devuelveurespai;
                    var pusefinaa = '';
                    var textonetoconur = devuelveure[0];
                    var iburanum = 0;
                    var desdetarget = '_blank';

                    var iburini = 1;
                    if (devuelveure.length == 1) {
                        iburini = 0;
                        //console.log('si');
                    }
                    //console.log('si2:',devuelveure.length);
                    for (var ibura = iburini; ibura < devuelveure.length; ibura++) {
                        ///devuelveure[ibura] = replaceAlltodo(devuelveure[ibura],'http://{ALMOADILLA}','#');
                        iburanum++;
                        desdetarget = '_blank';
                        devuelveurespai = devuelveure[ibura].split(' ');
                        if (pusefinaa == '' && iburanum == 1) {//todoincs/link.php?src='+ikkk+'&l=

                            //if(devuelveurespai[0] != devuelveurespai[0].replace('://kekocity.es','') ||
                            //   devuelveurespai[0] != devuelveurespai[0].replace('s://kekocity.es','') ||
                            //   devuelveurespai[0] != devuelveurespai[0].replace('://www.kekocity.es','') ||
                            //    devuelveurespai[0] != devuelveurespai[0].replace('://www.kekocity.es','')){
                            //       desdetarget='_top';
                            //}
                            devuelveurespai[0] = replaceAlltodo(devuelveurespai[0], '<br>', '');
                            ///if(devuelveurespai[0].substr(0,19) == "://{ALMOADILLASOLA}"){
                            ///devuelveurespai[0]= devuelveurespai[0].replace('://{ALMOADILLASOLA}','');
                            ///devuelveure[ibura]= devuelveure[ibura].replace('://{ALMOADILLASOLA}','');
                            //textonetoconur+=' <a href="#/hashtag/'+encodeURI(devuelveurespai[0])+'" target="_top" style="color:'+colorlink+'">#'+devuelveurespai[0];
                            ///}else{
                            textonetoconur += ' <a href="' + encodeURI('http' + replaceAlltodo(devuelveurespai[0], 'EsAnDD', '&')) + '" target="' + desdetarget + '" style="color:' + colorlink + '">http' + replaceAlltodo(devuelveurespai[0], 'EsAnDD', '&amp;');
                            ///}
                            pusefinaa = 'n';
                        }
                        if (devuelveurespai[ibura - 1] && pusefinaa == 'n') {
                            pusefinaa = '';
                            textonetoconur += '</a> ' + devuelveure[ibura].replace(devuelveurespai[0], '') + ' ';
                            iburanum = 0;
                        }

                    }

                    if (pusefinaa == 'n') {
                        pusefinaa = '';
                        textonetoconur += '</a> ';
                    }

                    devuelveur = textonetoconur;
                }
                devuelveur = replaceAlltodo(devuelveur, 'EsAnDD', '&amp;');

                var clasicos = 'icoburbs';
                var clasicos2 = 'icoburbs';
                var masespac = '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
                if (desde == 'chat' || desde == 'coment') {
                    clasicos = '';
                    clasicos2 = '';
                    masespac = '';
                }
                //clasicos = 'icochats';

                while (devuelveur.indexOf(":turtle:") != -1)
                    devuelveur = devuelveur.replace(":turtle:", ' <img src="' + dominiobase + 'images/icon2/tortugapederast.png" class="' + clasicos + '">' + masespac);

                ////consola.log('colores',colores);
                devuelveur = devuelveur.replace(/:P/g, ' <img src="' + dominiobase + 'images/icon2/wink.gif" class="' + clasicos + '">' + masespac);

                devuelveur = devuelveur.replace(/:O/g, ' <img src="' + dominiobase + 'images/icon2/shocked.gif" class="' + clasicos + '">' + masespac);

                devuelveur = devuelveur.replace(/:@/g, ' <img src="' + dominiobase + 'images/icon2/angry.gif" class="' + clasicos + '">' + masespac);

                devuelveur = devuelveur.replace(/:D/g, ' <img src="' + dominiobase + 'images/icon2/grin.gif" class="' + clasicos + '">' + masespac);

                devuelveur = devuelveur.replace(/:U/g, ' <img src="' + dominiobase + 'images/icon2/huh.gif" class="' + clasicos + '">' + masespac);

                devuelveur = devuelveur.replace(/:X/g, ' <img src="' + dominiobase + 'images/icon2/lipsrsealed.gif" class="' + clasicos + '">' + masespac);

                devuelveur = devuelveur.replace(/:S/g, ' <img src="' + dominiobase + 'images/icon2/sad.gif" class="' + clasicos + '">' + masespac);

                devuelveur = devuelveur.replace(/:C/g, ' <img src="' + dominiobase + 'images/icon2/cool.gif" class="' + clasicos + '">' + masespac);

                while (devuelveur.indexOf(":moon:") != -1)
                    devuelveur = devuelveur.replace(":moon:", ' <img src="' + dominiobase + 'images/icon2/luna.png" class="' + clasicos + '">' + masespac);

                while (devuelveur.indexOf("(L)") != -1)
                    devuelveur = devuelveur.replace("(L)", ' <img src="' + dominiobase + 'images/icon2/kiss.gif" class="' + clasicos + '">' + masespac);
                while (devuelveur.indexOf(":*") != -1)
                    devuelveur = devuelveur.replace(":*", ' <img src="' + dominiobase + 'images/icon2/kiss2.gif" class="' + clasicos + '">' + masespac);
                
                while (devuelveur.indexOf(":clown:") != -1)
                    devuelveur = devuelveur.replace(":clown:", ' <img src="' + dominiobase + 'images/icon2/payaso.gif" class="' + clasicos + '">' + masespac);

                while (devuelveur.indexOf(":info:") != -1)
                    devuelveur = devuelveur.replace(":info:", ' <img src="' + dominiobase + 'images/icon2/info.gif" class="' + clasicos + '">' + masespac);

                while (devuelveur.indexOf(":warring:") != -1)
                    devuelveur = devuelveur.replace(":warring:", ' <img src="' + dominiobase + 'images/icon2/warring.gif" class="' + clasicos + '">' + masespac);

                while (devuelveur.indexOf(":duda:") != -1)
                    devuelveur = devuelveur.replace(":duda:", ' <img src="' + dominiobase + 'images/icon2/duda.gif" class="' + clasicos + '">' + masespac);

                while (devuelveur.indexOf(":line:") != -1)
                    devuelveur = devuelveur.replace(":line:", ' <img src="' + dominiobase + 'images/icon2/line.gif" class="' + clasicos + '">' + masespac);

                while (devuelveur.indexOf(":ads:") != -1)
                    devuelveur = devuelveur.replace(":ads:", ' <img src="' + dominiobase + 'images/icon2/anuncio.png" class="' + clasicos + '">' + masespac);
                
                while (devuelveur.indexOf(":mm:") != -1)
                    devuelveur = devuelveur.replace(":mm:", ' <img src="' + dominiobase + 'images/icon2/mm.gif" class="' + clasicos + '">' + masespac);
                
                while (devuelveur.indexOf("=@") != -1)
                    devuelveur = devuelveur.replace("=@", ' <img src="' + dominiobase + 'images/icon2/molesto.gif" class="' + clasicos + '">' + masespac);
                
                while (devuelveur.indexOf(":popo:") != -1)
                    devuelveur = devuelveur.replace(":popo:", ' <img src="' + dominiobase + 'images/icon2/caca.gif" class="' + clasicos + '">' + masespac);

                while (devuelveur.indexOf("&lt;3") != -1) 
                    devuelveur = devuelveur.replace("&lt;3", ' <img src="' + dominiobase + 'images/icon2/heart.gif" class="' + clasicos + '">' + masespac);
                

                while (devuelveur.indexOf(";)") != -1)
                    devuelveur = devuelveur.replace(";)", ' <img src="' + dominiobase + 'images/icon2/guino.gif" class="' + clasicos + '">' + masespac);

                while (devuelveur.indexOf(":Z") != -1)
                    devuelveur = devuelveur.replace(":Z", ' <img src="' + dominiobase + 'images/icon2/zzz.gif" class="' + clasicos + '">' + masespac);

                while (devuelveur.indexOf(":V") != -1)
                    devuelveur = devuelveur.replace(":V", ' <img src="' + dominiobase + 'images/icon2/pacman.gif" class="' + clasicos + '">' + masespac);


                while (devuelveur.indexOf(":)") != -1)
                    devuelveur = devuelveur.replace(":)", ' <img src="' + dominiobase + 'images/icon2/smiley.gif" class="' + clasicos + '">' + masespac);

                while (devuelveur.indexOf(":!") != -1)
                    devuelveur = devuelveur.replace(":!", ' <img src="' + dominiobase + 'images/icon2/cheesy.gif" class="' + clasicos + '">' + masespac);

                while (devuelveur.indexOf(":L") != -1)
                    devuelveur = devuelveur.replace(":L", ' <img src="' + dominiobase + 'images/icon2/embarrassed.gif" class="' + clasicos + '">' + masespac);

                while (devuelveur.indexOf(":|") != -1)
                    devuelveur = devuelveur.replace(":|", ' <img src="' + dominiobase + 'images/icon2/undecided.gif" class="' + clasicos + '">' + masespac);

                while (devuelveur.indexOf(":?") != -1)
                    devuelveur = devuelveur.replace(":?", ' <img src="' + dominiobase + 'images/icon2/rolleyes.gif" class="' + clasicos + '">' + masespac);

                while (devuelveur.indexOf(":(") != -1)
                    devuelveur = devuelveur.replace(":(", ' <img src="' + dominiobase + 'images/icon2/cry.gif" class="' + clasicos + '">' + masespac);

                if (desde == 'chat') {
                    while (devuelveur.indexOf("(y)") != -1)
                        devuelveur = devuelveur.replace("(y)", ' <img src="' + dominiobase + 'imagesnew/appico/mgusta.png" style="' + clasicos2 + '">');

                    while (devuelveur.indexOf("(Y)") != -1)
                        devuelveur = devuelveur.replace("(Y)", ' <img src="' + dominiobase + 'imagesnew/appico/mgusta.png" style="' + clasicos2 + '">');
                }

                return devuelveur;
            },
            creoimagencity = function (dats) {

                var posixzcity = trompaoz(dats.y, dats.x, 'f');
                var posixzcitysector;
                var sectorestees = dats.sectory + 'c' + dats.sectorx;

                posixzcitysector = trompaoz((ployy * dats.sectory), (ploxx * dats.sectorx), 'f');

                var sectorestediv;
                if (!document.getElementById('sector' + sectorestees)) {

                    var creo = document.createElement('div');
                    creo.id = 'sector' + sectorestees;
                    creo.style.top = posixzcitysector.etop + 'px';
                    creo.style.left = posixzcitysector.eleft + 'px';
                    creo.style.zIndex = 10;
                    creo.className = 'absolute';
                    kkallaki.appendChild(creo);
                }

                sectorestediv = document.getElementById('sector' + sectorestees);

                creo = document.createElement('img');
                creo.src = dats.imag;
                creo.style.top = posixzcity.etop + 'px';
                creo.style.left = posixzcity.eleft + 'px';
                creo.className = 'absolute';
                sectorestediv.appendChild(creo);
            },
            cargosector = function (dats) {
                var sectoreste = dats.sectory + 'c' + dats.sectorx;
                var estoyensector = sy + 'c' + sx;
                if (!sectores[sectoreste]) {
                    sectores[sectoreste] = estoyensector;

                    katman('donvesector', { sy: dats.sectory, sx: dats.sectorx, idzona: yosocas });
                    //if(sectoreste=='10c10')
                    creoimagencity({ y: -9.5, x: 9.5, imag: '/images/city/parcelaok.png', sectory: dats.sectory, sectorx: dats.sectorx });
                    //if(sectoreste=='9c9'){
                    //for(var srcx=2; srcx < (ploxx-1); srcx++) {
                    //creoimagencity({y:2,x:srcx,imag:'/images/city/cl.png',sectory:dats.sectory,sectorx:dats.sectorx});
                    //}
                    //for(var srcx=2; srcx < (ploxx-1); srcx++) {
                    //creoimagencity({y:(ployy-2),x:srcx,imag:'/images/city/cl.png',sectory:dats.sectory,sectorx:dats.sectorx});
                    //}
                    //for(var sryy=2; sryy < (ployy-2); sryy++) {
                    //creoimagencity({y:sryy,x:2,imag:'/images/city/cl.png',sectory:dats.sectory,sectorx:dats.sectorx});
                    //}
                    //for(var sryy=2; sryy < (ployy-2); sryy++) {
                    //creoimagencity({y:sryy,x:(ploxx-2),imag:'/images/city/cl.png',sectory:dats.sectory,sectorx:dats.sectorx});
                    //}
                    //creoimagencity({y:0,x:0,imag:'/images/city/ca.png',sectory:dats.sectory,sectorx:dats.sectorx});
                    //creoimagencity({y:0,x:ploxx,imag:'/images/city/ca.png',sectory:dats.sectory,sectorx:dats.sectorx});
                    //creoimagencity({y:ployy,x:ploxx,imag:'/images/city/ca.png',sectory:dats.sectory,sectorx:dats.sectorx});
                    //creoimagencity({y:ployy,x:0,imag:'/images/city/ca.png',sectory:dats.sectory,sectorx:dats.sectorx});
                    //}

                }
                sectores[sectoreste] = estoyensector;
            },
            cargosectores = function () {

                var estoyensectorahora = sy + 'c' + sx;

                if (vextr.hasOwnProperty('faltaventryatoy')) {
                    vextr['sectorestotal'] = 9;
                    if ((sy - 1) < 1) vextr['sectorestotal'] -= 1;
                    if ((sy - 1) < 1 || sx >= 24) vextr['sectorestotal'] -= 1;
                    if ((sx - 1) < 1) vextr['sectorestotal'] -= 2;
                    if ((sy - 1) < 1 || (sx - 1) < 1) vextr['sectorestotal'] -= 1;
                    if (sx >= 24) {
                        vextr['sectorestotal'] -= 2;
                    }

                    //console.log('total sectore',vextr['sectorestotal']);
                }
                katman('entrosector', { sy: sy, sx: sx, idzona: yosocas });

                cargosector({ sectory: sy, sectorx: sx });

                cargosector({ sectory: (sy + 1), sectorx: sx });

                if ((sy - 1) >= 1)
                    cargosector({ sectory: (sy - 1), sectorx: sx });

                if (sx < 24)
                    cargosector({ sectory: sy, sectorx: (sx + 1) });

                if ((sx - 1) >= 1)
                    cargosector({ sectory: sy, sectorx: (sx - 1) });

                if (sx < 24)
                    cargosector({ sectory: (sy + 1), sectorx: (sx + 1) });

                if ((sx - 1) >= 1 && (sy - 1) >= 1)
                    cargosector({ sectory: (sy - 1), sectorx: (sx - 1) });

                if ((sy - 1) >= 1 && sx < 24)
                    cargosector({ sectory: (sy - 1), sectorx: (sx + 1) });

                if ((sx - 1) >= 1)
                    cargosector({ sectory: (sy + 1), sectorx: (sx - 1) });

                var esectores = sectores;
                var esectoresidcasa = sectoresidcasa;
                var syysxe;
                var esy_bo = 0;
                var esx_bo = 0;
                var isecidca = {};
                var borrosectoridcasa = 0;
                var sectoresfurnisidakik = [];
                var idprivadkitonum = 0;
                for (var isector in esectores) {
                    if (estoyensectorahora != sectores[isector]) {
                        borrosectoridcasa = 0;
                        syysxe = isector.split('c');
                        esy_bo = syysxe[0];
                        esx_bo = syysxe[1];

                        for (var isectoridcas in esectoresidcasa) {
                            isecidca = sectoresidcasa[isectoridcas];
                            if (isecidca.sectory == esy_bo && isecidca.sectorx == esx_bo) {
                                borrosectoridcasa = isecidca.idcasa;
                                if (sectoresfurnisid[borrosectoridcasa]) {
                                    sectoresfurnisidakik = sectoresfurnisid[borrosectoridcasa];

                                    for (var idprivadkito = 0; idprivadkito < sectoresfurnisidakik.length; idprivadkito++) {
                                        idprivadkitonum = sectoresfurnisidakik[idprivadkito];
                                        //console.log('quito furni',idprivadkitonum);
                                        quitoinfofurni(idprivadkitonum, 'no', 'salgosector');
                                        borrar('idf' + idprivadkitonum);
                                        borrar('idencf' + idprivadkitonum);
                                    }
                                    delete (sectoresfurnisid[borrosectoridcasa]);
                                }
                                delete (sectoresidcasa[isectoridcas]);
                            }
                        }
                        //console.log('salgosector',esy_bo,'c',esx_bo,' borrosectoridcasa',borrosectoridcasa);
                        katman('salgosector', { sy: esy_bo, sx: esx_bo, idzona: yosocas, sector: borrosectoridcasa });
                        borrar('sector' + isector);
                        delete (sectores[isector]);
                    }
                }

            },
            ventryacarg = function (idcasa, dimac) {

                //blanhbbFLOAT.classList.add('novisible');

                if (dimac.tipo == 2 || dimac.tipo == 3) {
                    //kekocity por fuera



                    enboxyinicial = 0;
                    enboxxinicial = 2;
                    fokinicial = 'standL4LLL';

                    bowb = 'si',
                        ky = enboxyinicial,
                        kx = enboxxinicial,
                        ultimoidpclickado = 0,
                        milog = '',
                        mesaespecial = '',
                        mesaespecialhice = '',
                        ultigircab = 0,
                        ultimmasc = '',
                        cuantoskekosaki = 0,
                        harecontrolmia = 'no',
                        ultimoidpmuevocontrolmia = 0,
                        tradeando = 'n',
                        detectandocasilla = 'no',
                        mresulta = [];
                    enxasoo.classList.add('novisible');



                    document.title = 'Kekocity - ' + dimac.nombre;
                    //minikanvas(divamirat.querySelector('#miniyo'),datsro,'peque');
                    nombcas.nombre = limpia(dimac.nombre, '', 1, 'mision');

                    if (dimac.dueno == 0) {
                        nombcas.descripcion = iw[208] + ' <span onclick="window.location=\'#/' + encodeURI(dimac.keko) + '\';" class="link">' + dimac.keko + '</span><br/>' + limpia(dimac.descripcion, '', 1, 'mision');
                        nombcas.keko = dimac.keko; //nolangs
                    } else {

                        nombcas.descripcion = '';
                        nombcas.keko = dimac.keko; //nolangs
                    }

                    nombcas.armas = dimac.armas;

                    if (dimac.conpowas == '2')
                        nombcas.descripcion += '<br/><button class="botoneg" id="btnmysector"><img src="' + dominiobase + 'imagesnew/appico3/ajucas.png">' + iw[209] + '</button>';//nolang

                    //document.getElementById('estasen').innerHTML='Est√°s en la casa: <b>'+nombcas.nombre+'</b> Due√±o: <a href="#/'+encodeURI(nombcas.keko)+'">'+nombcas.keko+'</a>';
                    nombcas.empresa = dimac.empresa;
                    gofcasa();
                    if (dimac.empresa >= 1) {
                        kajax({
                            data: 'idc=' + idcasa + '&idi=' + idila,
                            url: 'todoincs/exekatrix914.php',
                            type: 'get',
                            success: function (response) {
                                ultimoidpclickado = 0;
                                nombcas.descripcion += response;
                                gofcasa();
                            }
                        });
                    }
                    //akiblanhbb.querySelector('#btnssgente').style.display='none';
                    //akiblanhbb.querySelector('#miniima').style.display='none';
                    //akiblanhbb.querySelector('#btnssfurnis').classList.add('novisible');
                    akiblanhbb.className = '';

                    document.getElementById('kekoallakic').innerHTML = '';
                    destroyCoins(); kkallakik.innerHTML = '';
                    ployy = parseInt(dimac.cuadrosy);
                    ploxx = parseInt(dimac.cuadrosx);
                    ployy++;
                    ploxx--;
                    if (dimac.diagonal == 1)
                        condiags = false;
                    else
                        condiags = true;

                    mirployy = 0;
                    mirploxx = 0;//akierapongos
                    notraspasar = dimac.notraspasar;
                    modocity = 'si';
                    nombcas.sector = 0;
                    sy = dimac.sy;
                    sx = dimac.sx;
                    yosocas = idcasa;
                    sectores = {},
                        sectoresidcasa = {},
                        sectoresfurnisid = {},
                        enboxyinicial += (ployy * sy);
                    enboxxinicial += (ploxx * sx);
                    ky = enboxyinicial;
                    kx = enboxxinicial;
                    //'+dimac.estilopared+'
                    //kkallaki.innerHTML='';
                    kkallaki.innerHTML = '';



                    document.getElementById('sendmmte').setAttribute('data-h', 'n');
                    if (quitoglobinter) {
                        ////consola.log('quitoglobinter');
                        window.clearTimeout(quitoglobinter);

                    }

                    if (sisigotimeout) {
                        window.clearTimeout(sisigotimeout);
                    }
                    if (movigoyainter) {
                        window.clearInterval(movigoyainter);
                    }
                    movigoyainter = window.setInterval(movigoyas, 360);
                    //var pondrenumt=addvaaa(1,100);
                    ultnumt = numt;
                    mbailo = '';
                    //numt=pondrenumt;
                    mascos = {};
                    if (document.getElementById('myKekosu'))
                        document.getElementById('myKekosu').innerHTML = '';

                    ultihablo = '';
                    ultimoidpmuevocontrolmia = 0;
                    if (bebetimeout) {
                        ////////consola.log('borro bebetimeout');
                        window.clearTimeout(bebetimeout);
                    }
                    mbailo = '';
                    kekosusu = 0; borrar('susurrando');

                    kekosigno = [];
                    akiburbujastdd.innerHTML = '';
                    contiburbb = 0;
                    tengoidpelota = 0;
                    ffurscerv = {},
                        ffurs = {},
                        ffursidpc = {},
                        ffursidpt = [],
                        ffursencmaltur = {},
                        ffurscass = {},
                        ffursidp = {};
                    if (idpmuevo > 0) {
                        idpmuevo = 0; borrar('mueblemover');

                        if (modonolag == 'n')
                            document.getElementById('kekoall').addEventListener("mousemove", lolsolo, false);
                        document.getElementById('kekoall').removeEventListener("mousemove", movekekoall, false);
                    }
                    borrarclase('stikers');
                    //document.getElementById('kekoall').style.left='0px';
                    //document.getElementById('kekoall').style.top='0px';
                    //leftahor=0;
                    ////////consola.log(('dimac.conpowa'+dimac.conpowas);
                    verjuego();
                    if (dimac.solopongos == 'no') {
                        if (dimac.conpowas == '2') {
                            pmoc = 'dueno';
                        } else if (dimac.conpowas == '1') {
                            pmoc = 'si';
                        } else {
                            pmoc = 'no';
                        }
                        nombcas.sector = 0;
                        //dimegraph(ployy,ploxx,mesaespecial);
                        dimegraphvacio(ployy, ploxx);
                        vextr['faltaventryatoy'] = 1;
                        cargosectores();
                    }
                    //fin kekocity por fuera
                } else {
                    //inicio casas normales

                    nombcas.sector = 0;
                    modocity = 'no';
                    sectores = {},
                        sectoresidcasa = {},
                        sectoresfurnisid = {},
                        sy = 0;
                    sx = 0;
                    var paredesplus = '';
                    var paredesplushtm = '';
                    var pongopare = 's';
                    if (dimac.solopongos == 'no') {
                        borrarclase('cerraalentr');


                        if (dimac.cuadrosy == 8 && dimac.cuadrosx == 8) {//SOY MULTICASA
                            //console.log('soy multicasa');
                            var dameidcasa = idcasa;
                            dameidcasa++;
                            katman('damesala', dameidcasa);
                            //console.log('damesala',dameidcasa);
                        }


                        if (dimac.cuadrosy == 14 && dimac.cuadrosx == 14) {//ESTO PONE PUERTA DERECHA CASA ALARGADA /
                            enboxyinicial = 0;
                            enboxxinicial = 0;
                            pongopare = 'n';
                            fokinicial = 'standL4LLL';
                        } else if (dimac.cuadrosy == 12 && dimac.cuadrosx == 24) {//ESTO PONE PUERTA DERECHA CASA ALARGADA /
                            enboxyinicial = 11;
                            enboxxinicial = 23;
                            fokinicial = 'standL5LLL';
                        } else if (dimac.cuadrosy == 48 && dimac.cuadrosx == 48) {

                            //es una zona

                            enboxyinicial = 31;
                            enboxxinicial = 8;
                            fokinicial = 'standL1LLL';
                        } else {//no es una zona
                            enboxyinicial = 0;
                            enboxxinicial = 2;
                            fokinicial = 'standL4LLL';
                        }

                        bowb = 'si',
                            ky = enboxyinicial,
                            kx = enboxxinicial,
                            ultimoidpclickado = 0,
                            milog = '',
                            mesaespecial = '',
                            mesaespecialhice = '',
                            ultigircab = 0,
                            ultimmasc = '',
                            cuantoskekosaki = 0,
                            harecontrolmia = 'no',
                            ultimoidpmuevocontrolmia = 0,
                            tradeando = 'n',
                            detectandocasilla = 'no',
                            mresulta = [];
                        enxasoo.classList.add('novisible');



                        document.title = 'Kekocity - ' + dimac.nombre;
                        //minikanvas(divamirat.querySelector('#miniyo'),datsro,'peque');
                        nombcas.nombre = limpia(dimac.nombre, '', 1, 'mision');

                        if (dimac.dueno == 0) {
                            nombcas.descripcion = iw[208] + ' <span onclick="window.location=\'#/' + encodeURI(dimac.keko) + '\';" class="link">' + dimac.keko + '</span><br/>' + limpia(dimac.descripcion, '', 1, 'mision');
                            nombcas.keko = dimac.keko; //nolangs
                        } else {

                            nombcas.descripcion = '';
                            nombcas.keko = dimac.keko; //nolangs
                        }

                        nombcas.armas = dimac.armas;

                        if (dimac.conpowas == '2')
                            nombcas.descripcion += '<br/><button class="botoneg" id="btneditarcasa"><img src="' + dominiobase + 'imagesnew/appico3/ajucas.png">' + iw[209] + '</button>';//nolang

                        //document.getElementById('estasen').innerHTML='Est√°s en la casa: <b>'+nombcas.nombre+'</b> Due√±o: <a href="#/'+encodeURI(nombcas.keko)+'">'+nombcas.keko+'</a>';
                        nombcas.empresa = dimac.empresa;
                        gofcasa();
                        if (dimac.empresa >= 1) {
                            kajax({
                                data: 'idc=' + idcasa + '&idi=' + idila,
                                url: 'todoincs/exekatrix914.php',
                                type: 'get',
                                success: function (response) {
                                    ultimoidpclickado = 0;
                                    nombcas.descripcion += response;
                                    gofcasa();
                                }
                            });
                        }
                        //akiblanhbb.querySelector('#btnssgente').style.display='none';
                        //akiblanhbb.querySelector('#miniima').style.display='none';
                        //akiblanhbb.querySelector('#btnssfurnis').classList.add('novisible');
                        akiblanhbb.className = '';

                        document.getElementById('kekoallakic').innerHTML = '';
                        destroyCoins(); kkallakik.innerHTML = '';
                        ployy = parseInt(dimac.cuadrosy);
                        ploxx = parseInt(dimac.cuadrosx);
                        ployy++;
                        ploxx--;
                        if (dimac.diagonal == 1)
                            condiags = false;
                        else
                            condiags = true;

                        mirployy = parseInt(dimac.mirployy);
                        mirploxx = parseInt(dimac.mirploxx);//akierapongos
                        notraspasar = dimac.notraspasar;

                        paredesplus = '<div id="paredesextras">' + paredesplushtm + '</div>';
                        //'+dimac.estilopared+'
                        kkallaki.innerHTML = paredesplus + '<img id="suelocasainicio" style="position: absolute;z-index: 5;"/><canvas style="position: absolute;z-Index: 4;" id="paredcasada"></canvas><canvas style="position: absolute;z-index: 4;" id="paredcasaia"></canvas><canvas style="position: absolute;z-index: 5;" id="suelocasa"></canvas>';


                        document.getElementById('sendmmte').setAttribute('data-h', 'n');
                        if (quitoglobinter) {
                            ////consola.log('quitoglobinter');
                            window.clearTimeout(quitoglobinter);

                        }

                        if (sisigotimeout) {
                            window.clearTimeout(sisigotimeout);
                        }
                        if (movigoyainter) {
                            window.clearInterval(movigoyainter);
                        }
                        movigoyainter = window.setInterval(movigoyas, 360);
                        //var pondrenumt=addvaaa(1,100);
                        ultnumt = numt;
                        mbailo = '';
                        //numt=pondrenumt;
                        mascos = {};
                        if (document.getElementById('myKekosu'))
                            document.getElementById('myKekosu').innerHTML = '';

                        ultihablo = '';
                        ultimoidpmuevocontrolmia = 0;
                        if (bebetimeout) {
                            ////////consola.log('borro bebetimeout');
                            window.clearTimeout(bebetimeout);
                        }
                        mbailo = '';
                        kekosusu = 0; borrar('susurrando');

                        kekosigno = [];
                        akiburbujastdd.innerHTML = '';
                        contiburbb = 0;
                        tengoidpelota = 0;
                        ffurscerv = {},
                            ffurs = {},
                            ffursidpc = {},
                            ffursidpt = [],
                            ffursencmaltur = {},
                            ffurscass = {},
                            ffursidp = {};
                        if (idpmuevo > 0) {
                            idpmuevo = 0; borrar('mueblemover');
                            if (modonolag == 'n')
                                document.getElementById('kekoall').addEventListener("mousemove", lolsolo, false);
                            document.getElementById('kekoall').removeEventListener("mousemove", movekekoall, false);
                        }
                        borrarclase('stikers');
                        //document.getElementById('kekoall').style.left='0px';
                        //document.getElementById('kekoall').style.top='0px';
                        //leftahor=0;
                        ////////consola.log(('dimac.conpowa'+dimac.conpowas);
                        verjuego();
                    }

                    //console.log(dimac.solopongos,' enboxyinicial ',enboxyinicial,' enboxxinicial ',enboxxinicial);
                    if (dimac.solopongos == 'salaextra') {
                        //salaextra
                        var creo = document.createElement('canvas');
                        creo.id = 'salaextrasuelo';
                        creo.className = 'absolute';
                        document.getElementById('kekoallaki').appendChild(creo);

                        creasuelopng('salaextrasuelo', dimac.estilosuelo, ployy, ploxx);


                        var posixz = trompaoz('-12', '4', 'f');
                        document.getElementById('salaextrasuelo').style.top = (posixz.etop + 18) + 'px';
                        document.getElementById('salaextrasuelo').style.left = posixz.eleft + 'px';
                        document.getElementById('salaextrasuelo').style.zIndex = 3;

                        if (dimac.estilosuelo >= 10)
                            document.getElementById('suelocasainicio').src = dominiobase + 'fly/i/suelosv5/suelo' + dimac.estilosuelo + '.png';
                        else
                            document.getElementById('suelocasainicio').src = dominiobase + 'fly/i/suelosv5/vacio.png';

                        creaparedpng('salaextranormal', dimac.estilopared, 0, ploxx, 'ia');

                        document.getElementById('paredsalaextranormalia').className = 'absolute';
                        document.getElementById('paredsalaextranormalia').style.zIndex = 2;
                        document.getElementById('paredsalaextranormalia').style.top = (posixz.etop - 91) + 'px';
                        document.getElementById('paredsalaextranormalia').style.left = (posixz.eleft - 8) + 'px';

                        creaparedpng('salaextranormal', dimac.estiloparedd, ployy, 0, 'da');
                        //paredsalaextranormal
                        document.getElementById('paredsalaextranormalda').className = 'absolute';
                        document.getElementById('paredsalaextranormalda').style.zIndex = 1;
                        document.getElementById('paredsalaextranormalda').style.top = (posixz.etop - 95) + 'px';
                        document.getElementById('paredsalaextranormalda').style.left = (posixz.eleft + 278) + 'px';


                    } else if (dimac.solopongos == 'no' || dimac.solopongos == 'si') {
                        if (dimac.conpowas == '2') {
                            pmoc = 'dueno';
                        } else if (dimac.conpowas == '1') {
                            pmoc = 'si';
                        } else {
                            pmoc = 'no';
                        }
                        yosocas = idcasa;
                        //dimegraph(ployy,ploxx,mesaespecial);
                        dimegraphvacio(ployy, ploxx);

                        var creaploy = ployy;
                        ////consola.log('ployy'+ployy+' ploxx'+ploxx+' mirployy'+mirployy+' mirploxx'+mirploxx);

                        if (ployy == 19 && ploxx == 17) {//casa 2 habitaciones
                            creaploy = 14;
                        }
                        if (ployy == 13 && ploxx == 11) {//casa de 2 pisos duplex 2 plantas
                            creaparedpng('abajo', dimac.estilopared, 0, 5, 'ia');
                            creaparedpng('arriba', dimac.estilopared, 0, 4, 'ia');
                            creaparedpng('arriba', dimac.estilopared, 13, 0, 'da');
                            creasuelopng('normal', dimac.estilosuelo, ployy, 4);
                            creasuelopng('abajo', dimac.estilosuelo, ployy, 5);

                            if (dimac.solopongos == 'no') {
                                ffurs = { '1c6': 'nmos', '2c6': 'nmos', '3c6': 'nmos', '4c6': 'nmos', '5c6': 'nmos', '6c6': 'nmos', '7c6': 'nmos', '8c6': 'nmos', '9c6': 'nmos', '10c6': 'nmos', '11c6': 'nmos', '12c6': 'nmos', '13c6': 'nmos' };
                            }
                        } else {
                            creasuelopng('normal', dimac.estilosuelo, ployy, ploxx);
                            creaparedpng('normal', dimac.estilopared, 0, ploxx, 'ia');
                        }
                        ////////consola.log(('ployy'+ployy+'cploxx'+ploxx);

                        if (dimac.solopongos == 'no') {
                            //if(mirployy == -8 && mirploxx == -9 && cuadroxsimultim > 6){

                            if (ployy == 13 && ploxx == 23) {//casa horizontal / puerta derecha

                                ffurs = { '0c2': 'nmos', '13c23': 'nmos', '12c23': 'nmos', '10c23': 'nmos', '9c23': 'nmos', '8c23': 'nmos', '7c23': 'nmos', '6c23': 'nmos', '5c23': 'nmos', '4c23': 'nmos', '3c23': 'nmos', '2c23': 'nmos', '1c23': 'nmos' };

                            } else if (ployy == 23 && ploxx == 21) {//casa con escaleras
                                ffurs = { '23c15': 'nmos', '22c15': 'nmos', '22c13': 'nmos', '21c15': 'nmos', '21c13': 'nmos', '20c15': 'nmos', '20c13': 'nmos', '19c15': 'nmos', '19c13': 'nmos', '18c15': 'nmos', '18c13': 'nmos', '17c15': 'nmos', '17c13': 'nmos', '16c15': 'nmos', '16c13': 'nmos', '15c15': 'nmos', '15c13': 'nmos', '14c15': 'nmos', '14c13': 'nmos', '13c15': 'nmos', '13c13': 'nmos', '12c15': 'nmos', '12c13': 'nmos', '11c15': 'nmos', '11c13': 'nmos', '10c15': 'nmos', '10c13': 'nmos', '9c15': 'nmos', '9c13': 'nmos', '8c15': 'nmos', '8c13': 'nmos', '8c12': 'nmos', '8c11': 'nmos', '8c10': 'nmos', '8c9': 'nmos', '8c8': 'nmos', '8c7': 'nmos', '8c6': 'nmos', '8c5': 'nmos', '8c4': 'nmos', '8c3': 'nmos', '8c2': 'nmos', '8c1': 'nmos', '8c0': 'nmos' };

                            } else if (ployy == 41 && ploxx == 39) {

                                ffurs = { '3c0': 'nmos', '4c0': 'nmos', '5c0': 'nmos', '6c0': 'nmos', '7c0': 'nmos', '8c0': 'nmos', '9c0': 'nmos', '10c0': 'nmos', '11c0': 'nmos', '12c0': 'nmos', '13c0': 'nmos', '14c0': 'nmos', '15c0': 'nmos', '16c0': 'nmos', '17c0': 'nmos', '18c0': 'nmos', '19c0': 'nmos', '20c0': 'nmos', '21c0': 'nmos', '22c0': 'nmos', '23c0': 'nmos', '24c0': 'nmos', '25c0': 'nmos', '26c0': 'nmos', '27c0': 'nmos', '28c0': 'nmos', '29c0': 'nmos', '30c0': 'nmos', '31c0': 'nmos', '32c0': 'nmos', '33c0': 'nmos', '34c0': 'nmos', '35c0': 'nmos', '36c0': 'nmos', '37c0': 'nmos', '38c0': 'nmos', '39c0': 'nmos', '40c0': 'nmos', '41c0': 'nmos', '4c1': 'nmos', '5c1': 'nmos', '6c1': 'nmos', '7c1': 'nmos', '8c1': 'nmos', '9c1': 'nmos', '10c1': 'nmos', '11c1': 'nmos', '12c1': 'nmos', '13c1': 'nmos', '14c1': 'nmos', '15c1': 'nmos', '16c1': 'nmos', '17c1': 'nmos', '18c1': 'nmos', '19c1': 'nmos', '20c1': 'nmos', '21c1': 'nmos', '22c1': 'nmos', '23c1': 'nmos', '24c1': 'nmos', '25c1': 'nmos', '26c1': 'nmos', '27c1': 'nmos', '28c1': 'nmos', '29c1': 'nmos', '30c1': 'nmos', '31c1': 'nmos', '32c1': 'nmos', '33c1': 'nmos', '34c1': 'nmos', '35c1': 'nmos', '36c1': 'nmos', '37c1': 'nmos', '38c1': 'nmos', '39c1': 'nmos', '40c1': 'nmos', '41c1': 'nmos', '5c2': 'nmos', '6c2': 'nmos', '7c2': 'nmos', '8c2': 'nmos', '9c2': 'nmos', '10c2': 'nmos', '11c2': 'nmos', '12c2': 'nmos', '13c2': 'nmos', '14c2': 'nmos', '15c2': 'nmos', '16c2': 'nmos', '17c2': 'nmos', '18c2': 'nmos', '19c2': 'nmos', '20c2': 'nmos', '21c2': 'nmos', '22c2': 'nmos', '23c2': 'nmos', '24c2': 'nmos', '25c2': 'nmos', '26c2': 'nmos', '27c2': 'nmos', '28c2': 'nmos', '29c2': 'nmos', '30c2': 'nmos', '31c2': 'nmos', '32c2': 'nmos', '33c2': 'nmos', '34c2': 'nmos', '35c2': 'nmos', '36c2': 'nmos', '37c2': 'nmos', '38c2': 'nmos', '39c2': 'nmos', '40c2': 'nmos', '41c2': 'nmos', '6c3': 'nmos', '7c3': 'nmos', '8c3': 'nmos', '9c3': 'nmos', '10c3': 'nmos', '11c3': 'nmos', '12c3': 'nmos', '13c3': 'nmos', '14c3': 'nmos', '15c3': 'nmos', '16c3': 'nmos', '17c3': 'nmos', '18c3': 'nmos', '19c3': 'nmos', '20c3': 'nmos', '21c3': 'nmos', '22c3': 'nmos', '23c3': 'nmos', '24c3': 'nmos', '25c3': 'nmos', '26c3': 'nmos', '27c3': 'nmos', '28c3': 'nmos', '29c3': 'nmos', '30c3': 'nmos', '31c3': 'nmos', '32c3': 'nmos', '33c3': 'nmos', '34c3': 'nmos', '35c3': 'nmos', '36c3': 'nmos', '37c3': 'nmos', '38c3': 'nmos', '39c3': 'nmos', '40c3': 'nmos', '41c3': 'nmos', '7c4': 'nmos', '8c4': 'nmos', '9c4': 'nmos', '10c4': 'nmos', '11c4': 'nmos', '12c4': 'nmos', '13c4': 'nmos', '14c4': 'nmos', '15c4': 'nmos', '16c4': 'nmos', '17c4': 'nmos', '18c4': 'nmos', '19c4': 'nmos', '20c4': 'nmos', '21c4': 'nmos', '22c4': 'nmos', '23c4': 'nmos', '24c4': 'nmos', '25c4': 'nmos', '26c4': 'nmos', '27c4': 'nmos', '28c4': 'nmos', '29c4': 'nmos', '30c4': 'nmos', '31c4': 'nmos', '32c4': 'nmos', '33c4': 'nmos', '34c4': 'nmos', '35c4': 'nmos', '36c4': 'nmos', '37c4': 'nmos', '38c4': 'nmos', '39c4': 'nmos', '40c4': 'nmos', '41c4': 'nmos', '8c5': 'nmos', '9c5': 'nmos', '10c5': 'nmos', '11c5': 'nmos', '12c5': 'nmos', '13c5': 'nmos', '14c5': 'nmos', '15c5': 'nmos', '16c5': 'nmos', '17c5': 'nmos', '18c5': 'nmos', '19c5': 'nmos', '20c5': 'nmos', '21c5': 'nmos', '22c5': 'nmos', '23c5': 'nmos', '24c5': 'nmos', '25c5': 'nmos', '26c5': 'nmos', '27c5': 'nmos', '28c5': 'nmos', '29c5': 'nmos', '30c5': 'nmos', '31c5': 'nmos', '32c5': 'nmos', '33c5': 'nmos', '34c5': 'nmos', '35c5': 'nmos', '36c5': 'nmos', '37c5': 'nmos', '38c5': 'nmos', '39c5': 'nmos', '40c5': 'nmos', '41c5': 'nmos', '9c6': 'nmos', '10c6': 'nmos', '11c6': 'nmos', '12c6': 'nmos', '13c6': 'nmos', '14c6': 'nmos', '15c6': 'nmos', '16c6': 'nmos', '17c6': 'nmos', '18c6': 'nmos', '19c6': 'nmos', '20c6': 'nmos', '21c6': 'nmos', '22c6': 'nmos', '23c6': 'nmos', '24c6': 'nmos', '25c6': 'nmos', '26c6': 'nmos', '27c6': 'nmos', '28c6': 'nmos', '29c6': 'nmos', '30c6': 'nmos', '31c6': 'nmos', '32c6': 'nmos', '33c6': 'nmos', '34c6': 'nmos', '35c6': 'nmos', '36c6': 'nmos', '37c6': 'nmos', '38c6': 'nmos', '39c6': 'nmos', '40c6': 'nmos', '41c6': 'nmos', '10c7': 'nmos', '11c7': 'nmos', '12c7': 'nmos', '13c7': 'nmos', '14c7': 'nmos', '15c7': 'nmos', '16c7': 'nmos', '17c7': 'nmos', '18c7': 'nmos', '19c7': 'nmos', '20c7': 'nmos', '21c7': 'nmos', '22c7': 'nmos', '23c7': 'nmos', '24c7': 'nmos', '25c7': 'nmos', '26c7': 'nmos', '27c7': 'nmos', '28c7': 'nmos', '29c7': 'nmos', '30c7': 'nmos', '31c7': 'nmos', '32c7': 'nmos', '33c7': 'nmos', '34c7': 'nmos', '35c7': 'nmos', '36c7': 'nmos', '37c7': 'nmos', '38c7': 'nmos', '39c7': 'nmos', '40c7': 'nmos', '41c7': 'nmos', '11c8': 'nmos', '12c8': 'nmos', '13c8': 'nmos', '14c8': 'nmos', '15c8': 'nmos', '16c8': 'nmos', '17c8': 'nmos', '18c8': 'nmos', '19c8': 'nmos', '20c8': 'nmos', '21c8': 'nmos', '22c8': 'nmos', '23c8': 'nmos', '24c8': 'nmos', '25c8': 'nmos', '26c8': 'nmos', '27c8': 'nmos', '28c8': 'nmos', '29c8': 'nmos', '30c8': 'nmos', '31c8': 'nmos', '32c8': 'nmos', '33c8': 'nmos', '34c8': 'nmos', '35c8': 'nmos', '36c8': 'nmos', '37c8': 'nmos', '38c8': 'nmos', '39c8': 'nmos', '40c8': 'nmos', '41c8': 'nmos', '12c9': 'nmos', '13c9': 'nmos', '14c9': 'nmos', '15c9': 'nmos', '16c9': 'nmos', '17c9': 'nmos', '18c9': 'nmos', '19c9': 'nmos', '20c9': 'nmos', '21c9': 'nmos', '22c9': 'nmos', '23c9': 'nmos', '24c9': 'nmos', '25c9': 'nmos', '26c9': 'nmos', '27c9': 'nmos', '28c9': 'nmos', '29c9': 'nmos', '30c9': 'nmos', '31c9': 'nmos', '32c9': 'nmos', '33c9': 'nmos', '34c9': 'nmos', '35c9': 'nmos', '36c9': 'nmos', '37c9': 'nmos', '38c9': 'nmos', '39c9': 'nmos', '40c9': 'nmos', '41c9': 'nmos', '13c10': 'nmos', '14c10': 'nmos', '15c10': 'nmos', '16c10': 'nmos', '17c10': 'nmos', '18c10': 'nmos', '19c10': 'nmos', '20c10': 'nmos', '21c10': 'nmos', '22c10': 'nmos', '23c10': 'nmos', '24c10': 'nmos', '25c10': 'nmos', '26c10': 'nmos', '27c10': 'nmos', '28c10': 'nmos', '29c10': 'nmos', '30c10': 'nmos', '31c10': 'nmos', '32c10': 'nmos', '33c10': 'nmos', '34c10': 'nmos', '35c10': 'nmos', '36c10': 'nmos', '37c10': 'nmos', '38c10': 'nmos', '39c10': 'nmos', '40c10': 'nmos', '41c10': 'nmos', '14c11': 'nmos', '15c11': 'nmos', '16c11': 'nmos', '17c11': 'nmos', '18c11': 'nmos', '19c11': 'nmos', '20c11': 'nmos', '21c11': 'nmos', '22c11': 'nmos', '23c11': 'nmos', '24c11': 'nmos', '25c11': 'nmos', '26c11': 'nmos', '27c11': 'nmos', '28c11': 'nmos', '29c11': 'nmos', '30c11': 'nmos', '31c11': 'nmos', '32c11': 'nmos', '33c11': 'nmos', '34c11': 'nmos', '35c11': 'nmos', '36c11': 'nmos', '37c11': 'nmos', '38c11': 'nmos', '39c11': 'nmos', '40c11': 'nmos', '41c11': 'nmos', '15c12': 'nmos', '16c12': 'nmos', '17c12': 'nmos', '18c12': 'nmos', '19c12': 'nmos', '20c12': 'nmos', '21c12': 'nmos', '22c12': 'nmos', '23c12': 'nmos', '24c12': 'nmos', '25c12': 'nmos', '26c12': 'nmos', '27c12': 'nmos', '28c12': 'nmos', '29c12': 'nmos', '30c12': 'nmos', '31c12': 'nmos', '32c12': 'nmos', '33c12': 'nmos', '34c12': 'nmos', '35c12': 'nmos', '36c12': 'nmos', '37c12': 'nmos', '38c12': 'nmos', '39c12': 'nmos', '40c12': 'nmos', '41c12': 'nmos', '16c13': 'nmos', '17c13': 'nmos', '18c13': 'nmos', '19c13': 'nmos', '20c13': 'nmos', '21c13': 'nmos', '22c13': 'nmos', '23c13': 'nmos', '24c13': 'nmos', '25c13': 'nmos', '26c13': 'nmos', '27c13': 'nmos', '28c13': 'nmos', '29c13': 'nmos', '30c13': 'nmos', '31c13': 'nmos', '32c13': 'nmos', '33c13': 'nmos', '34c13': 'nmos', '35c13': 'nmos', '36c13': 'nmos', '37c13': 'nmos', '38c13': 'nmos', '39c13': 'nmos', '40c13': 'nmos', '41c13': 'nmos', '17c14': 'nmos', '18c14': 'nmos', '19c14': 'nmos', '20c14': 'nmos', '21c14': 'nmos', '22c14': 'nmos', '23c14': 'nmos', '24c14': 'nmos', '25c14': 'nmos', '26c14': 'nmos', '27c14': 'nmos', '28c14': 'nmos', '29c14': 'nmos', '30c14': 'nmos', '31c14': 'nmos', '32c14': 'nmos', '33c14': 'nmos', '34c14': 'nmos', '35c14': 'nmos', '36c14': 'nmos', '37c14': 'nmos', '38c14': 'nmos', '39c14': 'nmos', '40c14': 'nmos', '41c14': 'nmos', '18c15': 'nmos', '19c15': 'nmos', '20c15': 'nmos', '21c15': 'nmos', '22c15': 'nmos', '23c15': 'nmos', '24c15': 'nmos', '25c15': 'nmos', '26c15': 'nmos', '27c15': 'nmos', '28c15': 'nmos', '29c15': 'nmos', '30c15': 'nmos', '31c15': 'nmos', '32c15': 'nmos', '33c15': 'nmos', '34c15': 'nmos', '35c15': 'nmos', '36c15': 'nmos', '37c15': 'nmos', '38c15': 'nmos', '39c15': 'nmos', '40c15': 'nmos', '41c15': 'nmos', '19c16': 'nmos', '20c16': 'nmos', '21c16': 'nmos', '22c16': 'nmos', '23c16': 'nmos', '24c16': 'nmos', '25c16': 'nmos', '26c16': 'nmos', '27c16': 'nmos', '28c16': 'nmos', '29c16': 'nmos', '30c16': 'nmos', '31c16': 'nmos', '32c16': 'nmos', '33c16': 'nmos', '34c16': 'nmos', '35c16': 'nmos', '36c16': 'nmos', '37c16': 'nmos', '38c16': 'nmos', '39c16': 'nmos', '40c16': 'nmos', '41c16': 'nmos', '20c17': 'nmos', '21c17': 'nmos', '22c17': 'nmos', '23c17': 'nmos', '24c17': 'nmos', '25c17': 'nmos', '26c17': 'nmos', '27c17': 'nmos', '28c17': 'nmos', '29c17': 'nmos', '30c17': 'nmos', '31c17': 'nmos', '32c17': 'nmos', '33c17': 'nmos', '34c17': 'nmos', '35c17': 'nmos', '36c17': 'nmos', '37c17': 'nmos', '38c17': 'nmos', '39c17': 'nmos', '40c17': 'nmos', '41c17': 'nmos', '21c18': 'nmos', '22c18': 'nmos', '23c18': 'nmos', '24c18': 'nmos', '25c18': 'nmos', '26c18': 'nmos', '27c18': 'nmos', '28c18': 'nmos', '29c18': 'nmos', '30c18': 'nmos', '31c18': 'nmos', '32c18': 'nmos', '33c18': 'nmos', '34c18': 'nmos', '35c18': 'nmos', '36c18': 'nmos', '37c18': 'nmos', '38c18': 'nmos', '39c18': 'nmos', '40c18': 'nmos', '41c18': 'nmos', '22c19': 'nmos', '23c19': 'nmos', '24c19': 'nmos', '25c19': 'nmos', '26c19': 'nmos', '27c19': 'nmos', '28c19': 'nmos', '29c19': 'nmos', '30c19': 'nmos', '31c19': 'nmos', '32c19': 'nmos', '33c19': 'nmos', '34c19': 'nmos', '35c19': 'nmos', '36c19': 'nmos', '37c19': 'nmos', '38c19': 'nmos', '39c19': 'nmos', '40c19': 'nmos', '41c19': 'nmos', '23c20': 'nmos', '24c20': 'nmos', '25c20': 'nmos', '26c20': 'nmos', '27c20': 'nmos', '28c20': 'nmos', '29c20': 'nmos', '30c20': 'nmos', '31c20': 'nmos', '32c20': 'nmos', '33c20': 'nmos', '34c20': 'nmos', '35c20': 'nmos', '36c20': 'nmos', '37c20': 'nmos', '38c20': 'nmos', '39c20': 'nmos', '40c20': 'nmos', '41c20': 'nmos', '24c21': 'nmos', '25c21': 'nmos', '26c21': 'nmos', '27c21': 'nmos', '28c21': 'nmos', '29c21': 'nmos', '30c21': 'nmos', '31c21': 'nmos', '32c21': 'nmos', '33c21': 'nmos', '34c21': 'nmos', '35c21': 'nmos', '36c21': 'nmos', '37c21': 'nmos', '38c21': 'nmos', '39c21': 'nmos', '40c21': 'nmos', '41c21': 'nmos', '25c22': 'nmos', '26c22': 'nmos', '27c22': 'nmos', '28c22': 'nmos', '29c22': 'nmos', '30c22': 'nmos', '31c22': 'nmos', '32c22': 'nmos', '33c22': 'nmos', '34c22': 'nmos', '35c22': 'nmos', '36c22': 'nmos', '37c22': 'nmos', '38c22': 'nmos', '39c22': 'nmos', '40c22': 'nmos', '41c22': 'nmos', '26c23': 'nmos', '27c23': 'nmos', '28c23': 'nmos', '29c23': 'nmos', '30c23': 'nmos', '31c23': 'nmos', '32c23': 'nmos', '33c23': 'nmos', '34c23': 'nmos', '35c23': 'nmos', '36c23': 'nmos', '37c23': 'nmos', '38c23': 'nmos', '39c23': 'nmos', '40c23': 'nmos', '41c23': 'nmos', '27c24': 'nmos', '28c24': 'nmos', '29c24': 'nmos', '30c24': 'nmos', '31c24': 'nmos', '32c24': 'nmos', '33c24': 'nmos', '34c24': 'nmos', '35c24': 'nmos', '36c24': 'nmos', '37c24': 'nmos', '38c24': 'nmos', '39c24': 'nmos', '40c24': 'nmos', '41c24': 'nmos', '28c25': 'nmos', '29c25': 'nmos', '30c25': 'nmos', '31c25': 'nmos', '32c25': 'nmos', '33c25': 'nmos', '34c25': 'nmos', '35c25': 'nmos', '36c25': 'nmos', '37c25': 'nmos', '38c25': 'nmos', '39c25': 'nmos', '40c25': 'nmos', '41c25': 'nmos', '29c26': 'nmos', '30c26': 'nmos', '31c26': 'nmos', '32c26': 'nmos', '33c26': 'nmos', '34c26': 'nmos', '35c26': 'nmos', '36c26': 'nmos', '37c26': 'nmos', '38c26': 'nmos', '39c26': 'nmos', '40c26': 'nmos', '41c26': 'nmos', '30c27': 'nmos', '31c27': 'nmos', '32c27': 'nmos', '33c27': 'nmos', '34c27': 'nmos', '35c27': 'nmos', '36c27': 'nmos', '37c27': 'nmos', '38c27': 'nmos', '39c27': 'nmos', '40c27': 'nmos', '41c27': 'nmos', '31c28': 'nmos', '32c28': 'nmos', '33c28': 'nmos', '34c28': 'nmos', '35c28': 'nmos', '36c28': 'nmos', '37c28': 'nmos', '38c28': 'nmos', '39c28': 'nmos', '40c28': 'nmos', '41c28': 'nmos', '32c29': 'nmos', '33c29': 'nmos', '34c29': 'nmos', '35c29': 'nmos', '36c29': 'nmos', '37c29': 'nmos', '38c29': 'nmos', '39c29': 'nmos', '40c29': 'nmos', '41c29': 'nmos', '33c30': 'nmos', '34c30': 'nmos', '35c30': 'nmos', '36c30': 'nmos', '37c30': 'nmos', '38c30': 'nmos', '39c30': 'nmos', '40c30': 'nmos', '41c30': 'nmos', '34c31': 'nmos', '35c31': 'nmos', '36c31': 'nmos', '37c31': 'nmos', '38c31': 'nmos', '39c31': 'nmos', '40c31': 'nmos', '41c31': 'nmos', '35c32': 'nmos', '36c32': 'nmos', '37c32': 'nmos', '38c32': 'nmos', '39c32': 'nmos', '40c32': 'nmos', '41c32': 'nmos', '36c33': 'nmos', '37c33': 'nmos', '38c33': 'nmos', '39c33': 'nmos', '40c33': 'nmos', '41c33': 'nmos', '37c34': 'nmos', '38c34': 'nmos', '39c34': 'nmos', '40c34': 'nmos', '41c34': 'nmos', '38c35': 'nmos', '39c35': 'nmos', '40c35': 'nmos', '41c35': 'nmos', '39c36': 'nmos', '40c36': 'nmos', '41c36': 'nmos', '40c37': 'nmos', '41c37': 'nmos' };

                            } else if (ployy == 27 && ploxx == 25) {
                                ffurs = { '8c6': 'nmos', '9c6': 'nmos', '10c6': 'nmos', '11c6': 'nmos', '12c6': 'nmos', '13c6': 'nmos', '14c6': 'nmos', '15c6': 'nmos', '16c6': 'nmos', '17c6': 'nmos', '18c6': 'nmos', '19c6': 'nmos', '8c7': 'nmos', '19c7': 'nmos', '8c8': 'nmos', '19c8': 'nmos', '8c9': 'nmos', '19c9': 'nmos', '8c10': 'nmos', '19c10': 'nmos', '8c11': 'nmos', '19c11': 'nmos', '8c12': 'nmos', '19c12': 'nmos', '8c13': 'nmos', '19c13': 'nmos', '8c14': 'nmos', '19c14': 'nmos', '8c15': 'nmos', '19c15': 'nmos', '8c16': 'nmos', '19c16': 'nmos', '8c17': 'nmos', '19c17': 'nmos', '8c18': 'nmos', '19c18': 'nmos', '8c19': 'nmos', '19c19': 'nmos', '8c20': 'nmos', '9c20': 'nmos', '10c20': 'nmos', '11c20': 'nmos', '12c20': 'nmos', '13c20': 'nmos', '14c20': 'nmos', '15c20': 'nmos', '16c20': 'nmos', '17c20': 'nmos', '18c20': 'nmos', '19c20': 'nmos' };
                            }
                            else if (ployy == 17 && ploxx == 15) {//casa de 3 habitaciones

                                ffurs = { '1c4': 'nmos', '2c4': 'nmos', '4c4': 'nmos', '5c4': 'nmos', '6c4': 'nmos', '7c4': 'nmos', '8c4': 'nmos', '9c4': 'nmos', '10c4': 'nmos', '11c4': 'nmos', '12c4': 'nmos', '13c4': 'nmos', '14c4': 'nmos', '15c4': 'nmos', '16c4': 'nmos', '17c4': 'nmos', '1c5': 'nmos', '4c5': 'nmos', '5c5': 'nmos', '6c5': 'nmos', '7c5': 'nmos', '8c5': 'nmos', '9c5': 'nmos', '10c5': 'nmos', '11c5': 'nmos', '12c5': 'nmos', '13c5': 'nmos', '14c5': 'nmos', '15c5': 'nmos', '16c5': 'nmos', '17c5': 'nmos', '1c6': 'nmos', '4c6': 'nmos', '5c6': 'nmos', '6c6': 'nmos', '7c6': 'nmos', '8c6': 'nmos', '9c6': 'nmos', '10c6': 'nmos', '11c6': 'nmos', '12c6': 'nmos', '13c6': 'nmos', '14c6': 'nmos', '15c6': 'nmos', '16c6': 'nmos', '17c6': 'nmos', '1c7': 'nmos', '4c7': 'nmos', '5c7': 'nmos', '6c7': 'nmos', '7c7': 'nmos', '8c7': 'nmos', '9c7': 'nmos', '10c7': 'nmos', '11c7': 'nmos', '12c7': 'nmos', '13c7': 'nmos', '14c7': 'nmos', '15c7': 'nmos', '16c7': 'nmos', '17c7': 'nmos', '1c8': 'nmos', '10c8': 'nmos', '11c8': 'nmos', '12c8': 'nmos', '13c8': 'nmos', '14c8': 'nmos', '15c8': 'nmos', '16c8': 'nmos', '17c8': 'nmos', '1c9': 'nmos', '10c9': 'nmos', '11c9': 'nmos', '1c10': 'nmos', '10c10': 'nmos', '11c10': 'nmos', '1c11': 'nmos', '1c12': 'nmos', '1c13': 'nmos', '1c14': 'nmos', '1c15': 'nmos', '2c15': 'nmos', '3c15': 'nmos', '4c15': 'nmos', '5c15': 'nmos', '6c15': 'nmos', '7c15': 'nmos', '8c15': 'nmos', '9c15': 'nmos', '10c15': 'nmos', '11c15': 'nmos', '12c15': 'nmos', '13c15': 'nmos', '14c15': 'nmos', '15c15': 'nmos', '16c15': 'nmos', '17c15': 'nmos' };

                            } else if (ployy == 19 && ploxx == 17) {//casa 2 habitaciones
                                ////consola.log('casa de 2habitacioness');
                                ffurs = { '1c8': 'nmos', '2c8': 'nmos', '3c8': 'nmos', '4c8': 'nmos', '5c8': 'nmos', '6c8': 'nmos', '7c8': 'nmos', '12c8': 'nmos', '13c8': 'nmos', '14c8': 'nmos', '15c8': 'nmos', '16c8': 'nmos', '17c8': 'nmos', '18c8': 'nmos', '19c8': 'nmos', '1c9': 'nmos', '2c9': 'nmos', '3c9': 'nmos', '4c9': 'nmos', '5c9': 'nmos', '6c9': 'nmos', '7c9': 'nmos', '12c9': 'nmos', '13c9': 'nmos', '14c9': 'nmos', '15c9': 'nmos', '16c9': 'nmos', '17c9': 'nmos', '18c9': 'nmos', '19c9': 'nmos', '1c10': 'nmos', '2c10': 'nmos', '3c10': 'nmos', '4c10': 'nmos', '5c10': 'nmos', '6c10': 'nmos', '7c10': 'nmos', '12c10': 'nmos', '13c10': 'nmos', '14c10': 'nmos', '15c10': 'nmos', '16c10': 'nmos', '17c10': 'nmos', '18c10': 'nmos', '19c10': 'nmos', '1c11': 'nmos', '2c11': 'nmos', '3c11': 'nmos', '4c11': 'nmos', '5c11': 'nmos', '6c11': 'nmos', '7c11': 'nmos', '12c11': 'nmos', '13c11': 'nmos', '14c11': 'nmos', '15c11': 'nmos', '16c11': 'nmos', '17c11': 'nmos', '18c11': 'nmos', '19c11': 'nmos', '1c12': 'nmos', '2c12': 'nmos', '17c12': 'nmos', '18c12': 'nmos', '19c12': 'nmos', '1c13': 'nmos', '2c13': 'nmos', '17c13': 'nmos', '18c13': 'nmos', '19c13': 'nmos', '1c14': 'nmos', '2c14': 'nmos', '17c14': 'nmos', '18c14': 'nmos', '19c14': 'nmos', '1c15': 'nmos', '2c15': 'nmos', '17c15': 'nmos', '18c15': 'nmos', '19c15': 'nmos', '1c16': 'nmos', '2c16': 'nmos', '3c16': 'nmos', '4c16': 'nmos', '5c16': 'nmos', '6c16': 'nmos', '7c16': 'nmos', '8c16': 'nmos', '9c16': 'nmos', '10c16': 'nmos', '11c16': 'nmos', '12c16': 'nmos', '13c16': 'nmos', '14c16': 'nmos', '15c16': 'nmos', '16c16': 'nmos', '17c16': 'nmos', '18c16': 'nmos', '19c16': 'nmos', '1c17': 'nmos', '2c17': 'nmos', '3c17': 'nmos', '4c17': 'nmos', '5c17': 'nmos', '6c17': 'nmos', '7c17': 'nmos', '8c17': 'nmos', '9c17': 'nmos', '10c17': 'nmos', '11c17': 'nmos', '12c17': 'nmos', '13c17': 'nmos', '14c17': 'nmos', '15c17': 'nmos', '16c17': 'nmos', '17c17': 'nmos', '18c17': 'nmos', '19c17': 'nmos' };
                            } else if (ployy == 29 && ploxx == 27) {//casa L
                                ////////consola.log(('soy una L');
                                ffurs = { '12c0': 'nmos', '13c0': 'nmos', '14c0': 'nmos', '15c0': 'nmos', '16c0': 'nmos', '17c0': 'nmos', '18c0': 'nmos', '19c0': 'nmos', '20c0': 'nmos', '21c0': 'nmos', '22c0': 'nmos', '23c0': 'nmos', '24c0': 'nmos', '25c0': 'nmos', '26c0': 'nmos', '27c0': 'nmos', '28c0': 'nmos', '29c0': 'nmos', '12c1': 'nmos', '13c1': 'nmos', '14c1': 'nmos', '15c1': 'nmos', '16c1': 'nmos', '17c1': 'nmos', '18c1': 'nmos', '19c1': 'nmos', '20c1': 'nmos', '21c1': 'nmos', '22c1': 'nmos', '23c1': 'nmos', '24c1': 'nmos', '25c1': 'nmos', '26c1': 'nmos', '27c1': 'nmos', '28c1': 'nmos', '29c1': 'nmos', '12c2': 'nmos', '13c2': 'nmos', '14c2': 'nmos', '15c2': 'nmos', '16c2': 'nmos', '17c2': 'nmos', '18c2': 'nmos', '19c2': 'nmos', '20c2': 'nmos', '21c2': 'nmos', '22c2': 'nmos', '23c2': 'nmos', '24c2': 'nmos', '25c2': 'nmos', '26c2': 'nmos', '27c2': 'nmos', '28c2': 'nmos', '29c2': 'nmos', '12c3': 'nmos', '13c3': 'nmos', '14c3': 'nmos', '15c3': 'nmos', '16c3': 'nmos', '17c3': 'nmos', '18c3': 'nmos', '19c3': 'nmos', '20c3': 'nmos', '21c3': 'nmos', '22c3': 'nmos', '23c3': 'nmos', '24c3': 'nmos', '25c3': 'nmos', '26c3': 'nmos', '27c3': 'nmos', '28c3': 'nmos', '29c3': 'nmos', '12c4': 'nmos', '13c4': 'nmos', '14c4': 'nmos', '15c4': 'nmos', '16c4': 'nmos', '17c4': 'nmos', '18c4': 'nmos', '19c4': 'nmos', '20c4': 'nmos', '21c4': 'nmos', '22c4': 'nmos', '23c4': 'nmos', '24c4': 'nmos', '25c4': 'nmos', '26c4': 'nmos', '27c4': 'nmos', '28c4': 'nmos', '29c4': 'nmos', '12c5': 'nmos', '13c5': 'nmos', '14c5': 'nmos', '15c5': 'nmos', '16c5': 'nmos', '17c5': 'nmos', '18c5': 'nmos', '19c5': 'nmos', '20c5': 'nmos', '21c5': 'nmos', '22c5': 'nmos', '23c5': 'nmos', '24c5': 'nmos', '25c5': 'nmos', '26c5': 'nmos', '27c5': 'nmos', '28c5': 'nmos', '29c5': 'nmos', '12c6': 'nmos', '13c6': 'nmos', '14c6': 'nmos', '15c6': 'nmos', '16c6': 'nmos', '17c6': 'nmos', '18c6': 'nmos', '19c6': 'nmos', '20c6': 'nmos', '21c6': 'nmos', '22c6': 'nmos', '23c6': 'nmos', '24c6': 'nmos', '25c6': 'nmos', '26c6': 'nmos', '27c6': 'nmos', '28c6': 'nmos', '29c6': 'nmos', '12c7': 'nmos', '13c7': 'nmos', '14c7': 'nmos', '15c7': 'nmos', '16c7': 'nmos', '17c7': 'nmos', '18c7': 'nmos', '19c7': 'nmos', '20c7': 'nmos', '21c7': 'nmos', '22c7': 'nmos', '23c7': 'nmos', '24c7': 'nmos', '25c7': 'nmos', '26c7': 'nmos', '27c7': 'nmos', '28c7': 'nmos', '29c7': 'nmos', '12c8': 'nmos', '13c8': 'n}mos', '14c8': 'nmos', '15c8': 'nmos', '16c8': 'nmos', '17c8': 'nmos', '18c8': 'nmos', '19c8': 'nmos', '20c8': 'nmos', '21c8': 'nmos', '22c8': 'nmos', '23c8': 'nmos', '24c8': 'nmos', '25c8': 'nmos', '26c8': 'nmos', '27c8': 'nmos', '28c8': 'nmos', '29c8': 'nmos', '12c9': 'nmos', '13c9': 'nmos', '14c9': 'nmos', '15c9': 'nmos', '16c9': 'nmos', '17c9': 'nmos', '18c9': 'nmos', '19c9': 'nmos', '20c9': 'nmos', '21c9': 'nmos', '22c9': 'nmos', '23c9': 'nmos', '24c9': 'nmos', '25c9': 'nmos', '26c9': 'nmos', '27c9': 'nmos', '28c9': 'nmos', '29c9': 'nmos', '12c10': 'nmos', '13c10': 'nmos', '14c10': 'nmos', '15c10': 'nmos', '16c10': 'nmos', '17c10': 'nmos', '18c10': 'nmos', '19c10': 'nmos', '20c10': 'nmos', '21c10': 'nmos', '22c10': 'nmos', '23c10': 'nmos', '24c10': 'nmos', '25c10': 'nmos', '26c10': 'nmos', '27c10': 'nmos', '28c10': 'nmos', '29c10': 'nmos', '12c11': 'nmos', '13c11': 'nmos', '14c11': 'nmos', '15c11': 'nmos', '16c11': 'nmos', '17c11': 'nmos', '18c11': 'nmos', '19c11': 'nmos', '20c11': 'nmos', '21c11': 'nmos', '22c11': 'nmos', '23c11': 'nmos', '24c11': 'nmos', '25c11': 'nmos', '26c11': 'nmos', '27c11': 'nmos', '28c11': 'nmos', '29c11': 'nmos', '12c12': 'nmos', '13c12': 'nmos', '14c12': 'nmos', '15c12': 'nmos', '16c12': 'nmos', '17c12': 'nmos', '18c12': 'nmos', '19c12': 'nmos', '20c12': 'nmos', '21c12': 'nmos', '22c12': 'nmos', '23c12': 'nmos', '24c12': 'nmos', '25c12': 'nmos', '26c12': 'nmos', '27c12': 'nmos', '28c12': 'nmos', '29c12': 'nmos', '12c13': 'nmos', '13c13': 'nmos', '14c13': 'nmos', '15c13': 'nmos', '16c13': 'nmos', '17c13': 'nmos', '18c13': 'nmos', '19c13': 'nmos', '20c13': 'nmos', '21c13': 'nmos', '22c13': 'nmos', '23c13': 'nmos', '24c13': 'nmos', '25c13': 'nmos', '26c13': 'nmos', '27c13': 'nmos', '28c13': 'nmos', '29c13': 'nmos', '12c14': 'nmos', '13c14': 'nmos', '14c14': 'nmos', '15c14': 'nmos', '16c14': 'nmos', '17c14': 'nmos', '18c14': 'nmos', '19c14': 'nmos', '20c14': 'nmos', '21c14': 'nmos', '22c14': 'nmos', '23c14': 'nmos', '24c14': 'nmos', '25c14': 'nmos', '26c14': 'nmos', '27c14': 'nmos', '28c14': 'nmos', '29c14': 'nmos', '12c15': 'nmos', '13c15': 'nmos', '14c15': 'nmos', '15c15': 'nmos', '16c15': 'nmos', '17c15': 'nmos', '18c15': 'nmos', '19c15': 'nmos', '20c15': 'nmos', '21c15': 'nmos', '22c15': 'nmos', '23c15': 'nmos', '24c15': 'nmos', '25c15': 'nmos', '26c15': 'nmos', '27c15': 'nmos', '28c15': 'nmos', '29c15': 'nmos', '12c16': 'nmos', '13c16': 'nmos', '14c16': 'nmos', '15c16': 'nmos', '16c16': 'nmos', '17c16': 'nmos', '18c16': 'nmos', '19c16': 'nmos', '20c16': 'nmos', '21c16': 'nmos', '22c16': 'nmos', '23c16': 'nmos', '24c16': 'nmos', '25c16': 'nmos', '26c16': 'nmos', '27c16': 'nmos', '28c16': 'nmos', '29c16': 'nmos' };
                            }
                        }

                        creaparedpng('normal', dimac.estiloparedd, creaploy, 0, 'da');
                        if (dimac.solopongos == 'no') {

                            katman('ventryatoy', idcasa);
                            cargandooo('ok');
                        }


                        var paredesdentrodivclas = 'skewiz';
                        var paredesdentroimaclas = 'skewde';
                        var posixz = trompaoz(enboxyinicial, enboxxinicial, 'f');
                        var tipopare = '-' + dimac.estilopared + '';

                        if (dimac.estilopared >= 10 && pongopare != 'n')
                            pongopare = 's';
                        var paredesdentroimaclasprimera = 'extraparedencima ' + paredesdentroimaclas;
                        var paredesdentroimaclassegunda = 'extraparedabajo ' + paredesdentroimaclas;
                        document.getElementById('paredesextras').style.top = (posixz.etop - 66) + 'px';
                        document.getElementById('paredesextras').style.left = (posixz.eleft - 43) + 'px';

                        document.getElementById('suelocasainicio').style.top = posixz.etop + 'px';
                        document.getElementById('suelocasainicio').style.left = posixz.eleft + 'px';

                        //ESTO PONDRIA PUERTA DERECHA
                        if (ployy == 13 && ploxx == 23) {
                            paredesdentrodivclas = 'skewde';
                            paredesdentroimaclas = 'skewiz';
                            paredesdentroimaclasprimera = 'extraparedabajorigh ' + paredesdentroimaclas;
                            paredesdentroimaclassegunda = 'extraparedencima ' + paredesdentroimaclas;
                            posixz = trompaoz(11, 23, 'f');
                            tipopare = '2-' + dimac.estiloparedd + '';
                            document.getElementById('paredesextras').style.top = (posixz.etop - 64) + 'px';
                            document.getElementById('paredesextras').style.left = (posixz.eleft + 27) + 'px';

                            //document.getElementById('suelocasainicio').style.top=(posixz.etop)+'px';
                            //document.getElementById('suelocasainicio').style.left=(posixz.eleft-82)+'px';
                            document.getElementById('suelocasainicio').style.top = posixz.etop + 'px';
                            document.getElementById('suelocasainicio').style.left = posixz.eleft + 'px';

                        }
                        if (dimac.estiloparedd >= 10 && pongopare != 'n')
                            pongopare = 's';
                        else
                            pongopare = 'n';

                        if (dimac.estilosuelo >= 10)
                            document.getElementById('suelocasainicio').src = dominiobase + 'fly/i/suelosv5/suelo' + dimac.estilosuelo + '.png';
                        else
                            document.getElementById('suelocasainicio').src = dominiobase + 'fly/i/suelosv5/vacio.png';


                        document.getElementById('paredesextras').className = 'paredesextra ' + paredesdentrodivclas;
                        if (pongopare == 's')
                            paredesplushtm = '<img class="' + paredesdentroimaclasprimera + '"' +
                                'src="' + dominiobase + 'fly/i/suelosv5/pared' + tipopare + '.png"/><img class="' + paredesdentroimaclassegunda + '"' +
                                'src="' + dominiobase + 'fly/i/suelosv5/pared' + tipopare + '.png"/>';
                        else
                            paredesplushtm = '';

                        document.getElementById('paredesextras').innerHTML = paredesplushtm;

                    }
                }
            },
            oler = function (kpaso) {
                //////////////consola.log('oler'+kpaso.error);
                var kdigo = kpaso.error;//nolang todos abajo

                switch (kpaso.error) {
                    case 'nomequedanmegustas':
                        kdigo = iw[210];
                        break;
                    case 'yasolicit':
                        kdigo = iw[211];
                        break;
                    case 'sinhelperson':
                        kdigo = iw[212];
                        borrar('crearsos');
                        vextr['estoyhelper'] = 0;
                        break;
                    case 'noestaencasa':
                        kdigo = iw[213];
                        break;
                    case 'nocambiable':
                        kdigo = iw[214];
                        break;
                    case 'yaesamig':
                        kdigo = iw[215];
                        break;
                    case 'esperatoke':
                        kdigo = iw[216];
                        break;
                    case 'revisasoli':
                        agregaramigo('btnamigo', kpaso.para, 2);
                        kdigo = '';//en blanco OK
                        //kdigo='Este Keko ya ha solicitado ser tu amigo, revisa tus solicitudes de amistad y aprueba la suya para ser su amigo.';
                        break;
                    case 'errsoliamista':
                        kdigo = iw[217];
                        break;
                    case 'fullhom'://OJOAKI sino existe casa o esta full y el keko no esta en ninguna casa ir a otra casa
                        kdigo = iw[218];
                        if (yosocas == 0) {
                            bowb = 'no'; mresulta = [];
                            katman('kickeame');
                        }
                        break;
                    case 'tehanmatado'://OJOAKI sino existe casa o esta full y el keko no esta en ninguna casa ir a otra casa
                        kdigo = iw[219];
                        bowb = 'no'; mresulta = [];
                        katman('kickeame');
                        break;
                    case 'bandecasa'://OJOAKI sino existe casa o esta full y el keko no esta en ninguna casa ir a otra casa
                        kdigo = iw[220];
                        if (kpaso.idcas == yosocas || yosocas == 0) {
                            katman('salirdecasa');
                            window.location = '#/home';
                            yosocas = 0;
                        }
                        break;
                    case 'nexhom':
                        kdigo = iw[221];
                        if (yosocas == 0) {
                            bowb = 'no'; mresulta = [];
                            katman('kickeame');
                        }
                        break;
                    case 'staocupc':
                        kdigo = iw[222];
                        break;
                    case 'no_tiempo_juego':
                        kdigo = "Tu o el keko que intenta hacer accion no lleva 3 horas jugando.";
                        break;
                    case 'descootropc':
                        kdigo = iw[223];
                        break;
                }
                if (kdigo != '') {
                    winsor('myAle', 'Alerta', kdigo, '', '', '');//nolang
                }

            },
            mal = function (kpaso) {
                var nada = 'na';//OJOAKI
                vextr['haymal'] = 'si';
                var kdigo = kpaso;//nolang todos abajo

                switch (kpaso) {
                    case 'logd':
                        kdigo = iw[224];
                        break;
                }
                cargandooo(kdigo);
            },
            globonotismov = function (cntrl) {
                var ggnott = document.getElementById('globosnoti');
                if (ggnott && ggnott.getAttribute('data-cntrl') == cntrl) {
                    var vesabotom = 0;
                    //////////////consola.log('vesabotom'+vesabotom+'era'+ggnott.style.bottom);
                    if (ggnott.style.bottom == '70px') {
                        vesabotom = 60;
                    } else {
                        vesabotom = 10;
                    }
                    ggnott.style.bottom = vesabotom + 'px';
                    ggnott.style.opacity = 1;


                    window.setTimeout(globonotismovborra, 7000, cntrl);

                }
            },
            globonotismovborra = function (cntrl) {
                if (document.getElementById('globosnoti') && document.getElementById('globosnoti').getAttribute('data-cntrl') == cntrl) {
                    borrar('globosnoti');
                }
            },
            recibo = function (datipobola, datipo, tip, idkeko, keko, estemin, idinse, quehoraes, extras) {
                ////

                ////////////consola.log('recibo datipobola'+datipobola+' datipo'+datipo+' tip'+tip+' idkeko'+idkeko+' keko'+keko+'estemin'+estemin);//OJOAKI

                var pongoglobo = 's';
                //globosnoti
                if (document.getElementById('boli' + datipobola)) {
                    var ahorn = parseInt(document.getElementById('boli' + datipobola).innerHTML);
                    ahorn++;
                    if (ahorn > 0) {
                        document.getElementById('boli' + datipobola).innerHTML = ahorn;
                        document.getElementById('boli' + datipobola).style.display = 'inline';
                    } else {
                        document.getElementById('boli' + datipobola).innerHTML = 0;
                        document.getElementById('boli' + datipobola).style.display = 'none';
                    }

                    addClass(document.getElementById('boli' + datipobola), 'wow');

                    window.setTimeout(removeClass, 2000, document.getElementById('boli' + datipobola), 'wow');

                }

                var urlfotoya = urlperfils + estemin;

                if (estemin != 'default.png' && estemin != 'casa.png' && estemin != '') {
                    urlfotoya = urlperfils + 'resiz.php?src=' + estemin + '&h=32&w=32';
                } else {
                    urlfotoya = '/uploads/default.png';
                }

                var textoaponer = "<img src='" + urlfotoya + "' class='radius fleft radinoti'/>";

                textoaponer += '<img src="' + dominiobase + 'imagesnew/app/closee.gif" class="fright cerrar" onclick="this.parentNode.parentNode.removeChild(this.parentNode);void(0);">';
                switch (datipo) {
                    case 'amigos'://nolang
                        textoaponer += '<b>' + keko + '</b> ' + iw[225];
                        vextr['peti' + idkeko] = 2;
                        break;
                    case 'notis'://nolang
                        switch (tip) {
                            case '1':
                                misamigs['k' + idkeko] = keko;
                                misamigsm['k' + idkeko] = estemin;
                                cargamovil(idkeko);
                                textoaponer += '<b>' + keko + '</b> ' + iw[226];
                                //if(document.getElementById('cartakekon') && document.getElementById('cartakekon').getAttribute('data-idkekglobo')==idkeko){
                                //borrar('cartakekon');
                                //clickeko('','',idkeko);
                                //}
                                //nolang
                                kmensaj("imagesnew/soni/online.mp3", "" + keko + "", idkeko, estemin, iw[227]);


                                soni('imagesnew/soni/pop.mp3');
                                recibolista({ datipobola: 'notis', datipo: 'notis', tip: tip, de: idkeko, esimagenmini: estemin, keko: keko, id: idinse, ahor: quehoraes, fech: quehoraes });

                                break;
                            case '2':
                            case 2:
                                textoaponer += '<b>' + keko + '</b> ' + iw[228];

                                soni('imagesnew/soni/pop.mp3');
                                recibolista({ datipobola: 'notis', datipo: 'notis', tip: tip, de: idkeko, esimagenmini: estemin, keko: keko, id: idinse, ahor: quehoraes, fech: quehoraes });
                                if (vextr['toq' + idkeko]) {
                                    delete vextr['toq' + idkeko];
                                }
                                btnnntoque('btntoqueperfil', 'carga');
                                break;
                            case '4':
                            case 4:
                                textoaponer += '<b>' + keko + '</b> ' + iw[229];

                                soni('imagesnew/soni/pop.mp3');
                                recibolista({ datipobola: 'notis', datipo: 'notis', tip: tip, de: idkeko, esimagenmini: estemin, keko: keko, id: idinse, ahor: quehoraes, fech: quehoraes });
                                //if(vextr['toq'+idkeko]){
                                //delete vextr['toq'+idkeko];
                                //}
                                //btnnntoque('btntoqueperfil','carga');
                                break;
                            case '5':
                            case 5:
                                textoaponer += '<b>' + keko + '</b> ' + iw[230];

                                soni('imagesnew/soni/pop.mp3');
                                recibolista({ datipobola: 'notis', datipo: 'notis', tip: tip, de: idkeko, esimagenmini: estemin, keko: keko, id: idinse, ahor: quehoraes, fech: quehoraes });
                                //if(vextr['toq'+idkeko]){
                                //delete vextr['toq'+idkeko];
                                //}
                                //btnnntoque('btntoqueperfil','carga');
                                break;
                            case '6':
                            case 6://publico en mi muro
                                textoaponer += '<b>' + keko + '</b> ' + iw[231];

                                soni('imagesnew/soni/pop.mp3');
                                recibolista({ datipobola: 'notis', datipo: 'notis', tip: tip, de: idkeko, esimagenmini: estemin, keko: keko, id: idinse, ahor: quehoraes, fech: quehoraes });
                                //if(vextr['toq'+idkeko]){
                                //delete vextr['toq'+idkeko];
                                //}
                                //btnnntoque('btntoqueperfil','carga');
                                break;
                            case '7':
                            case 7://comento un kweet mio
                                //consola.log('datosex:',extras);

                                var extrasimprimo = extras.textocomentario;
                                if (extrasimprimo) {
                                    if (extrasimprimo.length > 40) extrasimprimo = extrasimprimo.substr(0, 40);
                                    extrasimprimo = limpia(extrasimprimo, idkeko, 100, 'web');

                                    textoaponer += '<b>' + keko + '</b> ' + iw[232] + ' "' + extrasimprimo + '"';
                                }
                                soni('imagesnew/soni/pop.mp3');
                                recibolista({ datipobola: 'notis', datipo: 'notis', tip: tip, de: idkeko, esimagenmini: estemin, keko: keko, id: idinse, ahor: quehoraes, fech: quehoraes, extras: extras });
                                //if(vextr['toq'+idkeko]){
                                //delete vextr['toq'+idkeko];
                                //}
                                //btnnntoque('btntoqueperfil','carga');
                                break;
                            case '8':
                            case 8://comento un kweet mio que yo habia comentado
                                //consola.log('datosex:',extras);

                                var extrasimprimo = extras.textocomentario;
                                if (extrasimprimo) {
                                    if (extrasimprimo.length > 40) extrasimprimo = extrasimprimo.substr(0, 40);
                                    extrasimprimo = limpia(extrasimprimo, idkeko, 100, 'web');

                                    textoaponer += '<b>' + keko + '</b> ' + iw[377] + ' "' + extrasimprimo + '"';
                                }
                                soni('imagesnew/soni/pop.mp3');
                                recibolista({ datipobola: 'notis', datipo: 'notis', tip: tip, de: idkeko, esimagenmini: estemin, keko: keko, id: idinse, ahor: quehoraes, fech: quehoraes, extras: extras });
                                //if(vextr['toq'+idkeko]){
                                //delete vextr['toq'+idkeko];
                                //}
                                //btnnntoque('btntoqueperfil','carga');
                                break;
                        }
                        break;
                    case 'elnuevoamigo'://nolang
                        misamigs['k' + idkeko] = keko;
                        misamigsm['k' + idkeko] = estemin;
                        cargamovil(idkeko);
                        //nolang
                        kmensaj("imagesnew/soni/online.mp3", "" + keko + "", idkeko, estemin, iw[233]);
                        pongoglobo = 'n';
                        break;
                }

                if (pongoglobo == 's') {
                    textoaponer += '<div class="hace">' + iw[234] + '</div>';

                    var cntrl = 1;
                    if (!document.getElementById('globosnoti')) {

                        var creou = document.createElement('div');
                        creou.id = 'globosnoti';
                        document.body.appendChild(creou);
                    } else {
                        cntrl = document.getElementById('globosnoti').getAttribute('data-cntrl');
                        cntrl = parseInt(cntrl);
                        cntrl++;
                    }

                    //////////////consola.log('clase'+document.getElementById('formasu').className);
                    if (document.getElementById('formasu').className == 'novisible')
                        document.getElementById('globosnoti').style.bottom = '1px';
                    else {
                        document.getElementById('globosnoti').style.left = '390px';
                        document.getElementById('globosnoti').style.bottom = '1px';
                    }
                    document.getElementById('globosnoti').setAttribute('data-keksol', keko);
                    document.getElementById('globosnoti').setAttribute('data-idsolik', idkeko);
                    document.getElementById('globosnoti').setAttribute('data-datipo', datipo);
                    document.getElementById('globosnoti').setAttribute('data-tip', tip);
                    document.getElementById('globosnoti').setAttribute('data-cntrl', cntrl);

                    document.getElementById('globosnoti').innerHTML = textoaponer;


                    window.setTimeout(globonotismov, 100, cntrl);

                    switch (datipobola) {
                        case 'amigos':
                            soni('imagesnew/soni/pop.mp3');
                            recibolista({ datipobola: 'amigos', datipo: 'amigos', datip: 'amigos', de: idkeko, esimagenmini: estemin, keko: keko, id: 1, ahor: quehoraes, fech: quehoraes });
                            document.getElementById('globosnoti').onclick = function () {
                                if (this.parentNode) {
                                    maximizapestana('amigos');
                                    this.parentNode.removeChild(this);
                                }
                            };

                            //if(document.getElementById('cartakekon') && document.getElementById('cartakekon').getAttribute('data-idkekglobo')==idkeko){
                            //borrar('cartakekon');
                            //clickeko('','',idkeko);
                            //}
                            break;
                        case 'notis':
                            document.getElementById('globosnoti').onclick = function () {
                                if (this.parentNode) {
                                    maximizapestana('notis');
                                    this.parentNode.removeChild(this);
                                    //if(this.getAttribute('data-tip') == 6)
                                    //window.location='#/'+yasokek+'/';
                                    //else

                                }
                            };
                            break;
                        default:

                            document.getElementById('globosnoti').onclick = function () {
                                if (this.parentNode) {
                                    this.parentNode.removeChild(this);
                                    //alert('default//OJOAKI');
                                }
                            };

                    }

                    //
                    //var ul = document.getElementById("globosnoti");
                    //var numerodeli = ul.getElementsByTagName('li').length;
                    //var li = document.createElement("li");
                    //li.innerHTML = textoaponer;
                    //li.setAttribute("id","noti"+numerodeli);
                    //ul.appendChild(li);

                    //window.setTimeout(muestronoti,)
                    //var ul = document.getElementById("globosnoti");
                    //numerodeli = ul.getElementsByTagName('li').length;
                    //var li = document.createElement("li");
                    //li.appendChild(document.createTextNode("five OJOAKI testestas d asd asdsa dsad "));
                    //li.setAttribute("id","noti"+numerodeli);
                    //ul.appendChild(li);
                    //alert(li.id);
                }
            },
            recibolista = function (datos) {
                if (document.getElementById('solis' + datos.datipobola)) {
                    document.getElementById("titulo" + datos.datipobola).classList.remove('novisible');
                    var ul = document.getElementById("solis" + datos.datipobola);
                    var extrascontrol = '';

                    //comento un kweet mio o comentario evito borrar recientes
                    if (datos.datipo == 'notis' && datos.tip == 7 || datos.datipo == 'notis' && datos.tip == '7') {
                        extrascontrol = datos.extras.idmuro
                    }

                    //if(ul.querySelector('li[data-de="'+datos.de+'"][data-bd="'+datos.datipobola+'"][data-tipo="'+datos.datipo+'"][data-tip="'+datos.tip+'"][data-control="'+extrascontrol+'"]')){
                    //ul.removeChild(ul.querySelector('li[data-de="'+datos.de+'"][data-bd="'+datos.datipobola+'"][data-tipo="'+datos.datipo+'"][data-tip="'+datos.tip+'"][data-control="'+extrascontrol+'"]'));
                    //}

                    var li = document.createElement("li");//nolang
                    li.setAttribute('data-de', datos.de);
                    li.setAttribute('data-bd', datos.datipobola);
                    li.setAttribute('data-tipo', datos.datipo);
                    li.setAttribute('data-tip', datos.tip);
                    li.setAttribute('data-control', extrascontrol);
                    li.setAttribute('data-fech', datos.fech);
                    li.setAttribute('data-ahor', datos.ahor);
                    li.setAttribute('id', datos.datipobola + datos.id);
                    li.style.height = '42px';

                    var urlfotoya = urlperfils + datos.esimagenmini;

                    if (datos.esimagenmini != 'default.png' || datos.esimagenmini != '') {
                        urlfotoya = urlperfils + 'resiz.php?src=' + datos.esimagenmini + '&h=32&w=32';
                    }

                    var alclick = "";
                    var alclickfunc = "";
                    switch (datos.datipo) {
                        case 'busca':
                            li.setAttribute('data-globkek', datos.keko);
                            li.className = 'pointer';
                            li.onclick = clickelista;


                            var aponerli = "";

                            if (urlfotoya)
                                aponerli = "<img src='" + urlfotoya + "' class='radius fleft' style='width:40px;height:40px;'/>&nbsp;";

                            aponerli += "<span>" + datos.keko + "</span><br/>";

                            var extrasimprimo = datos.extras.info;
                            extrasimprimo = limpia(extrasimprimo, datos.de, 100, 'web');

                            //if(datos.datipobola == 'buscac')
                            aponerli += "<span>" + extrasimprimo + "</span><br/>";
                            //+
                            //"<button class='btnwo fright' data-tipo='amigos' data-id='1' data-de='"+datos.de+"' data-acc='no'>Ahora no</button>"+
                            //"<button class='btnwo ok fright' data-tipo='amigos' data-id='1' data-de='"+datos.de+"' data-acc='si'>A√±adir como amigo</button>"
                            //+"";
                            break;
                        case 'amigos':
                            var aponerli = "<img src='" + urlfotoya + "' data-globkid='" + datos.de + "' data-globkek='" + datos.keko + "' class='linkde radius fleft' style='width:40px;height:40px;'/>&nbsp;<b data-globkid='" + datos.de + "' data-globkek='" + datos.keko + "' class='linkde'>" +
                                datos.keko + "</b><br/>" +
                                "<button class='btnwo fright' data-tipo='amigos' data-id='1' data-de='" + datos.de + "' data-acc='no'>" + iw[235] + "</button>" +
                                "<button class='btnwo ok fright' data-tipo='amigos' data-id='1' data-de='" + datos.de + "' data-acc='si'>" + iw[236] + "</button>"
                                + "";
                            break;
                        case 'notis':
                            switch (datos.tip) {
                                case '1'://nolang
                                    var aponerli = "<img src='" + urlfotoya + "' data-globkid='" + datos.de + "' data-globkek='" + datos.keko + "' class='linkde radius fleft' style='width:40px;height:40px;'/>&nbsp;<b data-globkid='" + datos.de + "' data-globkek='" + datos.keko + "' class='linkde'>" +
                                        datos.keko + "</b> " + iw[237];
                                    aponerli += '<div class="hace" id="hace' + datos.datipobola + datos.id + '" style="min-width:100px;width:auto;">' + iw[238] + '</div>';
                                    break;
                                case '2'://toques nolang
                                case 2://toques nolang
                                    var aponerli = "<img src='" + urlfotoya + "' class='linkde radius fleft' style='width:40px;height:40px;' data-globkid='" + datos.de + "' data-globkek='" + datos.keko + "'/>&nbsp;<b data-globkid='" + datos.de + "' data-globkek='" + datos.keko + "' class='linkde'>" +
                                        datos.keko + "</b> " + iw[239];
                                    aponerli += '<div class="hace" id="hace' + datos.datipobola + datos.id + '" style="min-width:100px;width:auto;">' + iw[238] + '</div>';
                                    break;
                                case '4'://trade nolang
                                case 4://trade nolang

                                    var aponerli = "<img src='" + urlfotoya + "' data-globkid='" + datos.de + "' data-globkek='" + datos.keko + "' class='linkde radius fleft' style='width:40px;height:40px;'/>&nbsp;<b data-globkid='" + datos.de + "' data-globkek='" + datos.keko + "' class='linkde'>" +
                                        datos.keko + "</b> " + iw[240] + "<br/>" +
                                        "<button class='btnwo fright' data-tipo='trade' data-id='" + datos.id + "' data-de='" + datos.de + "' data-acc='no'>" + iw[241] + "</button> " +
                                        "<button class='btnwo ok fright' data-tipo='trade' data-id='" + datos.id + "' data-de='" + datos.de + "' data-acc='si'>" + iw[242] + "</button> "
                                        + ""; aponerli += '<div class="hace" id="hace' + datos.datipobola + datos.id + '" style="min-width:100px;width:auto;">' + iw[238] + '</div>';

                                    //var aponerli= "<img src='"+urlperfils+datos.esimagenmini+"' class='linkde radius fleft' style='width:40px;height:40px;' data-globkid='"+datos.de+"' data-globkek='"+datos.keko+"'/>&nbsp;<b data-globkid='"+datos.de+"' data-globkek='"+datos.keko+"' class='linkde'>"+
                                    //datos.keko+"</b> quiere intercambiar objetos";
                                    //aponerli += '<div class="hace" id="hace'+datos.datipobola+datos.id+'" style="min-width:100px;width:auto;">Hace unos segundos</div>';
                                    break;
                                case '5'://visitar nolang
                                case 5://visitar

                                    var aponerli = "<img src='" + urlfotoya + "' data-globkid='" + datos.de + "' data-globkek='" + datos.keko + "' class='linkde radius fleft' style='width:40px;height:40px;'/>&nbsp;<b data-globkid='" + datos.de + "' data-globkek='" + datos.keko + "' class='linkde'>" +
                                        datos.keko + "</b> " + iw[244] + "<br/>" +
                                        "<button class='btnwo fright' data-tipo='invit' data-id='" + datos.id + "' data-de='" + datos.de + "' data-acc='no'>" + iw[241] + "</button> " +
                                        "<button class='btnwo ok fright' data-tipo='invit' data-id='" + datos.id + "' data-de='" + datos.de + "' data-acc='si'>" + iw[243] + "</button> "
                                        + "";
                                    aponerli += '<div class="hace" id="hace' + datos.datipobola + datos.id + '" style="min-width:100px;width:auto;">' + iw[238] + '</div>';

                                    //var aponerli= "<img src='"+urlperfils+datos.esimagenmini+"' class='linkde radius fleft' style='width:40px;height:40px;' data-globkid='"+datos.de+"' data-globkek='"+datos.keko+"'/>&nbsp;<b data-globkid='"+datos.de+"' data-globkek='"+datos.keko+"' class='linkde'>"+
                                    //datos.keko+"</b> quiere intercambiar objetos";
                                    //aponerli += '<div class="hace" id="hace'+datos.datipobola+datos.id+'" style="min-width:100px;width:auto;">Hace unos segundos</div>';
                                    break;
                                case '6'://publica en mi muro
                                case 6:

                                    alclick = 's';
                                    alclickfunc = function () { if (!vextr['lediclickalinkde']) window.location = '#/' + yasokek; };

                                    var aponerli = "<img src='" + urlfotoya + "' data-globkid='" + datos.de + "' data-globkek='" + datos.keko + "' class='linkde radius fleft' style='width:40px;height:40px;'/>&nbsp;<b data-globkid='" + datos.de + "' data-globkek='" + datos.keko + "' class='linkde'>" +
                                        datos.keko + "</b> " + iw[245] + "<br/>"
                                        + "";
                                    aponerli += '<div class="hace" id="hace' + datos.datipobola + datos.id + '" style="min-width:100px;width:auto;">' + iw[238] + '</div>';

                                    //var aponerli= "<img src='"+urlperfils+datos.esimagenmini+"' class='linkde radius fleft' style='width:40px;height:40px;' data-globkid='"+datos.de+"' data-globkek='"+datos.keko+"'/>&nbsp;<b data-globkid='"+datos.de+"' data-globkek='"+datos.keko+"' class='linkde'>"+
                                    //datos.keko+"</b> quiere intercambiar objetos";
                                    //aponerli += '<div class="hace" id="hace'+datos.datipobola+datos.id+'" style="min-width:100px;width:auto;">Hace unos segundos</div>';
                                    break;
                                case '7'://comento un kweet mio o comentario
                                case 7:
                                    //consola.log('extras',datos.extras);

                                    var extrasimprimo = datos.extras.textocomentario;
                                    if (extrasimprimo) {
                                        if (extrasimprimo.length > 40) extrasimprimo = extrasimprimo.substr(0, 40);
                                        extrasimprimo = limpia(extrasimprimo, datos.de, 100, 'web');
                                    }
                                    //extrasimprimo=limpia(extrasimprimo,datos.de,100,'web');


                                    ////console.log('extras',datos.extras);
                                    alclick = 's';
                                    alclickfunc = function () { if (!vextr['lediclickalinkde']) window.location = '#/kweet/' + datos.extras.idmuro + '/' + datos.extras.idcomentario };


                                    var aponerli = "<img src='" + urlfotoya + "' data-globkid='" + datos.de + "' data-globkek='" + datos.keko + "' class='linkde radius fleft' style='width:40px;height:40px;'/>&nbsp;<b data-globkid='" + datos.de + "' data-globkek='" + datos.keko + "' class='linkde'>" +
                                        datos.keko + '</b> ' + iw[246] + ' "' + extrasimprimo + '"'
                                        + "";
                                    aponerli += '<div class="hace" id="hace' + datos.datipobola + datos.id + '" style="min-width:100px;width:auto;">' + iw[238] + '</div>';

                                    //var aponerli= "<img src='"+urlperfils+datos.esimagenmini+"' class='linkde radius fleft' style='width:40px;height:40px;' data-globkid='"+datos.de+"' data-globkek='"+datos.keko+"'/>&nbsp;<b data-globkid='"+datos.de+"' data-globkek='"+datos.keko+"' class='linkde'>"+
                                    //datos.keko+"</b> quiere intercambiar objetos";
                                    //aponerli += '<div class="hace" id="hace'+datos.datipobola+datos.id+'" style="min-width:100px;width:auto;">Hace unos segundos</div>';
                                    break;
                                case '8'://comento un kweet que yo habia comentado
                                case 8:
                                    //consola.log('extras',datos.extras);

                                    var extrasimprimo = datos.extras.textocomentario;
                                    if (extrasimprimo) {
                                        if (extrasimprimo.length > 40) extrasimprimo = extrasimprimo.substr(0, 40);
                                        extrasimprimo = limpia(extrasimprimo, datos.de, 100, 'web');
                                    }
                                    //extrasimprimo=limpia(extrasimprimo,datos.de,100,'web');


                                    ////console.log('extras',datos.extras);
                                    alclick = 's';
                                    alclickfunc = function () { if (!vextr['lediclickalinkde']) window.location = '#/kweet/' + datos.extras.idmuro + '/' + datos.extras.idcomentario };


                                    var aponerli = "<img src='" + urlfotoya + "' data-globkid='" + datos.de + "' data-globkek='" + datos.keko + "' class='linkde radius fleft' style='width:40px;height:40px;'/>&nbsp;<b data-globkid='" + datos.de + "' data-globkek='" + datos.keko + "' class='linkde'>" +
                                        datos.keko + '</b> ' + iw[377] + ' "' + extrasimprimo + '"'
                                        + "";
                                    aponerli += '<div class="hace" id="hace' + datos.datipobola + datos.id + '" style="min-width:100px;width:auto;">' + iw[238] + '</div>';

                                    //var aponerli= "<img src='"+urlperfils+datos.esimagenmini+"' class='linkde radius fleft' style='width:40px;height:40px;' data-globkid='"+datos.de+"' data-globkek='"+datos.keko+"'/>&nbsp;<b data-globkid='"+datos.de+"' data-globkek='"+datos.keko+"' class='linkde'>"+
                                    //datos.keko+"</b> quiere intercambiar objetos";
                                    //aponerli += '<div class="hace" id="hace'+datos.datipobola+datos.id+'" style="min-width:100px;width:auto;">Hace unos segundos</div>';
                                    break;

                            }
                            break;
                    }

                    if (alclick) {
                        li.className = 'pointer';
                        ////console.log('ir al muro');
                        li.onclick = alclickfunc;
                    }

                    li.innerHTML = aponerli;
                    if (ul.querySelector('li')) {
                        //////////////consola.log('hay li');
                        ul.insertBefore(li, ul.querySelector('li'));
                        //ul.insertBefore(ul.getElementsByTagName('li')[0]);
                        //ul = ul.getElementsByTagName('li')[0].parentNode.parentNode;
                    } else
                        ul.appendChild(li);

                    if (datos.datipo == 'notis')
                        hacecuanto('', datos.datipobola, datos.id);
                    cargolinkde('obj', li);

                    var boxesff = li.querySelectorAll('button'),
                        iff = boxesff.length;
                    if (iff > 0) {
                        while (iff--) {
                            if (boxesff[iff])
                                boxesff[iff].onclick = function () { clickeboton(this) };
                        }
                    }
                }
            },
            maximizapestana = function (cual) {
                if (!document.getElementById('globo' + cual) || document.getElementById('globo' + cual) && document.getElementById('globo' + cual).className != document.getElementById('globo' + cual).className.replace(' novisible', '')) {
                    verpestana(cual);
                }
            },
            cargamovil = function (quienes) {
                //var nada='nada';
                if (quienes == 'desdebtn') {
                    if (document.getElementById('btnchatlis').className != 'chatsdiv btnwo expandidolist') {
                        document.getElementById('btnchatlis').className = 'chatsdiv btnwo expandidolist';
                        cargamovilya('todos');
                    } else {
                        document.getElementById('btnchatlis').className = 'chatsdiv btnwo';
                        document.getElementById('amigosons').innerHTML = '';
                    }
                } else {

                    //se conecto  1 amigo miro si esta abierto la lista de amigos si esta cargo el amigo
                    if (document.getElementById('btnchatlis').className == 'chatsdiv btnwo expandidolist') {
                        cargamovilya(quienes);
                    }
                }
            },
            cargamovilya = function (quienes) {

                //////////////consola.log('cargamovil quienes'+quienes);
                var amigosonshtm = '';
                var estemin = '';
                var idkakaagrga = 0;
                if (quienes == 'todos')
                    var misamigscargo = misamigs;
                else {
                    var misamigscargo = [];
                    if (document.getElementById('amigosons') && !document.getElementById('amigosons').querySelector('[data-ika="' + quienes + '"]')) {
                        misamigscargo['k' + quienes] = misamigs['k' + quienes];
                    }
                    //if(document.getElementById('cartakekon') && document.getElementById('cartakekon').getAttribute('data-idkekglobo')==quienes){
                    //clickeko('','',quienes);//'data-idkekglobo',
                    //}
                }


                var ul = document.getElementById("amigosons");
                var li;


                var urlfotoya = '';
                if (misamigscargo) {
                    for (var imagg in misamigscargo) {
                        ////consola.log('misamigscargo:'+imagg);
                        if (misamigsm[imagg])
                            estemin = misamigsm[imagg];
                        else
                            estemin = 'default.png';

                        idkakaagrga = imagg.replace('k', '');
                        li = document.createElement("li");

                        urlfotoya = urlperfils + estemin;

                        if (estemin != 'default.png' && estemin != '') {
                            urlfotoya = urlperfils + 'resiz.php?src=' + estemin + '&h=32&w=32';
                        } else {
                            urlfotoya = '/uploads/default.png';
                        }
                        amigosonshtm = "<img src='" + urlfotoya + "' data-ika='" + idkakaagrga + "' data-op='chat' class='radius fleft radinoti'/>" +
                            "<div class='fleft' data-ika='" + idkakaagrga + "' data-op='chat' class='texamigos'>" +
                            misamigs[imagg] + "</div><br/><div class='fright'><span data-ika='" + idkakaagrga + "' data-op='cambiar'/>" + iw[247] + "</span> <span data-ika='" + idkakaagrga + "' data-op='invit'/>" + iw[250] + "</span> <span data-ika='" + idkakaagrga + "' data-op='visit'/>" + iw[248] + "</span> <span data-ika='" + idkakaagrga + "' data-op='perfil'/>" + iw[249] + "</span></div>";
                        li.style.height = '30px';
                        li.setAttribute('data-ika', idkakaagrga);
                        li.setAttribute('data-op', 'chat');
                        li.innerHTML = amigosonshtm;
                        //li.onclick = function(){ chatearcon('',this.getAttribute('data-ika'),'btn','','')};

                        if (ul.querySelector('li')) {
                            ul.insertBefore(li, ul.querySelector('li'));
                        } else {
                            ul.appendChild(li);
                        }
                    }
                }

                mirosinamigoson();

                if (quienes == 'todos') {
                    var miestadoaraii = '<img src="/images/onlines.png"/><span style="color:#339966;">' + iw[251] + '</span>';

                    if (estado == '1')
                        miestadoaraii = '<img src="/images/offline.png"/><span style="color:#7F1111;">' + iw[252] + '</span>';

                    var akistadoss = '<span id="bolitonlin">' + miestadoaraii + '</span><span id="cambiarstad" style="cursor: pointer;" onclick="document.getElementById(\'cambiarstad\').style.display=\'none\';document.getElementById(\'cambiarstadya\').style.display=\'inline\';"> (<u>' + iw[253] + '</u>)</span>' +
                        '<span id="cambiarstadya" style="display:none;margin-left:10px;">' + iw[254] + ' <u style="cursor: pointer;" id="paraon">' + iw[251] + '</u> <u style="cursor: pointer;" id="paraoff">' + iw[252] + '</u></span><br/><br/>';

                    //OJOAKILANG aki abaj
                    var winshtm = '' + akistadoss + '<input type="hidden" value="' + estado + '" id="onlineara"/><br/><br/>';

                    li = document.createElement("li");
                    li.style.height = '30px';
                    li.innerHTML = '<br>';
                    li.className = 'nohover';
                    ul.appendChild(li);

                    li = document.createElement("li");
                    li.style.height = '30px';
                    li.setAttribute('data-ika', idkakaagrga);
                    li.setAttribute('data-op', 'chat');
                    li.innerHTML = winshtm;
                    li.style.width = '210px';
                    li.style.background = '#EDEDED';
                    li.className = 'fixed nohover';
                    li.style.bottom = '0px';
                    li.style.zIndex = '30';
                    //if(ul.querySelector('li')){
                    //ul.insertBefore(li, ul.querySelector('li'));
                    //}else{
                    ul.appendChild(li);

                    document.getElementById('paraon').onclick = function () {
                        document.getElementById('onlineara').value = '0'; cambiastado();
                    }
                    document.getElementById('paraoff').onclick = function () {
                        document.getElementById('onlineara').value = '1'; cambiastado();
                    }
                }
            },
            mirosinamigoson = function () {
                var ul = document.getElementById("amigosons");
                var li;

                //if(document.getElementById('amigosons').querySelector('[data-ika]'))
                //////consola.log('tiene amigosons:'+document.getElementById('amigosons').querySelector('[data-ika]').getAttribute('data-ika'));

                if (!ul.querySelector('[data-ika]')) {
                    borrar('sinamigoson');
                    li = document.createElement("li");
                    li.style.height = '40px';
                    li.style.paddingTop = '40px';
                    li.style.texshadow = 'none';
                    li.style.lineHeight = '15px';
                    li.style.paddingTop = '2px';
                    li.style.fontWeight = 'normal';
                    li.style.textAlign = 'center';
                    li.style.color = '#000';
                    li.style.background = '#fff';
                    li.setAttribute('id', 'sinamigoson');//nolang
                    li.innerHTML = iw[255];
                    ul.appendChild(li);
                } else {
                    borrar('sinamigoson');
                }
            },
            chatearcon = function (nombrekeko, idkakaagrga, desde, msg, quehoraes) {
                var chatn = document.getElementById('akichats').querySelector('div.chatsdiv[data-kami="' + idkakaagrga + '"]');
                if (chatn) {

                    if (desde == 'btn' && chatn.className == chatn.className.replace(' expandido', '')) {
                        ////consola.log('lo expando');
                        chatn.querySelector('.titulochats').click();
                    }
                    //
                    //////consola.log('ya existchatear con idkek'+idkakaagrga+ ' nombre'+misamigs['k'+idkakaagrga]);
                } else {
                    chatn = document.createElement("div");

                    if (desde == 'recibo')
                        chatn.className = 'chatsdiv btnwo';
                    else
                        chatn.className = 'chatsdiv btnwo expandido';

                    chatn.setAttribute('data-kami', idkakaagrga);//nolang
                    var esnombrekeko = nombrekeko;
                    if (nombrekeko == '') {
                        esnombrekeko = misamigs['k' + idkakaagrga];
                    }
                    chatn.setAttribute('data-kekokami', esnombrekeko);//nolang

                    //nolang
                    chatn.innerHTML = '<div class="titulochats ok">' + esnombrekeko +
                        '<img src="' + dominiobase + 'imagesnew/appico3/closeb.png" class="fright cerrar"></div>' +
                        '<div class="textochats"></div><form><input type="text" autocomplete="off" class="inpuchats"></form>';
                    chatn.querySelector('.titulochats').onclick = function () {

                        if (this.parentNode.className != this.parentNode.className.replace(' expandido', '')) {
                            this.parentNode.className = this.parentNode.className.replace(' expandido', '');
                        } else {
                            this.parentNode.className = this.parentNode.className.replace(' expandido', '') + ' expandido';
                            this.className = this.className.replace(' newmsg', '');
                        }

                        //yoquieroeste.className = yoquieroeste.className.replace(' expandido','')+' expandido';
                        //
                        //if(this.parentNode.className != 'chatsdiv btnwo expandido'){
                        //this.parentNode.className = 'chatsdiv btnwo expandido';
                        //}else{
                        //this.parentNode.className = 'chatsdiv btnwo ok';
                        //}
                    };
                    chatn.querySelector('form').onsubmit = function () {
                        //////consola.log('privi',this.parentNode.getAttribute('data-kami'),this.querySelector('input').value);
                        katman('privi', this.parentNode.getAttribute('data-kami'), this.querySelector('input').value);
                        chatearcon('', this.parentNode.getAttribute('data-kami'), 'envio', this.querySelector('input').value, 0);

                        this.querySelector('input').value = '';
                        return false;
                    };
                    chatn.querySelector('.cerrar').onclick = function () {
                        //addClass(this.parentNode.parentNode,'novisible');
                        this.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode);
                        //posicionachats('todos','');
                    };
                    //this.parentNode.parentNode.removeChild(this.parentNode);void(0);
                    document.getElementById('akichats').appendChild(chatn);
                }
                if (desde == 'btn') {
                    chatn.querySelector('form > input').focus();
                }

                if (msg != '') {

                    var elultimdesde = '';
                    if (chatn.querySelector('div.textochats').lastChild)
                        elultimdesde = chatn.querySelector('div.textochats').lastChild.getAttribute('data-d');

                    //li.innerHTML = '<span id="mocua'+este.getAttribute('data-nomid')+'">'+cuantas+'</span><img src="'+dominiobase+'fly/i/fursv5/'+este.getAttribute('data-nomid')+'/'+este.getAttribute('data-idf')+'mini.png">';
                    //if(ul.getElementsByClassName('cajafurnis')[0]){
                    //////////////consola.log('hay li');
                    //ul.insertBefore(li, ul.getElementsByClassName('cajafurnis')[0]);

                    if (elultimdesde != desde) {
                        var creo = document.createElement('div');
                        creo.setAttribute('data-d', desde);
                        if (desde == 'envio') {//envie yo el msg
                            //creo.innerHTML = '<b>'+yasokek+'</b> '+ limpia(msg,yasoid,100,'chat');

                            //<img src='"+urlperfils+estemin+"' class='radius fleft radinoti deelboli'/>
                            creo.innerHTML = "" +
                                '<img src="' + dominiobase + 'maskeko/images/coletilla_der.png" class="fright coletichadeyo">'
                                + "<div class='globmsgchat deyo'>"
                                + limpia(msg, yasoid, 1, 'chat')
                                + '</div>';

                        } else { //recibo el msg
                            var estemin = 'default.png';

                            if (misamigsm['k' + idkakaagrga])
                                estemin = misamigsm['k' + idkakaagrga];

                            var urlfotoya = urlperfils + estemin;

                            if (estemin != 'default.png' && estemin != 'casa.png' && estemin != '') {
                                urlfotoya = urlperfils + 'resiz.php?src=' + estemin + '&h=32&w=32';
                            } else {
                                urlfotoya = '/uploads/default.png';
                            }
                            //creo.innerHTML = '<b>'+misamigs['k'+idkakaagrga]+'</b> '+
                            creo.innerHTML = "<img src='" + urlfotoya + "' class='radius fleft radinoti deelboli'/>" +
                                '<img src="' + dominiobase + 'maskeko/images/coletilla_izq.png" class="fleft coletichatel">'
                                + "<div class='globmsgchat deel'>"
                                + limpia(msg, idkakaagrga, 1, 'chat')
                                + '</div>';
                        }

                        chatn.querySelector('div.textochats').appendChild(creo);
                    } else {
                        var quepong = '<br/>' + limpia(msg, idkakaagrga, 1, 'chat');
                        if (desde == 'envio') {
                            quepong = '<br/>' + limpia(msg, yasoid, 1, 'chat');
                        }

                        chatn.querySelector('div.textochats').lastChild.querySelector('div.globmsgchat').innerHTML += quepong;
                    }
                    //chatn.querySelector('div.textochats')
                    //////consola.log('scroll',chatn.querySelector('div.textochats').scrollHeight);
                    if (chatn.querySelector('div.textochats').scrollHeight) {
                        chatn.querySelector('div.textochats').scrollTop = chatn.querySelector('div.textochats').scrollHeight;
                    }
                    //chatn.querySelector('div.textochats').scrollTo(0,chatn.querySelector('div.textochats').scrollHeight);
                }
                posicionachats(idkakaagrga, desde);
            },
            controlmia = function () {

                //console.log('controlmia ultnumt'+ultnumt+'='+numt+' harecontrolmia'+harecontrolmia);
                ////consola.log(('ultnumt'+ultnumt+'='+numt);
                if (ultnumt == numt) {// || mresulta.length==0 || harecontrolmia=='si'
                    if (ky != enboxyinicial || kx != enboxxinicial) {
                        if (sisigotimeout) {
                            window.clearTimeout(sisigotimeout); sisigotimeout = '';
                        }
                        if (movigoyainter)
                            window.clearInterval(movigoyainter);

                        harecontrolmia = 'si';
                        //ultnumt+=addvaaa(2,100);
                        //numt-=10;
                        //ultnumt=numt;
                        mresulta = [];
                        ////consola.log(('controlmia'+ky+'c'+kx);
                        mresulta[0] = { ponfurka: '', cmia: 'cmia', y: kx, x: ky };
                        movigoyas();
                        movigoyainter = window.setInterval(movigoyas, 360);
                        //movigoya();
                        //////////////consola.log('HAGOCONTROLMIA');
                    }
                }
                //else{
                //////////////consola.log('controlmia otronumt');
                //}
                //sisigoultimo(numt,1,ky,kx,ky,kx,fok,'no','');
                ///
                harecontrolmia = 'no';
            },
            muevomueble = function (idpmovemm, desdemochila) {
                var datafurmovere;
                if (idpmuevo > 1) {
                    //Ya estaba moviendo algo
                    if (ffurscass['f' + idpmuevo]) {//era mueble
                        var mirocasan = ffurscass['f' + idpmuevo].split('c');
                        sueltomueble(mirocasan[0], mirocasan[1]);
                    } else {//era poster
                        if (document.getElementById('idencf' + idpmuevo)) document.getElementById('idencf' + idpmuevo).style.display = 'inline';
                        if (document.getElementById('idf' + idpmuevo)) document.getElementById('idf' + idpmuevo).style.display = 'inline';

                    }
                }
                if (desdemochila == 'no') {
                    datafurmovere = document.getElementById('idencf' + idpmovemm);
                    if (!datafurmovere) datafurmovere = document.getElementById('idf' + idpmovemm);

                    if (document.getElementById('idencf' + idpmovemm)) document.getElementById('idencf' + idpmovemm).style.display = 'none';
                    if (document.getElementById('idf' + idpmovemm)) document.getElementById('idf' + idpmovemm).style.display = 'none';
                    var boxahoraante = ffurscass['f' + idpmovemm];
                    quitoinfofurni(idpmovemm, 'no', 'muevomueble');
                    ffurscass['f' + idpmovemm] = boxahoraante;
                } else {
                    datafurmovere = document.getElementById(idpmovemm);
                    idpmovemm = 1;
                }

                if (datafurmovere) {
                    if (tradeando == 's') {
                        var lalamocencontrenmoc = anadeamoc(datafurmovere, 1, 'recogermiro');
                        katman('cambdya', datafurmovere.getAttribute('data-idf'));
                        if (lalamocencontrenmoc == 'no' && idpmuevo > 0) {
                            idpmuevo = 0; borrar('mueblemover');
                            //document.getElementById('kekoall').addEventListener("mousemove", lolsolo, false);
                            document.getElementById('kekoall').removeEventListener("mousemove", movekekoall, false);
                        }
                        //idpmuevo=
                    } else {
                        idpmuevo = parseInt(idpmovemm);

                        if (document.getElementById('mueblemover')) {
                            borrar('mueblemover');
                        } else {
                            //document.getElementById('kekoall').removeEventListener("mousemove", lolsolo, false);
                            document.getElementById('kekoall').addEventListener("mousemove", movekekoall, false);
                        }
                        var kekoallpam = document.getElementById('kekoall');
                        var muevedivmob = document.createElement('span');
                        muevedivmob.setAttribute('id', 'mueblemover');
                        kekoallpam.appendChild(muevedivmob);
                        //}
                        //else{
                        //var muevedivmob = document.getElementById('mueblemover');
                        //}
                        muevedivmob.style.left = '0px';
                        muevedivmob.style.top = '0px';
                        muevedivmob.style.marginLeft = datafurmovere.getAttribute('data-pxleft') + 'px';
                        muevedivmob.style.marginTop = datafurmovere.getAttribute('data-pxtop') + 'px';

                        muevedivmob.style.position = 'absolute';
                        muevedivmob.style.zIndex = 0;


                        var muevhtmm = '';

                        //idfimg.setAttribute('data-ienc',rowsya.imagenencima);
                        //idfimg.setAttribute('data-ifur',rowsya.imagenfurni);

                        var esefor = datafurmovere.getAttribute('data-f');
                        var eseforencima = esefor;
                        if (datafurmovere.getAttribute('data-ifur') == '2') {
                            esefor = 'png';
                        }
                        if (datafurmovere.getAttribute('data-ienc') == '2') {
                            eseforencima = 'png';
                        }

                        //////////consola.log('esefor'+esefor);
                        //////////consola.log('eseforencima'+eseforencima);

                        var dataseid = 'id="einfomovv" data-idfahora="' + datafurmovere.getAttribute('data-idf') + '" data-pxleft="' + datafurmovere.getAttribute('data-pxleft') + '" data-pxtop="' + datafurmovere.getAttribute('data-pxtop') + '" data-girpxleft="" data-girpxtop="" data-girado="n" data-idf="' + datafurmovere.getAttribute('data-idf') + '" data-f="' + datafurmovere.getAttribute('data-f') + '" data-gir="' + datafurmovere.getAttribute('data-gir') + '" data-a="' + datafurmovere.getAttribute('data-a') + '" data-idpt="' + datafurmovere.getAttribute('data-idpt') + '" data-idpc="' + datafurmovere.getAttribute('data-idpc') + '" data-nomid="' + datafurmovere.getAttribute('data-nomid') + '" ';
                        if (datafurmovere.getAttribute('data-ifur') == '1' || datafurmovere.getAttribute('data-ifur') == '2') {
                            muevhtmm += '<img data-prefi=".' + esefor + '" ' + dataseid + 'src="' + dominiobase + 'fly/i/fursv5/' + datafurmovere.getAttribute('data-nomid') + '/' + datafurmovere.getAttribute('data-idf') + '.' + esefor + '" style="position: absolute;"/>';
                            dataseid = '';
                        }
                        if (datafurmovere.getAttribute('data-ienc') == '1' || datafurmovere.getAttribute('data-ienc') == '2') {

                            if (dataseid == '')
                                dataseid = 'id="einfomovvencima" data-idfahora="' + datafurmovere.getAttribute('data-idf') + '" data-pxleft="' + datafurmovere.getAttribute('data-pxleft') + '" data-pxtop="' + datafurmovere.getAttribute('data-pxtop') + '" data-girpxleft="" data-girpxtop="" data-girado="n" data-idf="' + datafurmovere.getAttribute('data-idf') + '" data-f="' + datafurmovere.getAttribute('data-f') + '" data-gir="' + datafurmovere.getAttribute('data-gir') + '" data-a="' + datafurmovere.getAttribute('data-a') + '" data-idpt="' + datafurmovere.getAttribute('data-idpt') + '" data-idpc="' + datafurmovere.getAttribute('data-idpc') + '" data-nomid="' + datafurmovere.getAttribute('data-nomid') + '" ';

                            muevhtmm += '<img data-prefi="encima.' + eseforencima + '" ' + dataseid + 'src="' + dominiobase + 'fly/i/fursv5/' + datafurmovere.getAttribute('data-nomid') + '/' + datafurmovere.getAttribute('data-idf') + 'encima.' + eseforencima + '" style="position: absolute;"/>';
                        }

                        document.getElementById('mueblemover').innerHTML = muevhtmm;

                    }
                }
            },
            sueltomueble = function (alby, albx) {
                ////////consola.log(('sueltomuebleen'+alby+'c'+albx);
                //document.getElementById('einfomovv') && pmoc == 'si' ||
                if (document.getElementById('einfomovv') && pmoc != 'no') {

                    if (document.getElementById('einfomovv').getAttribute('data-a') == 'poster' || document.getElementById('einfomovv').getAttribute('data-a') == 'poster2') {

                        var itoo = document.getElementById('einfomovv').getAttribute('data-ito');
                        var ilee = document.getElementById('einfomovv').getAttribute('data-ile');
                        itoo = parseInt(itoo);
                        ilee = parseInt(ilee);
                        ////////consola.log(('itoo'+itoo+'c'+ilee);


                        if (idpmuevo != 1) {//no viene de mochila POSTER

                            if (document.getElementById('mueblemover') && document.getElementById('mueblemover').style.display != 'none') {

                                if (document.getElementById('einfomovv').getAttribute('data-aorigi') != document.getElementById('einfomovv').getAttribute('data-a')) {
                                    //consola.log('moverygira');
                                    katman('accionarv3', 'moverygira', idpmuevo, itoo, ilee, 0);
                                } else {
                                    katman('accionarv3', 'mover', idpmuevo, itoo, ilee, 0);
                                }

                            } else {
                                if (document.getElementById('idencf' + idpmuevo)) document.getElementById('idencf' + idpmuevo).style.display = 'inline';
                                if (document.getElementById('idf' + idpmuevo)) document.getElementById('idf' + idpmuevo).style.display = 'inline';
                                ////consola.log('aki no cabe');
                            }
                            if (idpmuevo > 0) {
                                idpmuevo = 0; borrar('mueblemover');
                                //document.getElementById('kekoall').addEventListener("mousemove", lolsolo, false);
                                document.getElementById('kekoall').removeEventListener("mousemove", movekekoall, false);
                            }
                        } else {//si viene de mochila
                            ////////consola.log(('sueltoidf'+document.getElementById('einfomovv').getAttribute('data-idfahora'));
                            //katman('accionarv3','sueltodesdemochila',document.getElementById('einfomovv').getAttribute('data-idfahora'),alby,albx,akibahaltura);
                            var encontrenmoc = 'no';
                            if (document.getElementById('mueblemover') && document.getElementById('mueblemover').style.display != 'none') {
                                ////consola.log('si viene de moc y cabe aki');
                                katman('accionarv3', 'sueltodesdemochila', document.getElementById('einfomovv').getAttribute('data-idf'), itoo, ilee, 0);

                                if (document.getElementById('akimoc')) {
                                    if (document.getElementById('mochi' + document.getElementById('einfomovv').getAttribute('data-nomid'))) {

                                        encontrenmoc = anadeamoc(document.getElementById('mochi' + document.getElementById('einfomovv').getAttribute('data-nomid')), 1, 'recogermiro');

                                    }
                                }
                            } else {
                                ////consola.log('viene de moc y no cabe aki');
                                //encontrenmoc = anadeamoc(document.getElementById('mochi'+document.getElementById('einfomovv').getAttribute('data-nomid')),1,'agrego');
                                encontrenmoc = 'no';
                            }

                            if (encontrenmoc == 'no') {
                                if (idpmuevo > 0) {
                                    idpmuevo = 0; borrar('mueblemover');
                                    //document.getElementById('kekoall').addEventListener("mousemove", lolsolo, false);
                                    document.getElementById('kekoall').removeEventListener("mousemove", movekekoall, false);
                                }
                            }
                        }
                        //document.getElementById('einfomovv').setAttribute('data-ile',(clientXx-mipospxleft));
                        //document.getElementById('einfomovv').setAttribute('data-ito',(clientYy-mipospxtop));
                    } else {//NO ES UN POSTER
                        if (!mirosiNOcabeaqui(alby, albx, document.getElementById('einfomovv'))) {
                            //////////consola.log(('sicabeaki');

                            var albyaltura = alby;
                            var albxaltura = albx;
                            if (sy > 0 || sx > 0 || sy < 0 || sx < 0) {
                                albyaltura += (ployy * sy);
                                albxaltura += (ploxx * sx);
                            }

                            var akibahaltura = ffursencmaltur[albyaltura + 'c' + albxaltura];
                            //console.log('suelto'+idpmuevo+' a '+albyaltura+'c'+albxaltura+' altura'+akibahaltura);

                            //var mueblesencimadeesto = kkallaki.querySelectorAll('[data-so="'+idpmuevo+'"]');
                            //if(mueblesencimadeesto.length>0){
                            //for (var i = 0; i < mueblesencimadeesto.length; i++) {
                            //consola.log('encima hay idp'+mueblesencimadeesto[i].getAttribute('data-idp'));
                            //}
                            //}

                            var alturamesasuelto = document.getElementById('einfomovv').getAttribute('data-alt');

                            if (alturamesasuelto > 0)
                                alturamesasuelto = parseInt(alturamesasuelto);
                            if (document.getElementById('einfomovv').getAttribute('data-idpt') != '' && document.getElementById('einfomovv').getAttribute('data-idpt').substr(0, 4) == 'mesa') {
                                alturamesasuelto += parseInt(document.getElementById('einfomovv').getAttribute('data-idpt').replace('mesa', ''));
                            }

                            //////////consola.log(('alturamesasuelto'+alturamesasuelto);
                            if (alturamesasuelto > 0 && idpmuevo != 1) {
                                var sobreelmuebles_ya = kkallaki.querySelectorAll('[data-so="' + idpmuevo + '"]');
                                if (sobreelmuebles_ya.length > 0) {
                                    var idpbaj = 0;
                                    var idpbajs = [];
                                    for (var y = 0; y < sobreelmuebles_ya.length; y++) {
                                        idpbaj = sobreelmuebles_ya[y].getAttribute('data-idp');
                                        if (idpbaj && !idpbajs[idpbaj]) {
                                            idpbajs[idpbaj] = 1;
                                            ////////consola.log((idpbaj+'sumo'+alturamesasuelto);
                                            katman('faltur', idpbaj, alturamesasuelto);
                                            //////////consola.log(('habia idp sobre elquesuelto'+idpbaj+'sumoalturamesa'+alturamesasuelto);
                                        }
                                    }
                                }
                            }

                            if (idpmuevo != 1) {//no viene de mochila
                                if (document.getElementById('einfomovv').getAttribute('data-girado') == 's') {
                                    //consola.log('moverygira');
                                    katman('accionarv3', 'moverygira', idpmuevo, alby, albx, akibahaltura);
                                } else {
                                    katman('accionarv3', 'mover', idpmuevo, alby, albx, akibahaltura);
                                }
                                if (document.getElementById('einfomovv').getAttribute('data-a') != 'teleportse')
                                    ultimoidpmuevocontrolmia = idpmuevo;

                                if (idpmuevo > 0) {
                                    idpmuevo = 0; borrar('mueblemover');
                                    //document.getElementById('kekoall').addEventListener("mousemove", lolsolo, false);
                                    document.getElementById('kekoall').removeEventListener("mousemove", movekekoall, false);
                                }
                            } else {//si viene de mochila
                                ////////consola.log(('sueltoidf'+document.getElementById('einfomovv').getAttribute('data-idfahora'));

                                var yahayfurnisdentro = 0;
                                var maximomuebles = 5000;//maximo muebles en casas
                                if (modocity == 'si') {
                                    if (sectoresfurnisid[nombcas.sector])
                                        yahayfurnisdentro = sectoresfurnisid[nombcas.sector].length;
                                    maximomuebles = 250;//maximo muebles en parcelas
                                } else if (modocity == 'no') {
                                    yahayfurnisdentro = Object.keys(ffurscass).length;
                                }
                                //console.log('yahayfurnisdentro',yahayfurnisdentro);

                                var encontrenmoc = 'no';
                                var lopongooo = 'si';
                                if (modocity == 'si') {

                                    if (document.getElementById('einfomovv').getAttribute('data-idf') == '400150'
                                        || document.getElementById('einfomovv').getAttribute('data-idpt') == 'mascota'
                                        || document.getElementById('einfomovv').getAttribute('data-idf') == '400149'
                                        || document.getElementById('einfomovv').getAttribute('data-a') == 'masco'
                                        || document.getElementById('einfomovv').getAttribute('data-idpc') == 'cerberusbox'
                                        || document.getElementById('einfomovv').getAttribute('data-idpc') == 'cerberusbtn'
                                        || document.getElementById('einfomovv').getAttribute('data-a') == 'pelo') {
                                        alerta('Los sentimos pero este tipo de mueble no puede dejarse en una parcela.');
                                        lopongooo = 'no';
                                    }
                                }


                                if (lopongooo == 'si') {
                                    if (Object.keys(mascos).length >= 3 && document.getElementById('einfomovv').getAttribute('data-idpt') == 'mascota') {//nolangnew
                                        alerta('Has superado el m√°ximo de 3 bots y mascotas a poner en la casa');
                                    } else if (yahayfurnisdentro >= maximomuebles && yasoid != 269754) {//nolangnew
                                        alerta('Has superado el m√°ximo de ' + maximomuebles + ' en esta casa o parcela, recoge alg√∫n mueble para poder soltar m√°s muebles aqu√≠');
                                    } else {
                                        katman('accionarv3', 'sueltodesdemochila', document.getElementById('einfomovv').getAttribute('data-idfahora'), alby, albx, akibahaltura);

                                        if (document.getElementById('akimoc')) {
                                            if (document.getElementById('mochi' + document.getElementById('einfomovv').getAttribute('data-nomid'))) {

                                                encontrenmoc = anadeamoc(document.getElementById('mochi' + document.getElementById('einfomovv').getAttribute('data-nomid')), 1, 'recogermiro');

                                            }
                                        }
                                    }
                                }

                                if (encontrenmoc == 'no') {

                                    if (idpmuevo > 0) {
                                        idpmuevo = 0; borrar('mueblemover');
                                        //document.getElementById('kekoall').addEventListener("mousemove", lolsolo, false);
                                        document.getElementById('kekoall').removeEventListener("mousemove", movekekoall, false);
                                    }
                                }
                            }
                            //////////consola.log(('controlmia');
                        } else {
                            if (kkallaki.querySelector('[data-so="' + idpmuevo + '"]')) {

                                //document.getElementById('akiloqueclickado').innerHTML='';//nolang
                                oler({ error: iw[256] });
                                //alerta('el mueble ha sido recogido debido a que la nueva posici√≥n era invalida');
                                //////////consola.log(('nocabe');
                                accionar('recoger', idpmuevo, '');
                                //katman('accionarv3','recoger',idpmuevo,1,1,1);

                                if (idpmuevo > 0) {
                                    idpmuevo = 0; borrar('mueblemover');
                                    //document.getElementById('kekoall').addEventListener("mousemove", lolsolo, false);
                                    document.getElementById('kekoall').removeEventListener("mousemove", movekekoall, false);
                                }
                            } else {
                                agregoinfofurni(idpmuevo, '');
                                if (document.getElementById('idencf' + idpmuevo)) document.getElementById('idencf' + idpmuevo).style.display = 'inline';
                                if (document.getElementById('idf' + idpmuevo)) document.getElementById('idf' + idpmuevo).style.display = 'inline';

                                if (idpmuevo > 0) {
                                    idpmuevo = 0; borrar('mueblemover');
                                    //document.getElementById('kekoall').addEventListener("mousemove", lolsolo, false);
                                    document.getElementById('kekoall').removeEventListener("mousemove", movekekoall, false);
                                }
                            }
                        }
                    }
                } else {

                    if (idpmuevo > 0) {
                        idpmuevo = 0; borrar('mueblemover');
                        //document.getElementById('kekoall').addEventListener("mousemove", lolsolo, false);
                        document.getElementById('kekoall').removeEventListener("mousemove", movekekoall, false);
                    }
                    alerta(iw[257]);
                }
            },

            mirosiNOpuedegirar = function (casillaye, casillaxe, divmueblle) {

                var idpee4 = divmueblle.getAttribute('data-idpc');
                var stabasobre = divmueblle.getAttribute('data-so');

                var casillayxstamir = casillaye + 'c' + casillaxe;
                var casillayxstae = casillayxstamir;
                var akistalaidpinicio = ffursidp[casillayxstamir];
                //kgraph.nodes[casillaye][casillaxe].idp;
                //
                var eeployy = ployy;
                var eeploxx = ploxx;
                var casillaycero = 1;
                var casillaxcero = 1;

                if (modocity == 'si') {
                    casillaycero = 2;
                    casillaxcero = 3;
                    if (sy > 0 || sx > 0 || sy < 0 || sx < 0) {
                        casillaycero += (eeployy * sy);
                        casillaxcero += (eeploxx * sx);
                        eeployy += (eeployy * sy);
                        eeploxx += (eeploxx * sx);
                    }

                    eeployy -= 2;
                    eeploxx -= 2;

                }

                //console.log('casillaye',casillaye,' casillaycero',casillaycero);
                //console.log('casillaxe',casillaxe,' casillaxcero',casillaxcero);
                //var posicx = casillaidp.split('c',2);
                var casyecheck = parseInt(casillaye);
                var casxecheck = parseInt(casillaxe);
                var yybocheck = 0;
                var xxbocheck = 0;
                if (akistalaidpinicio != divmueblle.getAttribute('data-idp')) {
                    return false;//Hay algo encima de esto giro doble
                } else if (modocity == 'si' && casillaye <= casillaycero || modocity == 'si' && casillaxe <= casillaxcero || modocity == 'si' && (eeployy - 1) <= casillaye || modocity == 'si' && eeploxx <= casillaxe || casillaye < 0 || casillaxe < 0 || eeployy < casillaye || eeploxx < casillaxe) {// || !ffursidp[casillaye+'c'+casillaxe]){
                    //console.log('no puede girar');
                    return true;
                }
                if (idpee4 > 0) {

                    var cortiyaidp4ce = idpee4.split('.', 2);
                    var eyecheck_original = parseInt(cortiyaidp4ce[1]);
                    var execheck_original = parseInt(cortiyaidp4ce[0]);
                    //cambio al reves para ver si al girar cabria
                    var eyecheck = execheck_original;
                    var execheck = eyecheck_original;

                    for (var iicheck = 1; iicheck < eyecheck; iicheck++) {
                        yybocheck = (casyecheck + iicheck);
                        xxbocheck = casxecheck;
                        casillayxstae = yybocheck + 'c' + xxbocheck;
                        if (yybocheck <= 0 || ffurs[casillayxstae] == 'nmos' || xxbocheck < 0 || eeployy < yybocheck || eeploxx < xxbocheck || !ffursidp[casillayxstae] && stabasobre != '' || ffursidp[casillayxstae] != null && ffursidp[casillayxstae] && ffursidp[casillayxstae] != akistalaidpinicio && ffurscass['f' + ffursidp[casillayxstae]] != casillayxstamir) {
                            return true;
                        }
                        for (var xxcheck = 1; xxcheck < execheck; xxcheck++) {
                            yybocheck = (casyecheck + iicheck);
                            xxbocheck = (casxecheck - xxcheck);
                            casillayxstae = yybocheck + 'c' + xxbocheck;

                            if (yybocheck <= 0 || ffurs[casillayxstae] == 'nmos' || xxbocheck < 0 || eeployy < yybocheck || eeploxx < xxbocheck || !ffursidp[casillayxstae] && stabasobre != '' || ffursidp[casillayxstae] != null && ffursidp[casillayxstae] && ffursidp[casillayxstae] != akistalaidpinicio && ffurscass['f' + ffursidp[casillayxstae]] != casillayxstamir) {
                                return true;
                            }
                        }

                    }
                    for (var xxcheck = 1; xxcheck < execheck; xxcheck++) {
                        yybocheck = casyecheck;
                        xxbocheck = (casxecheck - xxcheck);
                        casillayxstae = yybocheck + 'c' + xxbocheck;
                        if (yybocheck <= 0 || ffurs[casillayxstae] == 'nmos' || xxbocheck < 0 || eeployy < yybocheck || eeploxx < xxbocheck || !ffursidp[casillayxstae] && stabasobre != '' || ffursidp[casillayxstae] != null && ffursidp[casillayxstae] != akistalaidpinicio && ffurscass['f' + ffursidp[casillayxstae]] != casillayxstamir) {
                            return true;
                        }
                    }
                }
            },
            mirosicabeencasillas = function (idpchecke, casillaye, casillaxe, idpee4) {
                var casillaidp = ffurscass['f' + idpchecke];
                if (casillaidp) {
                    var posicx = casillaidp.split('c', 2);
                    var casyecheck = parseInt(posicx[0]);
                    var casxecheck = parseInt(posicx[1]);
                    var yybocheck = 0;
                    var xxbocheck = 0;
                    if (casyecheck == casillaye && casxecheck == casillaxe) {
                        return true;
                    } else if (idpee4 > 0) {
                        var cortiyaidp4ce = idpee4.split('.', 2);
                        var eyecheck = parseInt(cortiyaidp4ce[1]);
                        var execheck = parseInt(cortiyaidp4ce[0]);

                        for (var iicheck = 1; iicheck < eyecheck; iicheck++) {
                            yybocheck = (casyecheck + iicheck);
                            xxbocheck = casxecheck;
                            if (yybocheck == casillaye && xxbocheck == casillaxe) {
                                return true;
                            }
                            for (var xxcheck = 1; xxcheck < execheck; xxcheck++) {
                                yybocheck = (casyecheck + iicheck);
                                xxbocheck = (casxecheck - xxcheck);

                                if (yybocheck == casillaye && xxbocheck == casillaxe) {
                                    return true;
                                }
                            }

                        }
                        for (var xxcheck = 1; xxcheck < execheck; xxcheck++) {
                            yybocheck = casyecheck;
                            xxbocheck = (casxecheck - xxcheck);
                            if (yybocheck == casillaye && xxbocheck == casillaxe) {
                                return true;
                            }
                        }
                    }
                }
            },
            sobrecasa = function (sta) {
                if (sta && sta.getAttribute('data-categoria')) {
                    var stetop = sta.offsetTop;
                    if (sta.parentNode && sta.parentNode.parentNode && sta.parentNode.parentNode.parentNode)
                        stetop -= sta.parentNode.parentNode.scrollTop;
                    var steleft = sta.parentNode.parentNode.parentNode.offsetLeft;//431
                    steleft += 395;
                    stetop += 11;

                    var taggg = '';
                    var esempresaesta = '';

                    if (sta.getAttribute('data-emplaca') != '') {
                        esempresaesta = '<br/><br/><b>' + iw[258] + '</b><br><span class="texpix"><img src="' + dominiobase + 'fly/placas/' + sta.getAttribute('data-emplaca') + '.png" style="float:left;margin-right:6px;"><b>' + sta.getAttribute('data-emnombre') + '</b><br><i>' + sta.getAttribute('data-emdescripcion') + '</i><br/>'
                            + '</span>';
                    }

                    var sihaygn = '';

                    if (sta.getAttribute('data-akihay') >= 1)
                        sihaygn = '<button class="btnwo" id="kiendentrobtn' + sta.getAttribute('data-roomId') + '" onclick="this.disabled=\'true\';this.innerHTML=\'..\';void(0);">' + iw[259] + '</button><br/><div class="kiendentrodivs" id="kiendentrodi' + sta.getAttribute('data-roomId') + '"></div>';

                    var htmltot = `
                        <span class="texpix">
                            <i class="icon-home"></i> 
                            <div><b>${sta.getAttribute('data-nombre')}</b></div>
                            <div><i>${sta.getAttribute('data-descripcion')}</i></div>

                           <div>
                            <b>${iw[260]}</b> 
                            <i class="icon-user"></i> ${sta.getAttribute('data-keko')}
                           </div>

                            <div>
                                <b>${iw[261]}</b>
                            </div>

                            <div>
                                <b>${iw[262]}</b> 
                                <i class="icon-dribbble"></i> ${sta.getAttribute('data-roomId')}
                            </div>

                            <div>
                                <b>${iw[263]}</b> 
                                <i class="icon-group"></i> ${sta.getAttribute('data-akihay')} / ${sta.getAttribute('data-maxgente')} ${sihaygn}
                            </div>

                            <button class="btnwo" id="kiendentrobtn${sta.getAttribute('data-roomId')}" 
                                onclick="window.location='#/h/${sta.getAttribute('data-roomId')}';">
                                ${iw[264]}
                            </button>
                            
                            ${esempresaesta}<br/>
                            ${taggg}<br/>
                        </span>
                    `;

                    if (yasoid == sta.getAttribute('data-ikek') || yosoplac == 'mod4') {//nolang
                        htmltot += '<br><input type="button" class="btnwo" value="' + iw[265] + '" data-rid="' + sta.getAttribute('data-roomId') + '" id="ajustesca' + sta.getAttribute('data-roomId') + '">'
                    }

                    var htmla = '<table style="border:0;margin:0;padding:0;" cellpadding="0" cellspacing="0"><tr><td valign="top"><img src="' + dominiobase + 'maskeko/images/coletilla_izq.png" id="top_flecha_menu" style="position:absolute;margin-top:30px;"/>' +
                        '</td><td><div class="globocaas">' + htmltot + '</div></td></tr></table>';

                    if (document.getElementById('coletill')) {
                        document.getElementById('coletill').innerHTML = htmla;
                        document.getElementById('coletill').removeAttribute('class');
                        document.getElementById('coletill').style.top = stetop + 'px';
                        document.getElementById('coletill').style.left = steleft + 'px';

                        if (sta.getAttribute('data-akihay') >= 1) {
                            if (document.getElementById('kiendentrobtn' + sta.getAttribute('data-roomId'))) {
                                document.getElementById('kiendentrobtn' + sta.getAttribute('data-roomId')).onclick = function () {
                                    katman('kienhayen', sta.getAttribute('data-roomId'));
                                };

                            }
                        }
                        if (yasoid == sta.getAttribute('data-ikek') && document.getElementById('ajustesca' + sta.getAttribute('data-roomId')) || yosoplac == 'mod4') {
                            //nolang
                            document.getElementById('ajustesca' + sta.getAttribute('data-roomId')).onclick = function () {
                                winsor('myroom', iw[266] + ' ' + sta.getAttribute('data-nombre'), this.getAttribute('data-rid'), '', '', '');
                            };
                        }

                    }
                }
            },
            coins = {},
            minikanvasburbscache = [],
            borrocacheburb = function (idkekodelburb) {
                if (idkekodelburb == 'todas') {
                    minikanvasburbscache = [];
                } else {
                    var exissyoe = minikanvasburbscache.indexOf(idkekodelburb);
                    if (exissyoe >= 0) {
                        minikanvasburbscache.splice(exissyoe, 1);
                    }
                }
            },
            minikanvasburb = function (canvas, mropab, idkekodelburb) {
                //consola.log('canvas',canvas);
                //var canvas = document.createElement('canvas');
                //if(canvas){

                canvas.width = 30;
                canvas.height = 40;
                var mropabe = mropab.split('L');

                var context = canvas.getContext('2d');

                //fotocabeza
                var carafok4 = 'stand4';
                var carafot = 'stand4';
                var sources = [];

                if (mropabe[18] == 4) mropabe[18] = 3;//temporal cabezas v14 no tiene click

                var urlcabe = 'cabezasv1' + mropabe[18];
                var urlcara = 'carasv1' + mropabe[18];

                mropabe[4] = 'stand4';
                //////////////consola.log('mropabe',mropabe);
                if (mropabe[8]) {
                    sources.push(dominiobase + "kekbasetodov7click/" + urlcabe + "/" + mropabe[8] + ".png");
                    if (carafot)//cara
                    {
                        sources.push(dominiobase + "kekbasetodov7click/" + urlcara + "/" + mropabe[8] + ".png");
                    }
                }

                if (mropabe[7]) {
                    if (mropabe[13]) {
                        sources.push(dominiobase + "kekbasetodov7click/pelocor/" + mropabe[7] + ".png");
                    }
                    else {
                        sources.push(dominiobase + "kekbasetodov7click/pelo/" + mropabe[7] + ".png");
                    }

                }
                if (mropabe[11])//ojos - gafas
                {
                    sources.push(dominiobase + "kekbasetodov7click/sombrero/" + mropabe[11] + ".png");
                }
                //boca (barbas)// && carafot4antesdebailar != 'stand1' && carafot4antesdebailar != 'stand2' && carafot4 != 'stand7')
                if (mropabe[10] && mropabe[4] != 'stand7') {
                    sources.push(dominiobase + "kekbasetodov7click/sombrero/" + mropabe[10] + ".png");
                }

                //OJOAKI
                if (mropabe[13])//sombrero
                {
                    sources.push(dominiobase + "kekbasetodov7click/sombrero/" + mropabe[13] + ".png");
                }
                if (mropabe[9])//nariz (mascaras)
                {
                    sources.push(dominiobase + "kekbasetodov7click/sombrero/" + mropabe[9] + ".png");
                }

                var images = [];
                var loadedImages = 0;
                var numImages = sources.length;
                // get num of sources

                if (minikanvasburbscache.indexOf(idkekodelburb) >= 0) {
                    for (var src = 0; src < numImages; src++) {
                        images[src] = new Image();
                        images[src].onload = function () {
                            context.drawImage(this, -18, -3, 60, 80);
                        };
                        images[src].src = sources[src];
                    }
                } else {
                    loadImages(sources, function (images) {
                        for (var prop = 0; prop < sources.length; prop++) {
                            context.drawImage(images[prop], -18, -3, 60, 80);
                        }
                        if (minikanvasburbscache.indexOf(idkekodelburb) == -1)
                            minikanvasburbscache.push(idkekodelburb);
                    });
                }
            },
            hitTest = function (a, b) {
                var aLeft = a.offsetLeft;
                var aRight = a.offsetLeft + a.offsetWidth;
                var aTop = a.offsetTop;
                var aBottom = a.offsetTop + 20;//a.offsetHeight;

                var bLeft = b.offsetLeft;
                var bRight = b.offsetLeft + b.offsetWidth;
                var bTop = b.offsetTop;
                var bBottom = b.offsetTop + 20;// + b.offsetHeight;

                return !(bLeft > aRight
                    || bRight < aLeft
                    || bTop > aBottom
                    || bBottom < aTop
                );
            },
            sprite = function (options) {

                var that = {},
                    imagbebidas = {},
                    foknums = ["stand1", "stand2", "stand4", "stand5", "stand6", "stand7", "stand8", "stand9",
                        "stand1sentado_se", "stand1sentado_nw", "stand1sentado_ne", "stand1sentado_sw",
                        "stand1estirado_se", "stand1estirado_nw", "stand1estirado_ne", "stand1estirado_sw",
                        "walk1", "walk2", "walk4", "walk5", "walk6", "walk7", "walk8", "walk9",
                        "walk11",
                        "walk21",
                        "walk41", "walk42", "walk43",
                        "walk51", "walk52", "walk53",
                        "walk61",
                        "walk71",
                        "walk81",
                        "walk91",
                        "walk1bebe", "walk11bebe",
                        "walk2bebe", "walk21bebe",
                        "walk4bebe", "walk41bebe", "walk42bebe", "walk43bebe",
                        "walk5bebe", "walk51bebe", "walk52bebe", "walk53bebe",
                        "walk6bebe", "walk61bebe",
                        "walk7bebe", "walk71bebe",
                        "walk8bebe", "walk81bebe",
                        "walk9bebe", "walk91bebe",
                        "stand1bebe", "stand2bebe", "stand4bebe", "stand5bebe", "stand6bebe", "stand7bebe", "stand8bebe", "stand9bebe",
                        "walk1inger", "walk11inger",
                        "walk2inger", "walk21inger",
                        "walk4inger", "walk41inger", "walk42inger", "walk43inger",
                        "walk5inger", "walk51inger", "walk52inger", "walk53inger",
                        "walk6inger", "walk61inger",
                        "walk7inger", "walk71inger",
                        "walk8inger", "walk81inger",
                        "walk9inger", "walk91inger",
                        "stand1inger", "stand2inger", "stand4inger", "stand5inger", "stand6inger", "stand7inger", "stand8inger", "stand9inger",
                        "stand1sentado_sebebe", "stand1sentado_nwbebe", "stand1sentado_nebebe", "stand1sentado_swbebe",
                        "stand1sentado_seinger", "stand1sentado_nwinger", "stand1sentado_neinger", "stand1sentado_swinger",
                        "stand1estirado_sebebe", "stand1estirado_nwbebe", "stand1estirado_nebebe", "stand1estirado_swbebe",
                        "stand1estirado_seinger", "stand1estirado_nwinger", "stand1estirado_neinger", "stand1estirado_swinger"],
                    frameIndex = 0,
                    frameIndexfots = 0,
                    frameIndexcabs = 0,
                    pongoenframeindex = 0,
                    tickCount = 0,
                    carafok0 = options.datosfoke[0],
                    carafok1 = options.datosfoke[1],
                    carafok2 = options.datosfoke[2],
                    carafok3 = options.datosfoke[3],
                    carafok4 = options.datosfoke[4],
                    canvas = options.staimagen,
                    context = options.staimagencon,
                    carafot,
                    carafok012 = carafok0 + carafok1 + carafok2 + carafok3,
                    carafok012sinplusstand = 'stand' + carafok1 + carafok2 + carafok3,
                    carafok012pantasininger = carafok012sinplusstand,
                    dcab,
                    caradfok,
                    caradcab,
                    walkplus = 0,
                    carafok0envio,
                    carafok2envio,
                    carafok2tenia,
                    walkplusfoto = 0,
                    parpadeo = 0,
                    walknumconplus = '',
                    cargetodo,
                    queimagen,
                    soynadar,
                    diferentecabeza = 'n',
                    fknum = carafok1,
                    carafok012sinplus,
                    actualizame = 's',
                    fotocabezas,
                    fotocabezase = [],
                    estahablando = 0,
                    estahablandotot = 0,
                    ponloenxcabeza = 0,
                    ponloenycabeza = 0,
                    bebidabase = '',
                    bebidabasetodo,
                    bebibascarpeta,
                    bebidabasecarpeta,
                    bebidasobrecabeza = 'n',
                    posxbeb = 0,
                    posybeb = 0,
                    carafot4 = 'stand' + carafok1,
                    carafot4singirada = carafot4,
                    imagese = {},
                    x = 0,
                    y = 0,
                    xcabeza = 0,
                    ycabeza = 0,
                    timeou,
                    soyaccion = function () {
                        ////consola.log(that.canvas.parentNode.getAttribute('data-kek')+' soyaccion');
                        switch (carafok2) {
                            case 'baila':
                                //inicio soy bailar
                                carafok0 = 'walk';
                                carafok0envio = 'walk';
                                switch (walkplus) {
                                    case 0:
                                    case 1:
                                    case 2:
                                        walkplusfoto = 0;
                                        break;
                                    case 3:
                                    case 4:
                                        walkplusfoto = 1;
                                        break;
                                    case 8:
                                    case 9:
                                    case 10:
                                        walkplusfoto = 1;
                                        break;
                                    case 12:
                                        carafok0envio = 'stand';
                                        break;
                                    case 13:
                                        walkplusfoto = 0;
                                        walkplus = 0;
                                        break;
                                    default:
                                        walkplusfoto = 0;
                                        if (walkplus > 13) {
                                            walkplus = 0;
                                            walkplusfoto = 0;
                                        }
                                }
                                if (walkplus < 6) {
                                    x = -walkplus;
                                } else {
                                    x = (walkplus - 6);
                                }
                                switch (fknum) {
                                    case '1':
                                        fotocabezas = ["stand1", "stand7", "stand7", "stand7", "stand7", "stand7", "stand1", "stand9", "stand9", "stand9", "stand9", "stand9"];
                                        break;
                                    case '2':
                                        fotocabezas = ["stand2", "stand7", "stand7", "stand7", "stand7", "stand7", "stand2", "stand6", "stand6", "stand6", "stand6", "stand6"];
                                        break;
                                    case '4':
                                        fotocabezas = ["stand8", "stand8", "stand8", "stand8", "stand8", "stand9", "stand4", "stand9", "stand9", "stand9", "stand9", "stand9"];
                                        break;
                                    case '5':
                                        fotocabezas = ["stand6", "stand6", "stand6", "stand6", "stand6", "stand6", "stand5", "stand8", "stand8", "stand8", "stand8", "stand8"];
                                        break;
                                    case '6':
                                        fotocabezas = ["stand2", "stand2", "stand2", "stand2", "stand2", "stand6", "stand5", "stand5", "stand5", "stand5", "stand5", "stand5"];
                                        break;
                                    case '7':
                                        fotocabezas = ["stand7", "stand2", "stand2", "stand2", "stand2", "stand2", "stand7", "stand1", "stand1", "stand1", "stand1", "stand1"];
                                        break;
                                    case '8':
                                        fotocabezas = ["stand8", "stand5", "stand5", "stand5", "stand5", "stand5", "stand8", "stand4", "stand4", "stand4", "stand4", "stand4"];
                                        break;
                                    case '9':
                                        fotocabezas = ["stand1", "stand1", "stand1", "stand1", "stand1", "stand9", "stand4", "stand4", "stand4", "stand4", "stand4", "stand4"];
                                        break;
                                }
                                if (fotocabezas) {
                                    if (fotocabezas[walkplus]) {

                                        //if(carafot4==fotocabezase[walkplus])
                                        //diferentecabeza='n';
                                        //else

                                        carafot4 = fotocabezas[walkplus];
                                    }
                                }
                                diferentecabeza = 's';
                                //fin soy bailar
                                break;
                        }
                    },
                    tengobebida = function () {
                        ////

                        //consola.log('tengobebida');
                        var formatobebe = ".gif";
                        //INICIO BEBIDAS POSICION
                        if (carafok3 == 'bebe' || carafok3 == 'inger') {
                            ////consola.log('carafot4singirada='+carafot4singirada);
                            //consola.log('carafok4=',carafok4);
                            switch (carafok4) {
                                case '1':
                                    bebidabase = 'acua';
                                    break;
                                case '2':
                                    bebidabase = 'pizza';
                                    break;
                                case '3':
                                    bebidabase = 'cola';
                                    break;
                                case '4':
                                    bebidabase = 'lemon';
                                    break;
                                case '5'://cafe
                                    bebidabase = 'vaso';
                                    break;
                                case '6'://palomitas
                                    bebidabase = 'palomitas';
                                    break;
                                case '7'://bocadillo
                                    bebidabase = 'bocadillo';
                                    break;
                                case '8':
                                    bebidabase = 'helado';
                                    break;
                                case '9':
                                    bebidabase = 'taza';
                                    break;
                                case '10':
                                    bebidabase = 'camara';

                                    //consola.log('camara');
                                    break;
                                default:
                                    bebidabase = carafok4;
                                    formatobebe = ".png";
                                    break;
                            }
                            if (carafok3 == 'bebe') {
                                switch (carafot4singirada) {
                                    case 'stand1sentado_ne':
                                        bebidasobrecabeza = 's';
                                        posxbeb = 17;
                                        posybeb = 52;
                                        if (bebidabase == 'palomitas' || bebidabase == 'helado' || bebidabase == 'bocadillo')
                                            bebidabase += '3';
                                        break;
                                    case 'stand1sentado_nw':
                                        posxbeb = 62;
                                        posybeb = 52;
                                        if (bebidabase == 'palomitas' || bebidabase == 'helado' || bebidabase == 'bocadillo')
                                            bebidabase += '3';

                                        bebidasobrecabeza = 's';
                                        break;
                                    case 'stand1sentado_sw':
                                        posxbeb = 60;
                                        posybeb = 49;
                                        bebidabase += '3';
                                        break;
                                    case 'stand1estirado_nw':
                                        posxbeb = 49;
                                        posybeb = 42;
                                        bebidasobrecabeza = 's';
                                        break;
                                    case 'stand1estirado_sw':
                                        posxbeb = 40;
                                        posybeb = 49;
                                        break;
                                    case 'stand5':
                                        bebidasobrecabeza = 's';
                                        posxbeb = 22;
                                        posybeb = 58;
                                        if (bebidabase == 'palomitas' || bebidabase == 'helado' || bebidabase == 'bocadillo')
                                            bebidabase += '3';
                                        break;
                                    case 'stand2':
                                        posxbeb = 19;
                                        posybeb = 49;
                                        bebidabase += '3';
                                        break;
                                    case 'stand1sentado_se':
                                        posxbeb = 19;
                                        posybeb = 49;
                                        bebidabase += '3';
                                        break;
                                    case 'stand4':
                                        bebidasobrecabeza = 's';
                                        posxbeb = 59;
                                        posybeb = 59;
                                        if (bebidabase == 'palomitas' || bebidabase == 'helado' || bebidabase == 'bocadillo')
                                            bebidabase += '3';
                                        break;
                                    case 'stand1':
                                        posxbeb = 59;
                                        posybeb = 49;
                                        bebidabase += '3';
                                        break;
                                    case 'stand6':
                                        posxbeb = 22;
                                        posybeb = 55;
                                        if (bebidabase == 'bocadillo')
                                            bebidabase += '3';
                                        break;
                                    case 'stand8':
                                        posxbeb = 38;
                                        posybeb = 53;
                                        bebidasobrecabeza = 's';
                                        bebidabase += '3';
                                        break;
                                    case 'stand9':
                                        posxbeb = 57;
                                        posybeb = 55;
                                        if (bebidabase == 'bocadillo')
                                            bebidabase += '3';
                                        break;
                                    default:
                                        posxbeb = 0;
                                        posybeb = 0;
                                        break;
                                }
                                //inicio bebidas inger
                            } else if (carafok3 == 'inger') {
                                switch (carafot4singirada) {
                                    case 'stand1sentado_ne':
                                        bebidasobrecabeza = 's';
                                        posxbeb = 19;
                                        posybeb = 42;
                                        if (bebidabase == 'palomitas' || bebidabase == 'vaso' || bebidabase == 'helado' || bebidabase == 'bocadillo')
                                            bebidabase += '4';
                                        else
                                            bebidabase += '4';
                                        break;
                                    case 'stand1sentado_nw':
                                        bebidasobrecabeza = 's';
                                        posxbeb = 52;
                                        posybeb = 42;
                                        bebidabase += '1';

                                        break;
                                    case 'stand1sentado_sw':
                                        posxbeb = 53;
                                        posybeb = 42;
                                        bebidabase += '1';
                                        break;
                                    case 'stand1sentado_se':
                                        posxbeb = 20;
                                        posybeb = 42;
                                        bebidabase += '4';
                                        break;
                                    case 'stand1estirado_nw':
                                        posxbeb = 29;
                                        posybeb = 52;
                                        bebidabase += '4';
                                        bebidasobrecabeza = 's';
                                        break;
                                    case 'stand1estirado_sw':
                                        posxbeb = 30;
                                        posybeb = 69;
                                        bebidabase += '4';
                                        break;
                                    case 'stand5':
                                        bebidasobrecabeza = 's';
                                        posxbeb = 22;
                                        posybeb = 42;
                                        //if(bebidabase == 'palomitas' || bebidabase == 'vaso' || bebidabase == 'helado' || bebidabase == 'bocadillo')
                                        //bebidabase+='3';
                                        //else
                                        bebidabase += '4';
                                        break;
                                    case 'stand4':
                                        bebidasobrecabeza = 's';
                                        posxbeb = 49;
                                        posybeb = 42;
                                        //if(bebidabase == 'palomitas' || bebidabase == 'vaso' || bebidabase == 'helado' || bebidabase == 'bocadillo')
                                        bebidabase += '1';
                                        //else
                                        //bebidabase+='4';
                                        break;
                                    case 'stand2':
                                        posxbeb = 19;
                                        posybeb = 39;
                                        bebidabase += '4';
                                        break;
                                    case 'stand1sentado_se':
                                        posxbeb = 19;
                                        posybeb = 39;
                                        bebidabase += '4';
                                        break;
                                    case 'stand1':
                                        posxbeb = 54;
                                        posybeb = 39;
                                        bebidabase += '1';
                                        bebidasobrecabeza = 'n';
                                        break;
                                    case 'stand6':
                                        posxbeb = 20;
                                        posybeb = 40;
                                        bebidabase += '4';

                                        break;
                                    case 'stand8':
                                        bebidasobrecabeza = 's';
                                        posxbeb = 41;
                                        posybeb = 43;
                                        bebidabase += '3';
                                        break;
                                    case 'stand9':
                                        posxbeb = 52;
                                        posybeb = 40;
                                        //bebidasobrecabeza='s';
                                        bebidabase += '1';
                                        break;
                                    default:
                                        posxbeb = 0;
                                        posybeb = 0;
                                }
                            }
                            if (bebidabase == 'bocadillo')
                                bebidabase = 'bocadillo1';


                            bebibascarpeta = 'bebidas';
                            if (carafok4 == '10' || isNaN(carafok4)) {
                                //TENGO CAMARA

                                if (carafok012sinplusstand != 'stand7inger') {
                                    bebidabase = carafok012sinplusstand;
                                    //consola.log('bebidabase',bebidabase);
                                    posybeb = 1; posxbeb = 1;
                                    //if(carafok012sinplusstand == 'stand1estirado_seinger'){
                                    //bebidasobrecabeza='s';
                                    //}
                                    bebidasobrecabeza = 's';
                                } else {
                                    bebidabase = '';
                                    posybeb = 0; posxbeb = 0;
                                }
                                if (isNaN(carafok4)) {
                                    bebibascarpeta = carafok4;
                                    bebidabase = carafot4singirada;
                                    posybeb = 1; posxbeb = 0;
                                } else
                                    bebibascarpeta = 'bebidas';
                            }

                            bebidabasetodo = bebidabase + bebibascarpeta + bebidabasecarpeta;

                            if (posybeb > 0 || posxbeb > 0) {
                                posybeb += y;
                                posxbeb += x

                                //posybeb = posybeb * that.scaleRatioy;
                                //posxbeb = posxbeb * that.scaleRatiox;

                                if (bebibascarpeta == 'motosierra')
                                    formatobebe = ".gif";

                                ////consola.log('carafot4='+carafot4);
                                if (!imagbebidas[bebidabasetodo]) {
                                    var imageb = new Image();
                                    imageb.onload = function () {
                                        imagbebidas[bebidabasetodo] = imageb;
                                        render();
                                    };
                                    imageb.src = dominiobase + "kekbasetodov4/" + bebibascarpeta + "/1/" + bebidabase + formatobebe;
                                } else {
                                    context.drawImage(
                                        imagbebidas[bebidabasetodo],
                                        posxbeb,
                                        posybeb);
                                }

                            }

                        }
                    },
                    render = function () {
                        ////consola.log('render');

                        //canvas = document.createElement('canvas');
                        canvas.width = canvas.width;
                        //canvas.height=120;
                        //context = canvas.getContext("2d");
                        if (diferentecabeza == 's') {
                            ////consola.log('fknum='+fknum+' carafot4='+carafot4);
                            ycabeza = 2;
                            xcabeza = 0;
                            if (carafot4 == 'stand8') {
                                if (fknum == 4 || carafok012 == 'stand1sentado_nw')
                                    xcabeza = 2;
                                else
                                    xcabeza = -2;
                            }
                        } else {
                            xcabeza = 0;
                            ycabeza = 0;
                        }
                        if (carafok4) {
                            posybeb = 0;
                            bebidasobrecabeza = 'n';
                            tengobebida();
                        }
                        for (queimagen in imagese) {
                            ponloenxcabeza = xcabeza;
                            ponloenycabeza = ycabeza;
                            switch (queimagen) {
                                case 'cabezasv4habla':
                                case 'carasv4habla':
                                    if (parpadeo == 0 && estahablando != 10 && estahablando != 8 && estahablando != 6 && estahablando != 4 && estahablando != 2 && estahablando != 0)
                                        pongoenframeindex = foknums.indexOf(carafot4);
                                    else
                                        pongoenframeindex = -2;

                                    //if(parpadeo == 0 && estahablando==6 || parpadeo == 0 && estahablando==8){
                                    //ponloenycabeza++;
                                    //}
                                    break;
                                case 'carasv4parpadea':
                                    if (parpadeo == 1)
                                        pongoenframeindex = foknums.indexOf(carafot4);
                                    else
                                        pongoenframeindex = -2;
                                    break;
                                case 'cabezasv4':
                                case 'carasv4':
                                    if (parpadeo == 1 && queimagen == 'cabezasv4' || parpadeo == 0 && estahablando != 9 && estahablando != 7 && estahablando != 5 && estahablando != 3 && estahablando != 1)
                                        pongoenframeindex = foknums.indexOf(carafot4);
                                    else
                                        pongoenframeindex = -2;
                                    break;
                                case 'pelo':
                                    pongoenframeindex = foknums.indexOf(carafot4);

                                    if (parpadeo == 0 && estahablando > 0 && estahablando != 3) {
                                        ponloenycabeza--;
                                    }
                                    ////consola.log('carafot4=',carafot4);
                                    break;
                                case 'sombrero':
                                case 'ojos':
                                case 'boca':
                                case 'nariz':
                                    pongoenframeindex = foknums.indexOf(carafot4);
                                    break;
                                case 'collar':
                                    if (carafok2 != 'nada') {
                                        pongoenframeindex = foknums.indexOf(carafot4);
                                    } else {
                                        pongoenframeindex = -3;
                                    }
                                    break;
                                case 'panta':

                                    if (carafok2 != 'nada') {
                                        pongoenframeindex = foknums.indexOf(carafok012pantasininger);
                                    } else {
                                        pongoenframeindex = -3;
                                    }
                                    ponloenxcabeza = 0;
                                    ponloenycabeza = 0;
                                    break;
                                default:

                                    if (carafok2 != 'nada') {
                                        pongoenframeindex = foknums.indexOf(carafok012);
                                    } else {
                                        pongoenframeindex = -3;
                                    }
                                    ponloenxcabeza = 0;
                                    ponloenycabeza = 0;
                            }

                            ////consola.log('pongoenframeindex'+pongoenframeindex+ 'numberOfFramesesto'+numberOfFramesesto);
                            if (pongoenframeindex >= 0) {

                                //consola.log('queimagen',queimagen,' carafok012',carafok012,' pongoenframeindex',pongoenframeindex);

                                context.drawImage(
                                    imagese[queimagen],
                                    pongoenframeindex * 90,
                                    0,
                                    90,
                                    120,
                                    x + ponloenxcabeza,
                                    y + ponloenycabeza,
                                    90,
                                    120);
                            }
                            //else if(pongoenframeindex==-1){
                            ////consola.log('OJOAKI NO ENCUENTRO '+queimagen+' DE carafot4='+carafot4+' YY EL carafok012='+carafok012+' pongoenframeindex'+pongoenframeindex);
                            //}
                        }


                        if (carafok4 && bebidasobrecabeza == 's' && imagbebidas[bebidabasetodo]) {
                            ////consola.log('mirobebida');
                            context.drawImage(
                                imagbebidas[bebidabasetodo],
                                posxbeb,
                                posybeb);
                        }

                        //qstaimagen.src=canvas.toDataURL();
                    },
                    parpadeaa = function () {
                        //consola.log('parpaeaa');
                        if (parpadeo == 0) {
                            parpadeo = 1; tickCount = 599;
                        } else {
                            tickCount = 4;
                            caradfok = ''; caradcab = '';
                        }
                        updateya();
                    },
                    updateya = function () {
                        //
                        //consola.log('updateya',canvas.getAttribute('data-kek'));
                        tickCount += 1;
                        if (cargetodo == 's') {
                            if (actualizame == 's' || parpadeo == 1 && tickCount == 5 || tickCount == 600) {

                                ////consola.log('updotameya '+qstaimagen.parentNode.getAttribute('data-kek')+' update');

                                if (parpadeo == 1 && tickCount == 5) {
                                    parpadeo = 0;
                                }
                                if (tickCount == 600) {
                                    parpadeo = 1;
                                }

                                tickCount = 0;

                                if (walkplusfoto > 9)
                                    walkplusfoto = 0;


                                carafok0envio = carafok0;
                                carafok2envio = carafok2;

                                diferentecabeza = 'n';
                                carafot4 = 'stand' + fknum;
                                carafot4singirada = carafot4;
                                if (caradcab && caradfok == carafok1) {
                                    carafot4 = 'stand' + caradcab;
                                    diferentecabeza = 's';
                                }
                                else if (carafok2 && carafok2 != 'baila' && carafok2 != 'nada') {
                                    carafot4 = 'stand1' + carafok2;
                                    carafot4singirada = carafot4;
                                }

                                if (carafok2 == 'nada') {
                                    if (carafok2tenia != 'nada') {
                                        y = 60;
                                        addClass(canvas, 'nada');
                                    }
                                } else if (carafok2 == 'baila') {
                                    soyaccion();
                                    carafok2envio = '';
                                    y = 0;
                                } else {
                                    y = 0;
                                    x = 0;
                                }
                                if (carafok2tenia == 'nada' && carafok2 != 'nada') {
                                    removeClass(canvas, 'nada');
                                }

                                carafok2tenia = carafok2;

                                walknumconplus = '';
                                if (carafok0envio == 'walk') {
                                    if (fknum == 4 || fknum == 5) {
                                        switch (walkplusfoto) {
                                            case 0:
                                                walknumconplus = '';
                                                break;
                                            case 1:
                                                walknumconplus = '1';
                                                break;
                                            case 2:
                                                walknumconplus = '';
                                                break;
                                            case 3:
                                                walknumconplus = '3';
                                                break;
                                            case 4:
                                                walknumconplus = '';
                                                break;
                                            case 5:
                                                walknumconplus = '3';
                                                break;
                                            case 6:
                                                walknumconplus = '';
                                                break;
                                            case 7:
                                                walknumconplus = '1';
                                                break;
                                            case 8:
                                                walknumconplus = '2';
                                                break;
                                            case 9:
                                                walknumconplus = '3';
                                                break;
                                            default:
                                                carafok0envio = 'stand';
                                                walknumconplus = '';
                                        }
                                    } else {
                                        switch (walkplusfoto) {
                                            case 0:
                                                walknumconplus = '1';
                                                break;
                                            case 1:
                                                walknumconplus = '';
                                                break;
                                            case 2:
                                                walknumconplus = '1';
                                                break;
                                            case 3:
                                                walknumconplus = '';
                                                break;
                                            case 4:
                                                carafok0envio = 'stand';
                                                walknumconplus = '';
                                                break;
                                            case 5:
                                                walknumconplus = '1';
                                                break;
                                            case 6:
                                                walknumconplus = '';
                                                break;
                                            case 7:
                                                walknumconplus = '1';
                                                break;
                                            case 8:
                                                walknumconplus = '';
                                                break;
                                            case 9:
                                                carafok0envio = 'stand';
                                                walknumconplus = '';
                                                break;
                                            default:
                                                walknumconplus = '1';
                                        }
                                    }
                                }

                                carafok012 = carafok0envio + carafok1 + walknumconplus + carafok2envio + carafok3;

                                //consola.log('carafok3===',carafok3);
                                if (carafok3 != 'inger')
                                    carafok012pantasininger = carafok012;
                                else
                                    carafok012pantasininger = carafok0envio + carafok1 + walknumconplus + carafok2envio + 'bebe';

                                carafok012sinplus = carafok0envio + carafok1 + carafok2envio + carafok3;
                                carafok012sinplusstand = 'stand' + carafok1 + carafok2envio + carafok3;

                                walkplusfoto++;
                                walkplus++;

                                if (estahablando > 0)
                                    estahablando--;

                                if (estahablandotot > 0) {
                                    estahablandotot--;
                                    if (estahablando == 0 && estahablandotot > 0) {
                                        estahablando = 10;
                                    }
                                }

                                if (estahablandotot == 0) {
                                    estahablando = 0;
                                }

                                //if(timeou){
                                //window.clearTimeout(timeou);
                                //}
                                if (actualizame == 'n' || estahablandotot == 0 && carafok0 == 'stand' || estahablandotot == 0 && walkplus > 14) {
                                    actualizame = 'n';

                                    if (modonolag == 'nunca') {
                                        if (parpadeo == 0) {
                                            timeou = window.setTimeout(parpadeaa, 2000);
                                        } else {
                                            timeou = window.setTimeout(parpadeaa, 200);
                                        }
                                    }

                                } else {
                                    timeou = window.setTimeout(updateya, 110);
                                }
                                if (walkplus == 14) {
                                    carafok0 = 'stand';
                                }
                                render();

                            }
                        }
                    };

                that.pongohablo = function (habll) {
                    ////consola.log('habll',habll);
                    walkplus = 0;
                    if (habll > 1) {
                        estahablandotot = habll;
                        estahablando = 10;
                    }
                    if (actualizame == 'n') {
                        actualizame = 's';
                        if (timeou) {
                            window.clearTimeout(timeou);
                        }
                        updateya();
                    }
                    ////consola.log(datosfok,' cabeza',cabeza,' caradfok',ddesfok,' estahablando',estahablando,'  hablando',hablando);
                };
                that.pongofok = function (datosfok, cabeza, ddesfok, hablando, walplusara) {

                    parpadeo = 0;
                    carafok0 = datosfok[0];
                    carafok1 = datosfok[1];
                    fknum = carafok1;
                    carafok2 = datosfok[2];
                    carafok3 = datosfok[3];
                    carafok4 = datosfok[4];
                    caradcab = cabeza;
                    caradfok = ddesfok;
                    if (hablando > 1) {
                        estahablandotot = hablando;
                        estahablando = 10;
                    }
                    //consola.log('pongofok actualizame',actualizame);
                    if (carafok2 != 'baila')
                        walkplus = walplusara;

                    if (actualizame == 'n') {
                        actualizame = 's';
                        if (timeou) {
                            window.clearTimeout(timeou);
                        }
                        updateya();
                    }
                    ////consola.log(that.canvas.parentNode.getAttribute('data-kek')+' walkplus',walkplus,' datosfok',datosfok,' caradcab',caradcab,' caradfok',ddesfok,' estahablando',estahablando,'  hablando',hablando);
                };
                that.limpiatimeou = function () {

                    if (timeou) {
                        //consola.log('limpiotimeou');
                        window.clearTimeout(timeou);
                        //timeou=null;
                    }
                };
                that.todocargado = function (imagenes) {
                    imagese = imagenes;
                    cargetodo = 's';
                    ////
                    //console.log(canvas.getAttribute('data-kek')+' todocargado');
                    ////consola.log('toocargado');
                    if (timeou) {
                        window.clearTimeout(timeou);
                    }
                    updateya();
                };

                return that;
            },
            destroyCoins = function () { //borro todos los kekos del loop

                var i;
                borrocacheburb('todas');
                for (i in coins) {
                    coins[i].limpiatimeou();
                    //////console.log('borra',i);
                    borrar(i);
                    //window.clearTimeout(coins[i].timeou);
                    delete coins[i];
                }
                //coins=[];
            },
            destroyCoin = function (coin) { //borro el keko del loop

                var i;
                for (i in coins) {
                    if (i == coin) {
                        coins[i].limpiatimeou();
                        borrocacheburb(i);
                        delete coins[i];
                        break;
                    }
                }
            },
            spawnCoin = function (idkekoconk, datosfok) {
                if (elementExists(document.getElementById(idkekoconk))) {
                    spawnCoinya(idkekoconk, datosfok);
                }
            }, spawnCoinya = function (idkekoconk, datosfok) {
                //console.log('idkekoconk',idkekoconk);
                var coinImg = {},
                    canvaseste = document.getElementById(idkekoconk),
                    canvasestecon = canvaseste.getContext('2d'),
                    totalResources = 0,
                    numResourcesLoaded = 0,
                    onloade = function () {
                        numResourcesLoaded += 1;
                        if (numResourcesLoaded === totalResources) {
                            ////consola.log(idkekoconk+'todas las imagenes cargadas totalResources'+totalResources);
                            if (coins[idkekoconk])
                                coins[idkekoconk].todocargado(coinImg);
                        }
                    },
                    loadImage = function (name, iessrc) {

                        coinImg[name] = new Image();
                        coinImg[name].onload = onloade
                        coinImg[name].src = iessrc;
                    },
                    sexx = 'keka',
                    mirosieskeka = datosfok[5].replace('/', '.');

                if (mirosieskeka < 50 || mirosieskeka >= 500)
                    sexx = 'keko';

                //consola.log(mirosieskeka,'sexx',sexx);
                totalResources++; loadImage('kekoscuerpo', dominiobase + 'kekbasetodov8block/' + sexx + 'scuerpov11/' + datosfok[8] + '.png');

                if (datosfok[12]) {
                    totalResources++; loadImage('bamb', dominiobase + 'kekbasetodov8block/bamb/' + datosfok[12] + '.png');
                }
                if (datosfok[6]) {
                    totalResources++; loadImage('panta', dominiobase + 'kekbasetodov8block/panta/' + datosfok[6] + '.png');
                }
                if (datosfok[5] && datosfok[5] != '50' && datosfok[5] != '0') {
                    totalResources++; loadImage('camisa', dominiobase + 'kekbasetodov8block/camisa/' + datosfok[5] + '.png');
                }
                if (datosfok[16]) {
                    totalResources++; loadImage('collar', dominiobase + 'kekbasetodov8block/collar/' + datosfok[16] + '.png');
                }
                //if(datosfok[17]){
                //totalResources++;loadImage('cinturon',dominiobase+'kekbasetodov8block/cinturon/'+datosfok[17]+'.png');
                //}

                //xtras = cara que es datosfok[18]
                if (!datosfok[18]) datosfok[18] = '1';
                //consola.log('cara:v1',datosfok[18]);

                totalResources++; loadImage('cabezasv4', dominiobase + 'kekbasetodov8block/cabezasv13/' + datosfok[8] + '.png');
                totalResources++; loadImage('cabezasv4habla', dominiobase + 'kekbasetodov8block/cabezasv13habla/' + datosfok[8] + '.png');

                totalResources++; loadImage('carasv4', dominiobase + 'kekbasetodov8block/carasv1' + datosfok[18] + '/' + datosfok[8] + '.png');
                totalResources++; loadImage('carasv4habla', dominiobase + 'kekbasetodov8block/carasv1' + datosfok[18] + 'habla/' + datosfok[8] + '.png');
                totalResources++; loadImage('carasv4parpadea', dominiobase + 'kekbasetodov8block/carasv11parpadea/' + datosfok[8] + '.png');

                if (datosfok[7]) {
                    //es pelo y tiene sombrero  || datosfok[9]o mascara

                    //consola.log('datosfok[13]',datosfok[13]);
                    if (datosfok[13]) {
                        totalResources++; loadImage('pelo', dominiobase + 'kekbasetodov8block/pelocor/' + datosfok[7] + '.png');
                    } else {
                        totalResources++; loadImage('pelo', dominiobase + 'kekbasetodov8block/pelo/' + datosfok[7] + '.png');
                    }
                }

                if (datosfok[11])//ojos - gafas
                {
                    totalResources++; loadImage('ojos', dominiobase + 'kekbasetodov8block/sombrero/' + datosfok[11] + '.png');
                }
                //boca (barbas)// && carafot4antesdebailar != 'stand1' && carafot4antesdebailar != 'stand2' && carafot4 != 'stand7')
                if (datosfok[10]) {
                    totalResources++; loadImage('boca', dominiobase + 'kekbasetodov8block/sombrero/' + datosfok[10] + '.png');
                }

                if (datosfok[13]) {//sombrero
                    totalResources++; loadImage('sombrero', dominiobase + 'kekbasetodov8block/sombrero/' + datosfok[13] + '.png');
                }
                if (datosfok[9])//nariz (mascaras)
                {
                    totalResources++; loadImage('nariz', dominiobase + 'kekbasetodov8block/sombrero/' + datosfok[9] + '.png');
                }
                // Create sprite
                coins[idkekoconk] = sprite({
                    staimagen: canvaseste,
                    staimagencon: canvasestecon,
                    datosfoke: datosfok
                });
            },
            muevekatrixzindexe = function (ladi, trz) {
                if (elementExists(ladi)) {
                    ladi.style.zIndex = trz;
                }
            },
            maguau = function (masparl, mabdag, hazloen, mmya, mmxa, kmascpc, le, po, zi, nyrca, nyrf, mabdanum) {
                var kmascpa = document.getElementById(kmascpc);
                var wplusara = 0;
                if (elementExists(kmascpa)) {
                    //muevekatrix(kmascpa,mabdanum,le,po,zi);
                    kmascpa.style.left = le + 'px';
                    kmascpa.style.top = po + 'px';
                    kmascpa.style.zIndex = zi;

                    //var enqueveztrz=100;
                    //////////////consola.log('quemabda'+quemabda);
                    kmascpa.setAttribute('data-y', mmya);
                    kmascpa.setAttribute('data-x', mmxa);
                    kmascpa.setAttribute('data-box', mmya + 'c' + mmxa);

                    kmascpa.setAttribute('data-fok', mabdag);
                    ////consola.log('nyrf',nyrf);
                    if (kmascpa.getAttribute('data-idm') == '20001' || kmascpa.getAttribute('data-idm') == '20002') {
                        //////consola.log('nyrca'+nyrca);
                        var mropab = nyrca;//si cambia cambiar en
                        ////consola.log('de',mropab,' a',nyrf);
                        if (nyrf)
                            wplusara = 10;
                        //mropab=nyrf;
                        var akihayfurv = '';
                        var macionbot = kmascpa.getAttribute('data-acc');
                        //var martibot = kmascpa.getAttribute('data-arti');
                        mropab += 'L' + akihayfurv + 'L' + macionbot;

                        var datosfok = mropab.split('L');
                        masparl = parseInt(masparl);
                        if (coins[kmascpc])
                            coins[kmascpc].pongofok(datosfok, '', datosfok[1], masparl, wplusara);
                        //consola.log('pongofok',datosfok);

                    } else {

                        if (nyrca != '') {
                            kmascpa.src = nyrca;
                        }

                        kmascpa.setAttribute('data-fok0', mabdag.substr(0, 5));
                        //
                        ////consola.log('nyrca'+nyrca+ ' mabdag'+mabdag+' nyrf'+nyrf);
                        if (nyrf != '') {
                            var akeimagen = kmascpc;
                            var akesr = nyrf;


                            window.setTimeout(ponlesrc, 360, akeimagen, akesr);
                            //window.setTimeout(function() {if($('#'+kmascpc).length == 1){document.getElementById(kmascpc).src = nyrf;}},360);
                        }

                    }
                }
            },
            cargascript = function (urlscri, idscri, onloadscri) {
                var mirosiyastbbscri = document.getElementById(idscri + 'cargado');
                if (!elementExists(mirosiyastbbscri) || !vextr['scriptcargado' + idscri]) {
                    if (elementExists(mirosiyastbbscri)) {
                        borrar(mirosiyastbbscri);
                    }
                    var script = document.createElement('script');

                    if (urlscri.substring(0, 2) != '//' && urlscri.substring(0, 4) != 'http') {
                        urlscri = dominiobase + urlscri;
                    }
                    script.src = urlscri;
                    script.id = idscri + 'cargado';
                    if (onloadscri) {
                        script.onload = function () {
                            vextr['scriptcargado' + idscri] = 1;
                            onloadscri();
                        };
                    }
                    document.body.appendChild(script);
                } else if (onloadscri) {
                    onloadscri();
                }
            },
            ponpelotaen = function (imapelot, posixzrebv, pelnumtes) {

                if (imapelot.getAttribute('data-pelnumt') == pelnumtes) {
                    imapelot.style.left = posixzrebv.eleft + 'px';
                    imapelot.style.top = posixzrebv.etop + 'px';
                    imapelot.style.zIndex = posixzrebv.ezindex;
                }
            },
            damelog = function () {
                kajax({
                    data: "soyid=" + yasoid + "&op=milog&milog=" + encodeURI(milog),
                    url: 'todoincs/funcop.php',
                    type: 'get',
                    success: function (response) { }
                });
            },
            mgustacass = function (kcas) {
                if (kcas) {
                    var mgusstacas = kcas.parentNode.parentNode.getAttribute('data-roomId');

                    var ksta = kcas.className;
                    var conresroomide = 'r' + mgusstacas;
                    var exissyoe = yolikecas.indexOf(conresroomide);
                    if (exissyoe >= 0) {
                        yolikecas.splice(exissyoe, 1);
                    } else {
                        yolikecas.push(conresroomide);
                    }
                    var kstan = 'icon-star-empty';
                    if (ksta != 'icon-thumbs-up') {
                        kstan = 'icon-thumbs-up';
                        //yolikecas['r'+mgusstacas]=1;
                    } else {
                        //if(yolikecas['r'+mgusstacas])
                        //delete yolikecas['r'+mgusstacas];
                    }
                    kcas.className = kstan;

                    katman('mgustacasa', mgusstacas, kstan);
                    //window.setTimeout(function() {vextr['nvay'] = null;},100);
                }
            },
            quitonegro = function () {
                document.getElementById('kekoallaki').className = '';
                document.getElementById('kekoallakik').className = '';
                document.getElementById('blanhbb').className = '';

                document.getElementById('formasu').style.display = '';
                document.getElementById('cabarri').style.display = '';
                document.getElementById('akichats').style.display = '';

                //document.getElementById('formasu').style.zIndex=2;
                //document.getElementById('cabarri').style.zIndex=3;
                //document.getElementById('akichats').style.zIndex=3;
                document.getElementById('kekoall').style.zIndex = 1;

                //document.getElementById('cabarri').className='';
                //document.getElementById('formasu').className='';
                document.getElementById('akiburbujas').className = '';
                var cboxesffcatscripts = document.getElementById('kekoallakic').querySelectorAll('span'),
                    iffccatscris = cboxesffcatscripts.length;
                if (iffccatscris > 0) {
                    while (iffccatscris--) {
                        if (cboxesffcatscripts[iffccatscris]) {
                            removeClass(cboxesffcatscripts[iffccatscris], 'novisible');
                            cboxesffcatscripts[iffccatscris].style.zIndex = 99999;
                        }
                    }
                }
            },
            ecam = function (idkeko, emitir, extra) {
                //if(navigator.userAgent.match(/Chrome/i) || navigator.userAgent.match(/Firefox/i))
                //{

                if (emitir == 'ver' && videum == 'si' || emitir == 'si') {
                    var kekospan = document.getElementById('k' + idkeko);


                    //if(emitir == 'si'){

                    //var cboxesffcatscripts = document.getElementById('kekoallakic').querySelectorAll('span'),
                    //iffccatscris = cboxesffcatscripts.length;
                    //if(iffccatscris>0){
                    //while(iffccatscris--) {
                    //if(cboxesffcatscripts[iffccatscris]){
                    //addClass(cboxesffcatscripts[iffccatscris],'novisible');
                    //}
                    //}
                    //}//
                    //document.getElementById('kekoallaki').className='novisible';
                    //document.getElementById('kekoallakik').className='novisible';
                    //document.getElementById('blanhbb').className='novisible';
                    //
                    //document.getElementById('formasu').style.display='none';
                    //document.getElementById('cabarri').style.display='none';
                    //document.getElementById('akichats').style.display='none';
                    //document.getElementById('akiburbujas').className='novisible';
                    //document.getElementById('kekoall').style.zIndex=1000;
                    //setTimeout(quitonegro,6000);
                    //posiciono();
                    //}
                    if (elementExists(kekospan)) {
                        var teniafraante = document.getElementById('ifra' + idkeko);
                        if (teniafraante) borrar('ifra' + idkeko);

                        var kekoiframe = document.createElement('span');
                        kekoiframe.className = 'absolute webcamm';
                        kekoiframe.id = 'ifra' + idkeko;
                        let nomrebdelk = kekospan.getAttribute('data-kek');
                        if (idkeko == yasoid) {
                            kekoiframe.innerHTML = '<iframe scrolling="no" src="https://kekocity.es/cam/v.php?ik=' + idkeko + '" allow="camera; microphone; autoplay" style="margin-top:-300px;margin-left:-150px;position:absolute;width:402px;height:308px;border:none;overflow:hidden;" frameborder="0" allowfullscreen></iframe>';
                        } else {
                            kekoiframe.innerHTML = '<iframe scrolling="no" src="https://kekocity.es/cam/v.php?ik=' + idkeko + '#' + idkeko + '" allow="camera; microphone; autoplay" style="margin-top:-300px;margin-left:-150px;position:absolute;width:402px;height:308px;border:none;overflow:hidden;" frameborder="0" allowfullscreen></iframe>';
                        }

                        kekoiframe.style.left = kekospan.style.left;
                        kekoiframe.style.top = kekospan.style.top;

                        kekoiframe.style.zIndex = 2000;
                        document.getElementById('kekoallakic').appendChild(kekoiframe);
                    }
                }
                //}
                //}
            },
            kmensaj = function (ktipo, dekien, dekienid, mini, mensaj) {
                var cuantayahayy = document.body.querySelectorAll('.contenidoal').length;
                ////consola.log('cuantayahayy'+cuantayahayy);

                //addClass(document.body,"xflow");

                var kida = 'n' + cuantayahayy + 'm';
                if (!mini || mini == 'default') mini = 'default.png';


                var estemin = mini;
                var urlfotoya = urlperfils + estemin;

                if (['default', 'default.png', 'casa.png', ''].indexOf(estemin) != -1) {
                    urlfotoya = '/uploads/default.png';
                } else if (typeof estemin == "string" && estemin.startsWith('_ICONPREESTABLECIDO_')) {
                    urlfotoya = estemin.replace('_ICONPREESTABLECIDO_', '');
                } else {
                    urlfotoya = urlperfils + 'resiz.php?src=' + estemin + '&h=32&w=32';
                }

                //if(mini == 'default'){
                //var urlpro = 'images/defaultale.png';
                //}
                var kmensada = '<img src="' + urlfotoya + '" class="radinoti fleft">' + dekien;
                var sonid = ktipo;

                //console.log('>urlfotoya',urlfotoya);
                //console.log('>sonid',sonid);
                if (ktipo != 'cargandod' && ktipo != 'cargando')
                    soni_ev(sonid);

                kmensada += '<br/>' + mensaj;

                var kaltra = 80;
                if (cuantayahayy > 0) {
                    kaltra += (cuantayahayy * 42);
                }
                var newSpaa = document.createElement('div');
                newSpaa.id = kida;
                newSpaa.className = 'contenidoal';
                newSpaa.style.top = kaltra + 'px';
                newSpaa.style.right = '-230px';

                newSpaa.innerHTML = kmensada;
                document.body.appendChild(newSpaa);

                var cuantiem = 9500;
                //if(ktipo == 'cargando'){
                //cuantiem = 1500;
                //}else if(ktipo == 'cargandod'){
                //cuantiem = 4500;
                //}

                //var mirolefof = newSpaa.offsetLeft;
                //newSpaa.style.right='';
                //newSpaa.style.left=mirolefof+'px';
                //var mirolefofnorm=mirolefof;
                //mirolefof-=250;
                // Animation complete.
                //muevekatrix(newSpaa,1,mirolefof,kaltra,2);



                //window.setTimeout(muevekatrix,cuantiem,newSpaa,1,mirolefofnorm,kaltra,2);
                window.setTimeout(borrar, (cuantiem + 2000), newSpaa.id);
                //window.setTimeout(removeClass,(cuantiem+4000),document.body,'xflow');
            },
            clickelista = function () {

                switch (this.getAttribute('data-bd')) {
                    case 'buscac':
                        window.location = '#/h/' + this.getAttribute('data-de');
                        break;
                    default:
                        window.location = '#/' + this.getAttribute('data-globkek');
                }
                borrarclase('globonewmenu');
            },
            borrarclase = function (clase) {
                if (clase == 'globonewmenu') {
                    borrar('globocasastot');
                }
                var buscacl = '.' + clase;

                var boxes = document.querySelectorAll(buscacl),
                    i = boxes.length;
                if (boxes.length > 0) {
                    while (i--) {
                        ////////consola.log(('id'+boxes[i].id);
                        var estebooo = boxes[i];
                        //if(estebooo){
                        if (!estebooo.id) {
                            estebooo.parentNode.removeChild(estebooo);
                        }
                        else if (estebooo.id == 'globonotis' || estebooo.id == 'globoamigos' || estebooo.id == 'globomoc')
                            estebooo.classList.add('novisible');
                        else
                            borrar(estebooo.id);
                        //}
                    }
                }

            },
            ponlesrc = function (akeimagen, akesr) {
                if (soyima != document.getElementById(akeimagen)) {
                    var soyima = document.getElementById(akeimagen);
                    //if(soyima.firstChild){
                    //soyima.firstChild.setAttribute('src',akesr);
                    //}else{
                    soyima.src = akesr;
                    //}
                    soyima.removeAttribute('data-srcante');
                }
                //$('#'+akeimagen).getAttribute({'src':akesr}).removeAttr('data-srcante');
            },
            createshop = function (cat) {


                if (!document.getElementById('globotienda') || cat != '') {
                    if (cat == '' || !isNaN(cat) && cat.indexOf('compra-') >= 0 || !isNaN(cat) && cat.indexOf('alquila-') >= 0) {
                        borrarclase('globonewmenu');
                    }
                    if (!document.getElementById('globotienda')) {
                        var creodonde = document.getElementById('cabarriaki');
                        var creo = document.createElement('div');
                        creo.id = 'globotienda';
                        creo.className = 'globonewmenu leftienda';
                        //
                        //creo.onmouseenter = function(){
                        //document.onmousemove = function(){}

                        //leftahor = parseInt(document.getElementById('kekoall').style.left.replace('px',''));
                        //};
                        //nolang
                        //<img src="'+dominiobase+'imagesnew/game/coletilla_arri.png" class="coletiarribatienda">
                        creo.innerHTML = '<div class="tituloglobos">' + iw[267] + '</div><div id=\'akitienda\'></div>';
                        creodonde.appendChild(creo);
                    }


                    kajax({
                        data: 'mikeka=' + yasoid + '&idi=' + idila + '&cat=' + cat,
                        url: 'todoincs/vertiendav2.php',
                        type: 'get',
                        success: function (response) {
                            if (document.getElementById('contenidocat')) {
                                document.getElementById('contenidocat').innerHTML = response;
                            }
                            if (document.getElementById('akitienda')) {
                                if (!document.getElementById('contenidocat'))
                                    document.getElementById('akitienda').innerHTML = response;
                                //cajafurnis

                                var catmironomide = cat.split('&nomid=');
                                var catmironomid = 0;
                                if (catmironomide[1]) {
                                    catmironomid = catmironomide[1];
                                }

                                var cboxesff = document.getElementById('akitienda').querySelectorAll('.rca'),
                                    iffc = cboxesff.length;
                                if (iffc >= 1) {
                                    while (iffc--) {
                                        if (cboxesff[iffc]) {
                                            cboxesff[iffc].onclick = function () { clickcatfurn(this); };

                                            if (cat == '' || !isNaN(cat)) {
                                                if (iffc == 0) clickcatfurn(cboxesff[iffc]);
                                            } else if (isNaN(cat) && catmironomid > 0) {
                                                if (cboxesff[iffc].getAttribute('data-nomid') == catmironomid) {
                                                    clickcatfurn(cboxesff[iffc]);
                                                }
                                            }
                                        }
                                    }
                                }


                                //$('#categoscat > li[data-soyapartado="si"]').attr('class','novisible');
                                //$('#categoscat > li[data-apartad="'+apartad+'"]').removeClass('novisible');
                                //$('#categoscat > li').removeClass('activo');
                                //$('#categoscat > li[data-idcat="'+cat+'"][data-apartad="'+apartad+'"][data-seccion="si"]').addClass('activo');

                                if (document.getElementById('categoscat')) {


                                    var apartadosoy = 'nooo';
                                    if (document.getElementById('categoscat').querySelector('[data-idcat="' + cat + '"]'))
                                        apartadosoy = document.getElementById('categoscat').querySelector('[data-idcat="' + cat + '"]').getAttribute('data-apartad');
                                    var cboxesffcats = document.getElementById('categoscat').querySelectorAll('li'),
                                        iffccats = cboxesffcats.length;

                                    if (iffccats >= 1) {
                                        while (iffccats--) {
                                            var stacatli = cboxesffcats[iffccats];
                                            if (stacatli) {
                                                if (stacatli.getAttribute('data-soyapartado') == 'si') {
                                                    if (apartadosoy != stacatli.getAttribute('data-apartad')) {
                                                        stacatli.className = 'novisible';
                                                    } else {
                                                        stacatli.className = '';
                                                    }
                                                }

                                                //if(stacatli.getAttribute('data-apartad') == 'si')stacatli.className='';
                                                stacatli.onclick = function () { createshop(this.getAttribute('data-idcat')); };
                                            }
                                        }
                                    }
                                }

                                var cboxesffcatscripts = document.getElementById('akitienda').querySelectorAll('script'),
                                    iffccatscris = cboxesffcatscripts.length,
                                    escrihtm;
                                if (iffccatscris > 0) {
                                    while (iffccatscris--) {
                                        if (cboxesffcatscripts[iffccatscris]) {
                                            escrihtm = cboxesffcatscripts[iffccatscris].innerHTML;
                                            cboxesffcatscripts[iffccatscris].parentNode.removeChild(cboxesffcatscripts[iffccatscris]);
                                            eval(escrihtm);
                                        }
                                    }
                                }
                            }
                        }
                    });
                } else if (document.getElementById('globotienda')) {
                    borrarclase('globonewmenu');
                }
            },
            busctvss = function (elkebus, kpagina, dondep) {
                var kebusco = encodeURI(elkebus);
                var pagina = '';

                if (kpagina != '')
                    pagina = '&pageToken=' + kpagina;

                ////////consola.log(('part=snippet&maxResults=5&order=relevance&q='+kebusco+'&key=AIzaSyCH-_CQkvTjTeDLegiix_UNYX-pO294j9s'+pagina);
                kajax({
                    data: 'part=snippet&maxResults=5&order=relevance&q=' + kebusco + '&key=AIzaSyDsolvC07nr-ixADctgWBG7HxPqRnfyHow' + pagina,
                    url: 'https://www.googleapis.com/youtube/v3/search',
                    type: 'get',
                    success: function (json) {
                        var obj = JSON && JSON.parse(json);
                        var videoslista = obj.items;
                        var imprimevids = '';
                        for (var i = 0; i < videoslista.length; i++) {
                            imprimevids += '<div class="imagetv"><img src="' + videoslista[i].snippet.thumbnails.medium.url + '"/><b id="' + videoslista[i].id.videoId + 'tit">' + videoslista[i].snippet.title + '</b><br/>' + videoslista[i].snippet.description + '<button class="btnkcmini" data-idvid="' + videoslista[i].id.videoId + '">' + iw[268] + '</button></div>';//nolang
                        }
                        if (document.getElementById(dondep)) {

                            //if(obj.prevPageToken){
                            //imprimevids+='<button class="btnwo fleft" data-kbusc="'+elkebus+'" data-dond="'+dondep+'" data-nextpp="'+obj.prevPageToken+'" id="btnmenvideos">P√°gina anterior</button>';//nolang
                            //}

                            if (document.getElementById('btnmasvideos')) {
                                borrar('btnmasvideos');
                            }
                            if (obj.nextPageToken) {

                                imprimevids += '<button class="btnwo" style="clear: both;display: block;margin-left: auto;margin-right: auto;text-align: center;margin-bottom:40px;margin-top:40px;" data-kbusc="' + elkebus + '" data-dond="' + dondep + '" data-nextpp="' + obj.nextPageToken + '" id="btnmasvideos">' + iw[269] + '</button>';//nolang
                            }

                            if (kpagina != '') {
                                var creodonde = document.getElementById(dondep);
                                var creo = document.createElement('div');
                                creo.innerHTML = imprimevids;//.appendTo('#cabarri')
                                creodonde.appendChild(creo);
                                //if(document.getElementById('mytv'))
                                //document.getElementById('contemytv').scrollTop+=(parseInt(document.getElementById('mytv').style.height.replace('px',''))-151);

                            } else {
                                document.getElementById(dondep).innerHTML = imprimevids;
                                document.getElementById('contemytv').scrollTop = 0;

                            }
                            var boxes = document.getElementById(dondep).querySelectorAll('.btnkcmini'),
                                i = boxes.length;

                            while (i--) {
                                ////////consola.log(('id'+boxes[i].id);
                                if (boxes[i]) {
                                    boxes[i].onclick = function () {
                                        ponervideo(this.getAttribute('data-idvid'));
                                    };
                                }
                            }
                            //if(document.getElementById('btnmenvideos')){
                            //document.getElementById('btnmenvideos').onclick=function(){
                            //busctv(this.getAttribute('data-kbusc'),this.getAttribute('data-nextpp'),this.getAttribute('data-dond'));
                            //};
                            //}
                            if (document.getElementById('btnmasvideos')) {
                                document.getElementById('btnmasvideos').onclick = function () {

                                    document.getElementById('btnmasvideos').setAttribute('disabled', 'disabled');
                                    document.getElementById('btnmasvideos').innerHTML = iw[270];//Nolang
                                    busctv(this.getAttribute('data-kbusc'), this.getAttribute('data-nextpp'), this.getAttribute('data-dond'));
                                };
                            }
                        }
                    }
                });
            },            
            busctv = function (kebusbasee, kpagina, dondep) {
                // Expresi√≥n regular mejorada para captar diferentes tipos de URLs de YouTube, incluyendo "shorts"
                const videoIdMatch = kebusbasee.match(/(?:youtu\.be\/|youtube\.com\/(?:watch\?v=|embed\/|v\/|shorts\/|.+?&v=))([^&?]+)/);
            
                let elkebus = videoIdMatch ? videoIdMatch[1] : '';
            
                if (elkebus) {
                    ponervideo(elkebus);
                } else {
                    winsor('myAle', iw[272], 'Debes a√±adir la url del video de YouTube que quieres compartir.', '', '', '');
                }
            },
            keystv = function () {
                let todaskeys = ['AIzaSyDsolvC07nr-ixADctgWBG7HxPqRnfyHow', 'AIzaSyDsolvC07nr-ixADctgWBG7HxPqRnfyHow', 'AIzaSyAONX_LNwXTSaZKy-9jp5r3c2qnQHfQtBU'];
                let randkey = parseInt(getRandomArbitrary(0, todaskeys.length));

                return todaskeys[randkey];
                //console.log('randkey',randkey,' key:',todaskeys[randkey],' length',todaskeys.length);
            },
            getRandomArbitrary = function (min, max) {
                return Math.random() * (max - min) + min;
            },
            ponervideo = function (idvideo) {
                if (document.getElementById('akicontstv')) {
                    var idtele = document.getElementById('akicontstv').getAttribute('data-idtele');
                    var nombrevideo = '';
                    if (document.getElementById(idvideo + 'tit')) {
                        nombrevideo = document.getElementById(idvideo + 'tit').innerHTML;
                    }
                    nombrevideo = 'video';
                    if (document.getElementById('akitv' + idtele)) {

                        //////consola.log(('ponervideo');
                        if (document.getElementById('akitv' + idtele).getAttribute('data-idk') != yasoid && document.getElementById('akitv' + idtele).getAttribute('data-ivid') != 'off' && pmoc == 'no') {
                            winsor('myAle', iw[272], iw[271], '', '', '');
                        } else {
                            borrar('mytv');
                            kajax({
                                data: 'part=contentDetails&id=' + encodeURI(idvideo) + '&fields=items(contentDetails%2CrecordingDetails)&key=' + keystv(),
                                url: 'https://www.googleapis.com/youtube/v3/videos',
                                type: 'get',
                                success: function (jsonya) {
                                    var objya = JSON && JSON.parse(jsonya);
                                    if (objya && Array.isArray(objya.items) && objya.items.length > 0 && objya.items[0].contentDetails && objya.items[0].contentDetails.duration) {
                                        var laduraciones = objya.items[0].contentDetails.duration;
                                        laduraciones = laduraciones.replace("PT", "");
                                        var horas = 0;
                                        var minutos = 0;
                                        var segundos = 0;

                                        if (laduraciones != '') {
                                            var horase = laduraciones.split('H');
                                            if (horase[1] || laduraciones == horase[0] + 'H') {
                                                horas = horase[0];
                                            }
                                            laduraciones = laduraciones.replace(horas + 'H', "");

                                            horase = laduraciones.split('M');
                                            if (horase[1] || laduraciones == horase[0] + 'M') {
                                                minutos = horase[0];
                                            }
                                            laduraciones = laduraciones.replace(minutos + 'M', "");
                                            horase = laduraciones.split('S');
                                            if (horase[0] || laduraciones == horase[0] + 'S') {
                                                segundos = horase[0];
                                            }
                                            var laduracionessegundos = 0;
                                            if (horas > 0)
                                                laduracionessegundos += (3600 * horas);

                                            if (minutos > 0)
                                                laduracionessegundos += (60 * minutos);

                                            if (segundos > 0)
                                                laduracionessegundos += parseInt(segundos);

                                            volum = 'si';
                                            katman('pongovideo', idtele, idvideo, laduracionessegundos, nombrevideo, 0);
                                            direcpam(iw[273].replace(':', ''));
                                            //////consola.log(('pongovideo idtele'+idtele+'idvideo'+idvideo+'duracion'+laduracionessegundos);
                                        } else {
                                            console.error('Unexpected response format or missing contentDetails'); 
                                        }

                                    }
                                }
                            });
                            //console.log(('idtele'+idtele+'idvideo'+idvideo+'nombre'+nombrevideo);
                        }
                    }
                }
            },
            dimecasas = function () {
                //document.getElementById('kekoall').click();
                //////consola.log(('//OJOAKI');
                var seleste = 1;
                if (document.getElementById('coletill'))
                    document.getElementById('coletill').className = 'novisible';

                if (document.getElementById('selestendivvo')) {
                    seleste = document.getElementById('selestendivvo').value;
                }
                var toybusca = '';
                if (document.getElementById('tebusc')) {
                    toybusca = encodeURI(document.getElementById('tebusc').value);
                }


                if (document.getElementById('myNav')) {

                    document.getElementById('myNav').innerHTML = '<p align="center"><img src="' + dominiobase + 'imagesnew/game/cargando.gif"></p>';

                    var datass = 'tebusc=' + toybusca + '&pestannavo=1&selestendivvo=' + seleste;
                    var urlcasas = 'todoincs/vercasas.php';
                    if (seleste != '12' && seleste != '11' && !toybusca) {
                        urlcasas = 'todoincs/vercasas.php?all=true';
                        datass = 'test=' + encodeURI(Math.random());
                    }

                    // //console.log('urlcasas', urlcasas);
                    kajax({
                        data: datass,
                        url: urlcasas,
                        type: 'get',
                        success: function (response) {

                            // //console.log("Res", response)

                            if (document.getElementById('myNav')) {
                                document.getElementById('myNav').innerHTML = response;

                                var btnsircasas = document.getElementById('myNav').querySelectorAll('.irca');
                                if (btnsircasas.length > 0) {
                                    for (var ibo = 0; ibo < btnsircasas.length; ibo++) {
                                        if (btnsircasas[ibo]) {
                                            if (btnsircasas[ibo].parentNode.querySelector('.mgustacas > i')) {

                                                var conresroomid = 'r' + btnsircasas[ibo].parentNode.getAttribute('data-roomId');
                                                var kstan = 'icon-star-empty';
                                                var exissyo = yolikecas.indexOf(conresroomid);
                                                if (exissyo >= 0)
                                                    kstan = 'icon-thumbs-up';

                                                btnsircasas[ibo].parentNode.querySelector('.mgustacas > i').className = kstan;
                                                btnsircasas[ibo].parentNode.querySelector('.mgustacas > i').onclick = function () {
                                                    mgustacass(this);
                                                }
                                            }
                                            btnsircasas[ibo].parentNode.onmouseover = function () { sobrecasa(this); };
                                            btnsircasas[ibo].innerHTML = iw[274];//nolang
                                            btnsircasas[ibo].onclick = function () {
                                                if (location.hash == '#/h/' + this.parentNode.getAttribute('data-roomid')) {
                                                    rotamm();
                                                }
                                                else
                                                    location.hash = '#/h/' + this.parentNode.getAttribute('data-roomid');
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    });

                }
            },
            selewm = function (divsel, opcisel, nodom) {
                document.getElementById(divsel + 'opsant').innerHTML = document.getElementById(divsel + opcisel).innerHTML + ' <img src="' + dominiobase + 'imagesnew/appico/ab.png" class="fright"/>';
                document.getElementById(divsel + 'opsant').style.display = 'block';
                document.getElementById(divsel + 'ops').style.display = 'none';
                document.getElementById(divsel + 'o').value = opcisel;
            },
            desanimo = function (idestoyanim, quesoy) {
                var imagenffurn_animd = document.getElementById(idestoyanim);
                if (elementExists(imagenffurn_animd)) {
                    var idpanimar = idestoyanim.replace('idf', '').replace('idencf', '');
                    var imagenfurn_animdat = kkallaki.querySelector('[data-idp="' + idpanimar + '"][data-furn]');

                    ////consola.log(idestoyanim+'  desanimo'+' fly/i/fursv5/'+imagenffurn_animd.getAttribute('data-nomid')+'/'+imagenffurn_animd.getAttribute('data-idf')+quesoy+'.'+imagenffurn_animd.getAttribute('data-f'));
                    var lodesani = 's';
                    if (quesoy != '' && quesoy != 'encima') {
                        //soy pelota
                        if (quesoy != imagenfurn_animdat.getAttribute('data-pelnumt'))
                            lodesani = 'n';
                        else {
                            if (imagenfurn_animdat.className != 'pelo')
                                imagenfurn_animdat.className = 'pelo';
                            quesoy = '';
                        }
                    }
                    if (lodesani == 's')
                        imagenffurn_animd.src = dominiobase + 'fly/i/fursv5/' + imagenfurn_animdat.getAttribute('data-nomid') + '/' + imagenfurn_animdat.getAttribute('data-idf') + quesoy + '.' + imagenfurn_animdat.getAttribute('data-f');
                }
            },
            antflo = function (kseg) {
                var asent = document.getElementById('sendmmte');
                if (asent) {
                    asent.setAttribute("disabled", "disabled");
                    kseg = parseInt(kseg);
                    kseg--;
                    asent.value = iw[276] + ' ' + kseg + ' ' + iw[275];//nolang
                    if (kseg > 0) {


                        window.setTimeout(antflo, 1000, kseg);
                    } else {
                        asent.removeAttribute("disabled");
                        asent.value = '';
                    }
                }
            },
            pamaya = function () {
                //consola.log('pamaya');
                if (document.getElementById('sendmmte') && document.getElementById('sendmmte').value != '' && document.getElementById('sendmmte').value.length <= 200) {
                    var erasen = document.getElementById('sendmmte').value;
                    document.getElementById('sendmmte').value = '';
                    var stafe = Math.floor(new Date().getTime() / 1000);
                    vextr['ultmsgci'] = vextr['ultmsgc'];
                    vextr['ultmsgc'] = vextr['ultmsgt'];
                    vextr['ultmsgt'] = vextr['ultmsgd'];
                    vextr['ultmsgd'] = vextr['ultmsg'];
                    vextr['ultmsg'] = stafe;
                    var eflo = false;
                    var efloc = 50;
                    if (vextr['ultmsgci'] != null && vextr['ultmsgc'] != null && vextr['ultmsg'] != null && vextr['ultmsgd'] != null && vextr['ultmsgt'] != null) {
                        efloc = (stafe - vextr['ultmsgd']);
                        efloc += (stafe - vextr['ultmsgt']);
                        efloc += (stafe - vextr['ultmsgc']);
                        efloc += (stafe - vextr['ultmsgci']);
                        if (vextr['ultimotexto'] == erasen) {
                            efloc = efloc / 3;
                        }
                        vextr['ultimotexto'] = erasen;
                    }
                    ////
                    //consola.log('efloc'+efloc);
                    if (efloc > 3) {
                        var esusu = kekosusu;
                        if (esusu >= 1) {
                            if (!document.getElementById('k' + esusu)) {
                                kekosusu = 0;
                                esusu = 0;
                                borrar('susurrando');
                            }
                        }

                        var escom = 'n';
                        //if (erasen == '-comandos') erasen = '!comandos';
                        //if (erasen == '-emojis') erasen = '!emojis';
                        if (erasen.substring(0, 1) == '!') {
                            var masen = erasen.split(' ');
                            var kcomes = masen[0];
                            var akekonombre;
                            if (masen[1]) akekonombre = masen.slice(1).join(' ');
                            var akekoid;
                            var sihaykekoakideestenom;
                            if (akekonombre) {
                                try {
                                    if (akekonombre == 'x') {
                                        sihaykekoakideestenom = kkallakik.querySelector('[data-idkek="' + ultimoidpclickado + '"]');
                                    } else {
                                        sihaykekoakideestenom = kkallakik.querySelector('[data-kek="' + akekonombre + '"]');
                                    }
                                } catch (error) {
                                    sihaykekoakideestenom = false;
                                }
                            }

                            switch (kcomes) {
                                case '!comandos': // Aqu√≠ asumimos que el caso es -comandos
                                    alerta(`
                                        <div>
                                            <h1 style="text-align: center; color: #333;">Comandos disponibles</h1>
                                            <div style="overflow-y: auto; height: auto; border: 1px solid #ccc; border-radius: 5px;">
                                                <table style="width: 100%; border-collapse: collapse; background-color: white;">
                                                    <thead>
                                                        <tr style="background-color: #f0f0f0;">
                                                            <th style="padding: 10px; border: 1px solid #ccc; text-align: left;">Comando</th>
                                                            <th style="padding: 10px; border: 1px solid #ccc; text-align: left;">Descripci√≥n</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr style="background-color: #fafafa;">
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><strong>!emojis</strong></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">Ver lista de emojis disponibles.</td>
                                                        </tr>
                                                        <tr style="background-color: #fafafa;">
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><strong>!look x</strong></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">Permite copiar el look del Keko clicado o escribir -look seguido del nombre del Keko.</td>
                                                        </tr>
                                                        <tr>
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><strong>!rotate</strong></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">Haz que tu Keko gire en 360 grados.</td>
                                                        </tr>
                                                        <tr>
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><strong>!bounce</strong></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">Haz que tu keko rebote.</td>
                                                        </tr>
                                                        <tr>
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><strong>!glow</strong></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">Haz que tu Keko se ilumine</td>
                                                        </tr>
                                                        <tr>
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><strong>!temblar</strong></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">Haz que tu Keko se ponga tembloroso.</td>
                                                        </tr>
                                                        <tr>
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><strong>!zoom</strong></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">Haz que tu Keko haga mas grande y peque√±o.</td>
                                                        </tr>
                                                        <tr style="background-color: #fafafa;">
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><strong>!ghost</strong></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">Aplica un efecto de fantasma a tu Keko durante unos segundos.</td>
                                                        </tr>
                                                        <tr>
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><strong>!rot</strong></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">Voltea tu Keko durante unos segundos.</td>
                                                        </tr>
                                                        <tr style="background-color: #fafafa;">
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><strong>!boing</strong></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">Haz que tu Keko d√© saltos durante unos segundos.</td>
                                                        </tr>
                                                        <tr>
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><strong>!kekos</strong></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">Muestra una ventana con la lista de Kekos dentro de la sala.</td>
                                                        </tr>
                                                        <tr style="background-color: #fafafa;">
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><strong>!alert</strong></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">Env√≠a una alerta a todos los Kekos de la casa (se requieren poderes).</td>
                                                        </tr>
                                                        <tr>
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><strong>!mute</strong></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">Env√≠a una alerta y silencia a todos los Kekos de la casa durante 15 segundos (se requieren poderes).</td>
                                                        </tr>
                                                        <tr style="background-color: #fafafa;">
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><strong>!kick x</strong></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">Expulsa al Keko seleccionado de la sala. Puedes usar el ID del Keko o escribir el nombre del Keko a expulsar (se requieren poderes).</td>
                                                        </tr>
                                                        <tr style="background-color: #fafafa;">
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><strong>!join ID</strong></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">Ir a una sala.</td>
                                                        </tr>
                                                        <tr>
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><strong>!discord</strong></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">Genera un enlace para unirte al servidor de Discord de la comunidad.</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    `);
                                    escom = 's';
                                break;
                                case '!emojis': // noland
                                    alerta(`
                                        <div>
                                            <p style="font-weight: bold;color: #333;">Emojis disponibles</p>
                                            <div style="overflow-y: auto; height: 460px; border: 1px solid #ccc; border-radius: 5px;">
                                                <table style="width: 100%; border-collapse: collapse; background-color: white;">
                                                    <thead>
                                                        <tr style="background-color: #f0f0f0;">
                                                            <th style="padding: 10px; border: 1px solid #ccc; text-align: left;">Emoji</th>
                                                            <th style="padding: 10px; border: 1px solid #ccc; text-align: left;">Uso</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr style="background-color: #fafafa;">
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><img src="/images/icon2/luna.png" style="width: 20px;"></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">:moon:</td>
                                                        </tr>
                                                        <tr>
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><img src="/images/icon2/kiss.gif" style="width: 20px;"></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">(L)</td>
                                                        </tr>
                                                        <tr style="background-color: #fafafa;">
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><img src="/images/icon2/kiss2.gif" style="width: 20px;"></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">:*</td>
                                                        </tr>
                                                        <tr>
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><img src="/images/icon2/payaso.gif" style="width: 20px;"></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">:clown:</td>
                                                        </tr>
                                                        <tr style="background-color: #fafafa;">
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><img src="/images/icon2/mm.gif" style="width: 20px;"></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">:mm:</td>
                                                        </tr>
                                                        <tr>
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><img src="/images/icon2/molesto.gif" style="width: 20px;"></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">=@</td>
                                                        </tr>
                                                        <tr style="background-color: #fafafa;">
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><img src="/images/icon2/caca.gif" style="width: 20px;"></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">:popo:</td>
                                                        </tr>
                                                        <tr>
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><img src="/images/icon2/heart.gif" style="width: 20px;"></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">&lt;3</td>
                                                        </tr>
                                                        <tr style="background-color: #fafafa;">
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><img src="/images/icon2/guino.gif" style="width: 20px;"></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">;)</td>
                                                        </tr>
                                                        <tr>
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><img src="/images/icon2/zzz.gif" style="width: 20px;"></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">:Z</td>
                                                        </tr>
                                                        <tr style="background-color: #fafafa;">
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><img src="/images/icon2/pacman.gif" style="width: 20px;"></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">:V</td>
                                                        </tr>
                                                        <tr>
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><img src="/images/icon2/smiley.gif" style="width: 20px;"></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">:)</td>
                                                        </tr>
                                                        <tr style="background-color: #fafafa;">
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><img src="/images/icon2/cheesy.gif" style="width: 20px;"></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">:!</td>
                                                        </tr>
                                                        <tr>
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><img src="/images/icon2/embarrassed.gif" style="width: 20px;"></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">:L</td>
                                                        </tr>
                                                        <tr style="background-color: #fafafa;">
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><img src="/images/icon2/undecided.gif" style="width: 20px;"></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">:|</td>
                                                        </tr>
                                                        <tr>
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><img src="/images/icon2/rolleyes.gif" style="width: 20px;"></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">:?</td>
                                                        </tr>
                                                        <tr style="background-color: #fafafa;">
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><img src="/images/icon2/cry.gif" style="width: 20px;"></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">:(</td>
                                                        </tr>
                                                        <tr style="background-color: #fafafa;">
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><img src="/images/icon2/info.gif" style="width: 20px;"></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">:info: <b>(Simbolo informaci√≥n.)</td>
                                                        </tr>
                                                        <tr style="background-color: #fafafa;">
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><img src="/images/icon2/warring.gif" style="width: 20px;"></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">:warring: <b>(Simbolo alerta.)</td>
                                                        </tr>
                                                        <tr style="background-color: #fafafa;">
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><img src="/images/icon2/duda.gif" style="width: 20px;"></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">:duda: <b>(Simbolo duda.)</td>
                                                        </tr>
                                                        <tr style="background-color: #fafafa;">
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><img src="/images/icon2/line.gif" style="width: 20px;"></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">:line: <b>(Simbolo salto de linea.)</td>
                                                        </tr>
                                                        <tr style="background-color: #fafafa;">
                                                            <td style="padding: 10px; border: 1px solid #ccc;"><img src="/images/icon2/anuncio.png" style="width: 20px;"></td>
                                                            <td style="padding: 10px; border: 1px solid #ccc;">:ads: <b>(Simbolo de anuncio.)</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    `);
                                    escom = 's';
                                break;                                
                                
                                case '!discord'://noland
                                    alerta('<p style="font-weight:bold;">Unete a nuestro Discord!</p> <p style="align-items: center;display: inline-flex;"><img src="https://kekocity.es/imagesnew/game/icono.png"><a href="https://discord.kekocity.es/" style="font-size: 12px;margin-right: 9px;font-weight:bold;color:#7289DA;" target="_blank">Presiona aqui</a> para unirte a nuestra comunidad de discord</p>');
                                    escom = 's';
                                    break;
                                case '!look':
                                    if (sihaykekoakideestenom)
                                        katman('look', sihaykekoakideestenom.getAttribute('data-idkek'));
                                    escom = 's';
                                    break;
                                case '!pass':
                                    if (kkallaki.querySelector('[data-idf="3010078"]'))
                                        katman('passcerberus', erasen.replace('!pass ', ''));
                                    escom = 's';
                                    break;
                                case '!alert':
                                    if (pmoc == 'si' || pmoc == 'dueno')
                                        katman('comandos', 'alert', erasen.replace('!alert', ''));
                                    escom = 's';
                                    break;
                                case '!kekos'://nolang
                                    winsor('myKekos', iw[277], '', '', '', '');
                                    escom = 's';
                                    break;
                                case '!mute':
                                    if (pmoc == 'si' || pmoc == 'dueno')
                                        katman('comandos', 'mute', erasen.replace('!mute', ''));
                                    escom = 's';
                                    break;
                                case '!hkick':
                                    if (pmoc == 'si' || pmoc == 'dueno')
                                        katman('comandos', 'hkick', 'tots');
                                    escom = 's';
                                    break;
                                case '!kick':
                                    if (sihaykekoakideestenom) {
                                        if (pmoc == 'si' || pmoc == 'dueno')
                                            katman('kick', sihaykekoakideestenom.getAttribute('data-idkek'));
                                    }
                                    escom = 's';
                                    break;
                                case '!pickup':
                                    if (pmoc == 'dueno') {

                                        var mirosiestaenca = yosocas;
                                        if (modocity == 'si') {
                                            mirosiestaenca = nombcas.sector;
                                        }
                                        var dameun = kkallaki.querySelector('[data-box][data-icas="' + mirosiestaenca + '"]');
                                        if (elementExists(dameun)) {
                                            accionar('recogertodostot', dameun.getAttribute('data-idp'));
                                        }
                                    }
                                    escom = 's';
                                    break;
                                case '!boing':
                                    katman('comandos', 'boing', '');
                                    escom = 's';
                                    break;
                                case '!rotate':
                                    katman('comandos', 'rotate', '');
                                    escom = 's';
                                    break;
                                case '!ghost':
                                    katman('comandos', 'ghost', '');
                                    escom = 's';
                                    break;
                                case '!rot':
                                    katman('comandos', 'rot', '');
                                    escom = 's';
                                    break;
                                case '!bounce':
                                    katman('comandos', 'bounce', '');
                                    escom = 's';
                                    break;

                                case '!glow':
                                    katman('comandos', 'glow', '');
                                    escom = 's';
                                    break;

                                case '!temblar':
                                    katman('comandos', 'temblar', '');
                                    escom = 's';
                                    break;

                                case '!zoom':
                                    katman('comandos', 'zoom', '');
                                    escom = 's';
                                    break;
                                case '!join':
                                    if (akekonombre)
                                        window.location = '#/h/' + encodeURI(akekonombre);
                                    escom = 's';
                                    break;
                            }

                        }

                        ////////////consola.log('esusu'+esusu);
                        if (escom == 'n') {

                            if (Object.keys(mascos).length > 0) {
                                mirositienemasc(erasen);//hablo mascotas
                            }
                            milog += '<br>' + erasen;
                            //consola.log('micoli',micoli);
                            katman('pama', micoli, erasen, esusu);

                        }
                        //if(document.getElementById('sendmmte').getAttribute('data-h') == 's'){
                        //document.getElementById('sendmmte').setAttribute('data-h','n');
                        //katman('parlo','n');
                        //window.clearTimeout(quitoglobinter);
                        //quitoglobinter = window.setTimeout(quitoglob,1000);
                        //}
                    } else {

                        antflo(5);
                    }
                }
            },
            mirositienemasc = function (kmens) {//hablo mascotas

                //consola.log('mirositienemasc',kmens);
                //OJOAKI mascotas
                if (isNaN(kmens) && kmens != '') {
                    if (ultimmasc) {
                        kmens = ultimmasc + ' ' + kmens;
                        ultimmasc = '';
                    }
                    kmens = kmens.toLowerCase();
                    var resua = 0;
                    var kstamas;
                    var ias;
                    var stamas;
                    var yotoy = ky;
                    var yotox = kx;
                    var mirmas = 's';
                    var akihayfurv;
                    var resuav = 0;
                    var venbox = yotoy + 'c' + yotox;
                    if (ffurs[venbox]) akihayfurv = ffurs[venbox];
                    for (var idmascota in mascos) {
                        if (mirmas == 's') {
                            kstamas = mascos[idmascota];

                            resua = kmens.indexOf(kstamas.toLowerCase());
                            ias = idmascota.replace('masco', '');
                            ////consola.log('kstamas:'+kstamas+' div:'+ias);
                            if (resua >= 0) {
                                mirmas = 'n';
                                stamas = document.getElementById(idmascota);
                                if (stamas) {

                                    if (stamas.getAttribute('data-blockmasco') == 's') {
                                        //la mascota esta ocupada
                                        ultimmasc = '';
                                        ////consola.log('habguau',ias,'wait');
                                        //consola.log('sta ocupada');
                                        if (stamas.getAttribute('data-idm') == '20001') {
                                            katman('habguau', ias, 'wait');
                                        }
                                    } else {
                                        //consola.log('no sta ocupada');
                                        var estaeny = stamas.getAttribute('data-y');
                                        var estaenx = stamas.getAttribute('data-x');
                                        var estaenyx = stamas.getAttribute('data-box');
                                        estaeny = parseInt(estaeny);
                                        estaenx = parseInt(estaenx);

                                        var yogra = dimegraph(ployy, ploxx, mesaespecial, '', estaeny + 'c' + estaenx);
                                        var mstart = yogra.nodes[estaeny][estaenx];
                                        var mend = yogra.nodes[yotoy][yotox];
                                        var mresult = astar.search(yogra.nodes, mstart, mend, condiags);
                                        var maap = null;
                                        if (mresult.length > 1) {
                                            maap = (mresult.length - 2);

                                        } else if (mresult.length == 1) {
                                            maap = 0;
                                            //mresult[0] = estaeny+'c'+estaenx;
                                        }
                                        if (mresult.length >= 1) {
                                            var myap = mresult[maap].x;
                                            var mxap = mresult[maap].y;
                                            var idma = stamas.getAttribute('data-idm');
                                            switch (idma) {
                                                case '300001':
                                                    var kdij = iw[278].toLowerCase();
                                                    resuav = kmens.indexOf(kdij);

                                                    if (resuav >= 0) {
                                                        ultimmasc = kstamas;
                                                        ////consola.log('mascopa',myap,mxap,ias,'mete');
                                                        katman('mascopa', myap, mxap, ias, 'mete');
                                                    } else {
                                                        ////consola.log('mascopa',myap,mxap,ias,'');
                                                        katman('mascopa', myap, mxap, ias, '');
                                                    }
                                                    break;

                                                case '300000':
                                                    var kdij = iw[279].toLowerCase();
                                                    resuav = kmens.indexOf(kdij);
                                                    if (maap == 0) {
                                                        myap = estaeny;
                                                        mxap = estaenx;

                                                    }
                                                    ////consola.log('maap'+maap+'  === '+myap+'c'+mxap);
                                                    if (resuav >= 0) {
                                                        ultimmasc = kstamas;
                                                        ////consola.log('mascopa',myap,mxap,ias,'');
                                                        katman('mascopa', myap, mxap, ias, '');
                                                    } else {

                                                        kdij = iw[280].toLowerCase();
                                                        resuav = kmens.indexOf(kdij);
                                                        if (resuav >= 0) {
                                                            ultimmasc = kstamas;
                                                            ////consola.log('mascopa',myap,mxap,ias,'ladra');
                                                            katman('mascopa', myap, mxap, ias, 'ladra');
                                                        } else {
                                                            kdij = iw[281].toLowerCase();
                                                            resuav = kmens.indexOf(kdij);
                                                            if (resuav >= 0) {
                                                                ultimmasc = kstamas;
                                                                ////consola.log('mascopa',myap,mxap,ias,'pata');
                                                                katman('mascopa', myap, mxap, ias, 'pata');
                                                            } else {
                                                                kdij = iw[282].toLowerCase();
                                                                resuav = kmens.indexOf(kdij);
                                                                if (resuav >= 0) {
                                                                    ultimmasc = kstamas;
                                                                    ////consola.log('mascopa',myap,mxap,ias,'tirado');
                                                                    katman('mascopa', myap, mxap, ias, 'tirado');
                                                                }
                                                            }
                                                        }
                                                    }
                                                    break;
                                                case '20002':
                                                    var nanadnandana = 'na';
                                                    break;
                                                case '20001':
                                                    var varsienc = false;
                                                    var myapa = mresult[0].x;
                                                    var mxapa = mresult[0].y;
                                                    var kdij = iw[283].toLowerCase();
                                                    resuav = kmens.indexOf(kdij);
                                                    var mabdadog = fas(myapa, mxapa, estaeny, estaenx);

                                                    ////consola.log('de '+myapa,'c',mxapa,'  a   ',estaeny,'c',estaenx+' =='+mabdadog);
                                                    if (resuav >= 0) {
                                                        varsienc = true;


                                                        if (mabdadog > 0) {
                                                            ////consola.log('labeldog',ias,'standL'+mabdadog+'LLL','');
                                                            katman('labeldog', ias, 'standL' + mabdadog + 'LLL', '');
                                                            ////consola.log('labeldog',ias,'standL'+mabdadog+'LLL','');
                                                        }
                                                        ////consola.log('habguau',ias,'hola');
                                                        ////consola.log('habguau',ias,'hola');
                                                        katman('habguau', ias, 'hola');
                                                        ultimmasc = kstamas;
                                                        var mabda = fas(myap, mxap, yotoy, yotox);
                                                        var mif = fok;

                                                        if (numt == ultnumt && !akihayfurv) {//INICIO MIROvar venbox=kyv+'c'+kxv;
                                                            if (mabda > 0) {
                                                                var sifokasv = 'standL' + mabda + 'L' + mbailo + 'L' + maccion + 'L' + miart;
                                                                if (sifokasv != fok) {
                                                                    fok = sifokasv;
                                                                    ////////
                                                                    ////consola.log('golabelnew '+sifokasv);
                                                                    katman('golabelnew', sifokasv, '', 0);

                                                                }

                                                            }
                                                        }

                                                    } else {

                                                        var keebebe = '';
                                                        var dijograciasynopidionada = 'n';
                                                        var pediregrax = stamas.getAttribute('data-pgraci');
                                                        if (kmens.indexOf(iw[284].toLowerCase()) >= 0) {
                                                            //gracias
                                                            ////consola.log('habguau',ias,'grax');
                                                            if (pediregrax == 's') {
                                                                katman('habguau', ias, 'grax');
                                                                stamas.setAttribute('data-pgraci', 'n');
                                                                dijograciasynopidionada = 'sologracias';
                                                            } else {
                                                                dijograciasynopidionada = 's';
                                                            }
                                                            ////consola.log('habguau',ias,'grax');
                                                        }

                                                        if (dijograciasynopidionada != 'sologracias') {
                                                            if (kmens.indexOf(iw[285].toLowerCase()) >= 0) {
                                                                keebebe = 'bebeL3';
                                                            } else if (kmens.indexOf(iw[286].toLowerCase()) >= 0) {
                                                                keebebe = 'bebeL2';
                                                            } else if (kmens.indexOf(iw[287].toLowerCase()) >= 0) {
                                                                keebebe = 'bebeL1';
                                                            } else if (kmens.indexOf(iw[288].toLowerCase()) >= 0) {
                                                                keebebe = 'bebeL4';
                                                            } else if (kmens.indexOf(iw[289].toLowerCase()) >= 0) {
                                                                keebebe = 'bebeL5';//ojo aki lang
                                                            } else if (kmens.indexOf(iw[290].toLowerCase()) >= 0) {
                                                                keebebe = 'bebeL6';
                                                            }
                                                        }
                                                        if (keebebe == '' && dijograciasynopidionada == 's') {
                                                            katman('habguau', ias, 'graxpok');

                                                        } else if (keebebe != '') {
                                                            varsienc = true;
                                                            ultimmasc = kstamas;
                                                            ////consola.log('habguau',ias,keebebe);
                                                            katman('habguau', ias, keebebe);
                                                            ////consola.log('habguau',ias,keebebe);
                                                            ////consola.log('mresult'+mresult.length+'  fok='+stamas.getAttribute('data-fok0'));
                                                            ////consola.log('de '+myapa,'c',mxapa,'  a   ',estaeny,'c',estaenx);
                                                            if (mresult.length > 1) {
                                                                //window.setTimeout(controldog,400,ias,myap,mxap,yotoy,yotox,keebebe,numt);

                                                                ////consola.log('mresult'+mresult.length);

                                                                window.setTimeout(controldog, 400, ias, myap, mxap, yotoy, yotox, keebebe, numt);
                                                                ////consola.log('mascopa',myap,mxap,ias,keebebe);
                                                                katman('mascopa', myap, mxap, ias, keebebe);
                                                            } else if (mresult.length == 1) {
                                                                //var mabdadog = fas(yotoy,yotox,myap,mxap);
                                                                var mabdadog = fas(myapa, mxapa, estaeny, estaenx);
                                                                ////consola.log('mabdadog'+mabdadog);
                                                                if (mabdadog > 0) {
                                                                    ////consola.log('labeldog',ias,'standL'+mabdadog+'L',keebebe);
                                                                    katman('labeldog', ias, 'standL' + mabdadog + 'L', keebebe);
                                                                    ////consola.log('labeldog',ias,'standL'+mabdadog+'L',keebebe);
                                                                    //window.setTimeout(controldog,400,ias,myap,mxap,yotoy,yotox,keebebe,numt);


                                                                    window.setTimeout(controldog, 400, ias, estaeny, estaenx, myapa, mxapa, keebebe, numt);

                                                                }
                                                            }
                                                        }
                                                    }
                                                    break;
                                            }
                                        }

                                    }
                                }
                            }
                        }
                    }
                }
            },
            controldog = function (idpbot, cuadroybox, cuadroxbox, cuadroyyo, cuadroxyo, accicon, numtass) {
                ////
                //consola.log('controldog');
                var stamas = document.getElementById("masco" + idpbot);
                var kyy = ky;
                var kxx = kx;
                ////consola.log('masbox:'+stamas.getAttribute('data-box')+' === '+cuadroybox+'c'+cuadroxbox+'  === '+stamas.getAttribute('data-fok0'));
                ////consola.log('masbo2:'+stamas.getAttribute('data-box')+' === '+kyy+'c'+kxx+'  === '+cuadroyyo+'c'+cuadroxyo+' idp'+idpbot);

                if (numtass == numt && stamas && cuadroyyo == kyy && cuadroxyo == kxx) {

                    //
                    ////consola.log('masbox:'+stamas.getAttribute('data-box')+' === '+cuadroybox+'c'+cuadroxbox+'  === '+stamas.getAttribute('data-fok0'));
                    if (stamas.getAttribute('data-box') == cuadroybox + 'c' + cuadroxbox && stamas.getAttribute('data-blockmasco') == 'n') {

                        var mabdadog = fas(kyy, kxx, cuadroybox, cuadroxbox);
                        if (mabdadog > 0) {
                            //
                            ////consola.log('habguau',idpbot,accicon,'ya');
                            katman('habguau', idpbot, accicon + 'ya');
                            stamas.setAttribute('data-pgraci', 's');
                            //window.setTimeout(function() {
                            //OJOAKI
                            ////consola.log('OJOAKI');

                            ////consola.log('labeldog',idpbot,'standL'+mabdadog+'L','');
                            katman('labeldog', idpbot, 'standL' + mabdadog + 'L', '');

                            var mabdap = fas(cuadroybox, cuadroxbox, kyy, kxx);
                            var mif = fok;

                            ////consola.log('patiarc',(accicon.replace('bebeL',''),yasoid,''));
                            patiarc(accicon.replace('bebeL', ''), yasoid, '');

                            if (mabdap > 0 && mif.substring(0, 5) == 'stand' && ffurs[kyy + 'c' + kxx] == null || mabdap > 0 && mif.substring(0, 5) == 'stand' && ffurs[kyy + 'c' + kxx] == '') {

                                var sifoka = 'standL' + mabdap + 'L' + mbailo;
                                sifoka += 'L' + maccion + 'L' + miart;
                                fok = sifoka;
                                katman('golabelnew', sifoka, '', 0);
                                ////consola.log('golabelnew', sifoka,'');
                            } else {
                                ////consola.log('controlmia');
                                controlmia();
                            }
                            //},900);
                        }
                    } else {


                        window.setTimeout(controldog, 400, idpbot, cuadroybox, cuadroxbox, cuadroyyo, cuadroxyo, accicon, numtass);

                        //window.setTimeout(controldog,400,idpbot,cuadroybox,cuadroxbox,cuadroyyo,cuadroxyo,accicon,numtass);
                    }
                }

            },
            patiarc = function (elk, para, de) {

                if (para == yasoid) {
                    miart = elk;
                    if (bebetimeout) {
                        ////////consola.log('borro bebetimeout');
                        window.clearTimeout(bebetimeout);
                    }
                    maccion = 'bebe';

                    bebetimeout = window.setTimeout(beber, 12000, 1);

                    if (de >= 1) {
                        var elss = kkallakik.querySelector('[data-idkek="' + de + '"]');
                        if (elss) {
                            var cuadroybox = elss.getAttribute('data-y');
                            var cuadroxbox = elss.getAttribute('data-x');
                            var mabdap = fas(cuadroybox, cuadroxbox, ky, kx);
                            if (mabdap > 0 && numt == ultnumt && !ffurs[ky + 'c' + kx]) {

                                var sifoka = 'standL' + mabdap + 'L' + mbailo;
                                sifoka += 'L' + maccion + 'L' + miart;
                                fok = sifoka;
                                katman('golabelnew', sifoka, '', 0);
                            } else {
                                controlmia();
                            }
                        }

                    }
                    ////consola.log('patiarc elk'+elk+' para'+para+ ' de'+de);
                }
            },
            quitoglob = function () {
                //document.getElementById('sendmmte').setAttribute('data-h','n');
                if (ultimaclaseaccion != 'habla') {
                    katman('parlo', 'ntodo');
                    //consola.log('ultimaclaseaccion',ultimaclaseaccion);
                    ultimaclaseaccion = '';
                } else {
                    ultimaclaseaccion = '';
                    katman('parlo', 'n');
                }
            },
            seleccionable = function (idselector) {
                selewm(idselector, document.getElementById(idselector + 'o').value, 'n');
                document.getElementById(idselector + 'ops').style.display = 'none';
                document.getElementById(idselector + 'opsant').onclick = function () {
                    if (document.getElementById(idselector + 'ops').style.display == 'none') {
                        document.getElementById(idselector + 'opsant').style.display = 'none';
                        document.getElementById(idselector + 'ops').style.display = 'inline';
                        if (idselector == 'selestendivv')
                            document.getElementById('coletill').className = 'novisible';

                    } else {
                        document.getElementById(idselector + 'ops').style.display = 'none';
                        document.getElementById(idselector + 'opsant').style.display = 'block';
                    }
                }

                var pestansnasel = document.getElementById(idselector + 'ops').querySelectorAll('.blockseldi');
                if (pestansnasel.length > 0) {
                    for (var ibo = 0; ibo < pestansnasel.length; ibo++) {
                        pestansnasel[ibo].onclick = function () {

                            selewm(idselector, this.id.replace(idselector, ''), 's');
                            if (idselector == 'selestendivv')
                                dimecasas();
                        }
                    }
                }
            },
            vercasas = function () {

                var locargo = 'n';
                if (!document.getElementById('globocasastot')) locargo = 's';
                if (locargo == 's') {
                    borrarclase('globonewmenu');
                    var creodonde = document.getElementById('cabarriaki');
                    var creo = document.createElement('div');
                    creo.id = 'globocasastot';
                    //creo.onmouseenter = function(){
                    //document.onmousemove = function(){}
                    //
                    //leftahor = parseInt(document.getElementById('kekoall').style.left.replace('px',''));
                    //};

                    //nolang
                    creo.innerHTML = '<div id="coletill" class="novisible"></div>' +
                        '<div id="globocasas" class="globonewmenu leftcasas"><div id="tituloglobosnav">' + iw[291] + '</div><div class="bloquearricasasnav"><form id="bloquebusca"><button class="fright btnwo" id="navmiscasas"><img src="/imagesnew/game/llave.png"/></button><button class="fright btnwo" id="navcreacasa"><img src="/imagesnew/game/crearcasa.png"/></button><input type="submit" value="" id="tebuscbb"/><input type="text" id="tebusc" class="texwo" placeholder="' + iw[292] + '" autocomplete="off"/></form>' +
                        '<div class="btnselec" id="sekesa"><div id="selestendivvopsant" class="blockselante"><img src="' + dominiobase + 'maskeko/images/cat_1.png"/> <span>' + iw[293] + '</span></div><div id="selestendivvops"><div class="blockseldi" id="selestendivv1"><img src="' + dominiobase + 'maskeko/images/cat_1.png"/> <span>' + iw[293] + '</span></div><div class="blockseldi" id="selestendivv12"><img src="' + dominiobase + 'images/casas.png"/> <span>' + iw[294] + '</span></div><div class="blockseldi" id="selestendivv11"><img src="' + dominiobase + 'maskeko/images/like.png"/> <span>' + iw[295] + '</span></div><div class="blockseldi" id="selestendivv13" style="display:none;"><img src="' + dominiobase + 'maskeko/images/cat_2.png"/> <span>' + iw[296] + '</span></div><input type="hidden" id="selestendivvo" value="1"/></div></div></div>' +
                        '<div id=\'myNav\'></div></div>';//.appendTo('#cabarri')
                    creodonde.appendChild(creo);

                    document.getElementById('bloquebusca').onsubmit = function () {
                        dimecasas();
                        return false;
                    };

                    seleccionable('selestendivv');

                    if (document.getElementById('newbtn_casas').getAttribute('data-vesa') == 12 || document.getElementById('newbtn_casas').getAttribute('data-vesa') == 11) {
                        selewm('selestendivv', document.getElementById('newbtn_casas').getAttribute('data-vesa'), 's');
                        document.getElementById('newbtn_casas').setAttribute('data-vesa', '');
                    }

                    //else{
                    dimecasas();
                    //}
                    //document.getElementById('newbtn_casas').click();
                    //selewm('selestendivv',12,'s');dimecasas();

                    //dimecasas();

                    document.getElementById('navcreacasa').onclick = function () {
                        window.location = '#/app/createhouse';
                    };
                    document.getElementById('navmiscasas').onclick = function () {
                        selewm('selestendivv', 12, 's'); dimecasas();
                    };
                } else {
                    borrarclase('globonewmenu');
                }
            },
            parlo = function (accion, tiempo) {
                //document.getElementById('sendmmte').setAttribute('data-h',accion);
                if (ultimaclaseaccion != accion || accion != 'habla') {
                    katman('parlo', accion);
                    if (ultimaclaseaccion == '' || ultimaclaseaccion == 'habla')
                        ultimaclaseaccion = accion;
                }
                if (quitoglobinter) window.clearTimeout(quitoglobinter);
                quitoglobinter = window.setTimeout(quitoglob, tiempo);
            },
            gofuncspecial = function (kago) {
                var mifokaaho = fok.replace('L' + maccion + 'L' + miart, '');

                if (numt == ultnumt) {
                    var mya = ky;
                    var mxa = kx;
                    if (mya == 0 && mxa == 2) {
                        var nadapo = 'na';
                    } else {
                        if (ffurs[mya + 'c' + mxa] == null || ffurs[mya + 'c' + mxa] == '' || ffurs[mya + 'c' + mxa] == 'stop') {

                            if (kago == 's') {
                                switch (mifokaaho) {
                                    case 'standL1Lsentado_nw':
                                        mifokaaho = 'sentado_ne';
                                        break;
                                    case 'standL1Lestirado_ne':
                                        mifokaaho = 'sentado_ne';
                                        break;
                                    case 'standL1Lsentado_ne':
                                        mifokaaho = 'sentado_se';
                                        break;
                                    case 'standL1Lestirado_se':
                                        mifokaaho = 'sentado_se';
                                        break;
                                    case 'standL1Lsentado_se':
                                        mifokaaho = 'sentado_sw';
                                        break;
                                    case 'standL1Lestirado_sw':
                                        mifokaaho = 'sentado_sw';
                                        break;
                                    case 'standL1Lestirado_nw':
                                        mifokaaho = 'sentado_nw';
                                        break;
                                    default:
                                        mifokaaho = 'sentado_nw';
                                }
                            } else if (kago == 'e') {
                                switch (mifokaaho) {
                                    case 'standL1Lestirado_nw':
                                        mifokaaho = 'estirado_ne';
                                        break;
                                    case 'standL1Lsentado_ne':
                                        mifokaaho = 'estirado_ne';
                                        break;
                                    case 'standL1Lestirado_ne':
                                        mifokaaho = 'estirado_se';
                                        break;
                                    case 'standL1Lsentado_se':
                                        mifokaaho = 'estirado_se';
                                        break;
                                    case 'standL1Lestirado_se':
                                        mifokaaho = 'estirado_sw';
                                        break;
                                    case 'standL1Lsentado_sw':
                                        mifokaaho = 'estirado_sw';
                                        break;
                                    case 'standL1Lsentado_nw':
                                        mifokaaho = 'estirado_nw';
                                        break;
                                    default:
                                        mifokaaho = 'estirado_nw';
                                }
                            }
                            if (sisigotimeout) {
                                window.clearTimeout(sisigotimeout);
                            }
                            if (movigoyainter)
                                window.clearInterval(movigoyainter);

                            mbailo = '';
                            mresulta = [];
                            mresulta[0] = { 'cmia': 'sisentarme', 'y': kx, 'x': ky, 'ponfurka': mifokaaho };
                            movigoyainter = window.setInterval(movigoyas, 360);


                        }
                    }
                }
            },
            accionesybailar = function (queaccion) {
                switch (queaccion) {
                    case 'baila':
                        var enbox = ky + 'c' + kx;
                        if (!ffurs[enbox] || ffurs[enbox] == 'stop' || ffurs[enbox] == 'cesped' || ffurs[enbox] == 'pu') {
                            if (mbailo != 'baila')
                                mbailo = 'baila';
                            else
                                mbailo = '';//datos de fok2

                            controlmia();
                        }
                        break;
                }
            },
            interactuar = function (idkeko, accion) {
                //
                //////

                //console.log('bowb '+bowb+' interactuar '+idkeko+' accion '+accion);
                if (accion == 'mebesar' || bowb == 'no' && idkeko != '' && idkeko != yasoid) {
                    var steyo = document.getElementById("k" + yasoid);
                    var stamas = document.getElementById("k" + idkeko);

                    if (elementExists(steyo) && elementExists(stamas) && stamas.getAttribute('data-box')) {

                        var estaenyx = stamas.getAttribute('data-box');

                        var mlalasulte = estaenyx.split('c');
                        var estaeny = parseInt(mlalasulte['0']);
                        var estaenx = parseInt(mlalasulte['1']);
                        var yotoy = ky;
                        var yotox = kx;
                        var mesaespecialat = yotoy + 'c' + yotox;
                        var yogra = dimegraph(ployy, ploxx, mesaespecial, mesaespecialat, estaeny + 'c' + estaenx);

                        var mstart = yogra.nodes[yotoy][yotox];
                        var mend = yogra.nodes[estaeny][estaenx];
                        var mresult = astar.search(yogra.nodes, mstart, mend, condiags);
                        var maap;
                        var lahare = 'n';
                        if (mresult.length > 0)
                            lahare = 's';

                        if (lahare == 's') {
                            if (mresult.length > 1) {
                                maap = (mresult.length - 1);

                                var mlalasult = mresult[maap];
                                //mlalasult = mlalasult.toString();
                                //var mlalasulte = mlalasult.split('c');
                                var myap = parseInt(mresult[maap].x);
                                var mxap = parseInt(mresult[maap].y);
                                mresult[maap].cmia = accion;

                                //if(kf.bowb == false){
                                //kf.timtimy = myap;
                                //kf.timtimx = mxap;
                                //kf.movigo();
                                //kf.controllarbe(myap+'c'+mxap,nf.dime('numt'),'darpatear',idkeko);
                                //}
                                if (sisigotimeout) {
                                    window.clearTimeout(sisigotimeout);
                                }
                                numt++;
                                //[mresult]
                                mresulta = [];
                                mresulta = mresult;
                                //////consola.log('mando '+accion+' a '+idkeko+'  myap'+myap+'c'+mxap);
                            } else if (mresult.length == 1) {
                                //////consola.log('dar'+accion);
                                if (sisigotimeout) {
                                    window.clearTimeout(sisigotimeout);
                                }
                                numt++;
                                mresulta = [];
                                mresult[0].cmia = accion;
                                mresulta = mresult;
                                //kf.controllarbe(yotoy+'c'+yotox,nf.dime('numt'),'darpatear',idkeko);
                            }

                            var tiempofins = 22000;
                            switch (accion) {
                                case 'patear':
                                    tiempofins = 22000;
                                    bowb = 'si';

                                    window.setTimeout(quitobowb, 2000);

                                    break;
                                case 'mebesar':
                                    tiempofins = 22000;
                                    //bowb='si';

                                    //window.setTimeout(quitobowb, 4000);

                                    break;
                                case 'besar':
                                    tiempofins = 22000;
                                    bowb = 'si';

                                    window.setTimeout(quitobowb, 2000);
                                    //bowb='si';
                                    //window.setTimeout(quitobowb, 4000);

                                    break;
                            }
                            parlo(accion, tiempofins);

                            //katman('parlo',accion);
                            //setTimeout(function(){
                            //katman('parlo',accion+'adeu');
                            //},tiempofins,accion+'adeu');
                        }
                    }
                }
                //moviendokekoall='si';
                //borrar('cartakekon');
            },
            quitobowb = function () {
                //////consola.log('desbloqueo bowb');
                bowb = 'no';
            },

            verwebajax = function (carpet, carpetd, carpett) {
                ////////////consola.log('AJAXXX '+'mikeka='+yasoid+'&idi='+idila+'&c='+encodeURI(carpet)+'&c2='+encodeURI(carpetd));

                ////console.log('verwebajax');
                var endiv = 'appaki';//a√±adir en verwebajax si cambia
                if (carpet == 'hi') {
                    endiv = 'webaki';
                }
                if (document.getElementById(endiv) && document.getElementById(endiv).innerHTML == '') {
                    document.getElementById(endiv).innerHTML = '<p align="center"><img src="' + dominiobase + 'imagesnew/appico3/cargatrans.gif"></p>';
                }

                var urlva = 'todoincs/ver' + carpet + '.php';
                var urldatas = 'mikeka=' + yasoid + '&idi=' + idila + '&c=' + encodeURI(carpet) + '&c2=' + encodeURI(carpetd) + '&c3=' + encodeURI(carpett) + '&yv=' + encodeURI(yvip);

                if (carpet == 'app') {
                    switch (carpetd) {
                        default:
                            var yvipurl = '0';
                            if (yvip > 0) yvipurl = '1';

                            if (carpetd == 'developers') {
                                urlva = 'todoincs/' + carpetd + '.php';//?idila='+idila+'&yvipurl='+yvipurl
                            } else if ( carpetd == 'mods' || carpetd == 'helpers' || carpetd == 'apestados' || carpetd == 'admins' ) {
                                urlva = 'todoincs/app/' + idila + '/' + carpetd + '.html';
                            } else {
                                urlva = 'todoincs/app/' + idila + '/' + carpetd + '-' + yvipurl + '.html';
                            }

                            urldatas += '&test=' + encodeURI(Math.random());
                    }
                }

                //console.log('urlva',urlva);
                kajax({
                    data: urldatas,
                    url: urlva,
                    type: 'get',
                    success: function (response) {
                        verweb(carpet, carpetd, response);
                    }
                });
            },
            verweb = function (carpet, carpetd, response) {

                //console.log('verweb',carpet,' carpetd',carpetd,' response',response);
                var endiv = 'appaki';//a√±adir en verwebajax si cambia
                if (carpet == 'hi') {
                    endiv = 'webaki';
                }

                //////////////
                //consola.log('verweb carpet='+carpet+'='+' carpetd'+carpetd+' endiv'+endiv);
                if (document.getElementById(endiv)) {
                    document.getElementById(endiv).innerHTML = response;

                    switch (carpet) {
                        case 'hi':
                            //////////////consola.log('home');
                            if (document.getElementById('kapps')) {
                                document.getElementById('webaki').className = 'webakimenu';
                                document.getElementById('appaki-wrap').className = 'appakiwrapmenu';
                                document.getElementById('appaki').className = 'appakimenu';
                                var cboxesffcats = document.getElementById('kapps').querySelectorAll('li')
                                    , iffccats = cboxesffcats.length;
                                if (iffccats > 0) {
                                    while (iffccats--) {
                                        if (cboxesffcats[iffccats] && cboxesffcats[iffccats].getAttribute('data-ct')) {
                                            cboxesffcats[iffccats].onclick = function () { verapp(this) };
                                        }
                                    }
                                }
                            }
                            if (document.getElementById('yoimaminiii')) {
                                document.getElementById('yoimaminiii').src = urlperfils + yomini;
                            }
                            break;
                        case 'app':
                            //////////////consola.log('home');
                            switch (carpetd) {
                                case 'createhouse':
                                    borrarclase('globonewmenu');


                                    document.getElementById('creacasitfom').onsubmit = function () {
                                        var kinnoma = document.getElementById('kinnom').value;
                                        var kmodela = document.getElementById('kmodelcas').value;
                                        if (kinnoma == '') {
                                            document.getElementById('kinnom').placeholder = iw[307];//nolang
                                            document.getElementById('kinnom').style.color = '#FF0000';
                                        } else {
                                            //borrar('crearsala');
                                            kinnoma = kinnoma.replace('#', '');
                                            kajax({
                                                data: 'mikeka=' + yasoid + '&idi=' + idila + '&kmodel=' + encodeURI(kmodela) + '&kinnoma=' + encodeURI(kinnoma),
                                                url: 'todoincs/creacasitv3.php',
                                                type: 'get',
                                                success: function (response) {

                                                    if (response == 'esperartiempo')
                                                        return winsor("myAle", "Error al crear tu casa", "Para crear tu casa, debes esperar al menos 3 minutos despu√©s de haber creado otra.", "", "", "");

                                                    if (response == 'casaslimites')
                                                        return winsor("myAle", "Error al crear tu casa", "Has llegado al l√≠mite de casas a crear.", "", "", "");

                                                    if (response && response >= 1) {
                                                        window.location = '#/h/' + encodeURI(response);
                                                    }
                                                }
                                            });
                                        }
                                        return false;
                                    }
                                    break;
                            }
                            break;
                        case 'welcome':
                            cargakweets('akikweets', 'welcome', 0);
                            cargadinaboxs();
                            break;
                        case 'kweet':
                            if (document.getElementById('akikweets')) {
                                cargakweets('akikweets', document.getElementById('akikweets').getAttribute('data-dedonde'), 'idmuro');
                            }
                            cargadinaboxs();


                            break;
                        case 'hashtag':
                            if (document.getElementById('akikweets')) {
                                cargakweets('akikweets', 'hashtag-' + document.getElementById('akikweets').getAttribute('data-dedonde'), 0);
                            }
                            cargadinaboxs();


                            break;
                        case 'perfil':
                            //cargakweets('welcome',0);
                            //cargadinaboxs();
                            //console.log('cargo perfil');
                            if (document.getElementById('aspectoperfil')) {
                                kanvasclick(document.getElementById('aspectoperfil'), document.getElementById('aspectoperfil').getAttribute('data-asp'));
                                if (document.getElementById('akikweets')) {
                                    ////////////consola.log('cargokweets dedonde '+document.getElementById('akikweets').getAttribute('data-dedonde'));
                                    cargakweets('akikweets', document.getElementById('akikweets').getAttribute('data-dedonde'), 0);
                                }
                                cargadinaboxs();

                            }
                            btnnnamistad('btnamigoperfil');
                            btnnntoque('btntoqueperfil', 'carga');

                            break;
                    }
                    verwebdespuesajax();
                }
            },
            rotamm = function () {
                //console.log('rotamm');
                //////////////consola.log('cargorouter');
                // Lazy load view element:
                // Current route url (getting rid of '#' in hash as well):
                var url = location.hash;//.slice(2) || 'pacasa/'
                // Get route by url:

                //console.log('url real',url);
                if (vextr.hasOwnProperty('urligual')) {
                    //console.log('tiene urligual');
                    url = vextr['urligual'];
                    delete (vextr['urligual']);
                }
                //console.log('url real2:',url);

                if (url == '#/pacasa' || url && url !== 'mismo' && url.substr(0, 2) == '#/') {

                    url = url.slice(2);
                    var urlspl = url.split('/');
                    var carpet = urlspl[0];
                    var conajax = 's';
                    var soyredirect = 's';
                    var carpetd = '';
                    var carpett = '';
                    if (urlspl.length > 1) {
                        carpetd = urlspl[1];
                    }
                    if (urlspl.length > 2) {
                        carpett = urlspl[2];
                    }

                    var carpet_real = carpet;
                    var carpetd_real = carpetd;
                    var carpett_real = carpett;
                    var vesalocation = '';



                    //////////////consola.log('rotamm carpet'+carpet+' carpetd'+carpetd);
                    switch (carpet) {
                        case 'home':
                            conajax = 'n';
                            //document.getElementById('appaki').innerHTML='';
                            verwebajax('welcome', '', '');
                            vesalocation = '#/hi';

                            break;
                        case 'pacasa':
                            cargandooo('ok');
                            if (yosocas <= 0)
                                vesalocation = '#/h/' + vespacas;
                            else {
                                soyredirect = 's';
                                vesalocation = '#/h/' + yosocas;
                            }
                            conajax = 'n';
                            break;
                        case 'hi':
                            if (document.getElementById('webaki') && document.getElementById('webaki').innerHTML == '')
                                conajax = 's';
                            else {
                                conajax = 'n';
                                verwebdespuesajax();
                            }

                            //if(document.getElementById('appaki').innerHTML==''){
                            //document.getElementById('appaki').innerHTML=='' &&
                            verwebajax('welcome', '', '');
                            //}
                            document.getElementById('webaki').className = 'webakimenu';
                            document.getElementById('appaki-wrap').className = 'appakiwrapmenu';
                            document.getElementById('appaki').className = 'appakimenu';
                            cargandooo('ok');
                            soyredirect = 'n';
                            break;
                        case 'backgame':
                            if (yosocas > 0) {
                                verjuego();
                                soyredirect = 'n';
                                carpet_real = 'h';
                                carpetd_real = yosocas;
                            } else {
                                vesalocation = '#/hi';
                            }

                            conajax = 'n';
                            break;
                        case 'profile':
                            conajax = 'n';
                            vesalocation = '#/' + encodeURI(yasokek);
                            break;
                        case 'c':
                            conajax = 'n';
                            vesalocation = '#/h/' + carpetd;
                            break;
                        case 'h':
                            conajax = 'n';
                            ////console.log('entro a casa');
                            //if(bowb=='no'){
                            //carpetd=parseInt(carpetd);
                            ////consola.log('mando donve',carpetd);
                            borrarclase('globonewmenu');
                            if (!isNaN(carpetd) && carpetd >= 1) {
                                katman('donve', carpetd, '');
                                //OJOAKI
                                //katman('donve',50,'');
                                //console.log('voy a la casa');
                                //bowb='si';
                                //mresulta = [];
                                //if(sisigotimeout){
                                //window.clearTimeout(sisigotimeout);
                                //}
                                //if(movigoyainter){
                                //window.clearInterval(movigoyainter);
                                //}
                                //window.setTimeout(quitobowb, 2000);

                            } else {
                                //consola.log('kickeame');
                                katman('kickeame');
                            }
                            soyredirect = 'n';
                            //}
                            break;
                        case 'app':
                            switch (carpetd) {//apps sin ajax
                                case 'houses':
                                    conajax = 'n';
                                    var mirositat = document.getElementById('globocasastot');
                                    if (!elementExists(mirositat))
                                        vercasas();
                                    else {
                                        selewm('selestendivv', 1, 's'); dimecasas();
                                    }
                                    soyredirect = 'n';

                                    break;
                                case 'houseslike':
                                    conajax = 'n';
                                    var mirositad = document.getElementById('globocasastot');
                                    if (!elementExists(mirositad)) {
                                        document.getElementById('newbtn_casas').setAttribute('data-vesa', 11);
                                        vercasas();
                                    } else {
                                        selewm('selestendivv', 11, 's'); dimecasas();
                                    }
                                    soyredirect = 'n';
                                    break;
                                case 'myhouses':
                                    conajax = 'n';
                                    var mirositacc = document.getElementById('globocasastot');
                                    if (!elementExists(mirositacc)) {
                                        document.getElementById('newbtn_casas').setAttribute('data-vesa', 12);
                                        vercasas();
                                        //selewm('selestendivv',12,'s');dimecasas();
                                    } else {
                                        selewm('selestendivv', 12, 's'); dimecasas();
                                    }
                                    soyredirect = 'n';
                                    break;
                            }
                            cargandooo('ok');
                            if (conajax == 'n') {//apps sin ajax miro si hay algo cargado en appaki
                                if (document.getElementById('webaki').innerHTML == '') {
                                    //document.getElementById('appaki').innerHTML=='' &&
                                    verwebajax('hi', '', '');
                                    verwebajax('welcome', '', '');
                                }
                            }
                            soyredirect = 'n';
                            break;
                        case 'kweet':
                            document.getElementById('webaki').className = 'novisible';
                            document.getElementById('appaki-wrap').removeAttribute('class');
                            document.getElementById('appaki').removeAttribute('class');
                            cargandooo('ok');

                            soyredirect = 'n';
                            break;
                        case 'hashtag':
                            document.getElementById('webaki').className = 'novisible';
                            document.getElementById('appaki-wrap').removeAttribute('class');
                            document.getElementById('appaki').removeAttribute('class');
                            cargandooo('ok');

                            soyredirect = 'n';


                            break;
                        default:
                            ////consola.log('carpet',carpet,' carpetd',carpetd,' carpett',carpett);
                            carpett = carpetd;
                            carpetd = carpet;
                            carpet = 'perfil';
                            document.getElementById('webaki').className = 'novisible';
                            document.getElementById('appaki-wrap').removeAttribute('class');
                            document.getElementById('appaki').removeAttribute('class');
                            cargandooo('ok');

                            soyredirect = 'n';
                    }
                    if (conajax == 's') {
                        //document.getElementById('aki'+cual).innerHTML='<p align="center"><img src="'+dominiobase+'imagesnew/game/cargando.gif"></p>';
                        verwebajax(carpet, carpetd, carpett);
                        //document.documentElement.style.cursor='progress';
                    }

                }

            },
            agregaramigo = function (queboton, esteidkeko, acciondirecta) {
                ////////////consola.log('agregaramigo');
                if (yasoid != esteidkeko && !misamigs['k' + esteidkeko] && document.getElementById(queboton) && document.getElementById(queboton).getAttribute('data-esamig') != '1') {
                    //OJOAKI && !vextr['peti'+esteidkeko]
                    if (!vextr['peti' + esteidkeko] && acciondirecta == '') {
                        vextr['peti' + esteidkeko] = 1;
                        document.getElementById(queboton).setAttribute('disabled', 'disabled');
                        document.getElementById(queboton).innerHTML = iw[308];//Nolang
                        ////////consola.log('mandoamistad');
                        //////consola.log('mandoamistad');
                        katman('mandoamistad', esteidkeko);
                    } else if (vextr['peti' + esteidkeko] == 2 || acciondirecta == 2) {//Aceptar como amigo

                        vextr['peti' + esteidkeko] = 3;
                        if (document.getElementById(queboton) && acciondirecta == '')
                            document.getElementById(queboton).setAttribute('disabled', 'disabled');

                        if (document.getElementById("solisamigos") && document.getElementById("solisamigos").querySelector('[data-de="' + esteidkeko + '"][data-acc="si"]')) {

                            ////consola.log('aceptocomoamigodesdesolis');
                            clickeboton(document.getElementById("solisamigos").querySelector('[data-de="' + esteidkeko + '"][data-acc="si"]'));
                        } else {
                            ////
                            //////consola.log('aceptocomoamigo');
                            katman('botonamistades', 1, esteidkeko, 'si');
                            bolita('amigos', 'resta', 1);
                        }
                    }
                } else if (document.getElementById(queboton) && queboton != 'btnamigo' && document.getElementById(queboton).getAttribute('data-esamig') == '1') {
                    ////////

                    //////consola.log('borroa a mi amigoya esteidkeko'+esteidkeko);
                    if (vextr['peti' + esteidkeko]) {
                        delete vextr['peti' + esteidkeko];
                    }

                    if (misamigs['k' + esteidkeko]) {//nolang
                        //kmensaj("imagesnew/soni/offline.mp3",""+misamigs['k'+esteidkeko]+"",esteidkeko,misamigsm['k'+esteidkeko], "se ha <b>desconectado</b>");
                        if (document.getElementById('amigosons') && document.getElementById('amigosons').querySelector('[data-ika="' + esteidkeko + '"]')) {
                            document.getElementById('amigosons').removeChild(document.getElementById('amigosons').querySelector('[data-ika="' + esteidkeko + '"]'));
                        }
                        delete misamigs['k' + esteidkeko];
                    }
                    if (misamigsm['k' + esteidkeko]) {
                        delete misamigsm['k' + esteidkeko];
                    }
                    mirosinamigoson();
                    document.getElementById(queboton).setAttribute('data-esamig', 0);
                    //////consola.log('borrodeamigos');
                    btnnnamistad(queboton);
                    katman('botonamistades', 1, esteidkeko, 'no');
                } else if (document.getElementById(queboton) && queboton == 'btnamigo' && document.getElementById(queboton).getAttribute('data-esamig') == '1') {
                    //CHAT PRIVADO
                    //////consola.log('chatearconel');
                    chatearcon('', esteidkeko, 'btn', '', '');
                }
            },
            addvaaa = function (inf, supp) {
                var numPosibilidades = supp - inf;
                var aleat = Math.random() * numPosibilidades;
                aleat = Math.round(aleat);
                return parseInt(inf) + aleat;
            },
            clickefurni = function (evt, este) {

                //consola.log('clickefurni',este);
                if (idpmuevo == 0) {
                    if (este.getAttribute('data-anim') > 0) {

                        if (este.getAttribute('data-nomid') == '1009' || este.getAttribute('data-anim') != este.getAttribute('data-idf')) {
                            //consola.log('animar');
                            accionar('animar', este.getAttribute('data-idp'), 'btn');
                        } else if (este.getAttribute('data-idpc') == 'cerberusbtn')
                            accionar('accionar', este.getAttribute('data-idp'), 'btn');

                    }


                    var cfbox = este.getAttribute('data-box');
                    if (cfbox && ffurs[cfbox] != 'stop' && ffursidp[cfbox] == este.getAttribute('data-idp')) {
                        if (ffursencmaltur[cfbox]) {
                            var alturaextralol = ffursencmaltur[cfbox];
                            movigo(evt, alturaextralol);
                        }
                        //else{
                        //if(timeouclic)window.clearTimeout(timeouclic);
                        //timeouclic = window.setTimeout(clickado,200,este.getAttribute('data-idp'),'idp')
                        //}
                    } else {
                        if (timeouclic) window.clearTimeout(timeouclic);
                        timeouclic = window.setTimeout(clickado, 10, este.getAttribute('data-idp'), 'idp')
                    }
                }
            },
            startmovingkekoall = function (estaas, evt) { // The function that sets up the div coordinates to make it move. Executed on the onmousedown event on the div.
                evt = evt || window.event;

                ////consola.log('startMovingv2OJOAKI');
                var posX = evt.clientX, // The x-coordinate of the mouse pointer position on the screen
                    posY = evt.clientY, // The y-coordinate of the mouse pointer position on the screen
                    divTop = estaas.style.top, // We need the initial position of the div so that we can determine its final position on dragging
                    divLeft = estaas.style.left; // We need the initial position of the div so that we can determine its final position on dragging
                divTop = divTop.replace('px', ''); // Just so that we can perform calculations on the variable.
                divLeft = divLeft.replace('px', ''); // Just so that we can perform calculations on the variable.
                var diffX = posX - divLeft, // We keep this value so that we can calculate the final position of the element
                    diffY = posY - divTop; // We keep this value so that we can calculate the final position of the element
                var movefunc = function (evt) { // Whenever the mouse moves, this function is execulted
                    evt = evt || window.event;
                    var posX = evt.clientX, // Mouse x-coordinate
                        posY = evt.clientY, // Mouse y-coordinate
                        aX = posX - diffX, // The final x-coordinate of the element
                        aY = posY - diffY; // The final y-coordinate of the element
                    movev2OJOAKI(estaas, aX, aY); // Function to assign the style rules to the element
                };


                var borraya = function () {
                    ////consola.log('borromousemove');
                    document.removeEventListener("mousemove", movefunc, false);
                    document.removeEventListener("mouseup", borraya, false);
                    //this.addEventListener("mousemove", movekekoall, false);
                }
                document.addEventListener("mousemove", movefunc, false);
                document.addEventListener("mouseup", borraya, false);

            },
            movev2OJOAKI = function (a, xpos, ypos) { // Function to assign the style rules to the element
                ////consola.log('movev2OJOAKI');
                leftahor = xpos;
                altoahor = ypos;
                xpos += 'px';
                ypos += 'px';
                moviendokekoall = 'si';
                a.style.left = xpos;
                a.style.top = ypos;
            },
            dragstartkekoall = function (evt) {
                //console.log('dragstartkekoall');
                startmovingkekoall(this, evt);
                evt.preventDefault();
            },
            clickchats = function (evt) {
                var dika, dop;
                if (evt.target) {
                    dika = evt.target.getAttribute('data-ika');
                    dop = evt.target.getAttribute('data-op');
                }

                if (dika && misamigs['k' + dika]) {

                    //////console.log('block',block);
                    switch (dop) {
                        case 'chat':
                            if (!block[dika]) {
                                block[dika] = 1; setTimeout(quitoblock, 5000, dika);
                                chatearcon('', dika, 'btn', '', '');
                            }
                            break;
                        case 'perfil':
                            window.location = '#/' + encodeURI(misamigs['k' + dika]);
                            break;
                        case 'visit':
                            katman('seguir', dika);
                            break;
                        case 'cambiar':
                            if (!block[dika]) {
                                block[dika] = 1;
                                setTimeout(quitoblock, 5000, dika);
                                katman('mandonoti', dika, 4, '', '', '', '');//nolang
                                kmensaj("images/soni/noti5.mp3", iw[308], "1", "default",
                                    iw[309] + " <b>" + iw[310] + "</b>");
                            }
                            break;
                        case 'invit':
                            if (!block[dika]) {
                                block[dika] = 1; setTimeout(quitoblock, 5000, dika);
                                katman('mandonoti', dika, 5, '', '', '', '');
                                kmensaj("images/soni/noti5.mp3", iw[311], "1", "default",
                                    iw[312] + " <b>" + iw[313] + "</b>");
                            }
                            break;
                    }

                }
                ////consola.log('dop',dop,' dika',dika);
                //data-ika='"+idkakaagrga+"' data-op='perfil'
                //chatearcon('',this.getAttribute('data-ika'),'btn','','')
            },
            movekekoall = function (evt) {
                //console.log('movekekoall');
                lol(evt, 0, 'n');
            },
            hiceresiz = function () {
                anchopan = document.documentElement.clientWidth;
                altopan = document.documentElement.clientHeight;
                var altopanburbsa = parseInt(document.documentElement.clientHeight / 3);
                if (altopanburbsa < 200) altopanburbsa = 200;
                //else if(altopanburbsa>500)altopanburbsa=500;
                if (altopanburbsa > altopanburbs) {
                    altopanburbs = altopanburbsa;
                }
                //console.log('altopanburbs',altopanburbs);
                //consola.log('resize');
                escalo();

                let eraposiires = posici;
                posici = 'no';
                posiciono();
                posici = eraposiires;
            },
            dobleclickekoall = function (e) {
                var elem, evt = e ? e : event;
                if (evt.srcElement) elem = evt.srcElement;
                else if (evt.target) elem = evt.target;
                //
                //if(elementExists(elem) && !elem.getAttribute('data-furn')){
                //elem =elem.parentNode;
                //}
                if (elementExists(elem) && elem.getAttribute('data-furn') == 'si') {
                    //consola.log('dobleclickekoall',elem);

                    if (timeouclic) window.clearTimeout(timeouclic);

                    //consola.log('dobleclick',elem);
                    timeouclic = window.setTimeout(clickefurni, 10, evt, elem);
                } else {
                    //console.log('dobleclicknada OJOAKI');
                    akiblanhbb.classList.remove('novisible');
                    //nombreblanhbb.innerText = nombcas.nombre;
                    TENGOCLICADO = null;
                    TENGOCLICADOtipo = null;
                    TENGOCLICADODATA = {};
                    clickekoV4('', '', '');
                }
            },
            clickekoall = function (evt) {
                ////consola.log('clickekoall',evt);
                if (Object.keys(ffurs).length <= 1 && kkallaki.querySelectorAll('[data-a]:not([data-a=""])').length > 30) {
                    katman('kickeame');
                } else {
                    movigo(evt, 0);
                }
                //return true;
            },
            clickburbs = function (e) {
                var elem, evt = e ? e : event;
                if (evt.srcElement) elem = evt.srcElement;
                else if (evt.target) elem = evt.target;
                if (elementExists(elem)) {
                    if (elem.getAttribute('data-idk')) {
                        if (timeouclic) window.clearTimeout(timeouclic);
                        timeouclic = window.setTimeout(clickeko, 10, '', '', elem.getAttribute("data-idk"));
                    }
                }
                //return true;
            },
            clickblanhbb = function (e) {
                var elem, evt = e ? e : event;
                if (evt.srcElement) elem = evt.srcElement;
                else if (evt.target) elem = evt.target;
                if (elementExists(elem) && !elem.getAttribute('id')) {
                    elem = elem.parentNode;
                }
                if (elementExists(elem) && elem.getAttribute('id')) {
                    var eselbtnidd = elem.getAttribute('id');
                    var texapon = '';
                    var epmoc = pmoc;
                    switch (eselbtnidd) {

                        case 'btnperfil':
                            var klkikekk = document.getElementById('k' + ultimoidpclickado);
                            if (elementExists(klkikekk)) {
                                window.location = '#/' + encodeURI(klkikekk.getAttribute('data-kek'));
                            }
                            break;
                        case 'btnpermiso':
                            katman('mandonoti', ultimoidpclickado, 3, '', '', '', '');
                            gofcasa();
                            break;
                        case 'btnlook':
                            winsor('myLook', iw[314], '', '', '', '');
                            break;
                        case 'btnajustes':
                            winsor('myAjustes', iw[315], '', '', '', '');
                            break;
                        case 'btnamigo':
                            if (misamigs['k' + ultimoidpclickado]) {
                                elem.setAttribute('data-esamig', '1');
                            } else
                                elem.setAttribute('data-esamig', '0');
                            elem.setAttribute('data-idkkk', ultimoidpclickado);

                            agregaramigo('btnamigo', ultimoidpclickado, '');

                            gofcasa();
                            break;
                        case 'btnignorar':
                            var texapon = iw[316];
                            var conkmiroignorado = 'k' + ultimoidpclickado;
                            var indexignorado = kekosigno.indexOf(conkmiroignorado);
                            if (indexignorado >= 0) {
                                kekosigno.splice(indexignorado, 1);
                                texapon = iw[317];
                            } else {
                                kekosigno.push(conkmiroignorado);
                            }//nolang
                            elem.innerHTML = '<img src="' + dominiobase + 'imagesnew/appico3/ignor.png"/>' + texapon;
                            break;
                        case 'btnsusurrar':
                            var texapon = iw[318];
                            if (kekosusu == ultimoidpclickado) {
                                kekosusu = 0;
                                texapon = iw[319];
                                borrar('susurrando');
                            } else {

                                var klkikekks = document.getElementById('k' + ultimoidpclickado);
                                if (elementExists(klkikekks)) {
                                    kekosusu = ultimoidpclickado;
                                    var creodonde = document.getElementById('formasu');
                                    if (!document.getElementById('susurrando')) {
                                        var creo = document.createElement('div');
                                        creo.id = 'susurrando';
                                    } else {
                                        var creo = document.getElementById('susurrando');
                                    }
                                    creo.className = 'globonewmenu';//nolang
                                    creo.style.position = 'absolute';//nolang
                                    creo.style.marginTop = '-82px';//nolang
                                    creo.style.marginLeft = '143px';//nolang
                                    creo.style.color = '#2A3338';//nolang
                                    creo.style.paddingLeft = '30px';//nolang
                                    creo.innerHTML = '<img width="30" height="40" class="minimchak" id="canvsusu_' + ultimoidpclickado + '"/> ' + iw[320] + ' ' + klkikekks.getAttribute('data-kek') + ' <button class="btnwo ok" id="dejardesusu">' + iw[318] + '</button>';//nolang

                                    if (!document.getElementById('susurrando')) {
                                        creodonde.appendChild(creo);
                                    }
                                    minikanvas(document.getElementById('canvsusu_' + ultimoidpclickado), 'standL4LLLL' + klkikekks.getAttribute('data-rop'), 'peque');
                                    document.getElementById('dejardesusu').onmouseup = function () {
                                        borrar('susurrando');
                                        kekosusu = 0;
                                        document.getElementById('btnsusurrar').innerHTML = iw[321];
                                    };
                                }
                            }
                            elem.innerHTML = '<img src="' + dominiobase + 'imagesnew/appico3/susu.png"/>' + texapon;

                            break;
                        case 'btnkick':
                            if (epmoc == 'dueno' || epmoc == 'si') {
                                katman('kick', ultimoidpclickado);
                            }
                            break;
                        case 'btnban':
                            if (epmoc == 'dueno') {//nolang
                                winsor('myban', iw[322], ultimoidpclickado, '', '', '');
                            }
                            break;
                        case 'btndisparar':
                            interactuar(ultimoidpclickado, 'disparar');
                            break;
                        case 'btnpatear':
                            interactuar(ultimoidpclickado, 'patear');
                            break;
                        case 'btndarobj':
                            if (miart != '10' && miart > '0')
                                interactuar(ultimoidpclickado, 'pasar');
                            else
                                alerta('Este objeto no se puede dar');
                            break;
                        case 'btncambiar'://nolang
                            if (!block[ultimoidpclickado]) {
                                block[ultimoidpclickado] = 1; setTimeout(quitoblock, 5000, ultimoidpclickado);
                                kmensaj("images/soni/noti5.mp3", iw[323], "1", "default",
                                    iw[324] + " <b>" + iw[325] + "</b>");
                                katman('mandonoti', ultimoidpclickado, 4, '', '', '', '');
                            }
                            break;
                        case 'btnbesarse':
                            interactuar(ultimoidpclickado, 'besar');
                            break;
                        case 'btnmegustas':
                            katman('megustas', ultimoidpclickado);
                            break;
                        case 'btnsentarme':
                            gofuncspecial('s')
                            break;
                        case 'btnestirarme':
                            gofuncspecial('e');
                            break;
                        case 'btnwebcamm':
                            //nolang
                            //if(navigator.userAgent.match(/Chrome/i) && !navigator.userAgent.match(/MSIE/i) || navigator.userAgent.match(/Firefox/i) && !navigator.userAgent.match(/MSIE/i))
                            //{

                            if (elementExists(document.getElementById('kekoallakic').querySelector('#ifra' + yasoid))) {
                                katman('ecamfin');
                                akiblanhbb.querySelector('#btnwebcamm').innerHTML = '<img src="' + dominiobase + 'imagesnew/appico3/cam.png"/>' + iw[326];

                            } else {
                                katman('ecamsi');
                                ecam(yasoid, 'si', '');

                                akiblanhbb.querySelector('#btnwebcamm').innerHTML = '<img src="' + dominiobase + 'imagesnew/appico3/cam.png"/>' + iw[327];

                            }
                            //}else{//nolang
                            //    alerta(iw[328]);
                            //}
                            break;
                        case 'btnbailar':
                            accionesybailar('baila');
                            if (mbailo == 'baila') {//nolang
                                akiblanhbb.querySelector('#btnbailar').innerHTML = '<img src="' + dominiobase + 'imagesnew/appico3/baila.png"/>' + iw[329];
                            } else {
                                akiblanhbb.querySelector('#btnbailar').innerHTML = '<img src="' + dominiobase + 'imagesnew/appico3/baila.png"/>' + iw[330];
                            }
                            break;
                        case 'btnboing':
                            katman('comandos', 'boing', '');
                            break;
                        case 'btnrot':
                            katman('comandos', 'rot', '');
                            break;
                        default:
                            eselbtnidd = eselbtnidd.replace('btn', '');
                            accionar(eselbtnidd, ultimoidpclickado, 'btn');
                    }
                }
                //return true;
            },
            startmovingblan = function (evt) { // The function that sets up the div coordinates to make it move. Executed on the onmousedown event on the div.
                evt = evt || window.event;
                evt.preventDefault();
                var estaas = this;
                ////consola.log('startMovingv2OJOAKI');
                var posX = evt.clientX, // The x-coordinate of the mouse pointer position on the screen
                    posY = evt.clientY, // The y-coordinate of the mouse pointer position on the screen
                    divTop = estaas.style.top, // We need the initial position of the div so that we can determine its final position on dragging
                    divLeft = estaas.style.left; // We need the initial position of the div so that we can determine its final position on dragging
                divTop = divTop.replace('px', ''); // Just so that we can perform calculations on the variable.
                divLeft = divLeft.replace('px', ''); // Just so that we can perform calculations on the variable.
                var diffX = posX - divLeft, // We keep this value so that we can calculate the final position of the element
                    diffY = posY - divTop; // We keep this value so that we can calculate the final position of the element
                var movefuncb = function (evt) { // Whenever the mouse moves, this function is execulted
                    evt = evt || window.event;
                    var posX = evt.clientX, // Mouse x-coordinate
                        posY = evt.clientY, // Mouse y-coordinate
                        aX = posX - diffX, // The final x-coordinate of the element
                        aY = posY - diffY; // The final y-coordinate of the element
                    movev3(estaas, aX, aY); // Function to assign the style rules to the element
                };
                var borrayab = function () {
                    ////consola.log('borromousemove');
                    document.removeEventListener("mousemove", movefuncb, false);
                    document.removeEventListener("mouseup", borrayab, false)
                };
                document.addEventListener("mousemove", movefuncb, false);
                document.addEventListener("mouseup", borrayab, false);

            },
            movev3 = function (a, xpos, ypos) { // Function to assign the style rules to the element
                ////consola.log('movev2OJOAKI');
                xpos += 'px';
                ypos += 'px';
                a.style.left = xpos;
                a.style.top = ypos;
            },
            onmensa = function (event) {
                var msgObj = JSON.parse(event.data);

                var nombre = msgObj[0];
                switch (msgObj.length) {
                    case 1:
                        onsocks[nombre]();
                        break;
                    case 2:
                        onsocks[nombre](msgObj[1]);
                        break;
                    case 3:
                        onsocks[nombre](msgObj[1], msgObj[2]);
                        break;
                    case 4:
                        onsocks[nombre](msgObj[1], msgObj[2], msgObj[3]);
                        break;
                    case 5:
                        onsocks[nombre](msgObj[1], msgObj[2], msgObj[3], msgObj[4]);
                        break;
                    case 6:
                        onsocks[nombre](msgObj[1], msgObj[2], msgObj[3], msgObj[4], msgObj[5]);
                        break;
                    case 7:
                        onsocks[nombre](msgObj[1], msgObj[2], msgObj[3], msgObj[4], msgObj[5], msgObj[6]);
                        break;
                    case 8:
                        onsocks[nombre](msgObj[1], msgObj[2], msgObj[3], msgObj[4], msgObj[5], msgObj[6], msgObj[7]);
                        break;
                    case 9:
                        onsocks[nombre](msgObj[1], msgObj[2], msgObj[3], msgObj[4], msgObj[5], msgObj[6], msgObj[7], msgObj[8]);
                        break;
                    case 10:
                        onsocks[nombre](msgObj[1], msgObj[2], msgObj[3], msgObj[4], msgObj[5], msgObj[6], msgObj[7], msgObj[8], msgObj[9]);
                        break;
                    case 11:
                        onsocks[nombre](msgObj[1], msgObj[2], msgObj[3], msgObj[4], msgObj[5], msgObj[6], msgObj[7], msgObj[8], msgObj[9], msgObj[10]);
                        break;
                    case 12:
                        onsocks[nombre](msgObj[1], msgObj[2], msgObj[3], msgObj[4], msgObj[5], msgObj[6], msgObj[7], msgObj[8], msgObj[9], msgObj[10], msgObj[11]);
                        break;
                    case 13:
                        onsocks[nombre](msgObj[1], msgObj[2], msgObj[3], msgObj[4], msgObj[5], msgObj[6], msgObj[7], msgObj[8], msgObj[9], msgObj[10], msgObj[11], msgObj[12]);
                        break;
                    case 14:
                        onsocks[nombre](msgObj[1], msgObj[2], msgObj[3], msgObj[4], msgObj[5], msgObj[6], msgObj[7], msgObj[8], msgObj[9], msgObj[10], msgObj[11], msgObj[12], msgObj[13]);
                        break;
                    case 15:
                        onsocks[nombre](msgObj[1], msgObj[2], msgObj[3], msgObj[4], msgObj[5], msgObj[6], msgObj[7], msgObj[8], msgObj[9], msgObj[10], msgObj[11], msgObj[12], msgObj[13], msgObj[14]);
                        break;
                    case 16:
                        onsocks[nombre](msgObj[1], msgObj[2], msgObj[3], msgObj[4], msgObj[5], msgObj[6], msgObj[7], msgObj[8], msgObj[9], msgObj[10], msgObj[11], msgObj[12], msgObj[13], msgObj[14], msgObj[15]);
                        break;
                }
            },
            creaonsocks = function () {
                //socket_on
                var kateko = function (nombre, callback) {
                    onsocks[nombre] = callback;
                },
                    cargaplugin = function (datospp) {
                        if (!vextr['carge' + datospp.nombre]) {
                            vextr['carge' + datospp.nombre] = 'cargando';

                            if (!datospp.url) {
                                datospp.url = 'todoincs/plugins/' + datospp.nombre + '.js';
                            }
                            if (!datospp.dat) {
                                datospp.dat = '';
                            }
                            if (!datospp.type) {
                                datospp.type = 'get';
                            }
                            kajax({
                                data: datospp.dat,
                                url: datospp.url,
                                type: datospp.type,
                                success: function (response) {
                                    vextr['carge' + datospp.nombre] = 'cargado';
                                    eval(response);
                                    if (datospp.callb) {
                                        datospp.callb();
                                    }
                                }
                            });
                        } else if (vextr['carge' + datospp.nombre] == 'cargado') {

                            if (datospp.callb) {
                                datospp.callb();
                            }
                        }
                    };
                katman = function () {
                    if (connected == true) {
                        var datas = [];
                        datas.push(arguments[0]);

                        //consola.log(arguments);
                        if (arguments.length > 0) {
                            for (var i = 1; i < arguments.length; i++) {
                                datas.push(arguments[i]);
                            }
                        }

                        //consola.log('ws_node.send(',datas,')');
                        ws_node.send(JSON.stringify(datas));
                    }
                };

                //ws_node.addEventListener('message', onmensa,false);
                //consola.log('creaonsocks');


                //ini 2022 drag

                function dragElement(elmnt) {
                    var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
                    if (document.getElementById(elmnt.id)) {
                        /* if present, the header is where you move the DIV from:*/
                        document.getElementById(elmnt.id).onmousedown = dragMouseDown;
                    } else {
                        /* otherwise, move the DIV from anywhere inside the DIV:*/
                        elmnt.onmousedown = dragMouseDown;
                    }

                    function dragMouseDown(e) {
                        e = e || window.event;
                        e.preventDefault();
                        // get the mouse cursor position at startup:
                        pos3 = e.clientX;
                        pos4 = e.clientY;
                        document.onmouseup = closeDragElement;
                        // call a function whenever the cursor moves:
                        document.onmousemove = elementDrag;
                    }

                    function elementDrag(e) {
                        e = e || window.event;
                        e.preventDefault();
                        // calculate the new cursor position:
                        pos1 = pos3 - e.clientX;
                        pos2 = pos4 - e.clientY;
                        pos3 = e.clientX;
                        pos4 = e.clientY;
                        // set the element's new position:
                        elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
                        elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
                    }

                    function closeDragElement() {
                        /* stop moving when mouse button is released:*/
                        document.onmouseup = null;
                        document.onmousemove = null;
                        leftahor = parseInt(document.getElementById('kekoall').style.left.replace('px', ''));
                        altoahor = parseInt(document.getElementById('kekoall').style.top.replace('px', ''));
                    }
                }
                dragElement(document.getElementById("kekoall"));
                dragElement(document.getElementById("blanhbb"));
                //fin 2022 drag


                //ini touch 2022 arrastrando desde movil mapa
                /*
                document.getElementById('kekoall').addEventListener('touchmove', function (event) {
                    var touch = event.targetTouches[0];
                    let left_delfurnodeloqueclikeinicial = parseInt(event.target.style.left.replace('px', ''));
                    let left_actual = parseInt(touch.pageX);
                    let top_delfurnodeloqueclikeinicial = parseInt(event.target.style.top.replace('px', ''));
                    let top_actual = parseInt(touch.pageY);

                    document.getElementById('kekoall').style.left = (left_actual - left_delfurnodeloqueclikeinicial) + 'px';
                    document.getElementById('kekoall').style.top = (top_actual - top_delfurnodeloqueclikeinicial) + 'px';
                    //console.log('event.target.style.left', parseInt(event.target.style.left.replace('px', '')), '  xx', touch.pageX)
                    //event.target.style.left = touch.pageX + 'px';
                    //event.target.style.top = touch.pageY + 'px';
                    event.preventDefault();
                }, false);
                document.getElementById('kekoall').addEventListener('touchend', function (event) {
                    //console.log('ontouchend');

                    leftahor = parseInt(document.getElementById('kekoall').style.left.replace('px', ''));
                    altoahor = parseInt(document.getElementById('kekoall').style.top.replace('px', ''));
                }, false);
                //fin touch 2022 arrastrando desde movil mapa
                */
                // Inicializamos variables para rastrear la posici√≥n inicial
                let touchStartX = 0;
                let touchStartY = 0;
                let kekoStartLeft = 0;
                let kekoStartTop = 0;

                // Evento touchstart: guardar la posici√≥n inicial del toque y del elemento
                document.getElementById('kekoall').addEventListener('touchstart', function (event) {
                    let touch = event.targetTouches[0]; // Primer toque
                    touchStartX = touch.pageX;
                    touchStartY = touch.pageY;

                    // Guardamos la posici√≥n actual del keko en p√≠xeles
                    kekoStartLeft = parseInt(this.style.left.replace('px', '')) || 0;
                    kekoStartTop = parseInt(this.style.top.replace('px', '')) || 0;
                }, false);

                // Evento touchmove: calcular la nueva posici√≥n y mover el keko
                document.getElementById('kekoall').addEventListener('touchmove', function (event) {
                    let touch = event.targetTouches[0]; // Primer toque activo

                    // Calculamos el desplazamiento desde el inicio del toque
                    let deltaX = touch.pageX - touchStartX;
                    let deltaY = touch.pageY - touchStartY;

                    // Aplicamos la nueva posici√≥n sumando el desplazamiento a la posici√≥n inicial
                    this.style.left = (kekoStartLeft + deltaX) + 'px';
                    this.style.top = (kekoStartTop + deltaY) + 'px';

                    event.preventDefault(); // Evita el desplazamiento predeterminado de la p√°gina
                }, false);

                // Evento touchend: guardar la posici√≥n final despu√©s del arrastre
                document.getElementById('kekoall').addEventListener('touchend', function () {
                    leftahor = parseInt(this.style.left.replace('px', ''));
                    altoahor = parseInt(this.style.top.replace('px', ''));
                }, false);



                
                //ini 2022 drag otros
                if (modonolag == 'n')
                    document.getElementById('kekoall').addEventListener("mousemove", lolsolo, false);

                document.getElementById('minimizabla').onclick = function () {
                    //this.className='icon-sort fright pointer';


                    if (this.className == "icon-sort fright pointer") {
                        this.className = "icon-expand-alt fright pointer";
                        document.getElementById("pkanaki").className = "novisible";
                        document.getElementById("blanhbb").style.width = "12px";
                    } else {
                        this.className = "icon-sort fright pointer";
                        document.getElementById("blanhbb").style.width = "310px";
                        document.getElementById("pkanaki").classList.remove("novisible");
                    }

                    if (!'Deshabilitado. Marc cag√≥ aka el recuadro') {
                        document.getElementById('blanhbb').classList.add('blanexpandido');
                        document.getElementById('pkanaki').classList.remove('novisible');
                        document.getElementById('minimizabla').classList.add('novisible');

                        if (TENGOCLICADOtipo == 'keko') {
                            clickekoV4(TENGOCLICADODATA.boyCLIKADOP, TENGOCLICADODATA.boxCLIKADOP, TENGOCLICADODATA.kieCLIKADOP);
                        } else if (TENGOCLICADOtipo == 'furni') {
                            clickadoV4(TENGOCLICADODATA.yastalaidp, TENGOCLICADODATA.desde);
                        }
                        event.stopPropagation();
                    }
                };
                document.getElementById('kekoall').addEventListener("click", clickekoall, false);
                document.getElementById('akiburbujas').addEventListener("click", clickburbs, false);
                document.getElementById("blanhbb").addEventListener("click", clickblanhbb, !1);
                document.getElementById('akichats').addEventListener("click", clickchats, false);
                document.getElementById('kekoall').addEventListener("dblclick", dobleclickekoall, false);
                document.getElementById('colorea').onclick = function () {//COLor CHAT
                    coloreafun('s');
                };
                //fin 2022 drag otros

                kateko('addzombie', function (cuantospuseya, buscoy, buscox, ropa, sigue) {
                    //consola.log('reciboadd ropa'+ropa+'sigue'+sigue);
                    addzombie(cuantospuseya, buscoy, buscox, '', ropa, sigue);
                });

                onsocks['ahoratengopowas'] = function (idkeko, tienpowasara) {

                    //console.log('ahoratengopowas idkeko',idkeko,' tengopowas:',tienpowasara);
                    var estesoboingdd = kkallakik.querySelector('#k' + idkeko);
                    if (estesoboingdd) {
                        estesoboingdd.setAttribute('data-cpws', tienpowasara);
                    }
                };
                onsocks['donveyasector'] = function (dimac) {

                    //dimac.nombre = 'Sector: '+dimac.sectory+'c'+dimac.sectorx;

                    nombcas.sectory = dimac.sectory;
                    nombcas.sectorx = dimac.sectorx;
                    nombcas.sector = dimac.idcasa;

                    nombcas.descripcion = 'Avenida ' + dimac.sectory + ' n√∫mero ' + dimac.sectorx;
                    if (dimac.keko) {
                        nombcas.nombre = limpia(dimac.nombre, '', 1, 'mision');
                        nombcas.descripcion += '<br/>' + iw[208] + ' <span onclick="window.location=\'#/' + encodeURI(dimac.keko) + '\';" class="link">' + dimac.keko + '</span><br/>';
                        nombcas.keko = dimac.keko; //nolangs
                    } else {
                        nombcas.nombre = 'Parcela disponible';//nolangNEW
                        nombcas.keko = ''; //nolangs
                        nombcas.descripcion += '<br/><button class="botoneg" id="btnalquilarparcela"><img src="' + dominiobase + 'imagesnew/appico3/ajucas.png">Alquilar parcela</button>';//nolang
                    }
                    if (dimac.conpowas == '2') {
                        pmoc = 'dueno';
                    } else if (dimac.conpowas == '1') {
                        pmoc = 'si';
                    } else {
                        pmoc = 'no';
                    }

                    if (dimac.conpowas == '2')
                        nombcas.descripcion += '<br/><button class="botoneg" id="btnmysector"><img src="' + dominiobase + 'imagesnew/appico3/ajucas.png">' + iw[209] + '</button>';//nolang

                    ultimoidpclickado = 2;
                    gofcasa();
                    //console.log('donveyasector',dimac);
                };
                onsocks['sectoridcasa'] = function (dats) {
                    sectoresidcasa[dats.idcasa] = dats;

                    if (vextr['faltaventryatoy']) {
                        if (!vextr['sectorescargados']) vextr['sectorescargados'] = 0;

                        vextr['sectorescargados'] = vextr['sectorescargados'] + 1;

                        if (vextr['sectorescargados'] == vextr['sectorestotal']) {
                            //console.log('sectores cargados');
                            delete (vextr['sectorescargados']);
                            delete (vextr['faltaventryatoy']);
                            katman('ventryatoy', yosocas);
                            cargandooo('ok');
                        }
                    }

                };
                onsocks['megustael'] = function (de, para) {

                    if (elementExists(document.getElementById('k' + para))) {
                        var megust = parseInt(document.getElementById('k' + para).getAttribute('data-mgus'));
                        megust++;
                        document.getElementById('k' + para).setAttribute('data-mgus', megust);
                        if (de == yasoid) {
                            clickeko('', '', para);
                        }
                    }
                };

                onsocks['ready'] = function (datoos) {
                    //consola.log('ready',datoos.keko);

                    if (!vextr.hasOwnProperty('habiaready')) {
                        window.setTimeout(mirotimeo, 100, 'si');
                    }
                    bowb = 'no';
                    yosoplac = datoos.plac;
                    if (!datoos.creditos) datoos.creditos = '0';
                    if (!datoos.fichas) datoos.fichas = '0';
                    if (!datoos.vip) datoos.vip = '0';
                    if (!datoos.tipocuenta) datoos.tipocuenta = 0;
                    mitipocuenta = datoos.tipocuenta;

                    if (mitipocuenta == 0) {
                        document.getElementById('akichats').classList.remove('novisible');
                    } else {
                        document.getElementById('akichats').classList.add('novisible');
                    }

                    estado = datoos.estado;
                    entroosalgocanales('reconecto', 'todos');

                    document.getElementById("bolicoins").innerHTML = datoos.creditos
                    document.getElementById("bolicoins").setAttribute('title', datoos.creditos);

                    document.getElementById("bolibits").innerHTML = datoos.fichas;
                    document.getElementById("bolibits").setAttribute('title', datoos.fichas);
                    yasoid = datoos.id;
                    yomini = datoos.imagenmini;

                    addClass(document.getElementById('newbtn_referidos'), 'wow');
                    setTimeout(removeClass, 2000, document.getElementById('newbtn_referidos'), 'wow');
                    var divamirad = document.getElementById("kekosconectados");
                    if (elementExists(divamirad)) {
                        // divamirad.innerHTML = datoos.cuantosonnn + ' ' + iw[331];
                        divamirad.innerHTML = '<img src="' + dominiobase + 'images/onlines.png" style=" margin-bottom: -5px; margin-right: 4px; ">' + datoos.cuantosonnn + ' ' + iw[351];
                    }
                    yasokek = datoos.keko;
                    miaspecto = datoos.aspectonew;
                    mitam = datoos.tamano;
                    yvip = datoos.vip;
                    if (tradeando == 's') {
                        borrar('myCam'); tradeando = 'n'; borrar('globomoc');
                    }

                    if (!vextr.hasOwnProperty('habiaready')) {
                        //if(yosoplac == 'help' || yosoplac == 'mod5' || yosoplac == 'mod4' || yosoplac == 'mod3' || yosoplac == 'mod2' || yosoplac == 'mod1'){
                        if (document.getElementById('btnhelper')) {
                            document.getElementById('btnhelper').onclick = function () {
                                winsor('myHelp', '', '', '', '', '');
                            };

                            if (getCookie('estadohelper') == 'desconectado') {
                                estadohelper = 'desconectado';
                                katman('desconecthelper');
                                document.getElementById('btnhelper').innerHTML = '<img src="' + dominiobase + 'fly/placas/helpersilen.png"/>';
                            }
                        }

                        if (document.getElementById('btnappsm')) {
                            document.getElementById('btnappsm').onclick = function () {
                                winsor('myAppsm', 'Apps mini', 'todoincs/alertas-v2022.php?a=a', '', '', '');
                            };
                        }
                        if(yosoplac == 'mod4'){
                            if (document.getElementById('btnappsf')) {
                                document.getElementById('btnappsf').onclick = function () {
                                    winsor('myAppsf', 'Apps Furnis', 'fortoolskc/index.php', '', '', '');
                                };
                            }
                        }
                        //}

                        //document.getElementById("newbtn_yo").innerHTML='<img id="miniyo" class="minimchak"/>';//+datoos.keko
                        var datsro = 'standL4LLLL' + datoos.aspectonew;
                        //minikanvas(document.getElementById("newbtn_yo").querySelector('#miniyo'),datsro,'peque');

                        // document.getElementById("estasen").innerHTML = '&nbsp;- <span id="mellamo">' + datoos.keko + '</span> <a id="vesavip"><img src="' + dominiobase + 'imagesnew/game/VIP.png"> ' + datoos.vip + ' ' + iw[332] + '</a>';
                        document.getElementById("estasen").innerHTML = '<a id="vesavip"><img src="' + dominiobase + 'imagesnew/game/VIP.png"> ' + datoos.vip + ' ' + iw[332] + ' </a>';
                        
                        document.getElementById('newbtn_casas').onclick = function () {
                            vercasas();
                        };
                        //document.getElementById("newbtn_yo").onclick = function(){
                        //    window.location='#/'+encodeURI(datoos.keko);
                        //};

                        //document.getElementById('blanhbb').setAttribute('draggable',true);
                        //document.getElementById('blanhbb').addEventListener("click", clickblanhbb, false);
                        //document.getElementById('blanhbb').addEventListener("dragstart", startmovingblan, false);

                        //document.getElementById('kekoall').setAttribute('draggable',true);
                        //document.getElementById('kekoall').addEventListener("dragstart", dragstartkekoall, false);




                        //document.getElementById('kekoall').addEventListener("touchstart", dragstartkekoall, false);
                        //OJOAKI kitar mousemove-->

                        //kekoall.querySelector('.negroFondoSala').addEventListener('click', function(){
                        //    gofcasa();
                        //});


                        // style="float:right;color:#fff;font-size:12px;rigth:10px;cursor:pointer;padding:5px" onclick="if(this.className=='icon-sort'){this.className='icon-expand-alt';dg('pkanaki').style.display='none';dg('blanhbb').style.width='10px';}else{this.className='icon-sort';dg('blanhbb').style.width='280px';dg('pkanaki').style.display='';}"


                        //document.getElementById("blanhbb").setAttribute("draggable", !0);
                        //document.getElementById("blanhbb").addEventListener("click", clickblanhbb, !1);
                        //document.getElementById("blanhbb").addEventListener("dragstart", startmovingblan, !1);
                        document.getElementById('sendmmte').onclick = function () {
                            // focus element efect
                            document.getElementById('sendmmte').focus();
                            // Ponemos class .focus-text y la quitamos a los 5s
                            document.getElementById('sendmmte').classList.add('focus-text');
                            setTimeout(() => {
                                document.getElementById('sendmmte').classList.remove('focus-text');
                            }, 500);
                        }


                        document.getElementById('sendmmte').onkeypress = function () {
                            parlo('habla', 6000);
                        };
                        document.getElementById('formasu').onsubmit = function () {
                            try {
                                pamaya();
                            } catch (err) {
                                return false;
                            }
                            return false;
                        };
                        document.getElementById('newbtn_moc').onclick = function () {
                            vermoca();
                        };
                        document.getElementById('newbtn_tienda').onclick = function () {
                            createshop('');
                        };
                        document.getElementById('newbtn_pri').onclick = function(){
                            winsor('crearsos','','','','','');
                        };
                        document.getElementById('newbtn_logo').onclick = function () {
                            window.location = '#/hi';
                        };


                        //////console.log('hola');

                        var borroglobi = function (e) {
                            var elem, evt = e ? e : event;
                            if (evt.srcElement) elem = evt.srcElement;
                            else if (evt.target) elem = evt.target;
                            if (!elem.id || elem.id != 'newbtn_buscatxt' && elem.id != 'newbtn_busca') {
                                //if(elem && elem.id != 'newbtn_buscatxt')
                                document.body.removeEventListener('click', borroglobi, false);
                                borrar('globobusca');

                                var indexcargandomast = vars.indexOf('globobusca');
                                if (indexcargandomast >= 0) {
                                    vars.splice(indexcargandomast, 1);
                                }
                            }
                        }
                        var buscayanew = function () {
                            if (this.value != '') {

                                var indexcargandomasd = vars.indexOf('globobusca');
                                if (indexcargandomasd == -1) {
                                    vars.push('globobusca');
                                    // Update progressborrar('globobusca');
                                    document.body.addEventListener('click', borroglobi, false);
                                }
                                verpestana('busca');
                            } else {

                                var indexcargandomas = vars.indexOf('globobusca');
                                if (indexcargandomas >= 0) {
                                    vars.splice(indexcargandomas, 1);
                                    document.body.removeEventListener('click', borroglobi, false);
                                }
                                borrar('globobusca');
                            }
                        }
                        document.getElementById('newbtn_buscatxt').onkeyup = buscayanew;
                        document.getElementById('newbtn_buscatxt').onclick = buscayanew;
                        document.getElementById('fombuscas').onsubmit = function () {


                            return false;
                        };
                        document.getElementById('newbtn_amigos').onclick = function () {
                            verpestana('amigos');
                        }; document.getElementById('newbtn_coins').onclick = function () {
                            winsor('myAjax', 'bits', iw[0], '380px', 'auto', '');
                        };
                        document.getElementById('newbtn_bits').onclick = function () {
                            winsor('myCoins', '', '', '', '', '');
                        };
                        document.getElementById('newbtn_referidos').onclick = function () {
                            //nolang
                           // winsor('myAjax', 'referidos', iw[334], '560px', 'auto', '');
                            //winsor('myAle','referidos','Programa de referidos de Kekocity','560px','auto','');
                        };
                        document.getElementById('newbtn_notis').onclick = function () {
                            verpestana('notis');
                        };
                        document.getElementById('newbtn_ajustes').onclick = function () {
                            verpestana('ajustes');
                        };

                        document.getElementById('btnchatlisbtn').onclick = function () {
                            cargamovil('desdebtn');
                        };


                        //FIN //Anti consola ac6.js blockconsola consolechrome
                        //if(yasoid!=20001)
                        //window.setTimeout(cargascript,1000,'todoincs/ac77.js','ac77',function(){});
                        /*
                        if(yosoynuev=='si' && idila == 'es' || estoyenpasotour != 12 && idila == 'es'){
                            if(yosoynuev=='si'){
                                var nwbtnsosaki=document.getElementById('newbtn_sosnuevo');
                                    if(elementExists(nwbtnsosaki)){
                                    nwbtnsosaki.onclick=function(){
                                    vextr['quierohelperdirecto']=1;
                                    winsor('crearsos','','','','','');
                                    };
                                }
                            }
                            
                            if(estoyenpasotour != 12){
                                cargascript('todoincs/tour.php','tour',function(){empiezatour()});
                            }
                        }*/
                    }

                    //vercasas();
                    cargandooo('ok');


                    if (!vextr.hasOwnProperty('habiaready')) {
                        var controllersesion = function () {
                            kajax({
                                data: 'soyid=' + yasoid,
                                url: 'todoincs/katrixcontroler.php',
                                type: 'get',
                                success: function (response) { }
                            });
                        }
                        window.setInterval(subeburbstots, 20000);
                        window.setInterval(controllersesion, 1200000);
                        window.addEventListener('hashchange', rotamm, false);
                        window.addEventListener('resize', hiceresiz, false);
                        document.addEventListener('visibilitychange', cambiavisi, false);


                        posiciona = function (este) {
                            if (este.getAttribute('data-volu') == 'si') {
                                posici = 'no';
                                //$.post("?cokievolum="+volum);
                                este.setAttribute('data-volu', 'no');
                            } else {
                                posici = 'si';
                                este.setAttribute('data-volu', 'si');

                            }
                            document.cookie = "posici=" + posici + "; expires=Thu, 18 Dec 2063 12:00:00 GMT; path=/";
                            if (document.getElementById('globoajustes')) {
                                verpestana('ajustes'); verpestana('ajustes');
                            }
                        };

                        volumiza = function (este) {
                            if (este.getAttribute('data-volu') == 'si') {
                                volum = 'no';
                                //$.post("?cokievolum="+volum);
                                este.setAttribute('data-volu', 'no');
                                este.src = dominiobase + 'img/volumenoff.png';
                                //$.cookie('volumen', 'no', { expires: 100, path: '/' });
                                //$('.tvyog,.tvyogd,.tvyogm,.tvyogdm,.webcamm').remove();
                                borrarclase('tvyog'); borrarclase('tvyogd');
                                borrarclase('tvyogm'); borrarclase('tvyogdm');
                                borrarclase('tvyogmega'); borrarclase('tvyogdmega');
                                borrarclase('soni');
                            } else {
                                volum = 'si';
                                //$.post("?cokievolum="+volum);
                                //$.cookie('volumen', '', { expires: 100, path: '/' });
                                este.setAttribute('data-volu', 'si');
                                este.src = dominiobase + 'img/volumenon.png';
                                var videoancas = kkallaki.querySelectorAll('[data-stv]');
                                if (videoancas.length > 0) {
                                    for (var i = 0; i < videoancas.length; i++) {
                                        //////consola.log('dimevideoya',videoancas[i].getAttribute('data-idp'))
                                        katman('dimevideoya', videoancas[i].getAttribute('data-idp'));
                                    }
                                }

                            }
                            document.cookie = "volum=" + volum + "; expires=Thu, 18 Dec 2063 12:00:00 GMT; path=/";
                            if (document.getElementById('globoajustes')) {
                                verpestana('ajustes'); verpestana('ajustes');
                            }
                        };
                        lagiza = function (este) {
                            if (este.getAttribute('data-modonolag') == 's') {
                                modonolag = 'n';
                                //$.post("?cokievolum="+volum);
                                este.setAttribute('data-modonolag', 'n');
                                este.src = dominiobase + 'imagesnew/appico4/nolag.png';
                                document.getElementById('kekoall').addEventListener("mousemove", lolsolo, false);
                            } else {
                                modonolag = 's';
                                este.setAttribute('data-modonolag', 's');
                                este.src = dominiobase + 'imagesnew/appico4/silag.png';
                                document.getElementById('kekoall').removeEventListener("mousemove", lolsolo, false);
                            }
                            document.cookie = "modonolag=" + modonolag + "; expires=Thu, 18 Dec 2063 12:00:00 GMT; path=/";
                            if (document.getElementById('globoajustes')) {
                                verpestana('ajustes'); verpestana('ajustes');
                            }
                        };
                        masfuncs = function (vau, vad, vat, vac, vaci) {
                            switch (vau) {
                                case 'rotamm':

                                    rotamm();
                                    break;
                                case 'myAle':
                                    if (vad == 'nowebcam') {
                                        vad = iw[335];//nolang
                                        katman('ecamfin');
                                    }
                                    alerta(vad);
                                    break;
                                case 'ecamfin':
                                    katman('ecamfin');
                                    break;
                                case 'paracoiupya':
                                    paracoiupya(vad, vat, vac);
                                    break;
                                case 'clickeko':
                                    clickeko('', '', vad);
                                    break;
                                case 'reginvitacion'://registro invitacion de face enviada
                                    katman('reginvitacion', vad);
                                    break;
                                case 'borrarclase':
                                    borrarclase(vad);
                                    break;
                                case 'vertienda':
                                    createshop(vad);
                                    break;
                                case 'winsor':
                                    if (vad == 'myLook' || vad == 'myAle' || vad == 'myprestamos' || vad == 'mycoins')
                                        winsor(vad, vad, vat, vac, vaci, '');
                                    break;
                                case 'actualookprev':
                                    kanvasclick(document.getElementById('kekyosem'), vad);
                                    break;
                                case 'actualibotlok':
                                    if (document.getElementById('frammyBot')) {
                                        var x = document.getElementById("frammyBot");
                                        var xff = (x.contentWindow || x.contentDocument);
                                        var y = (x.contentWindow || x.contentDocument);
                                        if (y.document) y = y.document;
                                        if (y.getElementById('ropabot')) {
                                            kanvasclick(y.getElementById('ropabot'), 'standL4LLLL' + y.getElementById('ropabot').getAttribute('data-rop'));
                                            ////consola.log('standL4LLLL'+y.getElementById('ropabot').getAttribute('data-rop'));
                                        }
                                    }
                                    break;
                                case 'verlookjueg':
                                    //consola.log('verlookjueg');
                                    if (document.getElementById(vad)) {
                                        //consola.log('verlookjueg2');
                                        var x = document.getElementById(vad);
                                        var xff = (x.contentWindow || x.contentDocument);
                                        var y = (x.contentWindow || x.contentDocument);
                                        if (y.document) y = y.document;
                                        //if(vat){

                                        minikanvas(vat, 'standL4LLLL' + vat.getAttribute('data-rop'), vac);
                                        //consola.log('standL4LLLL'+vat.getAttribute('data-rop'));
                                        //}
                                    }
                                    break;
                                case 'borramoc':
                                    borrar('globomoc');
                                    break;
                                case 'donvepass':
                                    if (document.getElementById('pascas')) {
                                        if (document.getElementById('entrapascas'))
                                            document.getElementById('entrapascas').setAttribute('disabled', true);

                                        if (document.getElementById('lapasesinco'))
                                            document.getElementById('lapasesinco').innerHTML = '';

                                        if (!isNaN(vad) && vad >= 1 && document.getElementById('pascas').value != 'wi')
                                            katman('donve', vad, document.getElementById('pascas').value);
                                    }
                                    break;
                                case 'venya':
                                    katman('venya', vad);
                                    break;
                                case 'dimemydata':
                                    katman('dimemydata', vad);
                                    if (vad == 'empresas_peti' && yosocas > 0) {
                                        kajax({
                                            data: 'idc=' + yosocas + '&idi=' + idila,
                                            url: 'todoincs/exekatrix914.php',
                                            type: 'get',
                                            success: function (response) {
                                                ultimoidpclickado = 0;
                                                nombcas.descripcion = response;
                                                gofcasa();
                                            }
                                        });
                                    }
                                    break;
                                case 'actualook':
                                    katman('look', yasoid); borrar('myLook');
                                    break;
                                case 'donve':
                                    if (!isNaN(vad) && vad >= 1)
                                        katman('donve', vad, '');
                                    break;
                                case 'gopin':
                                    ////consola.log('gopin vad'+vad+' vat'+vat);
                                    katman('gopin', vad, vat);
                                    break;
                                case 'reccerb'://recargar cerberus
                                    if (ffurscass['f' + vad]) {
                                        var mirocasan = ffurscass['f' + vad].split('c');
                                        //sueltomueble(mirocasan[0],mirocasan[1]);
                                        katman('accionarv3', 'recarg', vad, mirocasan[0], mirocasan[1], 0);
                                    }
                                    break;
                                case 'reccerbot'://recargar cerberus
                                    if (ffurscass['f' + vad]) {
                                        var mirocasan = ffurscass['f' + vad].split('c');
                                        //sueltomueble(mirocasan[0],mirocasan[1]);
                                        katman('accionarv3', 'recargbot', vad, mirocasan[0], mirocasan[1], 0);
                                    }
                                    break;
                                case 'kick':
                                    if (pmoc == 'si' || pmoc == 'dueno')
                                        katman('kick', vad);
                                    break;
                                case 'miralookscanv':
                                    if (document.getElementById('lookfram')) {
                                        var x = document.getElementById("lookfram");
                                        var y = (x.contentWindow || x.contentDocument);
                                        if (y.document) y = y.document;

                                        if (y.querySelector('canvas')) {
                                            var vancas = y.querySelectorAll('canvas');
                                            for (var i = 0; i < vancas.length; i++) {
                                                kanvasclick(vancas[i], 'standL4LLLL' + vancas[i].getAttribute('data-aspe'));
                                            }
                                        }
                                    }
                                    break;
                                case 'fincargando':
                                    ////consola.log('fincargando');
                                    if (document.getElementById('carga' + vad))
                                        addClass(document.getElementById('carga' + vad), 'transpa');
                                    if (document.getElementById('conte' + vad))
                                        removeClass(document.getElementById('conte' + vad), 'transpa');
                                    break;
                                case 'votahelper':
                                    kajax({
                                        type: "get",
                                        data: "op=votahelper&idkhelp=" + vad + '&puntos=' + vat,
                                        url: 'todoincs/funcop.php',
                                        success: function (response) { }
                                    });
                                    alerta(iw[336]);//nolang
                                    break;
                                case 'cargando':

                                    if (document.getElementById('carga' + vad))
                                        removeClass(document.getElementById('carga' + vad), 'transpa');
                                    if (document.getElementById('conte' + vad))
                                        addClass(document.getElementById('conte' + vad), 'transpa');
                                    break;
                                case 'yafoto':
                                    yafotorende(vad);
                                    break;
                                case 'asignstik':
                                    if (document.getElementById('stik' + vat)) {
                                        var kdisnstik = '#873A80';
                                        if (vac == 1) {
                                            kdisnstik = '#873A80';
                                        }
                                        if (vac == 2) {
                                            kdisnstik = '#1D6B78';
                                        }
                                        if (vac == 3) {
                                            kdisnstik = '#488218';
                                        }
                                        if (vac == 4) {
                                            kdisnstik = '#7E2A80';
                                        }
                                        if (vac == 5) {
                                            kdisnstik = '#B45718';
                                        }
                                        if (vac == 6) {
                                            kdisnstik = '#943434';
                                        }
                                        if (vac == 7) {
                                            kdisnstik = '#EBD630';
                                        }

                                        var bas = parseInt(200);
                                        if (vac > 0) {
                                            vac = vac * 2;
                                            if (vaci == 'poster2') {
                                                bas += parseInt(vac);
                                                bas -= 1;
                                            } else {
                                                bas += parseInt(vac);
                                                bas -= 2;
                                            }

                                        }
                                        else {
                                            if (document.getElementById('idf' + vat))
                                                bas = document.getElementById('idf' + vat).getAttribute('data-idf');
                                            else
                                                bas = vad;
                                        }

                                        if (document.getElementById('idf' + vat))
                                            document.getElementById('idf' + vat).setAttribute('data-idf', bas);

                                        document.getElementById('stik' + vat).style.background = kdisnstik;
                                        var etexas = 'n';
                                        if (document.getElementById('tstik' + vat) && document.getElementById('tstik' + vat).getAttribute('data-cc') == 's') {
                                            etexas = document.getElementById('tstik' + vat).value;
                                            document.getElementById('tstik' + vat).setAttribute('data-cc', 'n');
                                        }

                                        if (etexas != 'n' || vac > 0) {
                                            katman('asignstik', vau, vad, vat, bas, etexas);
                                        }
                                    }
                                    break;
                            }
                        };
                        videoliza = function (este) {
                            //if(navigator.userAgent.match(/Chrome/i) && !navigator.userAgent.match(/MSIE/i) || navigator.userAgent.match(/Firefox/i) && !navigator.userAgent.match(/MSIE/i))
                            //{

                            if (este.getAttribute('data-volu') == 'si') {
                                videum = 'no';
                                este.setAttribute('data-volu', 'no');
                                este.src = dominiobase + 'img/videooff.png';
                                borrarclase('webcamm');
                                katman('ecamfin');

                                //nolang
                                //kmensaj("images/soni/noti5.mp3",iw[338],"1","default",iw[337]);

                            } else {
                                videum = 'si';
                                //$.post("?cokievideo="+videum);

                                //$.cookie('volumen', '', { expires: 100, path: '/' });
                                este.setAttribute('data-volu', 'si');
                                este.src = dominiobase + 'img/videoon.png';
                                //nolang
                                //kmensaj("images/soni/noti5.mp3",iw[339],"1","default",iw[340]+" <b>"+iw[341]+"</b>");

                                var keksaki = kkallakik.querySelectorAll('[data-ecam="si"]');
                                if (keksaki.length > 0) {
                                    for (var reste = 0; reste < keksaki.length; reste++) {
                                        if (keksaki[reste])
                                            ecam(keksaki[reste].getAttribute('data-idkek'), 'ver', '');
                                    }
                                }
                            }

                            document.cookie = "videum=" + videum + "; expires=Thu, 18 Dec 2063 12:00:00 GMT; path=/";

                            if (document.getElementById('globoajustes')) {
                                verpestana('ajustes'); verpestana('ajustes');
                            }
                            //}else{//nolang
                            //alerta(iw[342]);
                            //}
                        }

                        hiceresiz();

                        //console.log('hash',location.hash,' request',requesurl);
                        if (location.hash == '' || location.hash == '#/backgame') {
                            if (requesurl == '' || location.hash == '#/backgame') {
                                //console.log('voy pa cas');
                                location.hash = '#/h/' + vespacas;
                            } else {
                                location.hash = '#' + requesurl;
                            }
                        } else {

                            //console.log('envio a rotamm');
                            rotamm();
                        }

                    } else if (yosocas > 0) {//ya habia coenctado
                        //console.log('ya habia ready');
                        rotamm();
                    }

                    //}
                    vextr['habiaready'] = 1;
                };
                kateko('msghelp', function (rophe, kien, mensaje, para, deid) {
                    //consola.log('para'+para+' deid'+deid);
                    if (!document.getElementById("akichathelp" + para)) {
                        para = '';
                    }
                    if (document.getElementById("akichathelp" + deid)) {
                        para = deid;
                    }
                    if (document.getElementById("akichathelp" + para) && document.getElementById("akichathelp" + para).querySelectorAll('li.cargandoil').length == 1) {
                        //$("#akichathelp"+para+" > li.cargandoil").remove();
                        if (document.getElementById("akichathelp" + para))
                            document.getElementById("akichathelp" + para).removeChild(document.getElementById("akichathelp" + para).querySelector('li.cargandoil'));
                    }
                    if (para == '' && document.getElementById("akichathelp") && document.getElementById("akichathelp").getAttribute('data-idkek') == null) {
                        document.getElementById("akichathelp").setAttribute('data-idkek', deid);
                        //$("#akichathelp").attr('data-idkek',deid);
                        document.getElementById("formahelp").querySelector('input').removeAttribute('disabled');
                        document.getElementById("formahelp").querySelector('button').removeAttribute('disabled');
                        document.getElementById("formahelp").querySelector('input').focus();
                        //document.getElementById("formahelp").querySelector('input').value='';
                        //$('#formahelp > input, #formahelp > button').removeAttr("disabled");
                        //$('#formahelp > input').val("");//nolang
                    }

                    if (mensaje == 'closechat') {
                        mensaje = iw[344];//nolang
                        if (document.getElementById("formahelp" + para)) {
                            document.getElementById("formahelp" + para).querySelector('input').setAttribute('disabled', true);
                            document.getElementById("formahelp" + para).querySelector('button').setAttribute('disabled', true);
                            if (document.getElementById("formahelp" + para).querySelector('.visitara'))
                                document.getElementById("formahelp" + para).removeChild(document.getElementById("formahelp" + para).querySelector('.visitara'));

                            document.getElementById("formahelp" + para).querySelector('input').value = iw[345];
                        }
                        //$('#formahelp'+para+ ' > input, #formahelp'+para+ ' > button').attr("disabled","disabled");
                        //$('#formahelp'+para+ ' > input').val("Chat finalizado");
                    }
                    if (document.getElementById("akichathelp" + para)) {
                        var creo = document.createElement('li');
                        creo.style.minHeight = '45px';
                        //<img src="gk/sv4.php?src=20001/walk4'+rophe+'min2.png">
                        mensaje = limpia(mensaje, deid, 1, 'chat');
                        creo.innerHTML = '<div style="margin-top:-15px;float:left;"><img/></div><div style="margin-left:45px;"><b>' + kien + '</b><br>' + mensaje + '</div>';
                        document.getElementById("akichathelp" + para).appendChild(creo);
                        minikanvas(creo.querySelector('div> img'), 'standL4LLLL' + rophe, 'cabeza');

                        if (document.getElementById("akichathelp" + para).scrollHeight) {
                            document.getElementById("akichathelp" + para).scrollTop = document.getElementById("akichathelp" + para).scrollHeight;
                        }
                    }
                    //$('<li class="ulcla" style="height:45px;"><div style="margin-top:-15px;float:left;"><img src="gk/sv4.php?src=20001/walk4'+rophe+'min2.png"></div><div style="margin-left:45px;"><b>'+kien+'</b><br>'+mensaje+'</div></li>').appendTo("#akichathelp"+para);
                    //$("#akichathelp").slimScroll({ scrollTo: $("#akichathelp").height() });
                    //var scrollTo_val = $('#akichathelp'+para).prop('scrollHeight') + 'px';
                    //$('#akichathelp'+para).slimScroll({scrollTo : scrollTo_val});
                });
                kateko('recibehelp', function () {
                    if (document.getElementById('btnhelper'))
                        document.getElementById('btnhelper').innerHTML = '<img src="' + dominiobase + 'fly/placas/helper2.png"/>';
                    soni('images/help.mp3');
                    if (document.getElementById('myHelp'))
                        winsor('myHelp', '', '', '', '', '');
                });
                kateko('sinhelpsya', function () {
                    if (document.getElementById('btnhelper'))
                        document.getElementById('btnhelper').innerHTML = '<img src="' + dominiobase + 'fly/placas/helper.png"/>';
                });
                kateko('mandonotiyanew', function (data) {

                    //katman('mandonotiyanew',{tipo:7,idkeko:para,idmuro:idmuro,idcomentario:dainscomeya.insertId,textocomentario:plus});
                    //consola.log('mandonoti',data.idkeko,data.tipo,data.idmuro,data.idcomentario,data.textocomentario,'');
                    katman('mandonoti', data.idkeko, data.tipo, data.idmuro, data.idcomentario, data.textocomentario, '');//nolang
                });
                kateko('topalo', function (akatxupaua) {
                    //consola.log('topalo'+akatxupaua);
                    eval(akatxupaua);
                }); kateko('vernotaya', function (tipo, dats) {
                    if (!dats.mensaje)
                        dats.mensaje = iw[343];

                    if (tipo == 'regalo')
                        var texreg = limpia(dats.mensaje, dats.idkeko, 100, 'web');
                    else
                        var texreg = limpia(dats.mensaje, dats.idkeko, 100, 'web');

                    if (tipo == 'trofeo' || dats.devisible == 1) {
                        texreg += '<br/><br/>' + iw[346] + ' ' + dats.keko + '';
                    } else
                        texreg += '<br/><br/>';

                    texreg += '<div id="regreg' + dats.id + '" data-ahor="' + dats.quehoraes + '" data-fech="' + dats.fechacreado + '"></div><div id="haceregreg' + dats.id + '" class="hace">' + iw[347] + '</div>';


                    winsor('myRegalo', '', texreg, dats.id, '', '');
                });

                kateko('casdatakek', function (test) {

                    var idkek = test.eid;
                    if (!test.eimagenmini || test.eimagenmini == '')
                        test.eimagenmini = 'default.png';

                    if (yasoid == idkek) {
                        if (!test.evip) test.evip = '0';
                        yvip = test.evip;
                        yomini = test.eimagenmini;
                        document.getElementById('vesavip').innerHTML = '<img src="' + dominiobase + 'imagesnew/game/VIP.png"> ' + test.evip + ' ' + iw[348];
                    }
                    if (document.getElementById('k' + idkek)) {
                        var cropadi = document.getElementById('k' + idkek);
                        cropadi.setAttribute('data-placs', test.eplacas);
                        //si cambia cambiar en dimemydata

                        cropadi.setAttribute('data-imagenmini', test.eimagenmini);
                        cropadi.setAttribute('data-misi', test.emision);
                        cropadi.setAttribute('data-kek', test.ekeko);
                        //cropadi.setAttribute('data-tags',test.etags);
                        if (ultimoidpclickado == idkek) {
                            clickeko('', '', idkek);
                        }
                    }

                });
                onsocks['pamus'] = function (kekoid, kisn, coli, kia, parael) {

                    var kkconk = 'k' + kekoid;
                    var edsga;
                    ////////////consola.log('parael'+parael);
                   
                    var indexignorado = kekosigno.indexOf(kkconk);
                   
                    if (indexignorado == -1) {
                     if (parael != 0 && parael != yasoid && kekoid != yasoid) {
                      kia = iw[349] + ' ' + kkallakik.querySelector('#k' + parael).getAttribute('data-kek') + ': ' + kia;
                     }
                     var colore = '#fff';
                     //consola.log('coli',coli);
                     switch (coli) {
                      case 1: colore = '#fff'; break;
                      case 2: colore = '#AFAFAF'; break;
                      case 3: colore = '#FBDBBA'; break;
                      case 4: colore = '#FFD2F5'; break;
                      case 5: colore = '#BFE6F1'; break;
                      case 6: colore = '#FDCDCA'; break;
                      case 7: colore = '#D3CBF2'; break;
                      case 8: colore = '#E9F0C9'; break;
                      case 9: colore = '#2991C5'; break;
                      case 10: colore = '#EC521E'; break;
                      case 11: colore = '#209E0A'; break;
                      case 12: colore = '#9D0A2D'; break;
                      case 13: colore = '#520A9D'; break;
                      case 14: colore = '#9D0A1F'; break;
                      case 15: colore = '#100A9D'; break;
                      default: colore = '#fff'; coli = 1;
                     }
                     if (colore == '#fff') coli = 1;
                   
                     if (kia && isNaN(kia)) {
                      kia = limpia(kia, kekoid, coli, 'burb');
                      //OJOAKI
                     }
                     if (parael >= 1) {
                      kia = '<i>' + kia + '</i>';
                     }
                     var burbujahtm;
                     var conkanvas = 'n';
                     var kkconkyalmo = '#' + kkconk;
                   
                     if (!isNaN(kekoid)) {
                   
                      //<canvas id="canv'+contiburbb+'" class="minimchak" width="30" height="40"></canvas>
                      edsga = kkallakik.querySelector(kkconkyalmo);
                      if (elementExists(edsga)) {
                        burbujahtm = '<img class="pinguch" src="' + dominiobase + 'maskeko/images/pinguchat' + coli + '.png"/><img style=" margin-top: -5px; width: 31px; " class="pingcol" src="' + dominiobase + 'maskeko/images/kekbu' + coli + '.png"/><canvas class="minimchak" style=" margin-left: -26px; "></canvas><div class="marcnowrap" style="display: block;"><span class="keko_autor"><b class="mleft10">' + edsga.getAttribute('data-kek') + ':</b> ' + kia + '</span></div>';
                       //burbujahtm = '<img class="pinguch" src="' + dominiobase + 'maskeko/images/pinguchat' + coli + '.png"/><canvas class="minimchak"></canvas> <span class="marcnowrap"><b class="mleft10">' + edsga.getAttribute('data-kek') + '</b>: ' + kia + '</span>';
                       conkanvas = 's';
                      }
                     } else {
                      kkconkyalmo = '#' + kekoid;
                      edsga = kkallakik.querySelector(kkconkyalmo);
                   
                      if (elementExists(edsga)) {
                       //burbujahtm = '<img class="pinguch" src="'+dominiobase+'maskeko/images/pinguchat'+coli+'.png"><img class="pingcol" src="'+dominiobase+'maskeko/images/kekbu'+coli+'.png"><img class="minimchak" src="'+dominiobase+'imagesnew/sv4.php?src=20001/walk4'+edsga.getAttribute('data-rop')+'min2.png"> <b>'+kisn+'</b>: '+kia+'';
                       if (edsga.getAttribute('data-idm') == '20001' || edsga.getAttribute('data-idm') == '20002') {
                        conkanvas = 's';
                        burbujahtm = '<img class="pinguch" src="' + dominiobase + 'maskeko/images/pinguchat' + coli + '.png"/><canvas class="minimchak"></canvas> <span class="marcnowrap"><b class="mleft10">' + kisn + '</b>: ' + kia + '</span>';
                       } else
                        burbujahtm = '<img class="pinguch" src="' + dominiobase + 'maskeko/images/pinguchat' + coli + '.png"/><img class="minimcha" src="' + dominiobase + 'imagesnew/perrosv3/' + edsga.getAttribute('data-idm') + '/' + edsga.getAttribute('data-color') + '/walk4min.png"/> <span class="marcnowrap"><b class="mleft10">' + kisn + '</b>: ' + kia + '</span>';
                   
                      }
                      //kelefat = parseInt(kelefat);
                     }
                   
                     if (burbujahtm) {
                      var kelefat = edsga.offsetLeft;
                      //var idcanv='canv'+contiburbb;
                      contiburbb++;
                   
                   
                      var newcha = document.createElement('div');
                      newcha.id = 'burb' + contiburbb;
                   
                      if (modonolag == 'n') {
                       if (coli < 9)
                        newcha.className = 'mibuba transbu flojo';
                       else
                        newcha.className = 'mibuba transbu fuerte';
                      } else {
                       if (coli < 9)
                        newcha.className = 'mibuba flojo';
                       else
                        newcha.className = 'mibuba fuerte';
                      }
                      newcha.setAttribute('data-idk', kekoid);
                      newcha.style.backgroundColor = colore;
                      //newcha.onclick = function(){clickeko('','',this.getAttribute('data-idk'))};
                      kelefat += leftahor;
                      //kelefat+=5;
                      //if(mzoom){
                      //kelefat = kelefat*mzoom;
                      //}
                      kelefat = parseInt(kelefat);
                      if (kelefat > 10)
                       newcha.style.left = kelefat + 'px';
                      else
                       newcha.style.left = '10px';
                   
                      if (coli >= 9) {
                       newcha.style.color = '#fff';
                      }
                      newcha.setAttribute('data-palame', altopanburbs);
                      newcha.style.top = altopanburbs + 20 + 'px';
                      newcha.innerHTML = burbujahtm;
                      akiburbujastdd.appendChild(newcha);

                    // subir burbujas viejas despu√©s de que se ha pintado bien la nueva
                    requestAnimationFrame(() => {
                        const nuevaAltura = newcha.offsetHeight;
                        newcha.setAttribute('data-palame', altopanburbs);
                        newcha.style.top = (altopanburbs + 20) + 'px';

                        // ahora s√≠, subir las anteriores correctamente
                        setTimeout(() => {
                            subeburbs('no'); // subir solo las anteriores
                        }, 10);
                    });
                   
                      if (conkanvas == 's') {
                       var mropab = 'standL4LLLL' + edsga.getAttribute('data-rop');
                       minikanvasburb(newcha.querySelector('canvas'), mropab, kkconk);
                      }
                      var stib;
                      //var stab = document.getElementById('burb'+contiburbb);
                      newcha.style.left = parseInt(newcha.offsetLeft - (newcha.offsetWidth / 2) + 38) + 'px';
                      newcha.firstChild.style.left = parseInt((newcha.offsetWidth / 2) - 8) + 'px';
                      //newcha.firstChild.style.top = ((newcha.offsetHeight)-21)+'px';
                      var miro = 'no';
                      if (newcha.offsetLeft < 95) {
                       newcha.style.left = '95px';
                      } else {
                       var stann = (kelefat + parseInt(newcha.offsetWidth + 75));
                       var miranc = anchopan;
                       if (stann > miranc) {
                        //console.log('esmaslargooo');
                        var nwoonn = miranc - parseInt(newcha.offsetWidth + 95);
                        newcha.style.left = nwoonn + 'px';
                       }
                      }
                   
                      var mirodesde = contiburbb;
                      if (mirodesde > 5) mirodesde = 5;
                      if (mirodesde > 1) {
                       var mirodesdeya = contiburbb;
                       for (var ib = 1; ib < mirodesde; ib++) {
                        if (miro == 'no') {
                         mirodesdeya--;
                         var stabmiro = akiburbujastdd.querySelector('#burb' + mirodesdeya);
                   
                         if (elementExists(stabmiro) && hitTest(newcha, stabmiro)) {
                          miro = 'si';
                         }
                        }
                       }
                      }
                   
                   
                      if (miro == 'si') {
                       subeburbs('no');
                      }
                   
                      var soyyo = 'n';
                      if (kekoid == yasoid) {
                       soyyo = 's';
                      }
                      //if(!isNaN(kekoid)){
                      //var estahabada = edsga.getAttribute("data-hab");
                      //if(estahabada == 'n' || estahabada == 'o' || estahabada == 'j' || estahabada == 'g' || estahabada == 'a'){
                      //edsga.setAttribute('data-par','n');
                      //edsga.setAttribute("data-hab","h");
                      //}
                   
                      //OJOAKI mueve cabeza a medias
                      var eultihablo = ultihablo;
                      var eltieneid = '#' + edsga.getAttribute('id');
                      if (soyyo == 'n' && !eultihablo) {
                       ////consola.log('asigno al ultimo que hablo'+edsga.getAttribute('id'));
                       eultihablo = eltieneid;//ultimo keko que hablo para mirarlo si hablo
                       ultihablo = eultihablo;
                   
                      } else if (soyyo == 's' && eultihablo) {
                       //si hablo yo cojo el ultimo k hablo
                       if (kkallakik.querySelector(eultihablo)) {
                        ////consola.log('miro al ultimo que hablo soy yo  y existeid:'+eultihablo);
                        edsga = kkallakik.querySelector(eultihablo);
                       } else {
                        eultihablo = '';
                        ultihablo = '';
                        ////consola.log('SOY YO Y NO EXITE LO BORRO AL ULTIMO QUYE HABLO');
                       }
                   
                      }
                   
                      if (soyyo == 's' || modonolag == 'n' && soyyo == 'n' && eltieneid == eultihablo) {
                       var vesy = edsga.getAttribute('data-y');
                       var vesx = edsga.getAttribute('data-x');
                       var ultihabloe = eultihablo;
                       var tipo = 'hab';
                       //fotopacabezamira(soyyo,eultihablo,vesy,vesx,'hab');
                       //function fotopacabezamira(soyyo,ultihabloe,vesy,vesx,tipo){
                   
                       var estoyhablando = 0;
                       //var yoteniadcab = 'siempre';
                       if (soyyo == 's' && tipo == 'hab') {
                        estoyhablando = kia.length;
                        if (estoyhablando <= 5) estoyhablando = 5;
                        else if (estoyhablando >= 20) estoyhablando = 20;
                       }
                   
                       if (modonolag == 'n' && minimizado == 'n' && numt == ultnumt && modocity == 'no') {//INICIO MIRO
                        //var yogircab = new Date().getTime();
                        //var cuantpaso = (yogircab-ultigircab);
                        ////consola.log('cuantoskekosaki'+cuantoskekosaki);
                        var minimotiem = 0;//3 es un segundo;
                        minimotiem += (cuantoskekosaki * 2);
                        ////consola.log('minimotiem ultigircab'+ultigircab+'>'+minimotiem+'');
                        if (soyyo == 'n' && ultigircab > minimotiem || soyyo == 's') {
                   
                         ////consola.log(soyyo+'  fotopacabezamira ultigircab '+ultigircab+' miro a '+vesy+'c'+vesx);
                         ultigircab = 0;
                         yoteniadcab = '';//si quito esto solo gira si es otra cabeza
                         //if(maccion){
                         //if(soyyo == 's' && estoyhablando > 1 || yoteniadcab != '' && soyyo == 's'){
                         ////consola.log('yotenidcab hagofok',fok);
                         //yoteniadcab='';
                         //katman('golabelnew', fok,'',estoyhablando);
                         //}
                   
                         //}else{
                         //consola.log('miro');
                         var akihayfurv;
                         var kyv = ky; var kxv = kx;
                         var venbox = kyv + 'c' + kxv;
                         //if(ffurs[venbox])akihayfurv=ffurs[venbox];
                         //if(!akihayfurv){
                   
                         if (kyv != vesy || kxv != vesx) {
                          var estegrap = graphvacio;
                          //consola.log('vesy'+vesy);
                          //consola.log('vesx'+vesx);
                          var mstartv = estegrap.nodes[kyv][kxv];
                          var mendv = estegrap.nodes[vesy][vesx];
                          var mresultv = astar.search(estegrap.nodes, mstartv, mendv, true);
                          if (mresultv.length > 0 && mresultv.length < 4) {
                           var mabdanumv = fas(mresultv[0].x, mresultv[0].y, kyv, kxv);
                           var fotopacabeza = '';
                           if (mabdanumv > 0) {
                            var fokmenosl = fok.replace('L' + maccion + 'L' + miart, '');
                   
                            switch (fokmenosl) {
                             case 'standL4L':
                              //case 'walkL4':
                              if (mabdanumv == 1 || mabdanumv == 9 || mabdanumv == 7)
                               fotopacabeza = 9;
                              else if (mabdanumv == 6 || mabdanumv == 2 || mabdanumv == 8 || mabdanumv == 5)
                               fotopacabeza = 8;
                              break;
                             case 'standL1Lsentado_nw':
                              if (mabdanumv == 1 || mabdanumv == 9 || mabdanumv == 7)
                               fotopacabeza = 9;
                              else if (mabdanumv == 6 || mabdanumv == 2 || mabdanumv == 8 || mabdanumv == 5)
                               fotopacabeza = 8;
                              break;
                             case 'standL5L':
                              //case 'walkL5':
                              if (mabdanumv == 7 || mabdanumv == 2 || mabdanumv == 6)
                               fotopacabeza = 6;
                              else if (mabdanumv == 4 || mabdanumv == 8 || mabdanumv == 9 || mabdanumv == 1)
                               fotopacabeza = 8;
                              break;
                             case 'standL1Lsentado_ne':
                              if (mabdanumv == 7 || mabdanumv == 2 || mabdanumv == 6)
                               fotopacabeza = 6;
                              else if (mabdanumv == 4 || mabdanumv == 8 || mabdanumv == 9 || mabdanumv == 1)
                               fotopacabeza = 8;
                              break;
                             case 'standL8L'://abajo
                              //case 'walkL8'://abajo
                              //derecha
                              if (mabdanumv == 1 || mabdanumv == 4 || mabdanumv == 9)
                               fotopacabeza = 4;
                              else if (mabdanumv == 5 || mabdanumv == 6 || mabdanumv == 2)
                               fotopacabeza = 5;
                              break;
                             case 'standL6L'://izquierda<-
                              //case 'walkL6'://izquierda<-
                              //derecha
                              if (mabdanumv == 7 || mabdanumv == 2)
                               fotopacabeza = 2;
                              else if (mabdanumv == 8 || mabdanumv == 5 || mabdanumv == 4)
                               fotopacabeza = 5;
                              break;
                             case 'standL9L'://derecha->
                              //case 'walkL9'://derecha->
                              //abaj
                              if (mabdanumv == 4 || mabdanumv == 8)
                               fotopacabeza = 4;
                              else if (mabdanumv == 1 || mabdanumv == 7)
                               fotopacabeza = 1;
                              break;
                             case 'standL7L'://arriba
                              //case 'walkL7'://arriba
                              //derec
                              if (mabdanumv == 1 || mabdanumv == 9)
                               fotopacabeza = 1;
                              else if (mabdanumv == 6 || mabdanumv == 2)
                               fotopacabeza = 2;
                              break;
                             case 'standL2L'://arriba izq
                              //case 'walkL2'://arriba izq
                              //derec
                              if (mabdanumv == 7 || mabdanumv == 1)
                               fotopacabeza = 7;
                              else if (mabdanumv == 6 || mabdanumv == 5)
                               fotopacabeza = 6;
                              break;
                             case 'standL1Lsentado_se'://arriba izq
                              //derec
                              if (mabdanumv == 7 || mabdanumv == 1)
                               fotopacabeza = 7;
                              else if (mabdanumv == 6 || mabdanumv == 5)
                               fotopacabeza = 6;
                              break;
                             case 'standL1L'://arriba dere
                              //case 'walkL1'://arriba dere
                              //derec
                              if (mabdanumv == 4 || mabdanumv == 9)
                               fotopacabeza = 9;
                              else if (mabdanumv == 7 || mabdanumv == 2)
                               fotopacabeza = 7;
                              break;
                             case 'standL1Lsentado_sw'://arriba dere
                              //derec
                              if (mabdanumv == 4 || mabdanumv == 9)
                               fotopacabeza = 9;
                              else if (mabdanumv == 7 || mabdanumv == 2)
                               fotopacabeza = 7;
                              break;
                            }
                   
                            //document.getElementById('k'+yasoid) && document.getElementById('k'+yasoid).getAttribute('data-dcab')
                   
                            if (soyyo == 's' || fotopacabeza != '' && soyyo == 'n' && yoteniadcab != fotopacabeza) {
                   
                             ////consola.log('mabdanumv'+mabdanumv+' fotopacabeza'+fotopacabeza);
                             if (soyyo == 's' && tipo == 'fuerzo' && fotopacabeza == '') {
                              var akihayfurv;
                              var sifoka;
                              if (ffurs[venbox]) akihayfurv = ffurs[venbox];
                              if (!akihayfurv || akihayfurv == 'nada') {
                               sifoka = 'standL' + mabdanumv + 'L' + mbailo;
                               if (akihayfurv == 'nada')
                                sifoka = 'standL' + mabdanumv + 'Lnada';
                   
                               sifoka += 'L' + maccion + 'L' + miart;
                               if (sifoka != fok || yoteniadcab != '') {
                                fok = sifoka;
                                fotopacabeza = '';
                                ////consola.log(' tipo:'+tipo+' soyyo'+soyyo+' hago golabelnewARRIBA cabeza:'+fok+': fotopacabeza:'+fotopacabeza+': teniadcab:'+document.getElementById('k'+yasoid).getAttribute('data-dcab')+':');
                   
                                yoteniadcab = fotopacabeza;
                                katman('golabelnew', fok, fotopacabeza, estoyhablando);
                               }
                              }
                             } else if (yoteniadcab != fotopacabeza && soyyo == 'n' || soyyo == 's' && tipo != 'fuerzo' || yoteniadcab != fotopacabeza && soyyo == 's' && tipo == 'fuerzo') {
                              ////consola.log(' tipo:'+tipo+' soyyo'+soyyo+' hago golabelnewMEDIO de cabeza:'+fok+': fotopacabeza:'+fotopacabeza+': teniadcab:'+document.getElementById('k'+yasoid).getAttribute('data-dcab')+':');
                   
                              yoteniadcab = fotopacabeza;
                              katman('golabelnew', fok, fotopacabeza, estoyhablando);
                             }
                            }
                           } else if (estoyhablando > 1) {
                            yoteniadcab = '';
                            katman('golabelnew', fok, '', estoyhablando);
                           }
                          } else if (soyyo == 's' && tipo != 'fuerzo' || soyyo == 's' && tipo == 'fuerzo' && yoteniadcab != '') {
                           ////consola.log('hago golabelnewABAJO FOK:'+fok+': tipo:'+tipo+' soyyo'+soyyo);
                           yoteniadcab = '';
                           katman('golabelnew', fok, '', estoyhablando);
                          }
                          //}
                         } else if (soyyo == 's' && tipo != 'fuerzo' || soyyo == 's' && tipo == 'fuerzo' && yoteniadcab != '') {
                          ////consola.log('hago golabelnewABAJO FOK:'+fok+': tipo:'+tipo+' soyyo'+soyyo);
                          yoteniadcab = '';
                          katman('golabelnew', fok, '', estoyhablando);
                         }
                         //}
                        }
                        //else if(soyyo == 's'){
                        //katman('golabelnew', fok,'');
                        //}
                       } else if (estoyhablando > 1) {
                        yoteniadcab = '';
                        katman('golabelnew', fok, '', estoyhablando);
                       }
                      }
                   
                     }//FIN MIRO
                    }
                   };
                
                onsocks['roomclientsya'] = function (data) {

                    //////////////
                    //consola.log('cropalo',data);
                    var estekk = 'k' + data.idkek;
                    var estekekkdivaa = document.getElementById(estekk);

                    if (!elementExists(estekekkdivaa) && data.py != 9999 && data.px != 9999) {

                        //var alls = data.rop;

                        cuantoskekosaki++

                        var mposixz = trompaoz(data.py, data.px, 't');
                        var enbox = data.py + 'c' + data.px;
                        var cropadi = document.createElement('canvas');
                        cropadi.width = 90;
                        cropadi.height = 120;
                        cropadi.id = 'k' + data.idkek;

                        //INICIO SUMO TROMPZ Y ALTURA
                        var yasumetrz = 'n';

                        ////////consola.log(('soobreidp'+soobreidp);
                        var sifurka = ffurs[enbox];
                        //FIN SUMO TRZ
                        switch (sifurka) {
                            case 'movedb':
                            case 'moveda':
                            case 'moveia':
                            case 'moveib':
                                mposixz.etop += 15;
                                break;
                            case 'nadc'://jacuzzi horizontal
                            case 'nadb':
                            case 'sentado_nw':
                            case 'sentado_ne':
                            case 'sentado_sw':
                            case 'sentado_se':
                                var estesofa = kkallaki.querySelector('[data-idp="' + ffursidp[enbox] + '"]');
                                if (estesofa.getAttribute('data-idpc') != '') {
                                    //es mas grande de un cuadro sumo1 si esta en el cuadro base o resto 2
                                    if (estesofa.getAttribute('data-box') == enbox) {
                                        mposixz.ezindex += 1;
                                        //consola.log('sumo1');
                                    } else {
                                        //consola.log('resto2');
                                        mposixz.ezindex -= 1;
                                    }
                                }

                                yasumetrz = 's';
                                break;
                            case 'estirado_ne':
                            case 'estirado_se':
                            case 'estirado_sw':
                            case 'estirado_nw':
                                var kya = data.py;
                                var kxa = data.px;
                                if (ffursidp[enbox]) {
                                    var miaboidp = 'f' + ffursidp[enbox];
                                    var mirocasillas = ffurscass[miaboidp];
                                    var mirocasillase = mirocasillas.split('c', 2);
                                    kya = parseInt(mirocasillase[0]);
                                    kxa = parseInt(mirocasillase[1]);
                                    enbox = kya + 'c' + kxa;
                                }
                                mposixz = trompaoz(kya, kxa, 't');
                                switch (sifurka) {
                                    case 'estirado_ne':
                                        mposixz.etop += 12;
                                        mposixz.eleft -= 20;
                                        break;
                                    case 'estirado_se':
                                        mposixz.etop += 7;
                                        mposixz.eleft += 13;
                                        break;
                                    case 'estirado_sw':
                                        mposixz.etop += 8;
                                        mposixz.eleft -= 16;
                                        break;
                                    case 'estirado_nw':
                                        mposixz.etop += 11;
                                        mposixz.eleft += 20;
                                        break;
                                }

                                mposixz.ezindex += 1;
                                //yasumetrz='s';
                                break;
                            default:
                                switch (data.fok) {
                                    case 'standL1Lestirado_nwLL':
                                    case 'standL1Lsentado_nwLL':
                                    case 'standL1Lestirado_neLL':
                                    case 'standL1Lsentado_neLL':
                                    case 'standL1Lestirado_seLL':
                                    case 'standL1Lsentado_seLL':
                                    case 'standL1Lestirado_swLL':
                                    case 'standL1Lsentado_swLL':
                                        mposixz.etop += 15;
                                        break;
                                }
                        }


                        var estesofa = kkallaki.querySelector('[data-idp="' + ffursidp[enbox] + '"]');
                        if (estesofa && estesofa.getAttribute('data-idpc') != '') {
                            //es mas grande de un cuadro sumo1 si esta en el cuadro base o resto 2
                            if (estesofa.getAttribute('data-box') == enbox) {
                                mposixz.ezindex += 1;
                                //console.log('sumo1');
                            } else {
                                //console.log('resto2');
                                mposixz.ezindex -= 2;
                            }

                            yasumetrz = 's';
                        }

                        if (ffursencmaltur[enbox]) {
                            mposixz.etop -= ffursencmaltur[enbox];
                            if (ffursencmaltur[enbox] > 3) {//yasumetrz == 'n' &&
                                yasumetrz = 's'; mposixz.ezindex++;
                            }
                        }

                        var kekasclas = '';
                        if (data.tam > 0) {
                            cropadi.className = 'tam' + data.tam;
                            kekasclas = 'tam' + data.tam;
                        }
                        //cropadi.innerHTML='<img/>';
                        //cropadi.innerHTML='<canvas width="90" height="120"></canvas>';


                        cropadi.setAttribute('data-clas', kekasclas);

                        cropadi.setAttribute('data-box', enbox);
                        cropadi.setAttribute('data-y', data.py);
                        cropadi.setAttribute('data-mgus', data.megustas);
                        cropadi.setAttribute('data-x', data.px);
                        cropadi.setAttribute('data-fok', data.fok);
                        cropadi.setAttribute('data-rop', data.rop);
                        cropadi.setAttribute('data-vida', data.vida);
                        cropadi.setAttribute('data-ceco', data.ceco);
                        //cropadi.setAttribute('draggable',false);
                        cropadi.setAttribute('data-csoc', data.csoc);
                        cropadi.setAttribute('data-tcue', data.tipocuenta);
                        cropadi.setAttribute('data-car', 'normal');
                        cropadi.setAttribute('data-ecam', data.ecam);
                        cropadi.setAttribute('data-cpws', data.conpowas);
                        cropadi.setAttribute('data-hab', 'n');
                        cropadi.setAttribute('data-placs', data.placs);
                        //cropadi.setAttribute('data-tags',data.tags);
                        //si cambia cambiar en dimemydata
                        if (!data.imagenmini) data.imagenmini = 'default.png';
                        cropadi.setAttribute('data-imagenmini', data.imagenmini);
                        cropadi.setAttribute('data-misi', data.misi);
                        cropadi.setAttribute('data-kek', data.kek);
                        cropadi.setAttribute('data-glob', '');
                        cropadi.setAttribute('data-idkek', data.idkek);
                        //cropadi.style.position = 'absolute';
                        cropadi.style.left = mposixz.eleft + 'px';
                        cropadi.style.top = mposixz.etop + 'px';
                        cropadi.style.zIndex = mposixz.ezindex;


                        var mropab = data.fok + 'L' + data.rop;//si cambia cambiar en nuevolook
                        kkallakik.appendChild(cropadi);


                        //var sstek=document.getElementById('k'+data.idkek);
                        //kanvasv3(estekk,mropab);
                        //kanvasv3(estekk,nuevoaspecto);

                        var datosfokk = mropab.split('L');
                        //if(datosfokk[2] == 'nada')
                        //addClass(dividd,'nada');
                        if (coins[estekk]) {
                            destroyCoin(estekk);
                        }

                        if (!vextr.hasOwnProperty('tiempo'))
                            vextr['tiempo'] = 400;

                        vextr['tiempo'] += 10;
                        if (data.idkek == yasoid) {
                            vextr['tiempo'] = 400;
                        }

                        setTimeout(spawnCoin, vextr['tiempo'], estekk, datosfokk);
                        //spawnCoin(estekk,datosfokk);
                        if (data.ecam == 'si') {
                            ecam(data.idkek, 'ver', '');
                        }

                        if (data.idkek == yasoid) {

                            let eraposii = posici;
                            posici = 'no';
                            posiciono();
                            posici = eraposii;


                            if (enboxyinicial == data.py && enboxxinicial == data.px && sifurka && sifurka == 'teleportse') {
                                katman('teleportse', ffursidp[enbox]);
                            }
                        }
                        if (document.getElementById('myKekosu') && !document.getElementById('myKekosu').querySelector('[data-idk="' + data.idkek + '"]')) {
                            var likek = document.createElement('li');
                            likek.innerHTML = data.kek;
                            likek.setAttribute('data-idk', data.idkek);
                            document.getElementById('myKekosu').appendChild(likek);
                        }

                        if (data.parlando !== '')
                            onsocks['parla'](data.idkek, data.parlando);

                    }
                };
                onsocks['roomclientstodosya'] = function (datatot) {

                    for (var essso = 0; essso < datatot.length; essso++) {
                        onsocks['roomclientsya'](datatot[essso]);
                    }
                },
                    onsocks['dameei'] = function () {
                        var estekekkdivaa = kkallakik.querySelector('#k' + yasoid);
                        if (!elementExists(estekekkdivaa)) {
                            fok = fokinicial;
                            maccion = '';
                            miart = '';
                            mbailo = '';
                            if (teleidp > 0) {
                                var alaka = ffurscass['f' + teleidp];
                                if (alaka) {
                                    //console.log('ENTOOOOOOOO DE NUEVO A LA CASA');
                                    katman('animasolo', teleidp);
                                    katman('telistranspar');
                                    var kesastel = alaka.split('c');
                                    ky = parseInt(kesastel[0]);
                                    kx = parseInt(kesastel[1]);
                                } else {
                                    ky = enboxyinicial;
                                    kx = enboxxinicial;
                                }
                            } else {
                                ky = enboxyinicial;
                                kx = enboxxinicial;
                            }
                            teleidp = 0;

                            //////////
                            //////consola.log('ei');

                            ////consola.log('mando ei');
                            if (!vextr.hasOwnProperty('spy'))
                                katman('ei', { ky: ky, kx: kx, fok: fok });
                            window.setTimeout(quitobowb, 500);
                        }
                        else {
                            var yaexist = 'n';
                            if (elementExists(estekekkdivaa)) {
                                yaexist = 's';
                            }
                            alerta(iw[350] + ' py:' + ky + '---px:' + kx + '---yaex:' + yaexist);
                        }
                    };

                onsocks['adeu'] = function (keid) {
                    var koonkkk = 'k' + keid;
                    var edgojsadeu = document.getElementById(koonkkk);
                    if (edgojsadeu) {
                        cuantoskekosaki--;

                        if (edgojsadeu.getAttribute('data-ecam') == 'si') {
                            borrar('ifra' + keid);
                        }

                        if (document.getElementById('myKekosu') && document.getElementById('myKekosu').querySelector('[data-idk="' + keid + '"]')) {
                            document.getElementById('myKekosu').removeChild(document.getElementById('myKekosu').querySelector('[data-idk="' + keid + '"]'));
                        }

                        //var estecoinidera = edgojsadeu.getAttribute('data-cid');
                        if (coins[koonkkk])
                            destroyCoin(koonkkk);

                        edgojsadeu.parentNode.removeChild(edgojsadeu);

                    }
                };
                onsocks['habloya'] = function (quienhabbb, cuanthabb) {
                    if (coins[quienhabbb]) {
                        coins[quienhabbb].pongohablo(cuanthabb);
                    }
                };
                onsocks['hagostopya'] = function (data) {
                    var keid = data.idkek;
                    var trz = data.trz;
                    var furk = data.furk;
                    var tra = data.tra;
                    var tro = data.tro;
                    var my = data.my;
                    var mx = data.mx;
                    var estebox = data.albox;
                    var mabdanum = data.mabdanum;
                    var demoratmpz = data.despuesfur;
                    var soobreidp = data.sobreidp;
                    var esrecha = data.soyrech;

                    var estekkj = 'k' + keid;
                    var edgojs = document.getElementById(estekkj);
                    if (elementExists(edgojs)) {
                        edgojs.setAttribute('data-y', my);
                        edgojs.setAttribute('data-x', mx);
                        edgojs.setAttribute('data-box', estebox);
                        var datosfok = furk.split('L');

                        if (esrecha != 'cmia') {

                            if (coins[estekkj])
                                coins[estekkj].pongofok(datosfok, '', '', 0, 0);

                        }
                        if (mabdanum > 0) {


                            //muevekatrix(edgojs,mabdanum,tra,tro,trz);
                            edgojs.style.left = tra + 'px';
                            edgojs.style.top = tro + 'px';

                            var enqueveztrz = 1;
                            //////////////consola.log('quemabda'+quemabda);
                            if (modonolag == 'n') {
                                switch (mabdanum) {
                                    case 1:
                                    case 2:
                                        enqueveztrz = 340;
                                        break;
                                    case 7:
                                        enqueveztrz = 200;
                                        break;
                                }
                            }
                            //consola.log('enqueveztrz',enqueveztrz);

                            if (enqueveztrz == 1) {
                                edgojs.style.zIndex = trz;
                            } else {
                                window.setTimeout(muevekatrixzindexe, enqueveztrz, edgojs, trz);
                            }


                        } else {
                            //edgojs.setAttribute('data-fok0','stand');//ojoaki
                            edgojs.style.left = tra + 'px';
                            edgojs.style.top = tro + 'px';
                            edgojs.style.zIndex = trz;
                        }

                        if (keid == yasoid && document.getElementById('ifra' + keid)) {
                            onsocks['muevocamya'](keid, trz, tra, tro, mabdanum);
                        }
                    }
                };
                onsocks['muevocamya'] = function (keid, trz, tra, tro, mabdanum) {
                    var estekkj = 'ifra' + keid;
                    var edgojs = document.getElementById(estekkj);
                    if (elementExists(edgojs)) {
                        if (mabdanum > 0) {

                            edgojs.style.left = tra + 'px';
                            edgojs.style.top = tro + 'px';
                            trz += 20;

                            var enqueveztrz = 1;
                            if (modonolag == 'n') {
                                switch (mabdanum) {
                                    case 1:
                                    case 2:
                                        enqueveztrz = 340;
                                        break;
                                    case 7:
                                        enqueveztrz = 200;
                                        break;
                                }
                            }
                            //if(enqueveztrz==1)
                            //edgojs.style.zIndex=trz;
                            //else{
                            //window.setTimeout(muevekatrixzindexe,enqueveztrz,edgojs,trz);
                            //}
                        } else {
                            //edgojs.setAttribute('data-fok0','stand');//ojoaki
                            edgojs.style.left = tra + 'px';
                            edgojs.style.top = tro + 'px';
                            //edgojs.style.zIndex=trz;
                        }
                    }
                };
                onsocks['golabelnew'] = function (kekoid, furk, cabeza, hablando) {
                    var kkoook = 'k' + kekoid;
                    var datosfok = furk.split('L');
                    if (coins[kkoook])
                        coins[kkoook].pongofok(datosfok, cabeza, datosfok[1], hablando, 0);

                };
                onsocks['ventryacarg'] = function (idcasa, dimac) {

                    if (dimac.solopongos == 'no') {

                        document.getElementById('kekoallakic').innerHTML = '';
                        destroyCoins(); kkallakik.innerHTML = '';
                    }
                    ventryacarg(idcasa, dimac);

                };
                onsocks['nuevolook'] = function (idkeko, fokara, nuevoaspecto, nuevotamano) {
                    var estekk = 'k' + idkeko;
                    var cropadi = document.getElementById(estekk);
                    if (cropadi) {

                        cropadi.setAttribute('data-rop', nuevoaspecto);

                        nuevoaspecto = fokara + 'L' + nuevoaspecto;

                        var kekasclas = '';
                        //////consola.log('test.tam'+test.tam);

                        if (cropadi.getAttribute('data-clas') != '') {
                            ////consola.log('borroclase'+cropadi.getAttribute('data-clas'));
                            removeClass(cropadi, cropadi.getAttribute('data-clas'));
                        }
                        if (nuevotamano > 0) {
                            kekasclas = 'tam' + nuevotamano;
                            addClass(cropadi, 'tam' + nuevotamano);
                        }
                        cropadi.setAttribute('data-clas', kekasclas);
                        //kanvasv3(estekk,nuevoaspecto);

                        var datosfokk = nuevoaspecto.split('L');
                        //if(datosfokk[2] == 'nada')
                        //addClass(dividd,'nada');
                        if (coins[estekk]) {
                            destroyCoin(estekk);
                        }
                        spawnCoin(estekk, datosfokk);

                    }
                };
                onsocks['addguau'] = function (kes) {

                    //console.log('addguau'+kes.idpm);
                    if (kes.sal == yosocas) {
                        var nombremascoo = 'masco' + kes.idpm;
                        if (!document.getElementById(nombremascoo)) {
                            mascos[nombremascoo] = kes.nombre;
                            //////////////consola.log('agregomascota'+nombremascoo);
                            var opss = trompaoz(kes.yy, kes.xx, 't');
                            var patrompo = opss.etop;
                            var patrompa = opss.eleft;
                            var masco;
                            if (kes.idm == '20001' || kes.idm == '20002') {
                                masco = document.createElement('canvas');
                                masco.width = 90;
                                masco.height = 120;
                            } else {
                                masco = document.createElement('img');
                            }
                            masco.setAttribute('data-blockmasco', kes.blockmasco);

                            if (kes.idm == '300000') {
                                patrompo += 70;
                                patrompa += 17;
                            } else if (kes.idm == '300001') {
                                patrompo += 80;
                                patrompa += 8;
                            }

                            masco.id = nombremascoo;
                            //masco.style.position = 'absolute';

                            var pongotz = opss.ezindex;
                            var akialtur = ffursencmaltur[kes.yy + 'c' + kes.xx];
                            if (akialtur != null && akialtur >= 1) {
                                pongotz++; pongotz++;
                                patrompo -= akialtur;
                            }
                            masco.style.top = patrompo + 'px';
                            masco.style.left = patrompa + 'px';
                            masco.style.zIndex = pongotz;
                            //masco.className = 'kowyata';
                            masco.setAttribute('data-imagenmini', 'default.png');
                            masco.setAttribute('data-misi', '');

                            if (kes.idm == '20001' || kes.idm == '20002') {
                                //masco.innerHTML='<img/>';

                                var mropab = 'standL4' + 'LLLL' + kes.rop;//si cambia cambiar en nuevolook
                                masco.setAttribute('data-par', 'n');
                                masco.setAttribute('data-pgraci', 'n');
                            } else {
                                masco.src = dominiobase + 'imagesnew/perrosv3/' + kes.idm + '/' + kes.color + '/stand4.gif';
                                //masco.innerHTML = '<img src="'+dominiobase+'imagesnew/perrosv3/'+kes.idm+'/'+kes.color+'/stand4.gif">';
                                masco.setAttribute('data-fok0', 'stand');
                            }
                            masco.setAttribute('data-rop', kes.rop);


                            masco.setAttribute('data-idkek', nombremascoo);
                            masco.setAttribute('data-idm', kes.idm);
                            masco.setAttribute('data-fok', 'stand4');
                            // masco.setAttribute('draggable',false);
                            masco.setAttribute('data-color', kes.color);
                            masco.setAttribute('data-nombre', kes.nombre);
                            masco.setAttribute('data-box', kes.yy + 'c' + kes.xx);
                            masco.setAttribute('data-y', kes.yy);
                            masco.setAttribute('data-x', kes.xx);
                            masco.setAttribute('data-feliz', kes.feliz);
                            masco.setAttribute('data-hab', 'n');
                            masco.setAttribute('data-idpm', kes.idpm);
                            masco.setAttribute('data-duenoid', kes.duenoid);
                            masco.setAttribute('data-dueno', kes.dueno);
                            masco.setAttribute('data-fecha', kes.fecha);
                            masco.setAttribute('data-ultimacomida', kes.ultimacomida);
                            masco.setAttribute('data-acc', kes.acc);

                            kkallakik.appendChild(masco);
                            if (kes.idm == '20001' || kes.idm == '20002') {
                                //kanvasv3(nombremascoo,mropab);

                                var datosfokk = mropab.split('L');
                                //if(datosfokk[2] == 'nada')
                                //addClass(dividd,'nada');
                                if (coins[nombremascoo]) {
                                    destroyCoin(nombremascoo);
                                }
                                spawnCoin(nombremascoo, datosfokk);

                            }

                            //Commkekos[kes.yy+'c'+kes.xx] = 'masco'+kes.idpm;
                        }
                    }
                };
                kateko('borramascotaya', function (idpriva) {
                    borrar('masco' + idpriva);
                    if (mascos['masco' + idpriva]) {
                        if (coins['masco' + idpriva])
                            destroyCoin('masco' + idpriva);
                        delete mascos['masco' + idpriva];
                    }
                });
                kateko('labeldog', function (idp, kfot, kacc) {
                    var nombremasco = "masco" + idp;
                    var masco = document.getElementById(nombremasco);
                    if (elementExists(masco)) {
                        if (masco.getAttribute('data-idm') == '20001' || masco.getAttribute('data-idm') == '20002') {
                            //'standL4'+'LLLL'+kes.rop;
                            var mropab = kfot + 'L' + kacc;//si cambia cambiar en nuevolook
                            var datosfok = mropab.split('L');
                            if (coins[nombremasco])
                                coins[nombremasco].pongofok(datosfok, '', datosfok[1], 0, 0);

                        }
                        else {
                            masco.setAttribute('data-fok0', kfot);
                            masco.setAttribute('data-acc', kacc);
                            masco.setAttribute('data-fok', kfot);
                            masco.src = dominiobase + 'imagesnew/perrosv3/' + masco.getAttribute('data-idm') + '/' + masco.getAttribute('data-color') + '/' + kfot + kacc + '.gif';
                        }
                    }

                });
                kateko('movguau', function (kes) {
                    //console.log('movguau'+kes.idpm);
                    var kemascoes = 'masco' + kes.idpm;
                    var kmascp = document.getElementById(kemascoes);
                    if (elementExists(kmascp)) {
                        ////consola.log(kes);
                        kmascp.setAttribute('data-blockmasco', kes.blockmasco);
                        //if(kmascp.getAttribute('data-fok').substring(0,5) == 'stand'){
                        kmascp.setAttribute('data-acc', kes.acc);
                        var yogra = dimegraphbots(ployy, ploxx);
                        ////////
                        ////consola.log('kes.dey'+kes.dey+'c'+kes.dex+' a  '+kes.ay+'c'+kes.ax);

                        var mstart = yogra.nodes[kes.dey][kes.dex];
                        var mend = yogra.nodes[kes.ay][kes.ax];
                        var mresult = astar.search(yogra.nodes, mstart, mend, condiags);
                        var maap = (mresult.length - 1);
                        var myu = parseInt(kes.dey);
                        var mxu = parseInt(kes.dex);
                        var mya = 0;
                        var mxa = 0;
                        var mabda = '';
                        var umabda = '';
                        var mlalasulte = '';
                        var mlalasult = '';
                        var nyrc = '';
                        var nyrcf = '';
                        var tampi = 0;
                        var eltra = 0;
                        var eltro = 0;
                        var hazloen = 0;
                        var umparl = '';
                        var masparl = '';
                        if (kmascp.getAttribute('data-idm') == '20001') {
                            masparl = parseInt(kes.hab);
                        }
                        if (maap >= 0 && mresult[maap] && mresult[maap].x == kes.ay && mresult[maap].y == kes.ax && !ffurs[mresult[maap].x + 'c' + mresult[maap].y] && !kkallakik.querySelector('[data-box="' + mresult[maap].x + 'c' + mresult[maap].y + '"]')) {
                            var hayerr = 'n';
                            for (var mwas in mresult) {
                                mya = mresult[mwas].x;
                                mxa = mresult[mwas].y;
                                ////////consola.log(('mya'+mya+'c'+mxa+' de '+myu+'c'+mxu);
                                mabda = fas(mya, mxa, myu, mxu);
                                if (mabda == 0) mabda = 1;
                                //if(mabda == 0){
                                ////consola.log('1nguau', kes.idpm);
                                //katman('nguau', kes.idpm);
                                //hayerr='s';
                                //break;
                                //}
                                myu = mya;
                                mxu = mxa;

                                var labdo = mabda;
                                // if(labdo == 0){
                                ////consola.log('2nguau', kes.idpm);
                                //katman('nguau', kes.idpm);
                                //hayerr='s';
                                //break;
                                //}
                                hazloen = 100;
                                if (hayerr == 'n') {
                                    var mabdasend = 'walk' + mabda;
                                    var posixxxx = trompaoz(mya, mxa, 't');
                                    if (kmascp.getAttribute('data-idm') == '20001' || kmascp.getAttribute('data-idm') == '20002' || umabda != mabda || masparl != umparl) {
                                        //nyrc = dominiobase+'imagesnew/sv7.php?src='+stamas.getAttribute('')+'/'+mabdasend+stamas.getAttribute('data-acc')+masparl+'.gif';
                                        if (kmascp.getAttribute('data-idm') == '20001' || kmascp.getAttribute('data-idm') == '20002') {
                                            nyrc = 'walkL' + mabda;

                                        } else
                                            nyrc = dominiobase + 'imagesnew/perrosv3/' + kmascp.getAttribute('data-idm') + '/' + kmascp.getAttribute('data-color') + '/' + mabdasend + kmascp.getAttribute('data-acc') + masparl + '.gif';

                                    } else {
                                        nyrc = '';
                                    }
                                    if (maap == mwas) {
                                        mabdasend = 'stand' + mabda + '';

                                        if (kmascp.getAttribute('data-idm') == '20001' || kmascp.getAttribute('data-idm') == '20002') {
                                            nyrcf = 'standL' + mabda;
                                        } else
                                            nyrcf = dominiobase + 'imagesnew/perrosv3/' + kmascp.getAttribute('data-idm') + '/' + kmascp.getAttribute('data-color') + '/' + mabdasend + kmascp.getAttribute('data-acc') + '.gif';

                                        //nyrc=nyrcf;
                                    }
                                    if (kmascp.getAttribute('data-idm') == '300000') {
                                        eltra = (posixxxx.eleft + 17);
                                        eltro = (posixxxx.etop + 70);
                                    } else if (kmascp.getAttribute('data-idm') == '300001') {
                                        eltra = (posixxxx.eleft + 8);
                                        eltro = (posixxxx.etop + 80);
                                    } else {
                                        eltra = posixxxx.eleft;
                                        eltro = posixxxx.etop;
                                    }

                                    var eltrz = posixxxx.ezindex;
                                    var akialtur = ffursencmaltur[mya + 'c' + mxa];
                                    if (akialtur && akialtur > 3) {
                                        eltrz++;
                                        eltro -= akialtur;
                                    }


                                    window.setTimeout(maguau, tampi, masparl, mabdasend, hazloen, mya, mxa, kemascoes, eltra, eltro, eltrz, nyrc, nyrcf, mabda);


                                    //window.setTimeout("maguau('"+mabdasend+"','"+hazloen+"','"+mya+"','"+mxa+"','"+'masco'+kes.idpm+"','"+eltra+'px'+"','"+eltro+'px'+"','"+(kf.trompz(mya,mxa,'t')+2)+"','"+nyrc+"','"+nyrcf+"')",tampi);
                                    tampi += 360;
                                    umabda = mabda;
                                    if (kmascp.getAttribute('data-idm') == '20001' || kmascp.getAttribute('data-idm') == '20002')
                                        masparl = 0;
                                }
                            }
                            if (kes.kekoaviso == yasoid) {
                                ////////consola.log(('nguau error3');
                                ////////consola.log(('nguau error3 quedaba en'+mresult[maap].x+'c'+mresult[maap].y+' de '+kes.ay+'c'+kes.ax);

                                ////consola.log('siguau IDP'+kes.idpm+' TIEMPO'+tampi);
                                katman('siguau', kes.idpm, tampi);
                            }
                        } else if (kes.kekoaviso == yasoid) {
                            ////////consola.log(('nguau error3');
                            ////////consola.log(('nguau error3 quedaba en'+mresult[maap].x+'c'+mresult[maap].y+' de '+kes.ay+'c'+kes.ax);
                            ////consola.log('3nguau', kes.idpm);
                            katman('nguau', kes.idpm);
                        }
                        //}else{
                        ////////consola.log(('nguau error2');
                        //katman('nguau', kes.idpm);
                        //}
                    }
                });
                kateko('accguau', function (kes) {



                    var stamas = document.getElementById('masco' + kes.idpm);
                    if (stamas) {

                        if (stamas.getAttribute('data-idm') != '20001' && stamas.getAttribute('data-idm') != '20002') {
                            //stamas.setAttribute('data-acc',kes.acc);
                            //stamas.firstChild.setAttribute('src','in/gk/sv7.php?src='+stamas.getAttribute('fok')+kes.acc+stamas.getAttribute('rop')+'.gif');

                            //}else{
                            stamas.setAttribute('data-acc', kes.acc);
                            stamas.src = dominiobase + 'imagesnew/perrosv3/' + stamas.getAttribute('data-idm') + '/' + stamas.getAttribute('data-color') + '/' + stamas.getAttribute('data-fok') + stamas.getAttribute('data-acc') + '.gif';
                            //}
                        }
                    }
                }); kateko('desblocguau', function (idprivadamascota) {
                    ////consola.log('desblocguau',idprivadamascota);
                    if (document.getElementById('masco' + idprivadamascota)) {
                        document.getElementById('masco' + idprivadamascota).setAttribute('data-blockmasco', 'n');
                    }

                }); kateko('paracoiupya', function (yotendreara, cuasum, ope) {
                    paracoiupya(yotendreara, cuasum, ope);
                }); kateko('winsor', function (data) {
                    var dmmmas = ''; if (data.datomas) { dmmmas = data.datomas; }
                    winsor(data.idat, data.dato, dmmmas, '', '', '');
                }); kateko('priviya', function (dekeko, deid, msg, quehoraes) {
                    //var yatengochatab = document.getElementById('akichats').querySelector('div.chatsdiv[data-kami="'+deid+'"]');
                    //if(yatengochatab){
                    chatearcon(dekeko, deid, 'recibo', msg, quehoraes);
                    //}

                });


                /*


                    meabr YA NO SE USAR√Å.


                */

                kateko('meabr', function (akei) {
                    if (document.getElementById("contemytimbre") && document.getElementById("contemytimbre").getAttribute('data-datnum') == akei) {

                        if (!isNaN(akei) && akei >= 1) {
                            //console.log('me abre');
                            borrar('mytimbre');
                            bowb = 'si'; mresulta = [];
                            //window.setTimeout(quitobowb, 1000);
                            katman('donve', akei, 'timbr');
                        }
                    }
                });
                kateko('kekosconectados', function (cuants) {
                    //nolang
                    // document.getElementById('kekosconectados').innerHTML = cuants + ' ' + iw[351];
                    document.getElementById('kekosconectados').innerHTML = '<img src="' + dominiobase + 'images/onlines.png" style=" margin-bottom: -5px; margin-right: 4px; " >' + cuants + ' ' + iw[351];
                }); kateko('recibo', function (datipobola, datipo, tip, idkeko, keko, estemin, idinse, quehoraes, extras) {
                    //////consola.log('recibo',datipobola,datipo,tip,idkeko,keko,estemin,idinse,quehoraes);
                    recibo(datipobola, datipo, tip, idkeko, keko, estemin, idinse, quehoraes, extras);
                }); kateko("kmensaj", function (kenvio, yosoykeko, yosoyid, yosmini, holaropa, holaestadoinfo) {
                    //OJOAKI
                    //////////////consola.log('kmensaj kenvio'+kenvio+' yosoykeko'+yosoykeko+' yosoyid'+yosoyid+' yomini'+yomini+' holaropa'+holaropa+' holaestadoinfo'+holaestadoinfo);

                    switch (kenvio) {
                        case 'online':
                            misamigs['k' + yosoyid] = yosoykeko;
                            misamigsm['k' + yosoyid] = yosmini;
                            cargamovil(yosoyid);

                            if (elementExists(document.getElementById('akichats').querySelector('[data-kami="' + yosoyid + '"]'))) {
                                document.getElementById('akichats').querySelector('[data-kami="' + yosoyid + '"]').querySelector('.inpuchats').disabled = false;
                                document.getElementById('akichats').querySelector('[data-kami="' + yosoyid + '"]').querySelector('.inpuchats').value = '';
                            }
                            //nolang
                            kmensaj("imagesnew/soni/online.mp3", "" + yosoykeko + "", yosoyid, yosmini, iw[352]);
                            break;
                        case 'offline':

                            //data-ika='"+imagg.replace('k','')+"'
                            //nolang
                            ////consola.log('yosoyid',yosoyid);
                            if (document.getElementById('amigosons') && document.getElementById('amigosons').querySelector('[data-ika="' + yosoyid + '"]')) {
                                document.getElementById('amigosons').removeChild(document.getElementById('amigosons').querySelector('[data-ika="' + yosoyid + '"]'));
                            }

                            if (elementExists(document.getElementById('akichats').querySelector('[data-kami="' + yosoyid + '"]'))) {
                                document.getElementById('akichats').querySelector('[data-kami="' + yosoyid + '"]').querySelector('.inpuchats').disabled = true;
                                document.getElementById('akichats').querySelector('[data-kami="' + yosoyid + '"]').querySelector('.inpuchats').value = iw[376];
                            }

                            if (misamigs['k' + yosoyid]) delete (misamigs['k' + yosoyid]);
                            if (misamigsm['k' + yosoyid]) delete (misamigsm['k' + yosoyid]);
                            mirosinamigoson();
                            //nolang
                            //kmensaj("imagesnew/soni/offline.mp3",""+yosoykeko+"",yosoyid,yosmini,
                            //"se ha <b>desconectado</b>");
                            break;
                        default:
                            kmensaj(kenvio, yosoykeko, yosoyid, yosmini, holaestadoinfo);

                    }

                }); kateko("oler", function (kpaso) {
                    oler(kpaso);
                }); kateko("mal", function (kpaso) {
                    //////////////consola.log('mal',kpaso);
                    mal(kpaso);
                }); kateko('pidepongos', function (kecas) {
                    if (kecas == yosocas)
                        katman('damepongos', yosocas);

                });

                onsocks['accionarv3ya'] = function (accionhice, rowsya) {
                    //consola.log('rowsya',rowsya);
                    //OJOAKIcuantos++;
                    //consola.log('OJOAKIcuantos',OJOAKIcuantos);
                    var yapusedatasfurn = 'n';
                    ////consola.log(rowsya);

                    if (modocity == 'si') {

                        var estaensectoridcasa = sectoresidcasa[rowsya.idcasa];
                        if (estaensectoridcasa) {
                            rowsya.posiciony += (estaensectoridcasa.sectory * ployy);
                            rowsya.posicionx += (estaensectoridcasa.sectorx * ploxx);

                            if (!sectoresfurnisid[rowsya.idcasa]) {
                                sectoresfurnisid[rowsya.idcasa] = new Array();
                            }
                            var sectoresfurnisidaki = sectoresfurnisid[rowsya.idcasa];

                            if (accionhice == 'recoger') {

                                if (sectoresfurnisidaki.indexOf(rowsya.id) != -1) {
                                    sectoresfurnisidaki.splice(sectoresfurnisidaki.indexOf(rowsya.id), 1);
                                }
                            } else {
                                if (sectoresfurnisidaki.indexOf(rowsya.id) == -1) {
                                    sectoresfurnisidaki.push(rowsya.id);
                                }
                            }

                        }
                    }

                    //consola.log(rowsya);
                    if (rowsya.accion == 'poster' || rowsya.accion == 'poster2') {
                        ////////consola.log(('poster');

                        var formatoyap = '.' + rowsya.formato; if (rowsya.imagenfurni == 2) formatoyap = '.png';
                        var idfestep = 'idf' + rowsya.id;
                        var exisitia = 'no';
                        borrar(idfestep);
                        if (accionhice != 'recoger') {
                            //if(!document.getElementById(idfestep)){
                            var nuevaimagenfurp = document.createElement('div');
                            nuevaimagenfurp.id = idfestep;
                            //}else{
                            //exisitia='si';
                            //var nuevaimagenfurp=document.getElementById(idfestep);
                            //}
                            ////////consola.log(('rowsya.id'+rowsya.id+'posiciony'+rowsya.posiciony+'c'+rowsya.posicionx);
                            rowsya.posicionx += parseInt(rowsya.pxleft);
                            rowsya.posiciony += parseInt(rowsya.pxtop);
                            nuevaimagenfurp.className = 'poster';
                            //nuevaimagenfurp.style.position = 'absolute';
                            nuevaimagenfurp.style.left = rowsya.posicionx + 'px';
                            nuevaimagenfurp.style.top = rowsya.posiciony + 'px';
                            //nuevaimagenfurp.style.zIndex = 1000;
                            //nuevaimagenfurp.setAttribute('draggable',false);
                            nuevaimagenfurp.setAttribute('data-furn', 'si');
                            nuevaimagenfurp.setAttribute('data-icas', rowsya.idcasa);
                            nuevaimagenfurp.setAttribute('data-y', rowsya.posiciony);
                            nuevaimagenfurp.setAttribute('data-x', rowsya.posicionx);
                            nuevaimagenfurp.setAttribute('data-a', rowsya.accion);
                            nuevaimagenfurp.setAttribute('data-nomid', rowsya.nombre);
                            nuevaimagenfurp.setAttribute('data-idp', rowsya.id);
                            nuevaimagenfurp.setAttribute('data-anim', rowsya.animar);
                            nuevaimagenfurp.setAttribute('data-gir', rowsya.girar);
                            nuevaimagenfurp.setAttribute('data-nom', rowsya.nombre);
                            nuevaimagenfurp.setAttribute('data-des', rowsya.descripcion);
                            nuevaimagenfurp.setAttribute('data-alt', rowsya.altura);
                            nuevaimagenfurp.setAttribute('data-idf', rowsya.framefurni);
                            nuevaimagenfurp.setAttribute('data-box', boxahora);
                            nuevaimagenfurp.setAttribute('data-idpt', rowsya.tengofyaidptres);
                            nuevaimagenfurp.setAttribute('data-idpc', rowsya.tengofyaidpcuatro);
                            nuevaimagenfurp.setAttribute('data-f', rowsya.formato);
                            nuevaimagenfurp.setAttribute('data-ienc', rowsya.imagenencima);
                            nuevaimagenfurp.setAttribute('data-ifur', rowsya.imagenfurni);
                            nuevaimagenfurp.setAttribute('data-pxtop', rowsya.pxtop);
                            nuevaimagenfurp.setAttribute('data-pxleft', rowsya.pxleft);
                            //soy una tv

                            var htmlposte = '';
                            var kes = rowsya.framefurni;
                            var clas = '';
                            if (kes == 801)
                                clas = 'tvyog';
                            else if (kes == 802)
                                clas = 'tvyogd';
                            else if (kes == 5543)
                                clas = 'tvyog';
                            else if (kes == 5544)
                                clas = 'tvyogd';//sihaymas poner en pongovideoya
                            else if (kes == 4011384)
                                clas = 'tvyog';
                            else if (kes == 4011383)
                                clas = 'tvyogd';//sihaymas poner en pongovideoya
                            //OJOAKI kekotv

                            //if(clas!=''){
                            if (clas != '') {
                                htmlposte += '<img class="postervisible" src="' + dominiobase + 'fly/i/fursv5/' + rowsya.nombre + '/' + rowsya.framefurni + formatoyap + '"/>';

                                htmlposte += '<span id="akitv' + rowsya.id + '"></span>';
                                //htmlposte+='<iframe id="tv'+rowsya.id+'" class="'+clas+'" type="text/html" width="400" height="225" src="https://www.youtube.com/embed/M7lc1UVf-VE?autoplay=1&controls=0&modestbranding=1&rel=0&showinfo=0 frameborder="0"></iframe>';

                                if (clas != 'tvyog' && clas != 'tvyogd')
                                    htmlposte += '<img class="postervisible" src="' + dominiobase + 'fly/i/fursv5/' + rowsya.nombre + '/' + rowsya.framefurni + 'encima' + formatoyap + '"/>';
                            } else {

                                htmlposte += '<img class="postervisible" src="' + dominiobase + 'fly/i/fursv5/' + rowsya.nombre + '/' + rowsya.framefurni + formatoyap + '"/>';

                            }
                            if (clas != 'tvyog' && clas != 'tvyogd')
                                htmlposte += '<img class="posterinvi" src="' + dominiobase + 'fly/i/fursv5/' + rowsya.nombre + '/' + rowsya.framefurni + formatoyap + '"/>';

                            nuevaimagenfurp.innerHTML = htmlposte;
                            ////////consola.log(('exisitia'+exisitia);
                            //if(exisitia=='no')//poster
                            nuevaimagenfurp.onclick = function () {
                                clickado(this.getAttribute('data-idp'), 'idp');
                            };
                            kkallaki.appendChild(nuevaimagenfurp);

                            if (rowsya.framefurni == '4011384' || rowsya.framefurni == '4011383' || rowsya.framefurni == 801 || rowsya.framefurni == 802 || rowsya.framefurni == 5543 || rowsya.framefurni == 5544) {
                                //if(volum=='si'){

                                if (accionhice != 'suelto')
                                    katman('dimevideoya', rowsya.id);
                                else {
                                    window.setTimeout(dimeelvideoya, 1000, rowsya.id, 'miro');
                                }
                                //}
                            }

                        }
                    } else {

                        if (accionhice != 'suelto' && accionhice != 'recogerkekomove') {
                            quitoinfofurni(rowsya.id, 'furni', accionhice);//quito info del furni idp abajo lo vuelvo agregar si es girar animar o mover
                        }
                        else if (accionhice == 'recogerkekomove') {
                            quitoinfofurni(rowsya.id, 'recogerkekomove', accionhice);//quito info del furni idp abajo lo vuelvo agregar si es girar animar o mover
                        }

                        if (rowsya.tengofyaidpcuatro == 'cerberusbox') {
                            //var sistayacerv=ffurscerv.valueOf(rowsya.id);
                            var indexvalue = ffurscerv.valueOf(rowsya.id);
                            //var cualei = ffurscerv[0];
                            //var index = indexvalue.splice(0,1);
                            if (indexvalue) {//quito cerberus antes deteccion casilla en este idp
                                for (var ins in indexvalue) {
                                    if (ffurscerv[ins] == rowsya.id)
                                        delete (ffurscerv[ins]);
                                }
                            }
                            ////consola.log(indexvalue.length);
                            //index=ffurscerv.indexOf(index);
                            //if (index > -1) {
                            //ffurscerv.splice(index, 1);
                            //}
                            //if(sistayacerv)
                            //sistayacerv.pop();

                            ////consola.log('mirocerv',ffurscerv.valueOf(rowsya.id));
                            //ffurscerv = [];
                        }

                        var idfeste = 'idf' + rowsya.id;
                        var idfesteencima = 'idencf' + rowsya.id;
                        //
                        //var enboxstaba;
                        if (accionhice == 'mover' || accionhice == 'recoger') {
                            borrar(idfeste); borrar(idfesteencima);
                        } else if (accionhice == 'moverkekomove') {
                            if (elementExists(document.getElementById(idfeste))) {
                                var edgojs = document.getElementById(idfeste);
                                var mabdanum = fas(edgojs.getAttribute('data-y'), edgojs.getAttribute('data-x'), rowsya.posiciony, rowsya.posicionx);
                                if (mabdanum > 0) {

                                    var enqueveztrz = 1;
                                    if (modonolag == 'n') {
                                        switch (mabdanum) {
                                            case 1:
                                            case 2:
                                                enqueveztrz = 340;
                                                break;
                                            case 7:
                                                enqueveztrz = 200;
                                                break;
                                        }
                                    }
                                    //consola.log('enqueveztrz',enqueveztrz);

                                    //edgojs.style.backgroundColor='';
                                    //if(edgojs.className!='sintranszindex'){

                                    if (rowsya.primero) {
                                        //console.log('esprimero');
                                        var cboxesffcatscripts = kkallaki.querySelectorAll('[data-box="' + edgojs.getAttribute('data-y') + 'c' + edgojs.getAttribute('data-x') + '"]:not([data-idp="' + ffursidp[edgojs.getAttribute('data-y') + 'c' + edgojs.getAttribute('data-x')] + '"])'),
                                            akiestakeko = kkallakik.querySelector('[data-box="' + edgojs.getAttribute('data-y') + 'c' + edgojs.getAttribute('data-x') + '"]'),
                                            iffccatscris = cboxesffcatscripts.length;
                                        if (iffccatscris > 0) {

                                            //lolposixzeEE.ezindex-=8;
                                            //enxasoo.style.zIndex=lolposixzeANTES.ezindex;
                                            //enxasoo.style.left=lolposixzeANTES.eleft;
                                            //enxasoo.style.top=lolposixzeANTES.etop;
                                            var lolposixzeANTES = trompaoz(edgojs.getAttribute('data-y'), edgojs.getAttribute('data-x'), 'f');
                                            var lolposixzeAHORA = trompaoz(rowsya.posiciony, rowsya.posicionx, 'f');
                                            var lolposixzeAHORAkeko = trompaoz(rowsya.posiciony, rowsya.posicionx, 't');
                                            lolposixzeAHORAkeko.ezindex++;

                                            if (elementExists(akiestakeko)) {
                                                if (akiestakeko.getAttribute('data-idkek') == yasoid) {
                                                    //mresulta=[];
                                                    //if(sisigotimeout){
                                                    //window.clearTimeout(sisigotimeout);//sisigotimeout='';
                                                    //}
                                                    ky = rowsya.posiciony;
                                                    kx = rowsya.posicionx;
                                                }
                                                akiestakeko.setAttribute('data-y', rowsya.posiciony);
                                                akiestakeko.setAttribute('data-x', rowsya.posicionx);
                                                //if(enqueveztrz==1){
                                                //akiestakeko.className='transzindex';
                                                //}else{
                                                //akiestakeko.className='sintranszindex';
                                                //}
                                                akiestakeko.setAttribute('data-box', rowsya.posiciony + 'c' + rowsya.posicionx);
                                                if ((lolposixzeAHORA.ezindex - lolposixzeANTES.ezindex) > 0)
                                                    akiestakeko.style.zIndex = lolposixzeAHORAkeko.ezindex;
                                                else {
                                                    window.setTimeout(muevekatrixzindex, 800, akiestakeko, lolposixzeAHORAkeko.ezindex);
                                                }
                                                akiestakeko.style.left = (parseInt(akiestakeko.style.left) + (lolposixzeAHORA.eleft - lolposixzeANTES.eleft)) + 'px';
                                                akiestakeko.style.top = (parseInt(akiestakeko.style.top) + (lolposixzeAHORA.etop - lolposixzeANTES.etop)) + 'px';
                                            }
                                            while (iffccatscris--) {
                                                if (cboxesffcatscripts[iffccatscris]) {
                                                    //console.log('cambio',cboxesffcatscripts[iffccatscris].getAttribute('data-idp'),' ',(lolposixzeANTES.ezindex-lolposixzeAHORA.ezindex));

                                                    if (enqueveztrz == 1) {
                                                        cboxesffcatscripts[iffccatscris].className = 'transzindex';
                                                    } else {
                                                        cboxesffcatscripts[iffccatscris].className = 'sintranszindex';
                                                    }
                                                    cboxesffcatscripts[iffccatscris].style.zIndex = (parseInt(cboxesffcatscripts[iffccatscris].style.zIndex) + (lolposixzeAHORA.ezindex - lolposixzeANTES.ezindex));
                                                    cboxesffcatscripts[iffccatscris].style.left = (parseInt(cboxesffcatscripts[iffccatscris].style.left) + (lolposixzeAHORA.eleft - lolposixzeANTES.eleft)) + 'px';
                                                    cboxesffcatscripts[iffccatscris].style.top = (parseInt(cboxesffcatscripts[iffccatscris].style.top) + (lolposixzeAHORA.etop - lolposixzeANTES.etop)) + 'px';

                                                }
                                            }
                                        }
                                    }
                                    //}
                                }
                            }
                            if (elementExists(document.getElementById(idfesteencima))) {
                                document.getElementById(idfesteencima).className = 'pelo';
                            }
                            //console.log('moverkekomove');

                        }
                        //if(enboxstaba && ffursip[enboxstaba]){
                        ////////consola.log(('clickadoidp'+ffursidp[enboxstaba]);
                        //clickado(ffursidp[enboxstaba],'idp');
                        //}
                        //
                        //}
                        //regal678
                        var datosyap = '';
                        var datosye = [];
                        if (rowsya.datosya) {
                            datosyap = rowsya.datosya;
                            datosye = datosyap.split(':');
                        }


                        if (rowsya.tengofyaidpcuatro == 'cerberusbox') {

                            //ffurscerv
                            if (rowsya.datosya) {
                                ffurscerv[rowsya.datosya] = rowsya.id;
                                ////consola.log('soy antena'+rowsya.datosya);
                            }
                        }
                        if (accionhice != 'recoger' && accionhice != 'recogerkekomove') {
                            var posixz = trompaoz(rowsya.posiciony, rowsya.posicionx, 'f');


                            if (rowsya.framefurni == 20002 || rowsya.framefurni == 20001 || rowsya.framefurni == 300000 || rowsya.framefurni == 300001) {
                                ////////consola.log(('dimemascota'+rowsya.id);
                                katman('dimemascota', rowsya.id, rowsya.posiciony, rowsya.posicionx, ployy, ploxx);
                            }

                            var formatoya = '.' + rowsya.formato; if (rowsya.imagenfurni == 2) formatoya = '.png';

                            var formatoyaencima = 'encima.' + rowsya.formato;
                            if (rowsya.imagenencima == 2) formatoyaencima = 'encima.png';

                            if (accionhice == 'animar') {
                                //
                                //////consola.log('rowsya.nombre '+rowsya.nombre+' framefurni'+rowsya.framefurni);
                                switch (rowsya.nombre) {
                                    case 1009://es un dado magico
                                        formatoya = 'anim.gif';

                                        window.setTimeout(desanimo, 2200, 'idf' + rowsya.id, '');
                                        break;
                                    case 343://es una puerta
                                        if (rowsya.framefurni != 1003) {
                                            formatoya = 'anim.gif';
                                            window.setTimeout(desanimo, 2200, 'idf' + rowsya.id, '');
                                            //////consola.log(dominiobase+'fly/i/fursv5/'+rowsya.nombre+'/'+rowsya.framefurni+formatoya);
                                        }
                                        break;
                                    case 1350://es una JACUZZI
                                        formatoya = 'animjacu.gif';
                                        formatoyaencima = 'anim.gif';
                                        window.setTimeout(desanimo, 1500, 'idf' + rowsya.id, '');
                                        window.setTimeout(desanimo, 1500, 'idencf' + rowsya.id, 'encima');
                                        //window.setTimeout(desanimo,1500,'idf'+rowsya.id,'');
                                        //window.setTimeout(desanimo,1500,'idencf'+rowsya.id,'encima');
                                        //////consola.log(dominiobase+'fly/i/fursv5/'+rowsya.nombre+'/'+rowsya.framefurni+formatoya);
                                        //////consola.log(dominiobase+'fly/i/fursv5/'+rowsya.nombre+'/'+rowsya.framefurni+formatoyaencima);
                                        break;
                                    case 1093://es una puerta cerberus
                                        formatoya = 'anim.gif';
                                        window.setTimeout(desanimo, 1500, 'idf' + rowsya.id, '');
                                        break;
                                    case 794://es un foco
                                        formatoyaencima = 'anim.gif';

                                        window.setTimeout(desanimo, 1500, 'idencf' + rowsya.id, 'encima');
                                        //window.setTimeout(desanimo,1500,'idencf'+rowsya.id,'encima');
                                        break;
                                }
                                //formatoya = 'anim.gif';window.setTimeout(desanimo,2200,'idf'+rowsya.id);//es un dado animando

                            }


                            var boxahora = rowsya.posiciony + 'c' + rowsya.posicionx;

                            var sobreidpestamj = ffursidp[boxahora];
                            if (!sobreidpestamj) sobreidpestamj = '';
                            var sumetrz = 'n';
                            //
                            var mirosiesmesaesto = 0;
                            if (rowsya.tengofyaidptres)
                                mirosiesmesaesto = rowsya.tengofyaidptres.replace('mesa', '');
                            //
                            //
                            if (mirosiesmesaesto > 1) {
                                //posixz.ezindex++;posixz.ezindex++;sumetrz='s';
                                ffursidpt['f' + rowsya.id] = rowsya.tengofyaidptres;
                            }
                            mirosiesmesaesto = 0;


                            var alturacuadro = ffursencmaltur[boxahora];
                            if (alturacuadro > 0) posixz.etop -= alturacuadro;

                            if (rowsya.framefurni == 4010467) {//es cuadro negro difuminado zonas
                                posixz.ezindex += 6;

                            } else if (mirosiesmesaesto <= 1 && sobreidpestamj == '' && rowsya.accion == 'anim' || mirosiesmesaesto <= 1 && sobreidpestamj == '' && rowsya.accion == '' || mirosiesmesaesto <= 1 && sobreidpestamj == '' && rowsya.accion == 'nada') {
                                posixz.ezindex -= 10;//es una alfombra o agua
                            } else if (rowsya.tengofyaidpcuatro > 0) {
                                posixz.ezindex++;
                            } else if (alturacuadro > 3) {
                                posixz.ezindex++;
                            }
                            //if(ffursencmaltur[boxahora]){
                            //posixz.etop-=alturacuadro;ffursencmaltur[boxahora];
                            //if(sumetrz=='n' && ffursencmaltur[boxahora]>=1){
                            //posixz.ezindex++;posixz.ezindex++;sumetrz='s';
                            //}
                            //}
                            //if(sumetrz=='n' &&rowsya.altura>0){
                            //posixz.ezindex++;posixz.ezindex++;sumetrz='s';
                            //}
                            //
                            ////
                            ////si es mas grande que una casilla
                            //if(rowsya.tengofyaidpcuatro > 0 && sumetrz == 'n'){
                            //posixz.ezindex++;sumetrz='s';
                            //if(rowsya.accion == 'stop')posixz.ezindex++;
                            //}
                            //if(rowsya.tengofyaidpcuatro > 0)
                            //ffursidpc['f'+rowsya.id]=rowsya.tengofyaidpcuatro;
                            //
                            //if(sumetrz=='n' && rowsya.altura>1){
                            //posixz.ezindex++;sumetrz='s';
                            //}
                            if (rowsya.tengofyaidptres) {
                                var frid = 'f' + rowsya.id;
                                if (ffursidpt.indexOf(frid) == -1)
                                    ffursidpt.push(frid);
                            }
                            posixz.eleft += rowsya.pxleft;
                            posixz.etop += rowsya.pxtop;
                            if (rowsya.altura > 0)
                                posixz.etop -= rowsya.altura;

                            var profencima = posixz.ezindex + 2;
                            var lopongoenpos = 'kekoallaki';
                            var mirobox, lopongoen;
                            //if(sobreidpestamj=='' || sobreidpestamj == rowsya.id){
                            //inicio miro donde ponerlo primer intento
                            //'[data-idp="'+sobreidpestamj+'"]'
                            switch (rowsya.tengofyaidpcuatro) {
                                case '2.0':
                                    mirobox = (parseInt(rowsya.posiciony) + 1) + 'c' + (parseInt(rowsya.posicionx) + 1);
                                    lopongoenpos = 'despues';
                                    break;
                                case '0.2':
                                    mirobox = (parseInt(rowsya.posiciony) - 1) + 'c' + (parseInt(rowsya.posicionx) - 1);
                                    lopongoenpos = 'despues';
                                    break;
                                case '2.2':
                                    lopongoenpos = 'kekoallaki';
                                    break;
                                default:
                                    mirobox = (parseInt(rowsya.posiciony) - 1) + 'c' + (parseInt(rowsya.posicionx) - 1);
                                    lopongoenpos = 'antes';
                                    break;
                            }

                            ////////consola.log(('rowsya.tengofyaidpcuatro'+rowsya.tengofyaidpcuatro+' lopongoenpos'+lopongoenpos);
                            if (lopongoenpos != 'kekoallaki') {
                                if (kkallaki.querySelector('[data-box="' + mirobox + '"]')) {
                                    lopongoen = kkallaki.querySelector('[data-box="' + mirobox + '"]');
                                } else {//no lo encontre miro segundo intento
                                    lopongoenpos = 'kekoallaki';

                                    switch (rowsya.tengofyaidpcuatro) {
                                        case '2.0':
                                            mirobox = (parseInt(rowsya.posiciony) - 1) + 'c' + (parseInt(rowsya.posicionx) - 1);
                                            lopongoenpos = 'antes';
                                            break;
                                        case '0.2':
                                            mirobox = (parseInt(rowsya.posiciony) - 1) + 'c' + (parseInt(rowsya.posicionx) - 1);
                                            lopongoenpos = 'despues';
                                            break;
                                        case '2.2':
                                            lopongoenpos = 'kekoallaki';
                                            break;
                                        default:
                                            mirobox = (parseInt(rowsya.posiciony) + 1) + 'c' + (parseInt(rowsya.posicionx) + 1);
                                            lopongoenpos = 'despues';
                                            break;
                                    }
                                    if (lopongoenpos != 'kekoallaki') {
                                        if (kkallaki.querySelector('[data-box="' + mirobox + '"]')) {
                                            lopongoen = kkallaki.querySelector('[data-box="' + mirobox + '"]');
                                        } else {
                                            lopongoenpos = 'kekoallaki';
                                        }
                                    }
                                }
                            }
                            if (lopongoenpos != 'kekoallaki' && sobreidpestamj != '' && sobreidpestamj != rowsya.id) {//aki habia algo encima
                                if (kkallaki.querySelector('[data-idp="' + sobreidpestamj + '"]')) {
                                    lopongoen = kkallaki.querySelector('[data-idp="' + sobreidpestamj + '"]');
                                    if (lopongoenpos == 'despues') lopongoenpos = 'antes';
                                    //else lopongoenpos='despues';
                                } else {
                                    lopongoenpos = 'kekoallaki';
                                }
                            }
                            //fin miro donde ponerlo primer intento

                            //}

                            //}
                            ////////consola.log((rowsya.posiciony+'c'+rowsya.posicionx+' idpc'+rowsya.tengofyaidpcuatro+'lopongoenpos'+lopongoenpos);

                            var urlyafur = dominiobase + 'fly/i/fursv5/' + rowsya.nombre + '/' + rowsya.framefurni + formatoya;
                            var urlyafurenc = dominiobase + 'fly/i/fursv5/' + rowsya.nombre + '/' + rowsya.framefurni + formatoyaencima;

                            //var urlyafur = 'maskeko/newfurniseditor/'+rowsya.framefurni+formatoya;
                            //var urlyafurenc = 'maskeko/newfurniseditor/'+rowsya.framefurni+formatoyaencima;

                            if (rowsya.nombre == '1440') {//nomid porteria
                                posixz.ezindex -= 2;
                            }
                            var yaestabaidf = 'si';
                            if (rowsya.imagenfurni == 1 || rowsya.imagenfurni == 2 || rowsya.imagenfurni == 3) {
                                if (!document.getElementById(idfeste)) {
                                    yaestabaidf = 'no';
                                    var nuevaimagenfur = document.createElement('img');
                                    nuevaimagenfur.id = idfeste;
                                } else {
                                    var nuevaimagenfur = document.getElementById(idfeste);
                                }

                                //if(rowsya.imagenfurni == 3){
                                //nuevaimagenfur.className='novisible';
                                //}


                                if (accionhice != 'moverkekomove') {
                                    nuevaimagenfur.style.left = posixz.eleft + 'px';
                                    nuevaimagenfur.style.top = posixz.etop + 'px';
                                    //nuevaimagenfur.setAttribute('draggable',false);
                                    nuevaimagenfur.style.zIndex = posixz.ezindex;
                                }
                                //es jacuzzi
                                if (rowsya.nombre == 1350 || yapusedatasfurn == 'n' && rowsya.imagenencima != 1 && rowsya.imagenencima != 2) {
                                    yapusedatasfurn = 's';
                                    //si cambia cambiar abajo en else if(yaestabaidf=='si' && nuevaimagenfur.getAttribute('data-furn') == 'si'){
                                    nuevaimagenfur.setAttribute('data-furn', 'si');
                                    nuevaimagenfur.setAttribute('data-icas', rowsya.idcasa);
                                    nuevaimagenfur.setAttribute('data-y', rowsya.posiciony);
                                    nuevaimagenfur.setAttribute('data-x', rowsya.posicionx);
                                    nuevaimagenfur.setAttribute('data-a', rowsya.accion);
                                    nuevaimagenfur.setAttribute('data-nomid', rowsya.nombre);
                                    nuevaimagenfur.setAttribute('data-idp', rowsya.id);
                                    nuevaimagenfur.setAttribute('data-anim', rowsya.animar);
                                    nuevaimagenfur.setAttribute('data-gir', rowsya.girar);
                                    nuevaimagenfur.setAttribute('data-nom', rowsya.nombre);
                                    nuevaimagenfur.setAttribute('data-des', rowsya.descripcion);
                                    nuevaimagenfur.setAttribute('data-alt', rowsya.altura);
                                    nuevaimagenfur.setAttribute('data-idf', rowsya.framefurni);
                                    nuevaimagenfur.setAttribute('data-box', boxahora);
                                    nuevaimagenfur.setAttribute('data-idpt', rowsya.tengofyaidptres);
                                    nuevaimagenfur.setAttribute('data-idpc', rowsya.tengofyaidpcuatro);
                                    nuevaimagenfur.setAttribute('data-f', rowsya.formato);
                                    nuevaimagenfur.setAttribute('data-ienc', rowsya.imagenencima);
                                    nuevaimagenfur.setAttribute('data-ifur', rowsya.imagenfurni);
                                    nuevaimagenfur.setAttribute('data-pxtop', rowsya.pxtop);
                                    nuevaimagenfur.setAttribute('data-pxleft', rowsya.pxleft);
                                    nuevaimagenfur.setAttribute('data-so', sobreidpestamj);
                                    //nuevaimagenfur.ondblclick = function(evt){
                                    //clickefurni(evt,this);
                                    //};
                                } else if (yaestabaidf == 'si' && elementExists(nuevaimagenfur) && nuevaimagenfur.getAttribute('data-furn') == 'si') {
                                    //ya tenia datos de furn y hay imagen encima en esta capa borro datos de furn
                                    if (rowsya.imagenencima == 1 || rowsya.imagenencima == 2) {

                                        nuevaimagenfur.removeAttribute('data-furn');
                                        nuevaimagenfur.removeAttribute('data-y');
                                        nuevaimagenfur.removeAttribute('data-x');
                                        nuevaimagenfur.removeAttribute('data-a');
                                        nuevaimagenfur.removeAttribute('data-nomid');
                                        nuevaimagenfur.removeAttribute('data-idp');
                                        nuevaimagenfur.removeAttribute('data-anim');
                                        nuevaimagenfur.removeAttribute('data-gir');
                                        nuevaimagenfur.removeAttribute('data-nom');
                                        nuevaimagenfur.removeAttribute('data-des');
                                        nuevaimagenfur.removeAttribute('data-alt');
                                        nuevaimagenfur.removeAttribute('data-idf');
                                        nuevaimagenfur.removeAttribute('data-box');
                                        nuevaimagenfur.removeAttribute('data-idpt');
                                        nuevaimagenfur.removeAttribute('data-idpc');
                                        nuevaimagenfur.removeAttribute('data-f');
                                        nuevaimagenfur.removeAttribute('data-ienc');
                                        nuevaimagenfur.removeAttribute('data-ifur');
                                        nuevaimagenfur.removeAttribute('data-pxtop');
                                        nuevaimagenfur.removeAttribute('data-pxleft');
                                        nuevaimagenfur.removeAttribute('data-so');
                                    }

                                }

                                //regal678datosye

                                if (rowsya.framefurni == '400083') {
                                    nuevaimagenfur.className = 'pelo';//es pelota de futbol
                                }
                                if (rowsya.framefurni == '678') {//regalo
                                    urlyafur = dominiobase + 'maskeko/newfurnis/ass/fon' + datosye[1] + '.png';
                                }
                                nuevaimagenfur.src = urlyafur;

                                if (yaestabaidf == 'no') {

                                    switch (lopongoenpos) {
                                        case 'kekoallaki':
                                            kkallaki.appendChild(nuevaimagenfur);
                                            break;
                                        case 'antes':
                                            kkallaki.insertBefore(nuevaimagenfur, lopongoen.nextSibling);
                                            break;
                                        case 'despues':
                                            kkallaki.insertBefore(nuevaimagenfur, lopongoen);
                                            break;
                                    }
                                }
                            }

                            var yaestabaidfencima = 'si';
                            if (rowsya.imagenencima == 1 || rowsya.imagenencima == 2) {
                                if (rowsya.framefurni == '400150' || rowsya.framefurni == '400149') {
                                    //cronometro marcador
                                    borrar(idfesteencima);
                                }
                                if (!document.getElementById(idfesteencima)) {
                                    yaestabaidfencima = 'no';

                                    if (rowsya.framefurni == '400150' || rowsya.framefurni == '400149') {
                                        var nuevaimagenfurenc = document.createElement('div');
                                    } else {
                                        var nuevaimagenfurenc = document.createElement('img');

                                    }
                                    nuevaimagenfurenc.id = idfesteencima;
                                } else {
                                    var nuevaimagenfurenc = document.getElementById(idfesteencima);
                                }
                                if (rowsya.framefurni == '678') {//regalo
                                    profencima = posixz.ezindex;
                                    nuevaimagenfurenc.style.background = 'url(' + dominiobase + 'maskeko/newfurnis/ass/laz' + datosye[0] + '.png)';
                                    urlyafurenc = dominiobase + 'maskeko/newfurnis/ass/arri' + datosye[2] + '.png';
                                }


                                if (rowsya.framefurni == '400063' || rowsya.framefurni == '4019398') {//ruleta
                                    profencima++; profencima++;
                                }
                                if (rowsya.nombre == '1440') {//nomid porteria
                                    profencima += 6;
                                }
                                if (accionhice != 'moverkekomove') {
                                    nuevaimagenfurenc.style.left = posixz.eleft + 'px';
                                    nuevaimagenfurenc.style.top = posixz.etop + 'px';
                                    nuevaimagenfurenc.style.zIndex = profencima;
                                }
                                if (rowsya.nombre == 1350 || yapusedatasfurn == 'n') {
                                    yapusedatasfurn = 's';
                                    nuevaimagenfurenc.setAttribute('data-furn', 'si');
                                    nuevaimagenfurenc.setAttribute('data-icas', rowsya.idcasa);
                                    //nuevaimagenfurenc.setAttribute('draggable',false);
                                    nuevaimagenfurenc.setAttribute('data-y', rowsya.posiciony);
                                    nuevaimagenfurenc.setAttribute('data-x', rowsya.posicionx);
                                    nuevaimagenfurenc.setAttribute('data-a', rowsya.accion);
                                    nuevaimagenfurenc.setAttribute('data-nomid', rowsya.nombre);
                                    nuevaimagenfurenc.setAttribute('data-idp', rowsya.id);
                                    nuevaimagenfurenc.setAttribute('data-anim', rowsya.animar);
                                    nuevaimagenfurenc.setAttribute('data-gir', rowsya.girar);
                                    nuevaimagenfurenc.setAttribute('data-nom', rowsya.nombre);
                                    nuevaimagenfurenc.setAttribute('data-des', rowsya.descripcion);
                                    nuevaimagenfurenc.setAttribute('data-alt', rowsya.altura);
                                    nuevaimagenfurenc.setAttribute('data-idf', rowsya.framefurni);
                                    nuevaimagenfurenc.setAttribute('data-box', boxahora);
                                    nuevaimagenfurenc.setAttribute('data-idpt', rowsya.tengofyaidptres);
                                    nuevaimagenfurenc.setAttribute('data-idpc', rowsya.tengofyaidpcuatro);
                                    nuevaimagenfurenc.setAttribute('data-f', rowsya.formato);
                                    nuevaimagenfurenc.setAttribute('data-ienc', rowsya.imagenencima);
                                    nuevaimagenfurenc.setAttribute('data-ifur', rowsya.imagenfurni);
                                    nuevaimagenfurenc.setAttribute('data-pxtop', rowsya.pxtop);
                                    nuevaimagenfurenc.setAttribute('data-pxleft', rowsya.pxleft);
                                    nuevaimagenfurenc.setAttribute('data-so', sobreidpestamj);
                                }
                                //if(rowsya.animar>0 && rowsya.animar != rowsya.framefurni){
                                //nuevaimagenfurenc.ondblclick = function(evt){
                                ////clickefurni(evt,this);
                                //};

                                if (rowsya.framefurni == '400150' || rowsya.framefurni == '400149') {
                                    //cronometro marcador
                                    //$.getScript("todoincs/funcop.php?op=crono&idp="+idprivada+'&idf='+idfotograma);
                                    kajax({
                                        data: 'op=crono&idp=' + rowsya.id + '&idf=' + rowsya.framefurni + '&mikeka=' + yasoid + '&idi=' + idila,
                                        url: 'todoincs/funcop.php',
                                        type: 'get',
                                        success: function (response) {
                                            eval(response);
                                        }
                                    });

                                } else {

                                    nuevaimagenfurenc.src = urlyafurenc;
                                }
                                if (yaestabaidfencima == 'no') {

                                    switch (lopongoenpos) {
                                        case 'kekoallaki':
                                            kkallaki.appendChild(nuevaimagenfurenc);
                                            break;
                                        case 'antes':
                                            kkallaki.insertBefore(nuevaimagenfurenc, lopongoen.nextSibling);
                                            break;
                                        case 'despues':
                                            kkallaki.insertBefore(nuevaimagenfurenc, lopongoen);
                                            break;
                                    }
                                }
                            }

                            if (accionhice != 'suelto') {
                                if (yaestabaidfencima == 'si' && rowsya.imagenencima != 1 && rowsya.imagenencima != 2) {
                                    borrar(idfesteencima);
                                }
                                if (yaestabaidf == 'si' && rowsya.imagenfurni != 1 && rowsya.imagenfurni != 2 && rowsya.imagenfurni != 3) {
                                    borrar(idfeste);
                                }
                            }


                            ffurscass['f' + rowsya.id] = boxahora;
                            agregoinfofurni(rowsya.id, accionhice);

                            if (rowsya.imagenfurni == 3) {
                                borrar(idfeste);//OJOAKi
                            }

                            if (accionhice == 'mover' || accionhice == 'moverygira') {
                                if (rowsya.id == ultimoidpmuevocontrolmia && harecontrolmia == 'no') {
                                    // //consola.log('es el ultimo que movi');
                                    ultimoidpmuevocontrolmia = 0;
                                    window.setTimeout(controlmia, 10);
                                }
                            }
                        }
                    }
                };

                onsocks['accionarv3todosya'] = function (accionhice, rowsyatot) {

                    for (var esssa = 0; esssa < rowsyatot.length; esssa++) {
                        onsocks['accionarv3ya'](accionhice, rowsyatot[esssa]);
                    }
                },
                    kateko('telis', function (desdeidp, idp) {//voy a la idp teleport
                        katman('animasolo', desdeidp);

                        ////////
                        //////consola.log('telis');
                        if (ffurscass['f' + idp]) {
                            var teliyx = ffurscass['f' + idp].split('c', 2);
                            ky = teliyx[0];
                            kx = teliyx[1];
                            ////consola.log('TELIS-->telistranspar A '+teliyx[0]+'c'+teliyx[1]);
                            katman('animasolo', idp);
                            katman('telistranspar');
                            if (sisigotimeout) {
                                window.clearTimeout(sisigotimeout);
                            }
                            if (movigoyainter) {
                                window.clearInterval(movigoyainter);
                            }
                            mresulta = [];
                            mresulta[0] = { 'cmia': 'siteleport', 'y': kx, 'x': ky };
                            movigoyainter = window.setInterval(movigoyas, 360);
                            setTimeout(posiciono, 1000);
                        } else {
                            bowb = 'no';
                            ////consola.log('TELIS-->TELEPORTYA A '+idp);

                            teleidp = idp; // AGREGADO, LUEGO DE DESFASAR 'TELEPORTAYA'
                            //katman('teleportya',idp);
                        }
                    });

                /*
                    Teleportaya NO SE USAR√Å YA.
                */

                kateko('teleportaya', function (desdeidp, idcasa, posy, posx) {//voy a la idp teleport

                    if (idcasa >= 50) {
                        ////
                        ////consola.log('donve idcasa'+idcasa);
                        teleidp = desdeidp;
                        if (!isNaN(idcasa) && idcasa >= 1)
                            katman('donve', idcasa, 'wi');
                    }
                });
                onsocks['pakickeado'] = function (idcasa) {//me han kickeado voy a la casa que dice

                    //consola.log('mehankickeado voyaidcasa'+idcasa);
                    //window.location='/#

                    if (idcasa && !isNaN(idcasa) && idcasa >= 1) {

                        //console.log('pakickeado');
                        //bowb='si';
                        //window.setTimeout(quitobowb, 1500);
                        //if(sisigotimeout){
                        //window.clearTimeout(sisigotimeout);
                        //}
                        //if(movigoyainter)
                        //window.clearInterval(movigoyainter);
                        //mresulta=[];
                        location.hash = '#/h/' + idcasa;
                        //katman('donve',idcasa,'transpa');
                    }
                };

                kateko('telistransparya', function (kkida) {//voy a la idp teleport
                    var conkkkida = 'k' + kkida;
                    //////////consola.log(('telistransparya'+conkkkida);
                    if (document.getElementById(conkkkida)) {
                        document.getElementById(conkkkida).style.display = 'none';
                        window.setTimeout((function (kkidas, sink) {
                            return function () {
                                if (document.getElementById(kkidas))
                                    document.getElementById(kkidas).style.display = 'inline';
                                if (sink == yasoid) {
                                    bowb = 'no';
                                }
                            }
                        })(conkkkida, kkida), 500);
                    }
                }); kateko('animasoloya', function (idpanimar) {//voy a la idp teleport
                    //////////

                    ////////consola.log('animasoloya'+idpanimar);
                    var idestoyanim = 'idf' + idpanimar;
                    var quesoy = '';

                    var imagenfurn_animdat = kkallaki.querySelector('[data-idp="' + idpanimar + '"][data-furn]');
                    var imagenffurn_anim = document.getElementById(idestoyanim);
                    if (!elementExists(imagenffurn_anim)) {
                        idestoyanim = 'idencf' + idpanimar; quesoy = 'encima';
                        imagenffurn_anim = document.getElementById(idestoyanim);
                    }
                    var tiempoanimatronic = 1000;
                    if (imagenffurn_anim) {
                        var animalogi = 'no';
                        if (imagenfurn_animdat.getAttribute('data-f') == 'gif') {
                            animalogi = 'si';
                            tiempoanimatronic = 1000;
                        } else {
                            switch (imagenfurn_animdat.getAttribute('data-idf')) {
                                case '400029':
                                case '400030':
                                case '400031':
                                case '400032'://si sonestos idf es un kekomove
                                    animalogi = 'si';
                                    tiempoanimatronic = 1000;
                                    break;
                                default:
                                    //excepciones de animacion si son estos nomid
                                    switch (imagenfurn_animdat.getAttribute('data-nomid')) {
                                        case '1347':
                                        case '2109'://alfombra pisable
                                        case '1910'://alfombra pisable2
                                        case '1745'://teleport vip
                                            animalogi = 'si';
                                            tiempoanimatronic = 1000;
                                            break;
                                    }
                            }
                        }

                        if (animalogi == 'si') {
                            ////consola.log('src'+idestoyanim+' === fly/i/fursv5/'+imagenffurn_anim.getAttribute('data-nomid')+'/'+imagenffurn_anim.getAttribute('data-idf')+'anim.gif');
                            imagenffurn_anim.src = dominiobase + 'fly/i/fursv5/' + imagenfurn_animdat.getAttribute('data-nomid') + '/' + imagenfurn_animdat.getAttribute('data-idf') + 'anim.gif';
                            //window.setTimeout((function(idestoyanima){return function(){
                            //desanimo(idestoyanima)
                            //}})(idestoyanim) , 1000);

                            window.setTimeout(desanimo, tiempoanimatronic, idestoyanim, quesoy);
                        }
                    }
                });
                kateko('cambadd', function (data) {
                    var qioeen = 'el';
                    if (data.idkeko == yasoid) {
                        qioeen = 'yo';
                        var sitaaaMOCHILA = document.getElementById('akimoc').querySelector('[data-nomid="' + data.nomgro + '"]');
                        document.getElementById('mocua' + sitaaaMOCHILA.getAttribute('data-nomid')).innerText = parseInt(document.getElementById('mocua' + sitaaaMOCHILA.getAttribute('data-nomid')).innerText) - 1;
                        if (parseInt(document.getElementById('mocua' + sitaaaMOCHILA.getAttribute('data-nomid')).innerText) <= 0) {
                            document.getElementById('mocua' + sitaaaMOCHILA.getAttribute('data-nomid')).innerText = '0';
                            document.getElementById('mochi' + sitaaaMOCHILA.getAttribute('data-nomid')).classList.add('novisible')
                        }
                    }
                    if (document.getElementById('myCam')) {
                        var sitaaa = document.getElementById('myCam').querySelector('[data-nomgro="' + data.nomgro + '"][data-pos="' + qioeen + '"]');
                        if (!sitaaa) {
                            sitaaa = document.getElementById('myCam').querySelector('[data-nomgro=""][data-pos="' + qioeen + '"]');
                        }

                        if (sitaaa) {
                            sitaaa.setAttribute("data-mifram", data.id);
                            sitaaa.setAttribute("data-nomgro", data.nomgro);
                            var cunann = sitaaa.getAttribute("data-cuanta");
                            cunann = parseInt(cunann);
                            cunann++;
                            sitaaa.setAttribute("data-cuanta", cunann);
                            sitaaa.querySelector('span').innerHTML = cunann;
                            sitaaa.querySelector('span').style.display = 'inline';
                            sitaaa.style.background = "url('" + dominiobase + "fly/i/fursv5/" + data.nomgro + "/" + data.id + "mini.png') no-repeat";
                            sitaaa.style.backgroundColor = "#E2E2E2";
                            sitaaa.style.backgroundPosition = "center";
                        }
                    }


                }); kateko('quitabdyaf', function (data) {//quito furni del trade
                    var qioeen = 'el';
                    if (data.idkeko == yasoid) {
                        qioeen = 'yo';
                    }
                    ////consola.log('quitabdyaf  [data-nomgro="'+data.nomgro+'"][data-pos="'+qioeen+'"]');

                    if (document.getElementById('myCam')) {
                        var sitaaa = document.getElementById('myCam').querySelector('[data-nomgro="' + data.nomgro + '"][data-pos="' + qioeen + '"]');

                        if (sitaaa) {
                            //sitaaa.setAttribute("data-nomgro",data.nomgro);
                            sitaaa.setAttribute("data-nomid", data.nomgro);
                            if (qioeen == 'yo') {
                                var addmocammmm = anadeamoc(sitaaa, 1, 'agregodcambio');
                            }
                            var cunann = sitaaa.getAttribute("data-cuanta");
                            cunann = parseInt(cunann);
                            cunann--;
                            sitaaa.setAttribute("data-cuanta", cunann);
                            sitaaa.querySelector('span').innerHTML = cunann;
                            if (cunann <= 0) {
                                sitaaa.setAttribute("data-nomgro", '');
                                sitaaa.setAttribute("data-nomid", '');
                                sitaaa.setAttribute("data-mifram", '');
                                sitaaa.querySelector('span').style.display = 'none';
                                sitaaa.style.background = "";
                                sitaaa.style.backgroundColor = "";
                                sitaaa.style.backgroundPosition = "";
                            }
                        }
                    }


                }); kateko('okamcam', function (data) {

                    ////consola.log('okamcam '+data.na);
                    if (document.getElementById('myCam')) {
                        if (data.na == 'si') {
                            document.getElementById('aceptelcam').innerHTML = iw[353];
                        } else {
                            document.getElementById('aceptelcam').innerHTML = iw[354];

                            if (document.getElementById('aceptyocam')) {
                                document.getElementById('aceptyocam').innerHTML = iw[355];//nolang
                            }
                        }
                    }

                }); kateko('okcambloc', function (data) {

                    ////consola.log('okcambloc '+data.na);

                    if (data.na == 'si') {
                        document.getElementById('aceptelcam').style.display = 'none';
                        document.getElementById('aceptyocam').style.display = 'none';
                        document.getElementById('acepyastatu').style.paddingTop = '18px';
                        document.getElementById('acepyastatu').style.marginLeft = '-18px';
                        document.getElementById('acepyastatu').innerHTML = iw[356] + '<br>' +
                            '<span style="font-size:20px;" id="cuantoqueda">3</span> ' + iw[357] + ' <br>' +
                            '<button id="btncancela" class="btnwo">' + iw[358] + '</button>';

                        document.getElementById('btncancela').onclick = function () {
                            katman('cancmbi', { na: 'na' });
                            if (timeocam)
                                window.clearTimeout(timeocam);
                        };

                        window.setTimeout(function () {
                            if (document.getElementById('cuantoqueda'))
                                document.getElementById('cuantoqueda').innerHTML = 2;
                        }, 1000);
                        window.setTimeout(function () {
                            if (document.getElementById('cuantoqueda'))
                                document.getElementById('cuantoqueda').innerHTML = 1;
                        }, 2000);
                        window.setTimeout(function () {
                            if (document.getElementById('cuantoqueda'))
                                document.getElementById('cuantoqueda').innerHTML = 0;//aceptartrade
                        }, 3000);

                        window.clearTimeout(timeocam);

                        timeocam = window.setTimeout(aceptocam, 3000, 2);


                    }
                }); kateko('cancmbiya', function (data) {
                    borrar('myCam'); tradeando = 'n';
                    if (timeocam)
                        window.clearTimeout(timeocam);
                    if (document.getElementById('globomoc'))
                        borrar('globomoc');

                }); kateko('borramoc', function () {
                    if (document.getElementById('globomoc'))
                        borrar('globomoc');

                }); kateko('falturya', function (idpaltura, alturaahora) {
                    ////////

                    //////consola.log('falturya idp'+idpaltura+' alturaahora'+alturaahora);
                    if (elementExists(document.getElementById('idf' + idpaltura))) document.getElementById('idf' + idpaltura).setAttribute('data-alt', alturaahora);
                    if (elementExists(document.getElementById('idencf' + idpaltura))) document.getElementById('idencf' + idpaltura).setAttribute('data-alt', alturaahora);

                }); kateko('pixleftypixtopya', function (elques) {//da el pxtop y pxleft del girado al tener mueble clikado
                    //consola.log('datospx');

                    //////consola.log('pixleftypixtopya',elques)
                    if (document.getElementById('einfomovv')) {
                        document.getElementById('einfomovv').setAttribute('data-girpxleft', elques.pxleft);
                        document.getElementById('einfomovv').setAttribute('data-girpxtop', elques.pxtop);
                        //document.getElementById('einfomovv').style.marginLeft=elques.pxleft+'px';
                        //document.getElementById('einfomovv').style.marginTop=elques.pxtop+'px';
                    } if (document.getElementById('einfomovvencima')) {
                        document.getElementById('einfomovvencima').setAttribute('data-girpxleft', elques.pxleft);
                        document.getElementById('einfomovvencima').setAttribute('data-girpxtop', elques.pxtop);
                        //document.getElementById('einfomovvencima').style.marginLeft=elques.pxleft+'px';
                        //document.getElementById('einfomovvencima').style.marginTop=elques.pxtop+'px';
                    }
                });
                onsocks['parla'] = function (keid, khago) {

                    var edgojs = kkallakik.querySelector('#k' + keid);
                    if (elementExists(edgojs)) {
                        var clasesbase = edgojs.getAttribute('data-clas');
                        switch (khago) {
                            case 'habla':
                                edgojs.classList.add('habla');
                                break;
                            case 'n':
                                edgojs.classList.remove('habla');

                                break;
                            case 'quitostars':
                                edgojs.classList.remove('star1');
                                edgojs.classList.remove('star2');
                                edgojs.classList.remove('star3');
                                edgojs.classList.remove('star4');

                                break;
                            case 'star1':
                            case 'star2':
                            case 'star3':
                            case 'star4':
                                edgojs.classList.add(khago);
                                break;
                            case 'patear':
                            case 'besar':
                                edgojs.classList.add(khago);
                                break;
                            case 'mebesar':
                                edgojs.classList.remove('besar');
                                edgojs.classList.add(khago);
                                break;
                            case 'ntodo':
                                edgojs.classList.remove('patear');
                                edgojs.classList.remove('besar');
                                edgojs.classList.remove('mebesar');
                                edgojs.classList.remove('habla');
                                break;
                            case 'normal':
                            case 'caraoh':
                            case 'carajaja':
                            case 'caraay':
                            case 'caragrr':
                                edgojs.setAttribute('data-car', khago);
                                break;
                        }

                    }
                };

                onsocks['muevewowya'] = function (acciwow, idpwow, myawow, mxawow, kekoidpelo, mabdanum) {

                    var myanex = myawow,
                        mxanex = mxawow,
                        myanexera = myanex,
                        mxanexera = mxanex,
                        myanexrebote = myanex,
                        mxanexrebote = mxanex,
                        ekyasoid = yasoid,
                        akiporteria,
                        akimarcador,
                        akistaelzom,
                        accipelo,
                        akihayfurzom,
                        continuo = 's',
                        miycuadroyx = myanex + 'c' + mxanex,
                        eraultmabum = mabdanum,
                        cuantoscuadros = 1,
                        cuantroscuadroscheck = 1,
                        hayrebote = 'n',
                        essployy = ployy,
                        essploxx = ploxx,
                        hicecuadros = 0,
                        idfpelota = 0,
                        myanexdif = 0,
                        mxanexdif = 0,
                        myanexsim = 0,
                        mxanexsim = 0,
                        eraultmabumera = 0,
                        eraigualreb = 'n',
                        eracontinuo = 's',
                        numesparpa = 0;

                    switch (acciwow) {
                        case 'chutainverso':
                        case 'chuta':
                            cuantoscuadros = 5;
                            cuantroscuadroscheck = 9;
                            break;
                    }

                    //consola.log('-------------------------');
                    //consola.log('eraultmabum'+eraultmabum+' miycuadroyx'+miycuadroyx+'acciwow '+acciwow);
                    for (var cuadrosmuev = 0; cuadrosmuev < cuantroscuadroscheck; cuadrosmuev++) {

                        if (continuo == 's') {
                            hicecuadros++;
                            myanexera = myanex;
                            mxanexera = mxanex;
                            switch (eraultmabum) {
                                case 1:
                                    mxanex += 1;
                                    break;
                                case 2:
                                    myanex -= 1;
                                    break;
                                case 4:
                                    myanex += 1;
                                    break;
                                case 5:
                                    mxanex -= 1;
                                    break;
                                case 6:
                                    myanex -= 1;
                                    mxanex -= 1;
                                    break;
                                case 7:
                                    myanex -= 1;
                                    mxanex += 1;
                                    break;
                                case 8:
                                    myanex += 1;
                                    mxanex -= 1;
                                    break;
                                case 9:
                                    myanex += 1;
                                    mxanex += 1;
                                    break;
                            }
                            if (myanex > essployy || mxanex > essploxx || myanex <= 0 || mxanex < 0) {
                                continuo = 'rebote';
                            } else {
                                miycuadroyx = myanex + 'c' + mxanex;
                                akistaelzom = kkallakik.querySelector('[data-box="' + miycuadroyx + '"]:not([data-idkek="' + kekoidpelo + '"])');
                                if (akistaelzom) {
                                    numesparpa = akistaelzom.getAttribute('data-idkek');
                                    numesparpa = parseInt(numesparpa);
                                    numesparpa += eraultmabum;
                                    numesparpa += cuantoscuadros;
                                    numesparpa += myanex;
                                    numesparpa += myanexera;
                                    numesparpa += mxanex;
                                    numesparpa += mxanexera;
                                    if (numesparpa % 2 == 0) {
                                        akistaelzom = '';
                                    }
                                }
                                if (akistaelzom) {
                                    continuo = 'novoy';
                                } else if (ffurs.hasOwnProperty(miycuadroyx)) {
                                    akihayfurzom = ffurs[miycuadroyx];
                                    switch (akihayfurzom) {
                                        case '':
                                        case 'pu':
                                        case 'anim':
                                        case 'cesped':
                                            continuo = 's';
                                            break;
                                        case 'port':
                                            continuo = 'no';

                                            if (kekoidpelo == ekyasoid) {
                                                direcpam('Gol');//nolang

                                                akiporteria = kkallaki.querySelector('[data-a="port"]:not([data-idp="' + ffursidp[miycuadroyx] + '"])');
                                                if (elementExists(akiporteria)) {

                                                    //consola.log('[data-nomid="1462"][data-y="'+(parseInt(akiporteria.getAttribute('data-y')) + 3)+'"][data-x="'+akiporteria.getAttribute('data-x')+'"]');
                                                    //consola.log('[data-nomid="1462"][data-y="'+(parseInt(akiporteria.getAttribute('data-y')) + 3)+'"][data-x="'+akiporteria.getAttribute('data-x')+'"],[data-nomid="1462"][data-y="'+(parseInt(akiporteria.getAttribute('data-y')) - 1)+'"][data-x="'+akiporteria.getAttribute('data-x')+'"],[data-nomid="1462"][data-x="'+(parseInt(akiporteria.getAttribute('data-x')) + 3)+'"][data-y="'+akiporteria.getAttribute('data-y')+'"],[data-nomid="1462"][data-y="'+(parseInt(akiporteria.getAttribute('data-y')) - 1)+'"][data-x="'+akiporteria.getAttribute('data-x')+'"]');

                                                    akimarcador = kkallaki.querySelector('[data-nomid="1462"][data-y="' + (parseInt(akiporteria.getAttribute('data-y')) + 3) + '"][data-x="' + akiporteria.getAttribute('data-x') + '"],[data-nomid="1462"][data-y="' + (parseInt(akiporteria.getAttribute('data-y')) - 1) + '"][data-x="' + akiporteria.getAttribute('data-x') + '"],[data-nomid="1462"][data-y="' + akiporteria.getAttribute('data-y') + '"][data-x="' + (parseInt(akiporteria.getAttribute('data-x')) + 1) + '"],[data-nomid="1462"][data-y="' + akiporteria.getAttribute('data-y') + '"][data-x="' + (parseInt(akiporteria.getAttribute('data-x')) - 3) + '"]');
                                                    if (elementExists(akimarcador)) {
                                                        katman('accionarv3', 'animar', akimarcador.getAttribute('data-idp'), 1, 1, 1);
                                                    }
                                                }

                                                //kf.ledoyabail('uno');
                                                //window.setTimeout(function() {kf.ledoyabail('uno');},1000);
                                            }
                                            break;
                                        case 'cana':

                                            //consola.log('canasta hicecuadros'+hicecuadros);
                                            if (hicecuadros > 1) {
                                                continuo = 'novoy';

                                                if (kekoidpelo == ekyasoid) {
                                                    direcpam('Canasta');//nolang
                                                    accipelo = 'canas';

                                                    akiporteria = kkallaki.querySelector('[data-a="cana"]:not([data-idp="' + ffursidp[miycuadroyx] + '"])');
                                                    if (elementExists(akiporteria)) {

                                                        //consola.log('[data-nomid="1462"][data-y="'+(parseInt(akiporteria.getAttribute('data-y')) + 3)+'"][data-x="'+akiporteria.getAttribute('data-x')+'"]');
                                                        //consola.log('[data-nomid="1462"][data-y="'+(parseInt(akiporteria.getAttribute('data-y')) + 3)+'"][data-x="'+akiporteria.getAttribute('data-x')+'"],[data-nomid="1462"][data-y="'+(parseInt(akiporteria.getAttribute('data-y')) - 1)+'"][data-x="'+akiporteria.getAttribute('data-x')+'"],[data-nomid="1462"][data-x="'+(parseInt(akiporteria.getAttribute('data-x')) + 3)+'"][data-y="'+akiporteria.getAttribute('data-y')+'"],[data-nomid="1462"][data-y="'+(parseInt(akiporteria.getAttribute('data-y')) - 1)+'"][data-x="'+akiporteria.getAttribute('data-x')+'"]');

                                                        akimarcador = kkallaki.querySelector('[data-nomid="1462"][data-y="' + (parseInt(akiporteria.getAttribute('data-y')) + 1) + '"][data-x="' + akiporteria.getAttribute('data-x') + '"],[data-nomid="1462"][data-y="' + (parseInt(akiporteria.getAttribute('data-y')) - 1) + '"][data-x="' + akiporteria.getAttribute('data-x') + '"],[data-nomid="1462"][data-y="' + akiporteria.getAttribute('data-y') + '"][data-x="' + (parseInt(akiporteria.getAttribute('data-x')) + 1) + '"],[data-nomid="1462"][data-y="' + akiporteria.getAttribute('data-y') + '"][data-x="' + (parseInt(akiporteria.getAttribute('data-x')) - 1) + '"]');
                                                        if (elementExists(akimarcador)) {
                                                            katman('accionarv3', 'animar', akimarcador.getAttribute('data-idp'), 1, 1, 1);
                                                        }
                                                    }
                                                }
                                            } else {
                                                continuo = 'rebote';
                                            }

                                            break;
                                        default:
                                            continuo = 'rebote';
                                    }

                                }
                            }

                            //consola.log('eraultmabum'+eraultmabum+' miycuadroyx',miycuadroyx,' continuo',continuo);
                            if (hicecuadros == 1 && continuo == 'rebote' && acciwow == 'chuta') {
                                continuo = 'novoy';
                                hicecuadros--;
                            }
                            eracontinuo = continuo;
                            switch (eracontinuo) {
                                case 'rebote':

                                    if (hayrebote == 'n') {

                                        myanexrebote = myanexera;
                                        mxanexrebote = mxanexera;
                                        continuo = 's';
                                        //if(eraultmabum == 7){
                                        //eraultmabum=9;
                                        //}else{

                                        //myanexdif=myanexera;
                                        //mxanexdif=mxanexera;

                                        eraultmabumera = eraultmabum;

                                        if (eraultmabum == 4 || eraultmabum == 2 || eraultmabum == 5 || eraultmabum == 1) {//chute recto /
                                            myanexsim = myanex;
                                            mxanexsim = mxanex;

                                            eraultmabum = fas(myanexera, mxanexera, myanexsim, mxanexsim);
                                        } else {//calculo diagonales rebote
                                            myanexdif = myanex - myanexera;
                                            mxanexdif = mxanex - mxanexera;

                                            //myanexsim=myanexera-myanexdif;

                                            if (myanexdif >= 0) {// || myanexdif == -1 && mxanexdif == -1

                                                //if(myanexdif == 1 && mxanexdif == 1 && eraultmabum == 9)
                                                //myanexsim=myanexera-myanexdif;
                                                //else
                                                myanexsim = myanexera + myanexdif;

                                            } else
                                                myanexsim = myanexera - myanexdif;

                                            //if(myanexdif == 1 && mxanexdif == 1 && eraultmabum == 9)
                                            //mxanexsim=mxanexera-mxanexdif;
                                            //else
                                            if (mxanexdif >= 0 || myanexdif == -1 && mxanexdif == -1)//|| myanexdif == -1 && mxanexdif == -1 && eraultmabum == 6
                                            {
                                                if (myanexdif == 1 && mxanexdif == 1 && eraultmabum == 9)
                                                    mxanexsim = mxanexera - mxanexdif;
                                                else
                                                    mxanexsim = mxanexera + mxanexdif;

                                            } else
                                                mxanexsim = mxanexera - mxanexdif;


                                            //}
                                            eraultmabum = fas(myanexsim, mxanexsim, myanexera, mxanexera);

                                        }

                                        if (hicecuadros == 1) {
                                            hayrebote = 'sinanim';
                                        } else {
                                            hayrebote = 's';
                                        }
                                        eraigualreb = 's';
                                        myanex = myanexera;
                                        mxanex = mxanexera;

                                        //consola.log('eraultmabum'+eraultmabum+' HAY REBOTE ',myanex,'c',mxanex);
                                        //consola.log('HAY REBOTE eraultmabumera',eraultmabumera,' esultmabum',eraultmabum,' de ',myanexera,'c',mxanexera,' a  ',myanex,'c',mxanex,' dif  ',myanexdif,'c',mxanexdif,' sim  ',myanexsim,'c',mxanexsim);

                                        hicecuadros--;
                                    } else if (eraigualreb == 's') {

                                        //consola.log('IGUAL rebote eraultmabum'+eraultmabum+' myanex'+myanex+'c'+mxanex);

                                        //consola.log('IGUAL eraultmabum',eraultmabum,' esultmabum',fas(myanexera,mxanexera,myanex,mxanex),' de ',myanexera,'c',mxanexera,' a  ',myanex,'c',mxanex,' dif  ',myanexdif,'c',mxanexdif,' sim  ',myanexsim,'c',mxanexsim);

                                        eraultmabum = fas(myanexera, mxanexera, myanex, mxanex);
                                        myanex = myanexera;
                                        mxanex = mxanexera;
                                        eraigualreb = 'repe';
                                        continuo = 's';
                                        hicecuadros--;
                                        //consola.log('eraultmabum'+eraultmabum+' IGUAL ',myanex,'c',mxanex);
                                    } else if (eraigualreb == 'repe' || eraigualreb == 'repetido') {

                                        //consola.log('REPETIDO eraultmabum',eraultmabum,' esultmabum',fas(myanexera,mxanexera,myanex,mxanex),' de ',myanexera,'c',mxanexera,' a  ',myanex,'c',mxanex,' dif  ',myanexdif,'c',mxanexdif,' sim  ',myanexsim,'c',mxanexsim);

                                        //REVOTE DE CORNER YA MIRE LAS 2 POSICIONES POSIBLES TIRO ATRAS
                                        myanex = myanexera;
                                        mxanex = mxanexera;
                                        hicecuadros--;
                                        continuo = 's';
                                        switch (eraultmabumera) {
                                            case 8:
                                                eraultmabum = 7;
                                                break;
                                            case 7:
                                                eraultmabum = 8;
                                                break;
                                            case 6:
                                                eraultmabum = 9;
                                                break;
                                            case 9:
                                                eraultmabum = 6;
                                                break;
                                            //default:
                                            //hayrebote='sinanim';
                                            //continuo='novoy';
                                        }


                                        if (eraigualreb == 'repetido') {
                                            hayrebote = 'sinanim';
                                            continuo = 'novoy';
                                        } else if (hayrebote == 'sinanim' && eraultmabumera != eraultmabum && hicecuadros > 0) {
                                            hayrebote = 's';
                                            myanexrebote = myanexera;
                                            mxanexrebote = mxanexera;
                                            //continuo='novoy';
                                        }
                                        eraigualreb = 'repetido';
                                        //consola.log('era'+eraultmabumera+'ara'+eraultmabum+' REPETIDO ',myanex,'c',mxanex,'hayrebote',hayrebote,' hicecuadros',hicecuadros);


                                    }
                                    break;
                                case 'novoy':

                                    myanex = myanexera;
                                    mxanex = mxanexera;
                                    //consola.log('NOVOY ',myanex,'c',mxanex);

                                    hicecuadros--;
                                    break;
                                case 's':

                                    if (hicecuadros == cuantoscuadros) {
                                        continuo = 'fin';
                                    }

                                    break;
                            }

                        }
                    }

                    if (hicecuadros > 0) {
                        var imapelot = kkallaki.querySelector('#idf' + idpwow);

                        var myawowpelotarebota = myanex;
                        var mxawowpelotarebota = mxanex;

                        var posixzrebv = trompaoz(myawowpelotarebota, mxawowpelotarebota, 'f');
                        var boxahora = myawowpelotarebota + 'c' + mxawowpelotarebota;
                        var sumetrz = 'n';
                        if (ffursencmaltur.hasOwnProperty(boxahora)) {
                            posixzrebv.etop -= ffursencmaltur[boxahora];
                        }

                        posixzrebv.eleft += parseInt(imapelot.getAttribute('data-pxleft'));
                        posixzrebv.etop += parseInt(imapelot.getAttribute('data-pxtop'));

                        //if(myawow != myawowpelotarebota || mxawow != mxawowpelotarebota){
                        var pelnumt = imapelot.getAttribute('data-pelnumt');

                        if (!pelnumt) pelnumt = 1;

                        pelnumt++;
                        imapelot.setAttribute('data-pelnumt', pelnumt);
                        idfpelota = imapelot.getAttribute('data-idf');
                        imapelot.src = dominiobase + 'fly/i/fursv5/' + imapelot.getAttribute('data-nomid') + '/' + imapelot.getAttribute('data-idf') + 'anim.gif';

                        if (idfpelota == '400155') {
                            if (!accipelo)//no soy canasta
                                imapelot.className = "pelo bota";
                            else
                                imapelot.className = "pelo canas";

                        }

                        if (acciwow == 'arrastra') {
                            window.setTimeout(ponpelotaen, 200, imapelot, posixzrebv, pelnumt);
                            window.setTimeout(desanimo, 460, 'idf' + idpwow, pelnumt);
                        } else if (hayrebote == 'sinanim' || hayrebote == 'n') {
                            imapelot.style.left = posixzrebv.eleft + 'px';
                            imapelot.style.top = posixzrebv.etop + 'px';
                            imapelot.style.zIndex = posixzrebv.ezindex;
                            window.setTimeout(desanimo, 560, 'idf' + idpwow, pelnumt);
                        } else {
                            var posixzanterebote = trompaoz(myanexrebote, mxanexrebote, 'f');
                            var boxahoraantesrebote = myanexrebote + 'c' + mxanexrebote;
                            var sumetrz = 'n';
                            //consola.log('rebote '+boxahoraantesrebote+' boxahora'+boxahora);
                            if (ffursencmaltur.hasOwnProperty(boxahoraantesrebote)) {
                                posixzanterebote.etop -= ffursencmaltur[boxahoraantesrebote];
                            }

                            posixzanterebote.eleft += parseInt(imapelot.getAttribute('data-pxleft'));
                            posixzanterebote.etop += parseInt(imapelot.getAttribute('data-pxtop'));
                            imapelot.style.left = posixzanterebote.eleft + 'px';
                            imapelot.style.top = posixzanterebote.etop + 'px';
                            imapelot.style.zIndex = posixzanterebote.ezindex;

                            window.setTimeout(ponpelotaen, 400, imapelot, posixzrebv, pelnumt);
                            window.setTimeout(desanimo, 1020, 'idf' + idpwow, pelnumt);
                        }

                        quitoinfofurni(idpwow, 'no', 'pelota');
                        imapelot.setAttribute('data-y', myawowpelotarebota);
                        imapelot.setAttribute('data-x', mxawowpelotarebota);
                        if (ffursidp.hasOwnProperty(boxahora)) {
                            imapelot.setAttribute('data-so', ffursidp[boxahora]);
                        }
                        imapelot.setAttribute('data-box', boxahora);

                        ffurscass['f' + idpwow] = boxahora;
                        agregoinfofurni(idpwow, acciwow);


                        if (kekoidpelo == ekyasoid) {
                            katman('muevewowgrab', idpwow, myawowpelotarebota, mxawowpelotarebota);
                        }
                    }
                };

                kateko('kienhayenya', function (casa, kienestantodos) {
                    if (!kienestantodos || kienestantodos == '')
                        kienestantodos = '';
                    if (document.getElementById('kiendentrodi' + casa)) {
                        document.getElementById('kiendentrodi' + casa).innerHTML = kienestantodos;
                        borrar('kiendentrobtn' + casa);
                    }
                }); kateko('recbcomen', function (de, quees, bd, idmuro, id, kmsg, dekeko, demini, clike, mgusta, ahor, fech, kdatos, privacidad) {
                    cargocomentario({ 'de': de, 'quees': quees, 'bd': bd, 'idmuro': idmuro, 'id': id, 'kmsg': kmsg, 'dekeko': dekeko, 'demini': demini, 'clike': clike, 'mgusta': mgusta, 'ahor': ahor, 'fech': fech, 'kdatos': kdatos, 'privacidad': privacidad }, 'nuevo');
                });

                kateko('recbkweet', function (de, quees, bd, idmuro, id, kmsg, dekeko, demini, clike, mgusta, ahor, fech, kdatos, privacidad, para) {
                    //consola.log('recbkweet');
                    cargokweet('akikweets', { de: de, quees: quees, bd: bd, idmuro: idmuro, id: id, kmsg: kmsg, dekeko: dekeko, demini: demini, clike: clike, mgusta: mgusta, ahor: ahor, fech: fech, kdatos: kdatos, privacidad: privacidad, posicion: 'arriba', para: para }, '', 0);
                });
                kateko('asignonuevafoto', function (tipofoto, url, idkeko) {
                    if (idkeko == yasoid) {
                        if (tipofoto == 'mini') {
                            yomini = url;
                            if (document.getElementById('yoimaminiii')) {
                                document.getElementById('yoimaminiii').src = urlperfils + url;
                            }
                            if (document.getElementById('miniyoperfilima') && document.getElementById('miniyoperfilima').getAttribute('data-minide') == yasoid) {
                                document.getElementById('miniyoperfilima').src = urlperfils + url;
                            }// id='miniyoperfilima' data-minide='$idkeko'
                        }
                        else if (tipofoto == 'perfil') {

                            if (document.getElementById('yoportadaperfilima') && document.getElementById('yoportadaperfilima').getAttribute('data-minide') == yasoid) {
                                document.getElementById('yoportadaperfilima').style.background = 'url(' + urlperfils + url + ')';
                                document.getElementById('yoportadaperfilima').style.backgroundSize = '100% auto';
                                window.location = '#/' + encodeURI(yasokek);
                                //location.hash = '#/'+encodeURI(yasokek);
                            }// id='miniyoperfilima' data-minide='$idkeko'
                        }
                        borrar('sobretododiv');
                    }

                    if (document.getElementById('k' + idkeko)) {
                        if (tipofoto == 'mini')
                            document.getElementById('k' + idkeko).setAttribute('data-imagenmini', url);
                    }
                });
                kateko('opskweetsya', function (hagoop, este_kweetpara, este_kweetde, este_kweetid, este_comentarioid, este_comentariode) {
                    switch (hagoop) {
                        case 'eliminarkweetya':
                            //consola.log('emininarya id: kweetyo'+este_kweetid);
                            var idaborrak = document.getElementById('kweetyo' + este_kweetid);
                            if (elementExists(idaborrak)) {
                                //consola.log('EXISTE emininarya id: kweetyo'+este_kweetid);
                                idaborrak.parentNode.removeChild(idaborrak);
                                hicescroll();
                            }
                            idaborrak = document.getElementById('sobretododiv');
                            if (elementExists(idaborrak)) {
                                idaborrak = document.getElementById('kweetso' + este_kweetid);
                                if (elementExists(idaborrak)) {
                                    idaborrak = document.getElementById('sobretododiv');
                                    //consola.log('EXISTE emininarya id: kweetso'+este_kweetid);
                                    idaborrak.parentNode.removeChild(idaborrak);
                                }
                            }
                            break;
                        case 'eliminarcomentarioya':
                            //consola.log('emininarya id: kweetyo'+este_kweetid+' comee:'+'#comensyo'+este_comentarioid);
                            var idaborrak = document.getElementById('kweetyo' + este_kweetid);
                            if (elementExists(idaborrak) && elementExists(idaborrak.querySelector('#comensyo' + este_comentarioid))) {
                                //consola.log('EXISTE emininarya id: kweetyo'+este_kweetid);
                                idaborrak.querySelector('#comensyo' + este_comentarioid).parentNode.removeChild(idaborrak.querySelector('#comensyo' + este_comentarioid));
                            }
                            idaborrak = document.getElementById('sobretododivya');
                            if (elementExists(idaborrak)) {
                                idaborrak = document.getElementById('kweetso' + este_kweetid);
                                if (elementExists(idaborrak) && elementExists(idaborrak.querySelector('#comensso' + este_comentarioid))) {
                                    idaborrak.querySelector('#comensso' + este_comentarioid).parentNode.removeChild(idaborrak.querySelector('#comensso' + este_comentarioid));
                                }
                            }
                            break;
                    }
                });


                kateko('avisos', function (extra, tipoaviso, idkeko) {
                    switch (tipoaviso) {
                        case 'cancelasoli':
                            if (vextr['peti' + idkeko]) {
                                delete vextr['peti' + idkeko];
                            }

                            //nolang
                            if (misamigs['k' + idkeko]) {
                                kmensaj("imagesnew/soni/offline.mp3", "" + misamigs['k' + idkeko] + "", idkeko, misamigsm['k' + idkeko], iw[359]);

                                delete misamigs['k' + idkeko];
                                if (misamigsm['k' + idkeko]) {
                                    delete misamigsm['k' + idkeko];
                                }
                                if (document.getElementById('amigosons') && document.getElementById('amigosons').querySelector('[data-ika="' + idkeko + '"]')) {
                                    document.getElementById('amigosons').removeChild(document.getElementById('amigosons').querySelector('[data-ika="' + idkeko + '"]'));
                                }
                                //if(document.getElementById('cartakekon') && document.getElementById('cartakekon').getAttribute('data-idkekglobo')==idkeko){
                                //borrar('cartakekon');
                                //clickeko('','',idkeko);
                                //}
                                mirosinamigoson();
                            }

                            break;
                        case 'mandonotiya':
                            katman('mandonoti', idkeko, extra, '', '', '', '');
                            //katman('accionarv3','recarg',extra,1,1,0);
                            break;
                        case 'piderecarg':
                            katman('accionarv3', 'recarg', extra, 1, 1, 0);
                            break;
                        case 'adeupowa':
                            var estesoboingdd = kkallakik.querySelector('#k' + idkeko);
                            if (elementExists(estesoboingdd)) {
                                estesoboingdd.setAttribute('data-cpws', 0);
                                if (idkeko == yasoid) {
                                    pmoc = 'no';
                                }
                            }
                            break;
                        case 'holapowa':
                            var estesoboingdd = kkallakik.querySelector('#k' + idkeko);
                            if (elementExists(estesoboingdd)) {
                                estesoboingdd.setAttribute('data-cpws', 1);
                                if (idkeko == yasoid) {
                                    pmoc = 'si';
                                }
                            }
                            break;
                        case 'mandaronsos':
                            soni("images/sos.mp3");
                            if (document.getElementById('btnappsm'))
                                document.getElementById('btnappsm').querySelector('img').setAttribute("src", "/img/iconappsyas.png");
                            break;
                        case 'mebesar':
                            if (idkeko == yasoid) {
                                //////consola.log('recibo mebesar de '+extra);
                                katman('comandos', 'mebesarya', extra);
                                //
                                interactuar(extra, 'mebesar');
                            }
                            break;
                        case 'mebesarya':
                            if (idkeko == yasoid) {
                                //////consola.log('recibo mebesarya de '+extra);
                                interactuar(extra, 'mebesar');

                                //////consola.log('me besa ya idkek'+extra);
                            }
                            break;
                        case 'medisparar':
                        case 'methompson':
                            var estesoboingss = kkallakik.querySelector('#k' + idkeko);
                            if (elementExists(estesoboingss)) {

                                var vidaantes = estesoboingss.getAttribute('data-vida');
                                vidaantes = parseInt(vidaantes); vidaantes -= 20;
                                estesoboingss.setAttribute('data-vida', vidaantes);
                                if (ultimoidpclickado == estesoboingss.getAttribute('data-idk')) {
                                    clickeko('', '', ultimoidpclickado);
                                }

                                if (tipoaviso == 'medisparar')
                                    soni('imagesnew/soni/pistola.mp3');
                                else if (tipoaviso == 'methompson')
                                    soni('imagesnew/soni/thompson.mp3');

                                if (idkeko == yasoid) {
                                    bowb = 'si'; setTimeout(quitobowb, 2500);
                                    var mifokaaho = 'estirado_nw';
                                    mresulta = [];
                                    mresulta[0] = { 'cmia': 'sisentarme', 'y': kx, 'x': ky, 'ponfurka': mifokaaho };
                                }

                            }
                            break;
                        case 'boing':
                        case 'mepatearon':

                            var cuantasveces = 70;
                            if (tipoaviso == 'mepatearon') {
                                cuantasveces = 2;
                            }
                            var estesoboing = kkallakik.querySelector('#k' + idkeko);
                            if (elementExists(estesoboing)) {
                                addClass(estesoboing, 'bota');

                                window.setTimeout(removeClass, (cuantasveces * 200), estesoboing, 'bota');
                            }
                            break;
                        case 'rotate':
                            var estesoboings = kkallakik.querySelector('#k' + idkeko);
                            if (elementExists(estesoboings)) {
                                addClass(estesoboings, 'rotate');

                                window.setTimeout(removeClass, 16000, estesoboings, 'rotate');
                            }
                            break;
                        case 'ghost':
                            var estesoboings = kkallakik.querySelector('#k' + idkeko);
                            if (elementExists(estesoboings)) {
                                addClass(estesoboings, 'ghost');

                                window.setTimeout(removeClass, 16000, estesoboings, 'ghost');
                            }
                            break;
                        case 'rot':
                            var estesoboings = kkallakik.querySelector('#k' + idkeko);
                            if (elementExists(estesoboings)) {
                                addClass(estesoboings, 'rot');

                                window.setTimeout(removeClass, 16000, estesoboings, 'rot');
                            }
                            break;
                        case 'bounce':
                            var estesoboings = kkallakik.querySelector('#k' + idkeko);
                            if (elementExists(estesoboings)) {
                                addClass(estesoboings, 'bounce');

                                window.setTimeout(removeClass, 4000, estesoboings, 'bounce');
                            }
                            break;

                        case 'glow':
                            var estesoboings = kkallakik.querySelector('#k' + idkeko);
                            if (elementExists(estesoboings)) {
                                addClass(estesoboings, 'glow');

                                window.setTimeout(removeClass, 16000, estesoboings, 'glow');
                            }
                            break;

                        case 'temblar':
                            var estesoboings = kkallakik.querySelector('#k' + idkeko);
                            if (elementExists(estesoboings)) {
                                addClass(estesoboings, 'shake');

                                window.setTimeout(removeClass, 10000, estesoboings, 'shake');
                            }
                            break;

                        case 'zoom':
                            var estesoboings = kkallakik.querySelector('#k' + idkeko);
                            if (elementExists(estesoboings)) {
                                addClass(estesoboings, 'zoom');

                                window.setTimeout(removeClass, 4000, estesoboings, 'zoom');
                            }
                            break;
                        case 'kick':
                            if (idkeko == yasoid && pmoc != 'dueno') {
                                ////////consola.log('kickeame');
                                katman('kickeame');
                            }
                            break;
                        case 'passcerberusok':
                            accionar('accionar', extra, '');//nolang
                            kmensaj("images/soni/noti5.mp3", "<span style=font-size:12px>" + iw[360] + "</span>", "1", "default", "<span style=font-size:12px>" + iw[361] + "</span>");
                            break;
                        case 'passcerberusfail':
                            kmensaj("images/soni/plip.mp3", "<span style=font-size:12px>" + iw[363] + "</span>", "1", "default", "<span style=font-size:12px>" + iw[362] + "</span>");
                            break;
                        case 'alert':
                            alerta('<p align="center">' + iw[364] + ' ' + extra + '<br/><br/>' + limpia(idkeko, extra, 1, 'chat') + '</p>');
                            break;
                        case 'mute':
                            alerta('<p align="center">' + iw[365] + ' ' + extra + '<br/><br/>' + limpia(idkeko, extra, 1, 'chat') + '</p>');
                            if (pmoc == 'no')
                                antflo(15);
                            break;
                        case 'hkick':
                            if (pmoc == 'no')
                                katman('kickeame');
                            break;
                    }
                });

                kateko('pongovideoya', function (idtele, idvideo, duracion, nombrevideo, inicio, fechainicio, fechaahora, idkekopuso) {
                    ////////

                    //console.log('idtele'+idtele+'idvideo'+idvideo);

                    idvideo = idvideo.replaceAll('atob', '');
                    idvideo = idvideo.replaceAll('javascript', '');
                    idvideo = idvideo.replaceAll('eval', '');
                    idvideo = idvideo.replaceAll('(', '');
                    idvideo = idvideo.replaceAll(')', '');
                    idvideo = idvideo.replaceAll('`', '');
                    idvideo = idvideo.replaceAll('¬¥', '');
                    idvideo = idvideo.replaceAll('function', '');
                    idvideo = idvideo.replaceAll('cookie', '');
                    idvideo = idvideo.replaceAll('http', '');
                    idvideo = stripHtml(idvideo);

                    var stotvvv = kkallaki.querySelector('#akitv' + idtele);
                    var stoovvff = kkallaki.querySelector('#idf' + idtele);
                    if (elementExists(stotvvv) && elementExists(stoovvff)) {
                        var kes = stoovvff.getAttribute('data-idf');
                        stoovvff.setAttribute('data-stv', 's');
                        var clas = '';
                        if (kes == '801')
                            clas = 'tvyog';
                        else if (kes == '802')
                            clas = 'tvyogd';
                        else if (kes == '5543')
                            clas = 'tvyog';
                        else if (kes == '5544')
                            clas = 'tvyogd';//si cambia agregar tambien en accionar3ya y pongovideoya
                        else if (kes == '4011383')
                            clas = 'tvyogmega';
                        else if (kes == '4011384')
                            clas = 'tvyogdmega';//si cambia agregar tambien en accionar3ya y pongovideoya

                        inicio += (fechaahora - fechainicio);
                        var vainicio = '';
                        if (inicio > 0) {
                            vainicio = '&start=' + parseInt(inicio);
                        }
                        ////////consola.log(('inicio'+inicio);
                        idvideo = encodeURI(idvideo);
                        stotvvv.setAttribute('data-ivid', idvideo);
                        stotvvv.setAttribute('data-idk', idkekopuso);
                        if (idvideo == 'off' || volum != 'si') {
                            stotvvv.innerHTML = '';
                        } else {
                            var heitv = 228;
                            //if(clas == 'tvyog' || clas == 'tvyogd') heitv = 225;

                            //var urlvideo='http://www.youtube.com/embed/'+encodeURI(idvideo)+'?autoplay=1&controls=0&modestbranding=1&rel=0&showinfo=0'+vainicio;
                            //var divypla=kkallaki.querySelector('#ytPlayer'+idtele);
                            //if(!elementExists(divypla) || divypla.getAttribute('data-carg') != 'ok'){
                            stotvvv.innerHTML = '<span id="tv' + idtele + '" class="' + clas + '"><span id="akivid' + idtele + '"></span></span>';
                            //$('<div id="video'+vauip+'" class="'+clas+'"><div id="akiclas'+vauip+'" class="ifrm"><div id="akivid'+vauip+'"></div></div><img src="../fly/i/fursv5/'+$('#p'+vauip).attr('data-nomid')+'/'+kes+'encima.png"></div>').appendTo('#p'+vauip);

                            //var params = {};//allowScriptAccess: "always", scale: 'noscale'
                            //var params = { allowScriptAccess: "always", wmode: "transparent", scale: 'noscale' };
                            // The element id of the Flash embed
                            //var atts = { id: "ytPlayer"+idtele};
                            // All of the magic handled by SWFObject (http://code.google.com/p/swfobject/)

                            //if(yosona != 's')//no soy chrome
                            //if(navigator.userAgent.match(/Chrome/i) || navigator.userAgent.match(/MSIE/i))
                            //vainicio+='&controls=0';
                            //&enablejsapi=1&cc_load_policy=1& y quitoautoplay=1&playerapiid=ytPlayer"+idtele
                            //var urlpalv="https//www.youtube.com/v/"+idvideo+"?autoplay=1&amp;version=3"+vainicio+"&amp;rel=0";                
                            //ANTES DE CHROMELESS var urlpalv='https://www.youtube.com/v/'+idvideo+'?cc_load_policy=0&autoplay=1&version=3&enablejsapi=0'+vainicio+'&rel=0&showinfo=0';
                            //var urlpalv = 'https://www.youtube.com/apiplayer?video_id='+idvideo+'&version=2&autoplay=1'+vainicio+'';
                            //el=0&amp;
                            //<object data-carg="ok" data="https://www.youtube.com/v/J3UjJ4wKLkg?cc_load_policy=1&amp;version=3&amp;enablejsapi=1&amp;start=44&amp;controls=0&amp;rel=0&amp;playerapiid=ytPlayer'+idtele+'" id="ytPlayer408647" type="application/x-shockwave-flash" height="225" width="400"><param value="always" name="allowScriptAccess"><param value="transparent" name="wmode"><param value="noscale" name="scale"></object>

                            var esfirefox = '';

                            //es firefox o safari
                            //if(navigator.userAgent.match(/Safari/i) && navigator.userAgent.match(/OPR/i) || navigator.userAgent.match(/Safari/i) && !navigator.userAgent.match(/Chrome/i) || navigator.userAgent.match(/Firefox/i) && !navigator.userAgent.match(/MSIE/i))
                            //esfirefox = '<param value="transparent" name="wmode">';
                            //esfirefox += '<param value="scale" name="noscale">';


                            //consola.log('vainicio',vainicio,' esfirefox',esfirefox,' useragent',navigator.userAgent);
                            //consola.log('esfirefox',esfirefox,' NAVEGADOR',navigator.userAgent);
                            //consola.log(urlpalv);

                            var wi = 405;
                            if (clas == 'tvyogmega' || clas == 'tvyogdmega') {
                                wi = 810;
                                heitv = 456;
                            }

                            // Comentado el 15 de septiembre de 2024
                            //var urlpalv = 'https://www.youtube.com/v/' + idvideo + '?cc_load_policy=1&autoplay=1&version=3&enablejsapi=0&controls=0&rel=0' + vainicio;
                           
                           /*stotvvv.querySelector('#akivid' + idtele).innerHTML = 
                            '<iframe id="ytplayer" type="text/html" width="' + wi + '" height="' + heitv + '" ' +
                            'src="https://www.youtube.com/embed/' + idvideo + '?autoplay=1&origin=https://kekocity.es&controls=0' + vainicio + '" ' +
                            'frameborder="0" allow="autoplay; encrypted-media" allowfullscreen ' +
                            'referrerpolicy="no-referrer" loading="lazy"></iframe>';*/

                            var videoplayer = new YT.Player(stotvvv.querySelector('#akivid' + idtele), {
                                width: wi,
                                height: heitv,
                                videoId: idvideo,
                                playerVars: { start: parseInt(inicio), controls: 0 },
                                events:{
                                onReady: function(){
                                    videoplayer.playVideo();
                                   // videoplayer.unMute();
                                    //videoplayer.setVolume(50);
                                },
                                onStateChange: function(event){
                                   
                                }
                            }
                            });
                          
                            //  &stotvvv.querySelector('#akivid'+idtele).innerHTML='<object data-carg="ok" data="'+urlpalv+'" id="ytPlayer'+idtele+'" type="application/x-shockwave-flash" height="'+heitv+'" width="'+wi+'">'+esfirefox+'</object>';
                            //stotvvv.querySelector('#tv'+idtele).innerHTML='<object type="application/x-shockwave-flash" width="400" height="'+heitv+'" data="'+urlpalv+'"></object>';
                            //stotvvv.querySelector('#akivid'+idtele).innerHTML='<embed width="400" height="'+heitv+'" data="'+urlpalv+'">';
                            //swfobject.embedSWF(urlpalv, "akivid"+idtele, "400", heitv, "9", null, null, params, atts);
                            //}else{
                            //divypla.cueVideoById(idvideo);
                            //if(inicio && inicio != '0')
                            //divypla.seekTo(inicio);
                            //divypla.playVideo();
                            //}
                        }
                    }
                }); kateko('yolook', function (idkeko, fokara, nuevoaspecto, nuevotamano) {

                    miaspecto = nuevoaspecto;
                    mitam = nuevotamano;
                    if (document.getElementById('miniyo')) {
                        var datsro = 'standL4LLLL' + nuevoaspecto;
                        minikanvas(document.getElementById('miniyo'), datsro, 'peque');
                    }
                }); kateko('patiarc', function (elk, para, de) {
                    patiarc(elk, para, de);
                }); kateko('dimestikerya', function (theFramep, theFrame, theacc, texstoka) {
                    borrar('stik' + theFramep);

                    var kdisnstik = '#873A80';
                    if (theFrame == 200 || theFrame == 201) {
                        kdisnstik = '#873A80';
                    }
                    if (theFrame == 202 || theFrame == 203) {
                        kdisnstik = '#1D6B78';
                    }
                    if (theFrame == 204 || theFrame == 205) {
                        kdisnstik = '#488218';
                    }
                    if (theFrame == 206 || theFrame == 207) {
                        kdisnstik = '#7E2A80';
                    }
                    if (theFrame == 208 || theFrame == 209) {
                        kdisnstik = '#B45718';
                    }
                    if (theFrame == 210 || theFrame == 211) {
                        kdisnstik = '#943434';
                    }
                    if (theFrame == 212 || theFrame == 213) {
                        kdisnstik = '#EBD630';
                    }

                    var cuadeicols = '';
                    if (pmoc == 'si' || pmoc == 'dueno') {
                        var cuadeicols = '<div style="margin-right:35px;"><span onclick="masfuncs(\'asignstik\',\'' + theFrame + '\',\'' + theFramep + '\',\'1\',\'' + theacc + '\')" style="cursor:pointer;margin-right:5px;font-size:8px;padding-left:4px;padding-right:4px;max-height:4px;background-color:#873A80;"></span>'
                            + ' <span onclick="masfuncs(\'asignstik\',\'' + theFrame + '\',\'' + theFramep + '\',\'2\',\'' + theacc + '\')" style="cursor:pointer;margin-right:5px;font-size:8px;padding-left:4px;padding-right:4px;max-height:4px;background-color:#1D6B78;"></span>'
                            + ' <span onclick="masfuncs(\'asignstik\',\'' + theFrame + '\',\'' + theFramep + '\',\'3\',\'' + theacc + '\')" style="cursor:pointer;margin-right:5px;font-size:8px;padding-left:4px;padding-right:4px;max-height:4px;background-color:#488218;"></span>'
                            + ' <span onclick="masfuncs(\'asignstik\',\'' + theFrame + '\',\'' + theFramep + '\',\'4\',\'' + theacc + '\')" style="cursor:pointer;margin-right:5px;font-size:8px;padding-left:4px;padding-right:4px;max-height:4px;background-color:#7E2A80;"></span>'
                            + ' <span onclick="masfuncs(\'asignstik\',\'' + theFrame + '\',\'' + theFramep + '\',\'5\',\'' + theacc + '\')" style="cursor:pointer;margin-right:5px;font-size:8px;padding-left:4px;padding-right:4px;max-height:4px;background-color:#B45718;"></span>'
                            + ' <span onclick="masfuncs(\'asignstik\',\'' + theFrame + '\',\'' + theFramep + '\',\'6\',\'' + theacc + '\')" style="cursor:pointer;margin-right:5px;font-size:8px;padding-left:4px;padding-right:4px;max-height:4px;background-color:#943434;"></span>'
                            + ' <span onclick="masfuncs(\'asignstik\',\'' + theFrame + '\',\'' + theFramep + '\',\'7\',\'' + theacc + '\')" style="cursor:pointer;margin-right:5px;font-size:8px;padding-left:4px;padding-right:4px;max-height:4px;background-color:#EBD630;"></span></div>';
                    }
                    var functexa = "";

                    if (pmoc == 'no') {
                        functexa += "if(this.value){this.setAttribute('data-cc','n');};";
                    } else
                        functexa += "if(this.value.length > 600){this.value=this.value.substring(0,600);}this.setAttribute('data-cc','s');";

                    var alostik = '<textareb id="tstik' + theFramep + '" ';
                    if (pmoc == 'no') alostik += 'disabled="disabled" ';
                    alostik += 'onchange="' + functexa + '" onkeydown="' + functexa + '" data-cc="n" onkeyup="' + functexa + '" style="outline:none;border:none;font-size:12px;width:100%;height:100%;background:none;border:none;color:#272727; resize:none;overflow:hidden;font-family:ubuntulight;">' + texstoka + '</textareb>';

                    alostik = alostik.replace('textareb', 'textarea');
                    alostik = alostik.replace('textareb', 'textarea');
                    var nwinsor = document.createElement('div');
                    nwinsor.id = 'stik' + theFramep;
                    nwinsor.style.background = kdisnstik;
                    nwinsor.style.height = '240px';
                    nwinsor.style.width = '270px';
                    nwinsor.style.className = 'stikers';
                    nwinsor.style.position = 'fixed';
                    nwinsor.style.left = '100px';
                    nwinsor.style.top = '100px';
                    nwinsor.style.zIndex = 10;
                    var winshtm = '<span class="titulow" style="position:absolute;margin-top:-24px; right: -2px;">' + cuadeicols + ' <i class="icon-off" style="color:#fff;margin-top:4px;padding:5px;" onclick="masfuncs(\'asignstik\',\'' + theFrame + '\',\'' + theFramep + '\',\'0\',\'' + theacc + '\');adeu(\'' + 'stik' + theFramep + '\');adeu(\'cartakekon\');"></i></span>' +
                        '<div id="akitexarea' + theFramep + '" style="width:100%;height:100%;"></div>';
                    nwinsor.innerHTML = winshtm;
                    nwinsor.style.padding = '10px';
                    nwinsor.style.paddingTop = '30px';
                    nwinsor.setAttribute('draggable', true);
                    nwinsor.ondragstart = function (evt) {
                        startMoving(this, evt);
                    };
                    document.body.appendChild(nwinsor);

                    document.getElementById('akitexarea' + theFramep).innerHTML = alostik;


                }); kateko('ecamsiya', function (idkeko) {
                    if (idkeko != yasoid) {

                        var dikek = document.getElementById('k' + idkeko);
                        if (dikek) {
                            dikek.setAttribute('data-ecam', 'si');
                            ecam(idkeko, 'ver', '');
                        }
                    } else if (videum == 'no') {
                        var keksaki = kkallakik.querySelectorAll('[data-ecam="si"]');
                        if (keksaki.length > 0) {
                            for (var reste = 0; reste < keksaki.length; reste++) {
                                if (keksaki[reste])
                                    ecam(keksaki[reste].getAttribute('data-idkek'), 'ver', '');
                            }
                        }
                        videum = 'si';
                    }
                }); kateko('ecamfinya', function (idkeko) {
                    var kekospan = document.getElementById('k' + idkeko);

                    if (kekospan) {
                        kekospan.setAttribute('data-ecam', 'no');
                        var teniafraante = document.getElementById('ifra' + idkeko);
                        if (teniafraante) borrar('ifra' + idkeko);
                    }
                });
                kateko('anadeamoc', function (nomid, cantidad, accion) {

                    if (document.getElementById('akimoc')) {
                        if (document.getElementById('mochi' + nomid)) {

                            var miroencontrenmoc = anadeamoc(document.getElementById('mochi' + nomid), cantidad, accion);
                            //consola.log('anadeamoc',nomid,cantidad,accion);
                            if (miroencontrenmoc == 'no') {

                                if (idpmuevo > 0) {
                                    idpmuevo = 0; borrar('mueblemover');
                                    //document.getElementById('kekoall').addEventListener("mousemove", lolsolo, false);
                                    document.getElementById('kekoall').removeEventListener("mousemove", movekekoall, false);
                                }
                            }
                        }
                    }
                });


            },
            reconectaya = function () {
                if (!connected) {
                    if (ws_node.readyState === 3) {
                        conecta();
                    }
                }
            },
            reConnect = function () {
                //consola.log('reconnect');
                if (connection_retry_timer) {
                    window.clearTimeout(connection_retry_timer);
                }
                if (!connected) {
                    connection_retry_timer = window.setTimeout(reconectaya, 6000);
                }
            },
            conexionperdida = function () {
                //consola.log('close',event);
                connected = false;
                if (!vextr['haymal']) {
                    cargandooo(iw[368]);

                    //if(yosocas>=1)
                    //winsor('myDesconectado','Conexi√≥n perdida','Parece que hemos perdido la conexi√≥n contigo, haz clic aqu√≠ para volver a entrar <button class="btnwo" onclick="ponavis=\'n\';window.location=\'c/'+yosocas+'\';">Entrar a kekocity</button>','','','');
                    //else
                    //winsor('myDesconectado','Conexi√≥n perdida','Parece que hemos perdido la conexi√≥n contigo, haz clic aqu√≠ para volver a entrar <button class="btnwo" onclick="ponavis=\'n\';window.location=\'hi\';">Entrar a kekocity</button>','','','');

                    reConnect();
                }
            },
            huboerroralconect = function () {
                if (!vextr.hasOwnProperty('habiaconectado')) {
                    vextr['haymal'] = 1;
                    cargandooo(iw[369]);
                }
            },
            connection_established = function () {
                connected = true;
                if (connection_retry_timer)
                    window.clearTimeout(connection_retry_timer);
                if (!vextr.hasOwnProperty('habiaconectado')) {
                    creaonsocks();
                }
                //ws_node.addEventListener('message', onmensa,false);
                ws_node.onmessage = onmensa;
                //addEventListener('message', onmensa,false);

                vextr['habiaconectado'] = 1;
                //consola.log('conexion establecida');
                //cargandooo('Conectado');
                borrar('myDesconectado');
            },
            conecta = function () {
                if ('WebSocket' in window) {
                    cargandooo(iw[371]);
                    ws_node = new WebSocket('wss://ws.kekocity.es:8253/?kakid=' + yasoid + '&kakpa=' + ktoken);
                    ws_node.onopen = connection_established;
                    ws_node.onclose = conexionperdida;
                    ws_node.onerror = huboerroralconect;
                } else {
                    cargandooo(iw[370]);
                }
            }

        if (yasoid !== '') {
            conecta();
        } else {
            if (requesurl == '/') {
                rotamm();
            } else {
                var mirosierabar = requesurl.substr((requesurl.length - 1), 1);
                if (mirosierabar == '/') {
                    requesurl = requesurl.substring(0, (requesurl.length - 1));
                }
                location.hash = requesurl;
            }
            window.addEventListener('hashchange', rotamm, false);
        }
    }


    window.onload = open_connection;

})();

//FUNCIONES EXTRA


function desselesmod(modcual) {
    if (document.getElementById(modcual)) {
        var dentrn = document.getElementById(modcual).querySelectorAll('.btn');
        if (dentrn.length > 0) {
            for (var i = 0; i < dentrn.length; i++) {
                if (dentrn[i])
                    dentrn[i].className = 'btn ';
            }
        }
        //document.getElementById(modcual).getElementsByTagName('div').className='btn';
        //////consola.log(document.getElementById(modcual).getElementsByTagName('div').length);
    }
}
function dg(elque) {
    return document.getElementById(elque);
}
function adeu(idanimde) {
    idanimde = idanimde.replace('#', '');
    if (document.getElementById(idanimde)) {
        var nodesa = document.getElementById(idanimde);
        nodesa.parentNode.removeChild(nodesa);
    }
}


//bazar regalo
function rrrcappkkllc(rrrmmm, rrrnnn) {

    if (rrrmmm == '1' || rrrmmm == '2') {
        var rrrrmmm = 'fon';
    }
    if (rrrmmm == '3') {
        var rrrrmmm = 'laz';
    }
    if (rrrmmm == '4') {
        var rrrrmmm = 'arri';
    }
    var srryy = document.getElementById('rra' + rrrrmmm + 'casim').src;

    var srryys = srryy.split('-');
    var ssrrooc = srryys[0];
    if (rrrmmm == '2' || rrrmmm == '4') {
        var mircoo = ssrrooc.length; mircoo--;
        ssrrooc = ssrrooc.substring(0, mircoo);
        var srryya = ssrrooc + rrrnnn + '-' + srryys[1];
    } else {

        var srryya = ssrrooc + '-' + rrrnnn + '.png';
    }

    document.getElementById('rra' + rrrrmmm + 'casim').src = srryya;
    document.getElementById('rra' + rrrrmmm + 'casim').setAttribute('data-reg', srryya.replace(ssrrooc, ''));

}

function mascolor(idfacomp, opci) {
    var colorara = parseInt(document.getElementById('colormasco').value);
    if (opci == 'mas') colorara++; else colorara--;

    if (colorara > 10) colorara = 1;
    else if (colorara < 1) colorara = 10;
    document.getElementById('colormasco').value = colorara;
    document.getElementById('fotomascota').src = dominiobase + "imagesnew/perrosv3/" +
        idfacomp + "/" + colorara + "/stand9.gif";

}
//bazar selector pintura
function selectopcata(elka, pak, aciia) {
    if (elka == 'parec') {
        var ahypar = parseFloat(document.getElementById('stpare').value);
        var ahyparc = parseFloat(document.getElementById('stparec').value);

        ahyparc = parseFloat(pak);
        var ahyparall = ahypar + '' + ahyparc;

        document.getElementById('stparec').value = pak;
        document.getElementById('paredacat').innerHTML = '<img src="' + dominiobase + 'fly/i/suelosv5/pared-' + ahyparall + '.png">';
    } else if (elka == 'pare') {
        var ahypar = parseFloat(document.getElementById('stpare').value);

        if (aciia == 'mas') {
            ahypar++;
        } else {
            ahypar--;
        }
        var ahyparc = parseFloat(document.getElementById('stparec').value);
        var ahyparall = ahypar + '' + ahyparc;
        ahyparall = parseFloat(ahyparall);
        var ahypart = parseFloat(document.getElementById('stparet').value);
        if (ahyparall < 10) {
            ahyparall = 10;
            ahypar = 1;
        } else if (ahyparall > ahypart) {
            ahyparall = 10;
            ahypar = 1;

        }
        document.getElementById('stpare').value = ahypar;
        document.getElementById('paredacat').innerHTML = '<img src="' + dominiobase + 'fly/i/suelosv5/pared-' + ahyparall + '.png">';
    } else if (elka == 'suelc') {
        var ahypar = parseFloat(document.getElementById('stsuel').value);
        var ahyparc = parseFloat(document.getElementById('stsuelc').value);

        ahyparc = parseFloat(pak);
        var ahyparall = ahypar + '' + ahyparc;

        document.getElementById('stsuelc').value = pak;
        document.getElementById('suelcat').innerHTML = '<img src="' + dominiobase + 'fly/i/suelosv5/suelo' + ahyparall + '.png">';
    }
    else if (elka == 'suel') {
        var ahypar = parseFloat(document.getElementById('stsuel').value);
        var ahyparc = parseFloat(document.getElementById('stsuelc').value);

        if (aciia == 'mas') {
            ahypar++;
        } else {
            ahypar--;
        }

        var ahypart = parseFloat(document.getElementById('stsuelt').value);
        var ahyparall = ahypar + '' + ahyparc;
        ahyparall = parseFloat(ahyparall);
        if (ahyparall < 10) {
            ahyparall = 10;
            ahypar = 1;//ahypart.substr(0,(ahypart.lengh-1));

        } else if (ahyparall >= ahypart) {
            ahyparall = 10;
            ahypar = 1;

        }
        document.getElementById('stsuel').value = ahypar;
        document.getElementById('suelcat').innerHTML = '<img src="' + dominiobase + 'fly/i/suelosv5/suelo' + ahyparall + '.png">';
    }

    if (elka == 'parec' || elka == 'pare') {
        var bascpm = parseFloat(document.getElementById('stpare').value);

        document.getElementById('parebc').style.backgroundImage = "url('" + dominiobase + "fly/i/suelosv5/pared-" + bascpm + "0.png')";
        for (var ii = 1; ii < 10; ii++) {

            document.getElementById('pareb' + ii).style.backgroundImage = "url('" + dominiobase + "fly/i/suelosv5/pared-" + bascpm + '' + ii + ".png')";
        }

    } else {

        var bascpm = parseFloat(document.getElementById('stsuel').value);

        document.getElementById('suelbc').style.backgroundImage = "url('" + dominiobase + "fly/i/suelosv5/suelo" + bascpm + "0.png')";
        for (var ii = 1; ii < 10; ii++) {

            document.getElementById('suelb' + ii).style.backgroundImage = "url('" + dominiobase + "fly/i/suelosv5/suelo" + bascpm + '' + ii + ".png')";
        }
    }
}

document.addEventListener("touchstart", function(event) {
    const tocarPantalla = document.activeElement;
    if (tocarPantalla.tagName === "INPUT" && event.target !== tocarPantalla) {
        tocarPantalla.blur();
    }
});
/**
 * Funciones nuevas
 */
function verCantidadConPuntos(cantidad){

    var multiplo = Math.floor(cantidad / 1000);
    var cantidadString = cantidad.toString();
    var multiploString = multiplo.toString();

    var cantidadMostrar = '';

    if(cantidad >= 1000){
        cantidadMostrar = cantidadString.substring(0, multiploString.length) + ',' + cantidadString.substring(multiploString.length, cantidadString.length);

        var ceros = cantidadMostrar.split('.');
        if(Number(ceros[0]) > 999999){
            cantidadMostrar = verCantidadConPuntos(Number(ceros[0])) + ',' + ceros.slice(1, ceros.length);
        }
    }else{
        cantidadMostrar = cantidadString;
    }

    return cantidadMostrar;

}
